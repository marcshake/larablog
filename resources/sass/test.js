/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-cssanimations-history-localstorage-sessionstorage-domprefixes-hasevent-mq-prefixes-setclasses-testallprops-testprop-teststyles-cssclassprefix:has-- !*/
!function(e,t,n){function r(e,t){return typeof e===t}function o(){var e,t,n,o,i,s,a;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],t=C[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=r(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)s=e[i],a=s.split("."),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),S.push((o?"":"no-")+a.join("-"))}}function i(e){var t=x.className,n=Modernizr._config.classPrefix||"";if(_&&(t=t.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}Modernizr._config.enableClasses&&(t+=" "+n+e.join(" "+n),_?x.className.baseVal=t:x.className=t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):_?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||(e=s(_?"svg":"body"),e.fake=!0),e}function l(e,n,r,o){var i,l,u,f,c="modernizr",d=s("div"),p=a();if(parseInt(r,10))for(;r--;)u=s("div"),u.id=o?o[r]:c+(r+1),d.appendChild(u);return i=s("style"),i.type="text/css",i.id="s"+c,(p.fake?p:d).appendChild(i),p.appendChild(d),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),d.id=c,p.fake&&(p.style.background="",p.style.overflow="hidden",f=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),l=n(d,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=f,x.offsetHeight):d.parentNode.removeChild(d),!!l}function u(e,t){return!!~(""+e).indexOf(t)}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function c(e,t){return function(){return e.apply(t,arguments)}}function d(e,t,n){var o;for(var i in e)if(e[i]in t)return n===!1?e[i]:(o=t[e[i]],r(o,"function")?c(o,n||t):o);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(t,n,r){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,t,n);var i=e.console;if(null!==o)r&&(o=o.getPropertyValue(r));else if(i){var s=i.error?"error":"log";i[s].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else o=!n&&t.currentStyle&&t.currentStyle[r];return o}function v(t,r){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(p(t[o]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];o--;)i.push("("+p(t[o])+":"+r+")");return i=i.join(" or "),l("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==m(e,null,"position")})}return n}function y(e,t,o,i){function a(){c&&(delete O.style,delete O.modElem)}if(i=r(i,"undefined")?!1:i,!r(o,"undefined")){var l=v(e,o);if(!r(l,"undefined"))return l}for(var c,d,p,m,y,g=["modernizr","tspan","samp"];!O.style&&g.length;)c=!0,O.modElem=s(g.shift()),O.style=O.modElem.style;for(p=e.length,d=0;p>d;d++)if(m=e[d],y=O.style[m],u(m,"-")&&(m=f(m)),O.style[m]!==n){if(i||r(o,"undefined"))return a(),"pfx"==t?m:!0;try{O.style[m]=o}catch(h){}if(O.style[m]!=y)return a(),"pfx"==t?m:!0}return a(),!1}function g(e,t,n,o,i){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+T.join(s+" ")+s).split(" ");return r(t,"string")||r(t,"undefined")?y(a,t,o,i):(a=(e+" "+P.join(s+" ")+s).split(" "),d(a,t,n))}function h(e,t,r){return g(e,n,n,t,r)}var S=[],C=[],b={_version:"3.5.0",_config:{classPrefix:"has--",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){C.push({name:e,fn:t,options:n})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=b,Modernizr=new Modernizr,Modernizr.addTest("history",function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol?e.history&&"pushState"in e.history:!1}),Modernizr.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}),Modernizr.addTest("sessionstorage",function(){var e="modernizr";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}});var w=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=w;var x=t.documentElement,_="svg"===x.nodeName.toLowerCase(),z="Moz O ms Webkit",P=b._config.usePrefixes?z.toLowerCase().split(" "):[];b._domPrefixes=P;var A=function(){function e(e,t){var o;return e?(t&&"string"!=typeof t||(t=s(t||"div")),e="on"+e,o=e in t,!o&&r&&(t.setAttribute||(t=s("div")),t.setAttribute(e,""),o="function"==typeof t[e],t[e]!==n&&(t[e]=n),t.removeAttribute(e)),o):!1}var r=!("onblur"in t.documentElement);return e}();b.hasEvent=A;var E=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return l("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();b.mq=E;var T=(b.testStyles=l,b._config.usePrefixes?z.split(" "):[]);b._cssomPrefixes=T;var N={elem:s("modernizr")};Modernizr._q.push(function(){delete N.elem});var O={style:N.elem.style};Modernizr._q.unshift(function(){delete O.style});b.testProp=function(e,t,r){return y([e],n,t,r)};b.testAllProps=g,b.testAllProps=h,Modernizr.addTest("cssanimations",h("animationName","a",!0)),o(),i(S),delete b.addTest,delete b.addAsyncTest;for(var j=0;j<Modernizr._q.length;j++)Modernizr._q[j]();e.Modernizr=Modernizr}(window,document);
/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});if(!window.Symbol){(function(window){var defineProperty=Object.defineProperty;var prefix='__symbol-'+Math.ceil(Math.random()*1000000000)+'-';var id=0;function Symbol(description){if(!(this instanceof Symbol)){return new Symbol(description);}
var symbol=prefix+id++;this._symbol=symbol;}
defineProperty(Symbol.prototype,'toString',{enumerable:false,configurable:false,writable:false,value:function toString(){return this._symbol;}});window.Symbol=Symbol;}(this));}
/*! picturefill - v3.0.2 - 2016-02-12
 * https://scottjehl.github.io/picturefill/
 * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
 */
!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||" "===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,K="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};o=a.console&&console.warn?function(a){console.warn(a)}:u,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?_(a):!0},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?A[a]:!0},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=K,z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b?b:Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=F&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&H.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",g(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();
/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2014 Rico Sta. Cruz
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
;(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{factory(root.jQuery);}}(this,function($){$.transit={version:"0.9.12",propertyMap:{marginLeft:'margin',marginRight:'margin',marginBottom:'margin',marginTop:'margin',paddingLeft:'padding',paddingRight:'padding',paddingBottom:'padding',paddingTop:'padding'},enabled:true,useTransitionEnd:false};var div=document.createElement('div');var support={};function getVendorPropertyName(prop){if(prop in div.style)return prop;var prefixes=['Moz','Webkit','O','ms'];var prop_=prop.charAt(0).toUpperCase()+prop.substr(1);for(var i=0;i<prefixes.length;++i){var vendorProp=prefixes[i]+prop_;if(vendorProp in div.style){return vendorProp;}}}
function checkTransform3dSupport(){div.style[support.transform]='';div.style[support.transform]='rotateY(90deg)';return div.style[support.transform]!=='';}
var isChrome=navigator.userAgent.toLowerCase().indexOf('chrome')>-1;support.transition=getVendorPropertyName('transition');support.transitionDelay=getVendorPropertyName('transitionDelay');support.transform=getVendorPropertyName('transform');support.transformOrigin=getVendorPropertyName('transformOrigin');support.filter=getVendorPropertyName('Filter');support.transform3d=checkTransform3dSupport();var eventNames={'transition':'transitionend','MozTransition':'transitionend','OTransition':'oTransitionEnd','WebkitTransition':'webkitTransitionEnd','msTransition':'MSTransitionEnd'};var transitionEnd=support.transitionEnd=eventNames[support.transition]||null;for(var key in support){if(support.hasOwnProperty(key)&&typeof $.support[key]==='undefined'){$.support[key]=support[key];}}
div=null;$.cssEase={'_default':'ease','in':'ease-in','out':'ease-out','in-out':'ease-in-out','snap':'cubic-bezier(0,1,.5,1)','easeInCubic':'cubic-bezier(.550,.055,.675,.190)','easeOutCubic':'cubic-bezier(.215,.61,.355,1)','easeInOutCubic':'cubic-bezier(.645,.045,.355,1)','easeInCirc':'cubic-bezier(.6,.04,.98,.335)','easeOutCirc':'cubic-bezier(.075,.82,.165,1)','easeInOutCirc':'cubic-bezier(.785,.135,.15,.86)','easeInExpo':'cubic-bezier(.95,.05,.795,.035)','easeOutExpo':'cubic-bezier(.19,1,.22,1)','easeInOutExpo':'cubic-bezier(1,0,0,1)','easeInQuad':'cubic-bezier(.55,.085,.68,.53)','easeOutQuad':'cubic-bezier(.25,.46,.45,.94)','easeInOutQuad':'cubic-bezier(.455,.03,.515,.955)','easeInQuart':'cubic-bezier(.895,.03,.685,.22)','easeOutQuart':'cubic-bezier(.165,.84,.44,1)','easeInOutQuart':'cubic-bezier(.77,0,.175,1)','easeInQuint':'cubic-bezier(.755,.05,.855,.06)','easeOutQuint':'cubic-bezier(.23,1,.32,1)','easeInOutQuint':'cubic-bezier(.86,0,.07,1)','easeInSine':'cubic-bezier(.47,0,.745,.715)','easeOutSine':'cubic-bezier(.39,.575,.565,1)','easeInOutSine':'cubic-bezier(.445,.05,.55,.95)','easeInBack':'cubic-bezier(.6,-.28,.735,.045)','easeOutBack':'cubic-bezier(.175, .885,.32,1.275)','easeInOutBack':'cubic-bezier(.68,-.55,.265,1.55)'};$.cssHooks['transit:transform']={get:function(elem){return $(elem).data('transform')||new Transform();},set:function(elem,v){var value=v;if(!(value instanceof Transform)){value=new Transform(value);}
if(support.transform==='WebkitTransform'&&!isChrome){elem.style[support.transform]=value.toString(true);}else{elem.style[support.transform]=value.toString();}
$(elem).data('transform',value);}};$.cssHooks.transform={set:$.cssHooks['transit:transform'].set};$.cssHooks.filter={get:function(elem){return elem.style[support.filter];},set:function(elem,value){elem.style[support.filter]=value;}};if($.fn.jquery<"1.8"){$.cssHooks.transformOrigin={get:function(elem){return elem.style[support.transformOrigin];},set:function(elem,value){elem.style[support.transformOrigin]=value;}};$.cssHooks.transition={get:function(elem){return elem.style[support.transition];},set:function(elem,value){elem.style[support.transition]=value;}};}
registerCssHook('scale');registerCssHook('scaleX');registerCssHook('scaleY');registerCssHook('translate');registerCssHook('rotate');registerCssHook('rotateX');registerCssHook('rotateY');registerCssHook('rotate3d');registerCssHook('perspective');registerCssHook('skewX');registerCssHook('skewY');registerCssHook('x',true);registerCssHook('y',true);function Transform(str){if(typeof str==='string'){this.parse(str);}
return this;}
Transform.prototype={setFromString:function(prop,val){var args=(typeof val==='string')?val.split(','):(val.constructor===Array)?val:[val];args.unshift(prop);Transform.prototype.set.apply(this,args);},set:function(prop){var args=Array.prototype.slice.apply(arguments,[1]);if(this.setter[prop]){this.setter[prop].apply(this,args);}else{this[prop]=args.join(',');}},get:function(prop){if(this.getter[prop]){return this.getter[prop].apply(this);}else{return this[prop]||0;}},setter:{rotate:function(theta){this.rotate=unit(theta,'deg');},rotateX:function(theta){this.rotateX=unit(theta,'deg');},rotateY:function(theta){this.rotateY=unit(theta,'deg');},scale:function(x,y){if(y===undefined){y=x;}
this.scale=x+","+y;},skewX:function(x){this.skewX=unit(x,'deg');},skewY:function(y){this.skewY=unit(y,'deg');},perspective:function(dist){this.perspective=unit(dist,'px');},x:function(x){this.set('translate',x,null);},y:function(y){this.set('translate',null,y);},translate:function(x,y){if(this._translateX===undefined){this._translateX=0;}
if(this._translateY===undefined){this._translateY=0;}
if(x!==null&&x!==undefined){this._translateX=unit(x,'px');}
if(y!==null&&y!==undefined){this._translateY=unit(y,'px');}
this.translate=this._translateX+","+this._translateY;}},getter:{x:function(){return this._translateX||0;},y:function(){return this._translateY||0;},scale:function(){var s=(this.scale||"1,1").split(',');if(s[0]){s[0]=parseFloat(s[0]);}
if(s[1]){s[1]=parseFloat(s[1]);}
return(s[0]===s[1])?s[0]:s;},rotate3d:function(){var s=(this.rotate3d||"0,0,0,0deg").split(',');for(var i=0;i<=3;++i){if(s[i]){s[i]=parseFloat(s[i]);}}
if(s[3]){s[3]=unit(s[3],'deg');}
return s;}},parse:function(str){var self=this;str.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(x,prop,val){self.setFromString(prop,val);});},toString:function(use3d){var re=[];for(var i in this){if(this.hasOwnProperty(i)){if((!support.transform3d)&&((i==='rotateX')||(i==='rotateY')||(i==='perspective')||(i==='transformOrigin'))){continue;}
if(i[0]!=='_'){if(use3d&&(i==='scale')){re.push(i+"3d("+this[i]+",1)");}else if(use3d&&(i==='translate')){re.push(i+"3d("+this[i]+",0)");}else{re.push(i+"("+this[i]+")");}}}}
return re.join(" ");}};function callOrQueue(self,queue,fn){if(queue===true){self.queue(fn);}else if(queue){self.queue(queue,fn);}else{self.each(function(){fn.call(this);});}}
function getProperties(props){var re=[];$.each(props,function(key){key=$.camelCase(key);key=$.transit.propertyMap[key]||$.cssProps[key]||key;key=uncamel(key);if(support[key])
key=uncamel(support[key]);if($.inArray(key,re)===-1){re.push(key);}});return re;}
function getTransition(properties,duration,easing,delay){var props=getProperties(properties);if($.cssEase[easing]){easing=$.cssEase[easing];}
var attribs=''+toMS(duration)+' '+easing;if(parseInt(delay,10)>0){attribs+=' '+toMS(delay);}
var transitions=[];$.each(props,function(i,name){transitions.push(name+' '+attribs);});return transitions.join(', ');}
$.fn.transition=$.fn.transit=function(properties,duration,easing,callback){var self=this;var delay=0;var queue=true;var theseProperties=$.extend(true,{},properties);if(typeof duration==='function'){callback=duration;duration=undefined;}
if(typeof duration==='object'){easing=duration.easing;delay=duration.delay||0;queue=typeof duration.queue==="undefined"?true:duration.queue;callback=duration.complete;duration=duration.duration;}
if(typeof easing==='function'){callback=easing;easing=undefined;}
if(typeof theseProperties.easing!=='undefined'){easing=theseProperties.easing;delete theseProperties.easing;}
if(typeof theseProperties.duration!=='undefined'){duration=theseProperties.duration;delete theseProperties.duration;}
if(typeof theseProperties.complete!=='undefined'){callback=theseProperties.complete;delete theseProperties.complete;}
if(typeof theseProperties.queue!=='undefined'){queue=theseProperties.queue;delete theseProperties.queue;}
if(typeof theseProperties.delay!=='undefined'){delay=theseProperties.delay;delete theseProperties.delay;}
if(typeof duration==='undefined'){duration=$.fx.speeds._default;}
if(typeof easing==='undefined'){easing=$.cssEase._default;}
duration=toMS(duration);var transitionValue=getTransition(theseProperties,duration,easing,delay);var work=$.transit.enabled&&support.transition;var i=work?(parseInt(duration,10)+parseInt(delay,10)):0;if(i===0){var fn=function(next){self.css(theseProperties);if(callback){callback.apply(self);}
if(next){next();}};callOrQueue(self,queue,fn);return self;}
var oldTransitions={};var run=function(nextCall){var bound=false;var cb=function(){if(bound){self.unbind(transitionEnd,cb);}
if(i>0){self.each(function(){this.style[support.transition]=(oldTransitions[this]||null);});}
if(typeof callback==='function'){callback.apply(self);}
if(typeof nextCall==='function'){nextCall();}};if((i>0)&&(transitionEnd)&&($.transit.useTransitionEnd)){bound=true;self.bind(transitionEnd,cb);}else{window.setTimeout(cb,i);}
self.each(function(){if(i>0){this.style[support.transition]=transitionValue;}
$(this).css(theseProperties);});};var deferredRun=function(next){this.offsetWidth;run(next);};callOrQueue(self,queue,deferredRun);return this;};function registerCssHook(prop,isPixels){if(!isPixels){$.cssNumber[prop]=true;}
$.transit.propertyMap[prop]=support.transform;$.cssHooks[prop]={get:function(elem){var t=$(elem).css('transit:transform');return t.get(prop);},set:function(elem,value){var t=$(elem).css('transit:transform');t.setFromString(prop,value);$(elem).css({'transit:transform':t});}};}
function uncamel(str){return str.replace(/([A-Z])/g,function(letter){return'-'+letter.toLowerCase();});}
function unit(i,units){if((typeof i==="string")&&(!i.match(/^[\-0-9\.]+$/))){return i;}else{return""+i+units;}}
function toMS(duration){var i=duration;if(typeof i==='string'&&(!i.match(/^[\-0-9\.]+/))){i=$.fx.speeds[i]||$.fx.speeds._default;}
return unit(i,'ms');}
$.transit.getTransitionValue=getTransition;return $;}));(function(fn){if(typeof define==='function'&&define.amd){define([],fn);}else if((typeof module!=="undefined"&&module!==null)&&module.exports){module.exports=fn;}else{fn();}})(function(){var assign=Object.assign||window.jQuery&&jQuery.extend;var threshold=8;var requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn();},25);});})();var ignoreTags={textarea:true,input:true,select:true,button:true};var mouseevents={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'};var touchevents={move:'touchmove',cancel:'touchend',end:'touchend'};var rspaces=/\s+/;var eventOptions={bubbles:true,cancelable:true};var eventsSymbol=Symbol('events');function createEvent(type){return new CustomEvent(type,eventOptions);}
function getEvents(node){return node[eventsSymbol]||(node[eventsSymbol]={});}
function on(node,types,fn,data,selector){types=types.split(rspaces);var events=getEvents(node);var i=types.length;var handlers,type;function handler(e){fn(e,data);}
while(i--){type=types[i];handlers=events[type]||(events[type]=[]);handlers.push([fn,handler]);node.addEventListener(type,handler);}}
function off(node,types,fn,selector){types=types.split(rspaces);var events=getEvents(node);var i=types.length;var type,handlers,k;if(!events){return;}
while(i--){type=types[i];handlers=events[type];if(!handlers){continue;}
k=handlers.length;while(k--){if(handlers[k][0]===fn){node.removeEventListener(type,handlers[k][1]);handlers.splice(k,1);}}}}
function trigger(node,type,properties){var event=createEvent(type);if(properties){assign(event,properties);}
node.dispatchEvent(event);}
function Timer(fn){var callback=fn,active=false,running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false;}
else{running=false;}}
this.kick=function(fn){active=true;if(!running){trigger();}};this.end=function(fn){var cb=callback;if(!fn){return;}
if(!running){fn();}
else{callback=active?function(){cb();fn();}:fn;active=true;}};}
function noop(){}
function preventDefault(e){e.preventDefault();}
function isIgnoreTag(e){return!!ignoreTags[e.target.tagName.toLowerCase()];}
function isPrimaryButton(e){return(e.which===1&&!e.ctrlKey&&!e.altKey);}
function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id);}
i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i];}}}
function changedTouch(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(!touch){return;}
if(touch.pageX===data.pageX&&touch.pageY===data.pageY){return;}
return touch;}
function mousedown(e){if(!isPrimaryButton(e)){return;}
if(isIgnoreTag(e)){return;}
on(document,mouseevents.move,mousemove,e);on(document,mouseevents.cancel,mouseend,e);}
function mousemove(e,data){checkThreshold(e,data,e,removeMouse);}
function mouseend(e,data){removeMouse();}
function removeMouse(){off(document,mouseevents.move,mousemove);off(document,mouseevents.cancel,mouseend);}
function touchstart(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
var touch=e.changedTouches[0];var data={target:touch.target,pageX:touch.pageX,pageY:touch.pageY,identifier:touch.identifier,touchmove:function(e,data){touchmove(e,data);},touchend:function(e,data){touchend(e,data);}};on(document,touchevents.move,data.touchmove,data);on(document,touchevents.cancel,data.touchend,data);}
function touchmove(e,data){var touch=changedTouch(e,data);if(!touch){return;}
checkThreshold(e,data,touch,removeTouch);}
function touchend(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(!touch){return;}
removeTouch(data);}
function removeTouch(data){off(document,touchevents.move,data.touchmove);off(document,touchevents.cancel,data.touchend);}
function checkThreshold(e,data,touch,fn){var distX=touch.pageX-data.pageX;var distY=touch.pageY-data.pageY;if((distX*distX)+(distY*distY)<(threshold*threshold)){return;}
triggerStart(e,data,touch,distX,distY,fn);}
function triggerStart(e,data,touch,distX,distY,fn){var touches=e.targetTouches;var time=e.timeStamp-data.timeStamp;var template={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:data.pageX,startY:data.pageY,distX:distX,distY:distY,deltaX:distX,deltaY:distY,pageX:touch.pageX,pageY:touch.pageY,velocityX:distX/time,velocityY:distY/time,identifier:data.identifier,targetTouches:touches,finger:touches?touches.length:1,enableMove:function(){this.moveEnabled=true;this.enableMove=noop;e.preventDefault();}};trigger(data.target,'movestart',template);fn(data);}
function activeMousemove(e,data){var timer=data.timer;data.touch=e;data.timeStamp=e.timeStamp;timer.kick();}
function activeMouseend(e,data){var target=data.target;var event=data.event;var timer=data.timer;removeActiveMouse();endEvent(target,event,timer,function(){setTimeout(function(){off(target,'click',preventDefault);},0);});}
function removeActiveMouse(){off(document,mouseevents.move,activeMousemove);off(document,mouseevents.end,activeMouseend);}
function activeTouchmove(e,data){var event=data.event;var timer=data.timer;var touch=changedTouch(e,event);if(!touch){return;}
e.preventDefault();event.targetTouches=e.targetTouches;data.touch=touch;data.timeStamp=e.timeStamp;timer.kick();}
function activeTouchend(e,data){var target=data.target;var event=data.event;var timer=data.timer;var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
removeActiveTouch(data);endEvent(target,event,timer);}
function removeActiveTouch(data){off(document,touchevents.move,data.activeTouchmove);off(document,touchevents.end,data.activeTouchend);}
function updateEvent(event,touch,timeStamp){var time=timeStamp-event.timeStamp;event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=0.3*event.velocityX+0.7*event.deltaX/time;event.velocityY=0.3*event.velocityY+0.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY;}
function endEvent(target,event,timer,fn){timer.end(function(){trigger(target,'moveend',event);return fn&&fn();});}
function movestart(e){if(e.defaultPrevented){return;}
if(!e.moveEnabled){return;}
var event={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};var data={target:e.target,event:event,timer:new Timer(update),touch:undefined,timeStamp:e.timeStamp};function update(time){updateEvent(event,data.touch,data.timeStamp);trigger(data.target,'move',event);}
if(e.identifier===undefined){on(e.target,'click',preventDefault);on(document,mouseevents.move,activeMousemove,data);on(document,mouseevents.end,activeMouseend,data);}
else{data.activeTouchmove=function(e,data){activeTouchmove(e,data);};data.activeTouchend=function(e,data){activeTouchend(e,data);};on(document,touchevents.move,data.activeTouchmove,data);on(document,touchevents.end,data.activeTouchend,data);}}
on(document,'mousedown',mousedown);on(document,'touchstart',touchstart);on(document,'movestart',movestart);if(!window.jQuery){return;}
var properties=("startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY").split(' ');function enableMove1(e){e.enableMove();}
function enableMove2(e){e.enableMove();}
function enableMove3(e){e.enableMove();}
function add(handleObj){var handler=handleObj.handler;handleObj.handler=function(e){var i=properties.length;var property;while(i--){property=properties[i];e[property]=e.originalEvent[property];}
handler.apply(this,arguments);};}
jQuery.event.special.movestart={setup:function(){on(this,'movestart',enableMove1);return false;},teardown:function(){off(this,'movestart',enableMove1);return false;},add:add};jQuery.event.special.move={setup:function(){on(this,'movestart',enableMove2);return false;},teardown:function(){off(this,'movestart',enableMove2);return false;},add:add};jQuery.event.special.moveend={setup:function(){on(this,'movestart',enableMove3);return false;},teardown:function(){off(this,'movestart',enableMove3);return false;},add:add};});(function(thisModule){if(typeof define==='function'&&define.amd){define(['jquery'],thisModule);}else if((typeof module!=="undefined"&&module!==null)&&module.exports){module.exports=thisModule;}else{thisModule(jQuery);}})(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},settings={threshold:0.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth;h=e.currentTarget.offsetHeight;event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swiperight';trigger(e.currentTarget,event);}}
else{if(-e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipeup';trigger(e.currentTarget,event);}}}
else{if(e.distX>-e.distY){if(e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipedown';trigger(e.currentTarget,event);}}
else{if(-e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swipeleft';trigger(e.currentTarget,event);}}}}
function getData(node){var data=jQuery.data(node,'event_swipe');if(!data){data={count:0};jQuery.data(node,'event_swipe',data);}
return data;}
jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){var data=getData(this);if(data.count++>0){return;}
add(this,'moveend',moveend);return true;},teardown:function(){var data=getData(this);if(--data.count>0){return;}
remove(this,'moveend',moveend);return true;},settings:settings};});
/*! flatpickr v2.4.7, @license MIT */
function Flatpickr(e,t){function n(e){return e&&e.bind?e.bind(oe):e}function a(e){oe.config.noCalendar&&!oe.selectedDates.length&&(oe.selectedDates=[oe.now]),re(e),oe.selectedDates.length&&(!oe.minDateHasTime||"input"!==e.type||e.target.value.length>=2?(i(),G()):setTimeout(function(){i(),G()},1e3))}function i(){if(oe.config.enableTime){var e=parseInt(oe.hourElement.value,10)||0,t=parseInt(oe.minuteElement.value,10)||0,n=oe.config.enableSeconds?parseInt(oe.secondElement.value,10)||0:0;oe.amPM&&(e=e%12+12*("PM"===oe.amPM.textContent)),oe.minDateHasTime&&0===ie(oe.latestSelectedDateObj,oe.config.minDate)&&(e=Math.max(e,oe.config.minDate.getHours()))===oe.config.minDate.getHours()&&(t=Math.max(t,oe.config.minDate.getMinutes())),oe.maxDateHasTime&&0===ie(oe.latestSelectedDateObj,oe.config.maxDate)&&(e=Math.min(e,oe.config.maxDate.getHours()))===oe.config.maxDate.getHours()&&(t=Math.min(t,oe.config.maxDate.getMinutes())),o(e,t,n)}}function r(e){var t=e||oe.latestSelectedDateObj;t&&o(t.getHours(),t.getMinutes(),t.getSeconds())}function o(e,t,n){oe.selectedDates.length&&oe.latestSelectedDateObj.setHours(e%24,t,n||0,0),oe.config.enableTime&&!oe.isMobile&&(oe.hourElement.value=oe.pad(oe.config.time_24hr?e:(12+e)%12+12*(e%12==0)),oe.minuteElement.value=oe.pad(t),oe.config.time_24hr||(oe.amPM.textContent=e>=12?"PM":"AM"),oe.config.enableSeconds&&(oe.secondElement.value=oe.pad(n)))}function l(e){var t=e.target.value;e.delta&&(t=(parseInt(t)+e.delta).toString()),4===t.length&&(oe.currentYearElement.blur(),/[^\d]/.test(t)||T(t))}function c(e){e.preventDefault(),oe.changeMonth(Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY)))}function s(){if(oe.config.wrap&&["open","close","toggle","clear"].forEach(function(e){for(var t=oe.element.querySelectorAll("[data-"+e+"]"),n=0;n<t.length;n++)t[n].addEventListener("click",oe[e])}),void 0!==window.document.createEvent&&(oe.changeEvent=window.document.createEvent("HTMLEvents"),oe.changeEvent.initEvent("change",!1,!0)),oe.isMobile)return z();oe.debouncedResize=ae(S,50),oe.triggerChange=function(){Z("Change")},oe.debouncedChange=ae(oe.triggerChange,300),"range"===oe.config.mode&&oe.days&&oe.days.addEventListener("mouseover",Y),oe.calendarContainer.addEventListener("keydown",I),oe.config.static||(oe.altInput||oe.input).addEventListener("keydown",I),oe.config.inline||oe.config.static||window.addEventListener("resize",oe.debouncedResize),window.ontouchstart&&window.document.addEventListener("touchstart",E),window.document.addEventListener("click",E),(oe.altInput||oe.input).addEventListener("blur",E),oe.config.clickOpens&&(oe.altInput||oe.input).addEventListener("focus",N),oe.config.noCalendar||(oe.prevMonthNav.addEventListener("click",function(){return b(-1)}),oe.nextMonthNav.addEventListener("click",function(){return b(1)}),oe.currentMonthElement.addEventListener("wheel",function(e){return ae(c(e),50)}),oe.currentYearElement.addEventListener("wheel",function(e){return ae(X(e),50)}),oe.currentYearElement.addEventListener("focus",function(){oe.currentYearElement.select()}),oe.currentYearElement.addEventListener("input",l),oe.currentYearElement.addEventListener("increment",l),oe.days.addEventListener("click",H)),oe.config.enableTime&&(oe.timeContainer.addEventListener("transitionend",A),oe.timeContainer.addEventListener("wheel",function(e){return ae(a(e),5)}),oe.timeContainer.addEventListener("input",a),oe.timeContainer.addEventListener("increment",a),oe.timeContainer.addEventListener("increment",oe.debouncedChange),oe.timeContainer.addEventListener("wheel",oe.debouncedChange),oe.timeContainer.addEventListener("input",oe.triggerChange),oe.hourElement.addEventListener("focus",function(){oe.hourElement.select()}),oe.minuteElement.addEventListener("focus",function(){oe.minuteElement.select()}),oe.secondElement&&oe.secondElement.addEventListener("focus",function(){oe.secondElement.select()}),oe.amPM&&oe.amPM.addEventListener("click",function(e){a(e),oe.triggerChange(e)}))}function u(e){e=e?oe.parseDate(e):oe.latestSelectedDateObj||(oe.config.minDate>oe.now?oe.config.minDate:oe.config.maxDate&&oe.config.maxDate<oe.now?oe.config.maxDate:oe.now);try{oe.currentYear=e.getFullYear(),oe.currentMonth=e.getMonth()}catch(t){console.error(t.stack),console.warn("Invalid date supplied: "+e)}oe.redraw()}function d(e,t,n){var a=n||e.target.parentNode.childNodes[0],i=void 0;try{i=new Event("increment",{bubbles:!0})}catch(e){i=window.document.createEvent("CustomEvent"),i.initCustomEvent("increment",!0,!0,{})}i.delta=t,a.dispatchEvent(i)}function f(e){var t=ee("div","numInputWrapper"),n=ee("input","numInput "+e),a=ee("span","arrowUp"),i=ee("span","arrowDown");return n.type="text",n.pattern="\\d*",t.appendChild(n),t.appendChild(a),t.appendChild(i),a.addEventListener("click",function(e){return d(e,1)}),i.addEventListener("click",function(e){return d(e,-1)}),t}function p(){var e=window.document.createDocumentFragment();oe.calendarContainer=ee("div","flatpickr-calendar"),oe.numInputType=navigator.userAgent.indexOf("MSIE 9.0")>0?"text":"number",oe.config.noCalendar||(e.appendChild(h()),oe.innerContainer=ee("div","flatpickr-innerContainer"),oe.config.weekNumbers&&oe.innerContainer.appendChild(w()),oe.rContainer=ee("div","flatpickr-rContainer"),oe.rContainer.appendChild(v()),oe.days||(oe.days=ee("div","flatpickr-days"),oe.days.tabIndex=-1),m(),oe.rContainer.appendChild(oe.days),oe.innerContainer.appendChild(oe.rContainer),e.appendChild(oe.innerContainer)),oe.config.enableTime&&e.appendChild(D()),"range"===oe.config.mode&&oe.calendarContainer.classList.add("rangeMode"),oe.calendarContainer.appendChild(e);var t=oe.config.appendTo&&oe.config.appendTo.nodeType;if(oe.config.inline||oe.config.static){if(oe.calendarContainer.classList.add(oe.config.inline?"inline":"static"),oe.config.inline&&!t)return oe.element.parentNode.insertBefore(oe.calendarContainer,(oe.altInput||oe.input).nextSibling);if(oe.config.static){var n=ee("div","flatpickr-wrapper");return oe.element.parentNode.insertBefore(n,oe.element),n.appendChild(oe.element),oe.altInput&&n.appendChild(oe.altInput),void n.appendChild(oe.calendarContainer)}}(t?oe.config.appendTo:window.document.body).appendChild(oe.calendarContainer)}function g(e,t,n){var a=F(t,!0),i=ee("span","flatpickr-day "+e,t.getDate());return i.dateObj=t,ne(i,"today",0===ie(t,oe.now)),a?q(t)&&(i.classList.add("selected"),oe.selectedDateElem=i,"range"===oe.config.mode&&(ne(i,"startRange",0===ie(t,oe.selectedDates[0])),ne(i,"endRange",0===ie(t,oe.selectedDates[1])))):(i.classList.add("disabled"),oe.selectedDates[0]&&t>oe.minRangeDate&&t<oe.selectedDates[0]?oe.minRangeDate=t:oe.selectedDates[0]&&t<oe.maxRangeDate&&t>oe.selectedDates[0]&&(oe.maxRangeDate=t)),"range"===oe.config.mode&&(Q(t)&&!q(t)&&i.classList.add("inRange"),1===oe.selectedDates.length&&(t<oe.minRangeDate||t>oe.maxRangeDate)&&i.classList.add("notAllowed")),oe.config.weekNumbers&&"prevMonthDay"!==e&&n%7==1&&oe.weekNumbers.insertAdjacentHTML("beforeend","<span class='disabled flatpickr-day'>"+oe.config.getWeek(t)+"</span>"),Z("DayCreate",i),i}function m(e,t){var n=(new Date(oe.currentYear,oe.currentMonth,1).getDay()-oe.l10n.firstDayOfWeek+7)%7,a="range"===oe.config.mode;oe.prevMonthDays=oe.utils.getDaysinMonth((oe.currentMonth-1+12)%12);var i=oe.utils.getDaysinMonth(),r=window.document.createDocumentFragment(),o=oe.prevMonthDays+1-n;for(oe.config.weekNumbers&&oe.weekNumbers.firstChild&&(oe.weekNumbers.textContent=""),a&&(oe.minRangeDate=new Date(oe.currentYear,oe.currentMonth-1,o),oe.maxRangeDate=new Date(oe.currentYear,oe.currentMonth+1,(42-n)%i)),oe.days.firstChild&&(oe.days.textContent="");o<=oe.prevMonthDays;o++)r.appendChild(g("prevMonthDay",new Date(oe.currentYear,oe.currentMonth-1,o),o));for(o=1;o<=i;o++)r.appendChild(g("",new Date(oe.currentYear,oe.currentMonth,o),o));for(var l=i+1;l<=42-n;l++)r.appendChild(g("nextMonthDay",new Date(oe.currentYear,oe.currentMonth+1,l%i),l));return a&&1===oe.selectedDates.length&&r.childNodes[0]?(oe._hidePrevMonthArrow=oe._hidePrevMonthArrow||oe.minRangeDate>r.childNodes[0].dateObj,oe._hideNextMonthArrow=oe._hideNextMonthArrow||oe.maxRangeDate<new Date(oe.currentYear,oe.currentMonth+1,1)):$(),oe.days.appendChild(r),oe.days}function h(){var e=window.document.createDocumentFragment();oe.monthNav=ee("div","flatpickr-month"),oe.prevMonthNav=ee("span","flatpickr-prev-month"),oe.prevMonthNav.innerHTML=oe.config.prevArrow,oe.currentMonthElement=ee("span","cur-month"),oe.currentMonthElement.title=oe.l10n.scrollTitle;var t=f("cur-year");return oe.currentYearElement=t.childNodes[0],oe.currentYearElement.title=oe.l10n.scrollTitle,oe.config.minDate&&(oe.currentYearElement.min=oe.config.minDate.getFullYear()),oe.config.maxDate&&(oe.currentYearElement.max=oe.config.maxDate.getFullYear(),oe.currentYearElement.disabled=oe.config.minDate&&oe.config.minDate.getFullYear()===oe.config.maxDate.getFullYear()),oe.nextMonthNav=ee("span","flatpickr-next-month"),oe.nextMonthNav.innerHTML=oe.config.nextArrow,oe.navigationCurrentMonth=ee("span","flatpickr-current-month"),oe.navigationCurrentMonth.appendChild(oe.currentMonthElement),oe.navigationCurrentMonth.appendChild(t),e.appendChild(oe.prevMonthNav),e.appendChild(oe.navigationCurrentMonth),e.appendChild(oe.nextMonthNav),oe.monthNav.appendChild(e),Object.defineProperty(oe,"_hidePrevMonthArrow",{get:function(){return this.__hidePrevMonthArrow},set:function(e){this.__hidePrevMonthArrow!==e&&(oe.prevMonthNav.style.display=e?"none":"block"),this.__hidePrevMonthArrow=e}}),Object.defineProperty(oe,"_hideNextMonthArrow",{get:function(){return this.__hideNextMonthArrow},set:function(e){this.__hideNextMonthArrow!==e&&(oe.nextMonthNav.style.display=e?"none":"block"),this.__hideNextMonthArrow=e}}),$(),oe.monthNav}function D(){oe.calendarContainer.classList.add("hasTime"),oe.config.noCalendar&&oe.calendarContainer.classList.add("noCalendar"),oe.timeContainer=ee("div","flatpickr-time"),oe.timeContainer.tabIndex=-1;var e=ee("span","flatpickr-time-separator",":"),t=f("flatpickr-hour");oe.hourElement=t.childNodes[0];var n=f("flatpickr-minute");if(oe.minuteElement=n.childNodes[0],oe.hourElement.tabIndex=oe.minuteElement.tabIndex=-1,oe.hourElement.value=oe.pad(oe.latestSelectedDateObj?oe.latestSelectedDateObj.getHours():oe.config.defaultHour),oe.minuteElement.value=oe.pad(oe.latestSelectedDateObj?oe.latestSelectedDateObj.getMinutes():oe.config.defaultMinute),oe.hourElement.step=oe.config.hourIncrement,oe.minuteElement.step=oe.config.minuteIncrement,oe.hourElement.min=oe.config.time_24hr?0:1,oe.hourElement.max=oe.config.time_24hr?23:12,oe.minuteElement.min=0,oe.minuteElement.max=59,oe.hourElement.title=oe.minuteElement.title=oe.l10n.scrollTitle,oe.timeContainer.appendChild(t),oe.timeContainer.appendChild(e),oe.timeContainer.appendChild(n),oe.config.time_24hr&&oe.timeContainer.classList.add("time24hr"),oe.config.enableSeconds){oe.timeContainer.classList.add("hasSeconds");var a=f("flatpickr-second");oe.secondElement=a.childNodes[0],oe.secondElement.value=oe.latestSelectedDateObj?oe.pad(oe.latestSelectedDateObj.getSeconds()):"00",oe.secondElement.step=oe.minuteElement.step,oe.secondElement.min=oe.minuteElement.min,oe.secondElement.max=oe.minuteElement.max,oe.timeContainer.appendChild(ee("span","flatpickr-time-separator",":")),oe.timeContainer.appendChild(a)}return oe.config.time_24hr||(oe.amPM=ee("span","flatpickr-am-pm",["AM","PM"][oe.hourElement.value>11|0]),oe.amPM.title=oe.l10n.toggleTitle,oe.amPM.tabIndex=-1,oe.timeContainer.appendChild(oe.amPM)),oe.timeContainer}function v(){oe.weekdayContainer||(oe.weekdayContainer=ee("div","flatpickr-weekdays"));var e=oe.l10n.firstDayOfWeek,t=oe.l10n.weekdays.shorthand.slice();return e>0&&e<t.length&&(t=[].concat(t.splice(e,t.length),t.splice(0,e))),oe.weekdayContainer.innerHTML="\n\t\t<span class=flatpickr-weekday>\n\t\t\t"+t.join("</span><span class=flatpickr-weekday>")+"\n\t\t</span>\n\t\t",oe.weekdayContainer}function w(){return oe.calendarContainer.classList.add("hasWeeks"),oe.weekWrapper=ee("div","flatpickr-weekwrapper"),oe.weekWrapper.appendChild(ee("span","flatpickr-weekday",oe.l10n.weekAbbreviation)),oe.weekNumbers=ee("div","flatpickr-weeks"),oe.weekWrapper.appendChild(oe.weekNumbers),oe.weekWrapper}function b(e,t){t=void 0===t||t;var n=t?e:e-oe.currentMonth;n<0&&oe._hidePrevMonthArrow||n>0&&oe._hideNextMonthArrow||(oe.currentMonth+=n,(oe.currentMonth<0||oe.currentMonth>11)&&(oe.currentYear+=oe.currentMonth>11?1:-1,oe.currentMonth=(oe.currentMonth+12)%12,Z("YearChange")),$(),m(),oe.config.noCalendar||oe.days.focus(),Z("MonthChange"))}function M(e){oe.input.value="",oe.altInput&&(oe.altInput.value=""),oe.mobileInput&&(oe.mobileInput.value=""),oe.selectedDates=[],oe.latestSelectedDateObj=null,oe.showTimeInput=!1,oe.redraw(),e!==!1&&Z("Change")}function C(){oe.isOpen=!1,oe.isMobile||(oe.calendarContainer.classList.remove("open"),(oe.altInput||oe.input).classList.remove("active")),Z("Close")}function y(e){e=e||oe,e.clear(!1),window.removeEventListener("resize",e.debouncedResize),window.document.removeEventListener("click",E),window.document.removeEventListener("touchstart",E),window.document.removeEventListener("blur",E),e.timeContainer&&e.timeContainer.removeEventListener("transitionend",A),e.mobileInput?(e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),delete e.mobileInput):e.calendarContainer&&e.calendarContainer.parentNode&&e.calendarContainer.parentNode.removeChild(e.calendarContainer),e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeEventListener("focus",N),e.input.removeAttribute("readonly"),delete e.input._flatpickr}function k(e){if(oe.config.appendTo&&oe.config.appendTo.contains(e))return!0;for(var t=e;t;){if(t===oe.calendarContainer)return!0;t=t.parentNode}return!1}function E(e){if(oe.isOpen&&!oe.config.inline){var t=k(e.target),n=e.target===oe.input||e.target===oe.altInput||oe.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(oe.input)||~e.path.indexOf(oe.altInput));("blur"===e.type?n&&e.relatedTarget&&!k(e.relatedTarget):!n&&!t)&&(e.preventDefault(),oe.close(),"range"===oe.config.mode&&1===oe.selectedDates.length&&(oe.clear(),oe.redraw()))}}function x(e,t){if(oe.config.formatDate)return oe.config.formatDate(e,t);var n=e.split("");return n.map(function(e,a){return oe.formats[e]&&"\\"!==n[a-1]?oe.formats[e](t):"\\"!==e?e:""}).join("")}function T(e){if(!(!e||oe.currentYearElement.min&&e<oe.currentYearElement.min||oe.currentYearElement.max&&e>oe.currentYearElement.max)){var t=parseInt(e,10),n=oe.currentYear!==t;oe.currentYear=t||oe.currentYear,oe.config.maxDate&&oe.currentYear===oe.config.maxDate.getFullYear()?oe.currentMonth=Math.min(oe.config.maxDate.getMonth(),oe.currentMonth):oe.config.minDate&&oe.currentYear===oe.config.minDate.getFullYear()&&(oe.currentMonth=Math.max(oe.config.minDate.getMonth(),oe.currentMonth)),n&&(oe.redraw(),Z("YearChange"))}}function F(e,t){var n=ie(e,oe.config.minDate,void 0!==t?t:!oe.minDateHasTime)<0,a=ie(e,oe.config.maxDate,void 0!==t?t:!oe.maxDateHasTime)>0;if(n||a)return!1;if(!oe.config.enable.length&&!oe.config.disable.length)return!0;for(var i,r=oe.parseDate(e,!0),o=oe.config.enable.length>0,l=o?oe.config.enable:oe.config.disable,c=0;c<l.length;c++){if((i=l[c])instanceof Function&&i(r))return o;if(i instanceof Date&&i.getTime()===r.getTime())return o;if("string"==typeof i&&oe.parseDate(i,!0).getTime()===r.getTime())return o;if("object"===(void 0===i?"undefined":_typeof(i))&&i.from&&i.to&&r>=i.from&&r<=i.to)return o}return!o}function I(e){if(e.target===(oe.altInput||oe.input)&&13===e.which)H(e);else if(oe.isOpen||oe.config.inline){switch(e.key){case"Enter":oe.timeContainer&&oe.timeContainer.contains(e.target)?G():H(e);break;case"Escape":oe.close();break;case"ArrowLeft":e.target!==oe.input&e.target!==oe.altInput&&(e.preventDefault(),b(-1),oe.currentMonthElement.focus());break;case"ArrowUp":oe.timeContainer&&oe.timeContainer.contains(e.target)?a(e):(e.preventDefault(),oe.currentYear++,oe.redraw());break;case"ArrowRight":e.target!==oe.input&e.target!==oe.altInput&&(e.preventDefault(),b(1),oe.currentMonthElement.focus());break;case"ArrowDown":oe.timeContainer&&oe.timeContainer.contains(e.target)?a(e):(e.preventDefault(),oe.currentYear--,oe.redraw());break;case"Tab":e.target===oe.hourElement?(e.preventDefault(),oe.minuteElement.select()):e.target===oe.minuteElement&&oe.amPM&&(e.preventDefault(),oe.amPM.focus())}Z("KeyDown",e)}}function Y(e){if(1===oe.selectedDates.length&&e.target.classList.contains("flatpickr-day")){for(var t=e.target.dateObj,n=oe.parseDate(oe.selectedDates[0],!0),a=Math.min(t.getTime(),oe.selectedDates[0].getTime()),i=Math.max(t.getTime(),oe.selectedDates[0].getTime()),r=!1,o=a;o<i;o+=oe.utils.duration.DAY)if(!F(new Date(o))){r=!0;break}for(var l=oe.days.childNodes[0].dateObj.getTime(),c=0;c<42;c++,l+=oe.utils.duration.DAY){(function(o,l){var c=o<oe.minRangeDate.getTime()||o>oe.maxRangeDate.getTime();if(c)return oe.days.childNodes[l].classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){oe.days.childNodes[l].classList.remove(e)}),"continue";if(r&&!c)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(e){oe.days.childNodes[l].classList.remove(e)});var s=Math.max(oe.minRangeDate.getTime(),a),u=Math.min(oe.maxRangeDate.getTime(),i);e.target.classList.add(t<oe.selectedDates[0]?"startRange":"endRange"),n>t&&o===n.getTime()?oe.days.childNodes[l].classList.add("endRange"):n<t&&o===n.getTime()?oe.days.childNodes[l].classList.add("startRange"):o>=s&&o<=u&&oe.days.childNodes[l].classList.add("inRange")})(l,c)}}}function S(){!oe.isOpen||oe.config.static||oe.config.inline||A()}function N(e){if(oe.isMobile)return e&&(e.preventDefault(),e.target.blur()),setTimeout(function(){oe.mobileInput.click()},0),void Z("Open");oe.isOpen||(oe.altInput||oe.input).disabled||oe.config.inline||(oe.isOpen=!0,oe.calendarContainer.classList.add("open"),A(),(oe.altInput||oe.input).classList.add("active"),Z("Open"))}function L(e){return function(t){var n=oe.config["_"+e+"Date"]=oe.parseDate(t),a=oe.config["_"+("min"===e?"max":"min")+"Date"],i=t&&n instanceof Date;i&&(oe[e+"DateHasTime"]=n.getHours()||n.getMinutes()||n.getSeconds()),oe.selectedDates&&(oe.selectedDates=oe.selectedDates.filter(function(e){return F(e)}),oe.selectedDates.length||"min"!==e||r(n),G()),oe.days&&(j(),i?oe.currentYearElement[e]=n.getFullYear():oe.currentYearElement.removeAttribute(e),oe.currentYearElement.disabled=a&&n&&a.getFullYear()===n.getFullYear())}}function O(){var e=["utc","wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange"];oe.config=Object.create(Flatpickr.defaultConfig);var a=_extends({},oe.instanceConfig,JSON.parse(JSON.stringify(oe.element.dataset||{})));oe.config.parseDate=a.parseDate,oe.config.formatDate=a.formatDate,_extends(oe.config,a),!a.dateFormat&&a.enableTime&&(oe.config.dateFormat=oe.config.noCalendar?"H:i"+(oe.config.enableSeconds?":S":""):Flatpickr.defaultConfig.dateFormat+" H:i"+(oe.config.enableSeconds?":S":"")),a.altInput&&a.enableTime&&!a.altFormat&&(oe.config.altFormat=oe.config.noCalendar?"h:i"+(oe.config.enableSeconds?":S K":" K"):Flatpickr.defaultConfig.altFormat+" h:i"+(oe.config.enableSeconds?":S":"")+" K"),Object.defineProperty(oe.config,"minDate",{get:function(){return this._minDate},set:L("min")}),Object.defineProperty(oe.config,"maxDate",{get:function(){return this._maxDate},set:L("max")}),oe.config.minDate=a.minDate,oe.config.maxDate=a.maxDate;for(var i=0;i<e.length;i++)oe.config[e[i]]=oe.config[e[i]]===!0||"true"===oe.config[e[i]];for(var r=0;r<t.length;r++)oe.config[t[r]]=te(oe.config[t[r]]||[]).map(n);for(var o=0;o<oe.config.plugins.length;o++){var l=oe.config.plugins[o](oe)||{};for(var c in l)Array.isArray(oe.config[c])||~t.indexOf(c)?oe.config[c]=te(l[c]).map(n).concat(oe.config[c]):void 0===a[c]&&(oe.config[c]=l[c])}Z("ParseConfig")}function _(){"object"!==_typeof(oe.config.locale)&&void 0===Flatpickr.l10ns[oe.config.locale]&&console.warn("flatpickr: invalid locale "+oe.config.locale),oe.l10n=_extends(Object.create(Flatpickr.l10ns.default),"object"===_typeof(oe.config.locale)?oe.config.locale:"default"!==oe.config.locale?Flatpickr.l10ns[oe.config.locale]||{}:{})}function A(e){if(!e||e.target===oe.timeContainer){var t=oe.calendarContainer.offsetHeight,n=oe.calendarContainer.offsetWidth,a=oe.config.position,i=oe.altInput||oe.input,r=i.getBoundingClientRect(),o=window.innerHeight-r.bottom+i.offsetHeight,l="above"===a||"below"!==a&&o<t&&r.top>t,c=window.pageYOffset+r.top+(l?-t-2:i.offsetHeight+2);if(ne(oe.calendarContainer,"arrowTop",!l),ne(oe.calendarContainer,"arrowBottom",l),!oe.config.inline){var s=window.pageXOffset+r.left,u=window.document.body.offsetWidth-r.right,d=s+n>window.document.body.offsetWidth;ne(oe.calendarContainer,"rightMost",d),oe.config.static||(oe.calendarContainer.style.top=c+"px",d?(oe.calendarContainer.style.left="auto",oe.calendarContainer.style.right=u+"px"):(oe.calendarContainer.style.left=s+"px",oe.calendarContainer.style.right="auto"))}}}function j(){oe.config.noCalendar||oe.isMobile||(v(),$(),m())}function H(e){if(e.preventDefault(),e.stopPropagation(),oe.config.allowInput&&"Enter"===e.key&&e.target===(oe.altInput||oe.input))return oe.setDate((oe.altInput||oe.input).value,!0,e.target===oe.altInput?oe.config.altFormat:oe.config.dateFormat),e.target.blur();if(e.target.classList.contains("flatpickr-day")&&!e.target.classList.contains("disabled")&&!e.target.classList.contains("notAllowed")){var t=oe.latestSelectedDateObj=new Date(e.target.dateObj.getTime());if(oe.selectedDateElem=e.target,"single"===oe.config.mode)oe.selectedDates=[t];else if("multiple"===oe.config.mode){var n=q(t);n?oe.selectedDates.splice(n,1):oe.selectedDates.push(t)}else"range"===oe.config.mode&&(2===oe.selectedDates.length&&oe.clear(),oe.selectedDates.push(t),0!==ie(t,oe.selectedDates[0],!0)&&oe.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(i(),t.getMonth()!==oe.currentMonth&&"range"!==oe.config.mode){var a=oe.currentYear!==t.getFullYear();oe.currentYear=t.getFullYear(),oe.currentMonth=t.getMonth(),a&&Z("YearChange"),Z("MonthChange")}m(),oe.minDateHasTime&&oe.config.enableTime&&0===ie(t,oe.config.minDate)&&r(oe.config.minDate),G(),setTimeout(function(){return oe.showTimeInput=!0},50),"range"===oe.config.mode&&(1===oe.selectedDates.length?(Y(e),oe._hidePrevMonthArrow=oe._hidePrevMonthArrow||oe.minRangeDate>oe.days.childNodes[0].dateObj,oe._hideNextMonthArrow=oe._hideNextMonthArrow||oe.maxRangeDate<new Date(oe.currentYear,oe.currentMonth+1,1)):($(),oe.close())),oe.config.enableTime&&setTimeout(function(){oe.hourElement.select()},451),"single"!==oe.config.mode||oe.config.enableTime||oe.close(),Z("Change")}}function P(e,t){oe.config[e]=t,oe.redraw(),u()}function R(e,t){if(Array.isArray(e))oe.selectedDates=e.map(function(e){return oe.parseDate(e,!1,t)});else if(e instanceof Date||!isNaN(e))oe.selectedDates=[oe.parseDate(e)];else if(e&&e.substring)switch(oe.config.mode){case"single":oe.selectedDates=[oe.parseDate(e,!1,t)];break;case"multiple":oe.selectedDates=e.split("; ").map(function(e){return oe.parseDate(e,!1,t)});break;case"range":oe.selectedDates=e.split(oe.l10n.rangeSeparator).map(function(e){return oe.parseDate(e,!1,t)})}oe.selectedDates=oe.selectedDates.filter(function(e){return e instanceof Date&&F(e,!1)}),oe.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function W(e,t,n){if(!e)return oe.clear();R(e,n),oe.showTimeInput=oe.selectedDates.length>0,oe.latestSelectedDateObj=oe.selectedDates[0],oe.redraw(),u(),r(),G(),t&&Z("Change")}function U(){function e(e){for(var t=e.length;t--;)"string"==typeof e[t]||+e[t]?e[t]=oe.parseDate(e[t],!0):e[t]&&e[t].from&&e[t].to&&(e[t].from=oe.parseDate(e[t].from),e[t].to=oe.parseDate(e[t].to));return e.filter(function(e){return e})}oe.selectedDates=[],oe.now=new Date,oe.config.disable.length&&(oe.config.disable=e(oe.config.disable)),oe.config.enable.length&&(oe.config.enable=e(oe.config.enable)),R(oe.config.defaultDate||oe.input.value);var t=oe.selectedDates.length?oe.selectedDates[0]:oe.config.minDate&&oe.config.minDate.getTime()>oe.now?oe.config.minDate:oe.config.maxDate&&oe.config.maxDate.getTime()<oe.now?oe.config.maxDate:oe.now;oe.currentYear=t.getFullYear(),oe.currentMonth=t.getMonth(),oe.selectedDates.length&&(oe.latestSelectedDateObj=oe.selectedDates[0]),oe.minDateHasTime=oe.config.minDate&&(oe.config.minDate.getHours()||oe.config.minDate.getMinutes()||oe.config.minDate.getSeconds()),oe.maxDateHasTime=oe.config.maxDate&&(oe.config.maxDate.getHours()||oe.config.maxDate.getMinutes()||oe.config.maxDate.getSeconds()),Object.defineProperty(oe,"latestSelectedDateObj",{get:function(){return oe._selectedDateObj||oe.selectedDates[oe.selectedDates.length-1]||null},set:function(e){oe._selectedDateObj=e}}),oe.isMobile||Object.defineProperty(oe,"showTimeInput",{get:function(){return oe._showTimeInput},set:function(e){oe._showTimeInput=e,oe.calendarContainer&&ne(oe.calendarContainer,"showTimeInput",e)}})}function J(){oe.utils={duration:{DAY:864e5},getDaysinMonth:function(e,t){return e=void 0===e?oe.currentMonth:e,t=void 0===t?oe.currentYear:t,1===e&&(t%4==0&&t%100!=0||t%400==0)?29:oe.l10n.daysInMonth[e]},monthToStr:function(e,t){return t=void 0===t?oe.config.shorthandCurrentMonth:t,oe.l10n.months[(t?"short":"long")+"hand"][e]}}}function B(){["D","F","J","M","W","l"].forEach(function(e){oe.formats[e]=Flatpickr.prototype.formats[e].bind(oe)}),oe.revFormat.F=Flatpickr.prototype.revFormat.F.bind(oe),oe.revFormat.M=Flatpickr.prototype.revFormat.M.bind(oe)}function K(){if(oe.input=oe.config.wrap?oe.element.querySelector("[data-input]"):oe.element,!oe.input)return console.warn("Error: invalid input element specified",oe.input);oe.input._type=oe.input.type,oe.input.type="text",oe.input.classList.add("flatpickr-input"),oe.config.altInput&&(oe.altInput=ee(oe.input.nodeName,oe.input.className+" "+oe.config.altInputClass),oe.altInput.placeholder=oe.input.placeholder,oe.altInput.type="text",oe.input.type="hidden",!oe.config.static&&oe.input.parentNode&&oe.input.parentNode.insertBefore(oe.altInput,oe.input.nextSibling)),oe.config.allowInput||(oe.altInput||oe.input).setAttribute("readonly","readonly")}function z(){var e=oe.config.enableTime?oe.config.noCalendar?"time":"datetime-local":"date";oe.mobileInput=ee("input",oe.input.className+" flatpickr-mobile"),oe.mobileInput.step="any",oe.mobileInput.tabIndex=1,oe.mobileInput.type=e,oe.mobileInput.disabled=oe.input.disabled,oe.mobileInput.placeholder=oe.input.placeholder,oe.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",oe.selectedDates.length&&(oe.mobileInput.defaultValue=oe.mobileInput.value=x(oe.mobileFormatStr,oe.selectedDates[0])),oe.config.minDate&&(oe.mobileInput.min=x("Y-m-d",oe.config.minDate)),oe.config.maxDate&&(oe.mobileInput.max=x("Y-m-d",oe.config.maxDate)),oe.input.type="hidden",oe.config.altInput&&(oe.altInput.type="hidden");try{oe.input.parentNode.insertBefore(oe.mobileInput,oe.input.nextSibling)}catch(e){}oe.mobileInput.addEventListener("change",function(e){oe.latestSelectedDateObj=oe.parseDate(e.target.value),oe.setDate(oe.latestSelectedDateObj),Z("Change"),Z("Close")})}function V(){oe.isOpen?oe.close():oe.open()}function Z(e,t){var n=oe.config["on"+e];if(n)for(var a=0;n[a]&&a<n.length;a++)n[a](oe.selectedDates,oe.input&&oe.input.value,oe,t);if("Change"===e)if("function"==typeof Event&&Event.constructor)oe.input.dispatchEvent(new Event("change",{bubbles:!0})),oe.input.dispatchEvent(new Event("input",{bubbles:!0}));else{if(void 0!==window.document.createEvent)return oe.input.dispatchEvent(oe.changeEvent);oe.input.fireEvent("onchange")}}function q(e){for(var t=0;t<oe.selectedDates.length;t++)if(0===ie(oe.selectedDates[t],e))return""+t;return!1}function Q(e){return!("range"!==oe.config.mode||oe.selectedDates.length<2)&&(ie(e,oe.selectedDates[0])>=0&&ie(e,oe.selectedDates[1])<=0)}function $(){oe.config.noCalendar||oe.isMobile||!oe.monthNav||(oe.currentMonthElement.textContent=oe.utils.monthToStr(oe.currentMonth)+" ",oe.currentYearElement.value=oe.currentYear,oe._hidePrevMonthArrow=oe.config.minDate&&(oe.currentYear===oe.config.minDate.getFullYear()?oe.currentMonth<=oe.config.minDate.getMonth():oe.currentYear<oe.config.minDate.getFullYear()),oe._hideNextMonthArrow=oe.config.maxDate&&(oe.currentYear===oe.config.maxDate.getFullYear()?oe.currentMonth+1>oe.config.maxDate.getMonth():oe.currentYear>oe.config.maxDate.getFullYear()))}function G(){if(!oe.selectedDates.length)return oe.clear();oe.isMobile&&(oe.mobileInput.value=oe.selectedDates.length?x(oe.mobileFormatStr,oe.latestSelectedDateObj):"");var e="range"!==oe.config.mode?"; ":oe.l10n.rangeSeparator;oe.input.value=oe.selectedDates.map(function(e){return x(oe.config.dateFormat,e)}).join(e),oe.config.altInput&&(oe.altInput.value=oe.selectedDates.map(function(e){return x(oe.config.altFormat,e)}).join(e)),Z("ValueUpdate")}function X(e){e.preventDefault();var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY));T(parseInt(e.target.value,10)+t),e.target.value=oe.currentYear}function ee(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,n&&(a.textContent=n),a}function te(e){return Array.isArray(e)?e:[e]}function ne(e,t,n){if(n)return e.classList.add(t);e.classList.remove(t)}function ae(e,t,n){var a=void 0;return function(){var i=this,r=arguments;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(i,r)},t),n&&!a&&e.apply(i,r)}}function ie(e,t,n){return e instanceof Date&&t instanceof Date&&(n!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime())}function re(e){e.preventDefault();var t="keydown"===e.type,n=(e.type,e.type,e.target);if("input"!==e.type&&!t&&(e.target.value||e.target.textContent).length>=2&&(e.target.focus(),e.target.blur()),oe.amPM&&e.target===oe.amPM)return e.target.textContent=["AM","PM"]["AM"===e.target.textContent|0];var a=Number(n.min),i=Number(n.max),r=Number(n.step),o=parseInt(n.value,10),l=e.delta||(t?38===e.which?1:-1:Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY))||0),c=o+r*l;if(void 0!==n.value&&2===n.value.length){var s=n===oe.hourElement,u=n===oe.minuteElement;c<a?(c=i+c+!s+(s&&!oe.amPM),u&&d(null,-1,oe.hourElement)):c>i&&(c=n===oe.hourElement?c-i-!oe.amPM:a,u&&d(null,1,oe.hourElement)),oe.amPM&&s&&(1===r?c+o===23:Math.abs(c-o)>r)&&(oe.amPM.textContent="PM"===oe.amPM.textContent?"AM":"PM"),n.value=oe.pad(c)}}var oe=this;return oe.changeMonth=b,oe.changeYear=T,oe.clear=M,oe.close=C,oe._createElement=ee,oe.destroy=y,oe.formatDate=x,oe.isEnabled=F,oe.jumpToDate=u,oe.open=N,oe.redraw=j,oe.set=P,oe.setDate=W,oe.toggle=V,function(){e._flatpickr&&y(e._flatpickr),e._flatpickr=oe,oe.element=e,oe.instanceConfig=t||{},oe.parseDate=Flatpickr.prototype.parseDate.bind(oe),B(),O(),_(),K(),U(),J(),oe.isOpen=oe.config.inline,oe.isMobile=!oe.config.disableMobile&&!oe.config.inline&&"single"===oe.config.mode&&!oe.config.disable.length&&!oe.config.enable.length&&!oe.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),oe.isMobile||p(),s(),(oe.selectedDates.length||oe.config.noCalendar)&&(oe.config.enableTime&&r(oe.config.noCalendar?oe.config.minDate:null),G()),oe.config.weekNumbers&&(oe.calendarContainer.style.width=oe.days.clientWidth+oe.weekWrapper.clientWidth+"px"),oe.showTimeInput=oe.selectedDates.length>0||oe.config.noCalendar,oe.isMobile||A(),Z("Ready")}(),oe}function _flatpickr(e,t){for(var n=Array.prototype.slice.call(e),a=[],i=0;i<n.length;i++)try{n[i]._flatpickr=new Flatpickr(n[i],t||{}),a.push(n[i]._flatpickr)}catch(e){console.warn(e,e.stack)}return 1===a.length?a[0]:a}function flatpickr(e,t){return _flatpickr(window.document.querySelectorAll(e),t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Flatpickr.defaultConfig={mode:"single",position:"top",utc:!1,wrap:!1,weekNumbers:!1,allowInput:!1,clickOpens:!0,time_24hr:!1,enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",altInput:!1,altInputClass:"flatpickr-input form-control input",altFormat:"F j, Y",defaultDate:null,minDate:null,maxDate:null,parseDate:null,formatDate:null,getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},enable:[],disable:[],shorthandCurrentMonth:!1,inline:!1,static:!1,appendTo:null,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",enableSeconds:!1,hourIncrement:1,minuteIncrement:5,defaultHour:12,defaultMinute:0,disableMobile:!1,locale:"default",plugins:[],onClose:[],onChange:[],onDayCreate:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onKeyDown:[]},Flatpickr.l10ns={en:{weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle"}},Flatpickr.l10ns.default=Object.create(Flatpickr.l10ns.en),Flatpickr.localize=function(e){return _extends(Flatpickr.l10ns.default,e||{})},Flatpickr.setDefaults=function(e){return _extends(Flatpickr.defaultConfig,e||{})},Flatpickr.prototype={formats:{Z:function(e){return e.toISOString()},D:function(e){return this.l10n.weekdays.shorthand[this.formats.w(e)]},F:function(e){return this.utils.monthToStr(this.formats.n(e)-1,!1)},H:function(e){return Flatpickr.prototype.pad(e.getHours())},J:function(e){return e.getDate()+this.l10n.ordinal(e.getDate())},K:function(e){return e.getHours()>11?"PM":"AM"},M:function(e){return this.utils.monthToStr(e.getMonth(),!0)},S:function(e){return Flatpickr.prototype.pad(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e){return this.config.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return Flatpickr.prototype.pad(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return Flatpickr.prototype.pad(e.getMinutes())},j:function(e){return e.getDate()},l:function(e){return this.l10n.weekdays.longhand[e.getDay()]},m:function(e){return Flatpickr.prototype.pad(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},revFormat:{D:function(){},F:function(e,t){e.setMonth(this.l10n.months.longhand.indexOf(t))},H:function(e,t){return e.setHours(parseFloat(t))},J:function(e,t){return e.setDate(parseFloat(t))},K:function(e,t){var n=e.getHours();12!==n&&e.setHours(n%12+12*/pm/i.test(t))},M:function(e,t){e.setMonth(this.l10n.months.shorthand.indexOf(t))},S:function(e,t){return e.setSeconds(t)},W:function(){},Y:function(e,t){return e.setFullYear(t)},Z:function(e,t){return new Date(t)},d:function(e,t){return e.setDate(parseFloat(t))},h:function(e,t){return e.setHours(parseFloat(t))},i:function(e,t){return e.setMinutes(parseFloat(t))},j:function(e,t){return e.setDate(parseFloat(t))},l:function(){},m:function(e,t){return e.setMonth(parseFloat(t)-1)},n:function(e,t){return e.setMonth(parseFloat(t)-1)},s:function(e,t){return e.setSeconds(parseFloat(t))},w:function(){},y:function(e,t){return e.setFullYear(2e3+parseFloat(t))}},tokenRegex:{D:"(\\w+)",F:"(\\w+)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"(\\w+)",M:"(\\w+)",S:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},pad:function(e){return("0"+e).slice(-2)},parseDate:function(e,t,n){if(!e)return null;var a=e;if(e.toFixed)e=new Date(e);else if("string"==typeof e){var i="string"==typeof n?n:this.config.dateFormat;if("today"===(e=e.trim()))e=new Date,t=!0;else if(this.config&&this.config.parseDate)e=this.config.parseDate(e);else if(/Z$/.test(e)||/GMT$/.test(e))e=new Date(e);else{for(var r=this.config.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),o=!1,l=0,c=0,s="";l<i.length;l++){var u=i[l],d="\\"===u,f="\\"===i[l-1]||d;if(this.tokenRegex[u]&&!f){s+=this.tokenRegex[u];var p=new RegExp(s).exec(e);p&&(o=!0)&&this.revFormat[u](r,p[++c])}else d||(s+=".")}e=o?r:null}}else e instanceof Date&&(e=new Date(e.getTime()));return e instanceof Date?(this.config&&this.config.utc&&!e.fp_isUTC&&(e=e.fp_toUTC()),t===!0&&e.setHours(0,0,0,0),e):(console.warn("flatpickr: invalid date "+a),console.info(this.element),null)}},"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return _flatpickr(this,e)},HTMLElement.prototype.flatpickr=function(e){return _flatpickr([this],e)}),"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return _flatpickr(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+parseInt(e,10))},Date.prototype.fp_isUTC=!1,Date.prototype.fp_toUTC=function(){var e=new Date(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds());return e.fp_isUTC=!0,e},!window.document.documentElement.classList&&Object.defineProperty&&"undefined"!=typeof HTMLElement&&Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(n){var a=t.className.split(/\s+/);e(a,a.indexOf(n),n),t.className=a.join(" ")}}var t=this,n={add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}};return Object.defineProperty(n,"length",{get:function(){return t.className.split(/\s+/).length}}),n}}),"undefined"!=typeof module&&(module.exports=Flatpickr);;(function($){
/*! Tiny Pub/Sub - v0.7.0 - 2013-01-29
     * https://github.com/cowboy/jquery-tiny-pubsub
     * Copyright (c) 2014 "Cowboy" Ben Alman; Licensed MIT */
var o=$({});$.subscribe=function(){o.on.apply(o,arguments);};$.unsubscribe=function(){o.off.apply(o,arguments);};$.publish=function(){o.trigger.apply(o,arguments);};}(jQuery));;(function($,window){'use strict';var numberRegex=/^-?\d*\.?\d*$/,objectRegex=/^[[{]/;function deserializeValue(value){try{return!value?value:value==='true'||(value==='false'?false:value==='null'?null:numberRegex.test(value)?+value:objectRegex.test(value)?JSON.parse(value):value);}catch(e){return value;}}
function PluginBase(name,element,options){var me=this;me._name=name;me.$el=$(element);me.opts=$.extend({},me.defaults||{},options);me.eventSuffix='.'+name;me._events=[];$.expr.pseudos['plugin-'+name.toLowerCase()]=function(elem){return!!$.data(elem,'plugin_'+name);};me.init(element,options);$.publish('plugin/'+name+'/onInit',[me]);}
PluginBase.prototype={init:function(){throw new Error('Plugin '+this.getName()+' has to have an init function!');},destroy:function(){if(typeof console!=='undefined'&&typeof console.warn==='function'){console.warn('Plugin '+this.getName()+' should have a custom destroy method!');}
this._destroy();},update:function(){},_destroy:function(){var me=this,name=me.getName();$.each(me._events,function(i,obj){if(typeof obj==='object'){obj.el.off(obj.event);}});$.each(me.opts,function(o){delete me.opts[o];});me.$el.removeData('plugin_'+name);$.publish('plugin/'+name+'/onDestroy',[me]);return me;},_on:function(){var me=this,$el=$(arguments[0]),event=me.getEventName(arguments[1]),args=Array.prototype.slice.call(arguments,2);me._events.push({'el':$el,'event':event});args.unshift(event);$el.on.apply($el,args);$.publish('plugin/'+me._name+'/onRegisterEvent',[$el,event]);return me;},_off:function(element,event){var me=this,events=me._events,pluginEvent=me.getEventName(event),eventIds=[],$element=$(element),filteredEvents=$.grep(events,function(obj,index){eventIds.push(index);return typeof obj!=='undefined'&&pluginEvent===obj.event&&$element[0]===obj.el[0];});$.each(filteredEvents,function(index,event){$element.off(event.event);});$.each(eventIds,function(id){if(!events[id]){return;}
delete events[id];});$.publish('plugin/'+me._name+'/onRemoveEvent',[$element,event]);return me;},getName:function(){return this._name;},getEventName:function(event){var suffix=this.eventSuffix,parts=event.split(' '),len=parts.length,i=0;for(;i<len;i++){parts[i]+=suffix;}
return parts.join(' ');},getElement:function(){return this.$el;},getOptions:function(){return $.extend({},this.opts);},getOption:function(key){return this.opts[key];},setOption:function(key,value){var me=this;me.opts[key]=value;return me;},applyDataAttributes:function(shouldDeserialize,ignoreList){var me=this,attr;ignoreList=ignoreList||[];$.each(me.opts,function(key){if(ignoreList.indexOf(key)!==-1){return;}
attr=me.$el.attr('data-'+key);if(typeof attr==='undefined'){return true;}
me.opts[key]=shouldDeserialize!==false?deserializeValue(attr):attr;return true;});$.publish('plugin/'+me._name+'/onDataAttributes',[me.$el,me.opts]);return me.opts;}};$.PluginBase=PluginBase;if(typeof Object.create!=='function'){Object.create=function(o){function F(){}
F.prototype=o;return new F();};}
$.plugin=function(name,plugin){var pluginFn=function(options){return this.each(function(){var element=this,pluginData=$.data(element,'plugin_'+name);if(!pluginData){if(typeof plugin==='function'){pluginData=new plugin(name,element,options);}else{var Plugin=function(){PluginBase.call(this,name,element,options);};Plugin.prototype=$.extend(Object.create(PluginBase.prototype),{constructor:Plugin},plugin);pluginData=new Plugin();}
$.data(element,'plugin_'+name,pluginData);}});};window.PluginsCollection=window.PluginsCollection||{};window.PluginsCollection[name]=plugin;$.fn[name]=pluginFn;};$.overridePlugin=function(pluginName,override){var overridePlugin=window.PluginsCollection[pluginName];if(typeof overridePlugin!=='object'||typeof override!=='object'){return false;}
$.fn[pluginName]=function(options){return this.each(function(){var element=this,pluginData=$.data(element,'plugin_'+pluginName);if(!pluginData){var Plugin=function(){PluginBase.call(this,pluginName,element,options);};Plugin.prototype=$.extend(Object.create(PluginBase.prototype),{constructor:Plugin,superclass:overridePlugin},overridePlugin,override);pluginData=new Plugin();$.data(element,'plugin_'+pluginName,pluginData);}});};};})(jQuery,window);;(function($,window,document){'use strict';var $html=$('html'),vendorPropertyDiv=document.createElement('div'),vendorPrefixes=['webkit','moz','ms','o'];function hasCookiesAllowed(){return!window.cookieRemoval||(window.cookieRemoval&&document.cookie.indexOf('allowCookie')!==-1);}
function EventEmitter(){var me=this;me._events={};}
EventEmitter.prototype={constructor:EventEmitter,name:'EventEmitter',on:function(eventName,callback,context){var me=this,events=me._events||(me._events={}),event=events[eventName]||(events[eventName]=[]);event.push({callback:callback,context:context||me});return me;},once:function(eventName,callback,context){var me=this,once=function(){me.off(eventName,once,context);callback.apply(me,arguments);};return me.on(eventName,once,context);},off:function(eventName,callback,context){var me=this,events=me._events||(me._events={}),eventNames=eventName?[eventName]:Object.keys(events),eventList,event,name,len,i,j;for(i=0,len=eventNames.length;i<len;i++){name=eventNames[i];eventList=events[name];if(!eventList){return me;}
if(!callback&&!context){eventList.length=0;delete events[name];continue;}
for(j=eventList.length-1;j>=0;j--){event=eventList[j];if((callback&&callback!==event.callback)||(context&&context!==event.context)){continue;}
eventList.splice(j,1);}}
return me;},trigger:function(eventName){var me=this,events=me._events||(me._events={}),eventList=events[eventName],event,args,a1,a2,a3,len,i;if(!eventList){return me;}
args=Array.prototype.slice.call(arguments,1);len=eventList.length;i=-1;if(args.length<=3){a1=args[0];a2=args[1];a3=args[2];}
switch(args.length){case 0:while(++i<len)(event=eventList[i]).callback.call(event.context);return me;case 1:while(++i<len)(event=eventList[i]).callback.call(event.context,a1);return me;case 2:while(++i<len)(event=eventList[i]).callback.call(event.context,a1,a2);return me;case 3:while(++i<len)(event=eventList[i]).callback.call(event.context,a1,a2,a3);return me;default:while(++i<len)(event=eventList[i]).callback.apply(event.context,args);return me;}},destroy:function(){this.off();}};window.StateManager=$.extend(Object.create(EventEmitter.prototype),{EventEmitter:EventEmitter,_breakpoints:[],_listeners:[],_plugins:{},_pluginQueue:{},_pluginsInitialized:false,_currentState:'',_previousState:'',_viewportWidth:0,_vendorPropertyCache:{},init:function(breakpoints){var me=this;me._viewportWidth=me.getViewportWidth();me._baseFontSize=parseInt($html.css('font-size'));me.registerBreakpoint(breakpoints);me._checkResize();me._browserDetection();me._setDeviceCookie();$($.proxy(me.initQueuedPlugins,me,true));$.publish('StateManager/onInit',[me]);return me;},registerBreakpoint:function(breakpoint){var me=this,breakpoints=breakpoint instanceof Array?breakpoint:Array.prototype.slice.call(arguments),len=breakpoints.length,i=0;for(;i<len;i++){me._addBreakpoint(breakpoints[i]);}
return me;},_addBreakpoint:function(breakpoint){var me=this,breakpoints=me._breakpoints,existingBreakpoint,state=breakpoint.state,enter=me._convertRemValue(breakpoint.enter),exit=me._convertRemValue(breakpoint.exit),len=breakpoints.length,i=0;breakpoint.enter=enter;breakpoint.exit=exit;for(;i<len;i++){existingBreakpoint=breakpoints[i];if(existingBreakpoint.state===state){throw new Error('Multiple breakpoints of state "'+state+'" detected.');}
if(existingBreakpoint.enter<=exit&&enter<=existingBreakpoint.exit){throw new Error('Breakpoint range of state "'+state+'" overlaps state "'+existingBreakpoint.state+'".');}}
breakpoints.push(breakpoint);me._plugins[state]={};me._checkBreakpoint(breakpoint,me._viewportWidth);return me;},_convertRemValue:function(remValue){var me=this,baseFontSize=me._baseFontSize;return remValue*baseFontSize;},removeBreakpoint:function(state){var me=this,breakpoints=me._breakpoints,len=breakpoints.length,i=0;if(typeof state!=='string'){return me;}
for(;i<len;i++){if(state!==breakpoints[i].state){continue;}
breakpoints.splice(i,1);return me._removeStatePlugins(state);}
return me;},_removeStatePlugins:function(state){var me=this,plugins=me._plugins[state],selectors=Object.keys(plugins),selectorLen=selectors.length,pluginNames,pluginLen,i,j;for(i=0;i<selectorLen;i++){pluginNames=Object.keys(plugins[selectors[i]]);for(j=0,pluginLen=pluginNames.length;j<pluginLen;j++){me.destroyPlugin(selectors[i],pluginNames[j]);}}
delete plugins[state];return me;},registerListener:function(listener){var me=this,listenerArr=listener instanceof Array?listener:Array.prototype.slice.call(arguments),len=listenerArr.length,i=0;for(;i<len;i++){me._addListener(listenerArr[i]);}
return me;},_addListener:function(listener){var me=this,listeners=me._listeners,enterFn=listener.enter;listeners.push(listener);if((listener.state===me._currentState||listener.state==='*')&&typeof enterFn==='function'){enterFn({'exiting':me._previousState,'entering':me._currentState});}
return me;},addPlugin:function(selector,pluginName,config,viewport){var me=this,pluginsInitialized=me._pluginsInitialized,breakpoints=me._breakpoints,currentState=me._currentState,len,i;if(typeof config==='string'||config instanceof Array){viewport=config;config={};}
if(typeof viewport==='string'){viewport=[viewport];}
if(!(viewport instanceof Array)){viewport=[];for(i=0,len=breakpoints.length;i<len;i++){viewport.push(breakpoints[i].state);}}
for(i=0,len=viewport.length;i<len;i++){me._addPluginOption(viewport[i],selector,pluginName,config);if(currentState!==viewport[i]){continue;}
if(pluginsInitialized){me._initPlugin(selector,pluginName);continue;}
me.addPluginToQueue(selector,pluginName);}
return me;},removePlugin:function(selector,pluginName,viewport){var me=this,breakpoints=me._breakpoints,plugins=me._plugins,state,sel,len,i;if(typeof viewport==='string'){viewport=[viewport];}
if(!(viewport instanceof Array)){viewport=[];for(i=0,len=breakpoints.length;i<len;i++){viewport.push(breakpoints[i].state);}}
for(i=0,len=viewport.length;i<len;i++){if(!(state=plugins[viewport[i]])){continue;}
if(!(sel=state[selector])){continue;}
delete sel[pluginName];}
if(!me._pluginsInitialized){me.removePluginFromQueue(selector,pluginName);}
return me;},updatePlugin:function(selector,pluginName){var me=this,state=me._currentState,pluginConfigs=me._plugins[state][selector]||{},pluginNames=(typeof pluginName==='string')?[pluginName]:Object.keys(pluginConfigs),len=pluginNames.length,i=0;for(;i<len;i++){me._initPlugin(selector,pluginNames[i]);}
return me;},_addPluginOption:function(state,selector,pluginName,config){var me=this,plugins=me._plugins,selectors=plugins[state]||(plugins[state]={}),configs=selectors[selector]||(selectors[selector]={}),pluginConfig=configs[pluginName];configs[pluginName]=$.extend(pluginConfig||{},config);},_initPlugin:function(selector,pluginName){var me=this,$el=$(selector);if($el.length>1){$.each($el,function(){me._initSinglePlugin($(this),selector,pluginName);});return;}
me._initSinglePlugin($el,selector,pluginName);},addPluginToQueue:function(selector,pluginName){var me=this,queue=me._pluginQueue,pluginNames=queue[selector]||(queue[selector]=[]);if(pluginNames.indexOf(pluginName)===-1){pluginNames.push(pluginName);}},removePluginFromQueue:function(selector,pluginName){var me=this,queue=me._pluginQueue,pluginNames=queue[selector],index;if(pluginNames&&(index=pluginNames.indexOf(pluginName))!==-1){pluginNames.splice(index,1);}},initQueuedPlugins:function(clearQueue){var me=this,queue=me._pluginQueue,selectors=Object.keys(queue),selectorLen=selectors.length,i=0,selector,plugins,pluginLen,j;for(;i<selectorLen;i++){selector=selectors[i];plugins=queue[selector];for(j=0,pluginLen=plugins.length;j<pluginLen;j++){me._initPlugin(selector,plugins[j]);}
if(clearQueue!==false){delete queue[selector];}}
me._pluginsInitialized=true;},_initSinglePlugin:function(element,selector,pluginName){var me=this,currentConfig=me._getPluginConfig(me._currentState,selector,pluginName),plugin=element.data('plugin_'+pluginName);if(!plugin){if(!element[pluginName]){console.error('Plugin "'+pluginName+'" is not a valid jQuery-plugin!');return;}
element[pluginName](currentConfig);return;}
if(JSON.stringify(currentConfig)===JSON.stringify(me._getPluginConfig(me._previousState,selector,pluginName))){if(typeof plugin.update==='function'){plugin.update(me._currentState,me._previousState);}
return;}
me.destroyPlugin(element,pluginName);element[pluginName](currentConfig);},_getPluginConfig:function(state,selector,plugin){var selectors=this._plugins[state]||{},pluginConfigs=selectors[selector]||{};return pluginConfigs[plugin]||{};},_checkResize:function(){var me=this,width=me.getViewportWidth();if(width!==me._viewportWidth){me._checkBreakpoints(width);me.trigger('resize',width);me._setDeviceCookie();}
me._viewportWidth=width;me.requestAnimationFrame(me._checkResize.bind(me));},_checkBreakpoints:function(width){var me=this,checkWidth=width||me.getViewportWidth(),breakpoints=me._breakpoints,len=breakpoints.length,i=0;for(;i<len;i++){me._checkBreakpoint(breakpoints[i],checkWidth);}
return me;},_checkBreakpoint:function(breakpoint,width){var me=this,checkWidth=width||me.getViewportWidth(),enterWidth=~~(breakpoint.enter),exitWidth=~~(breakpoint.exit),state=breakpoint.state;if(state!==me._currentState&&checkWidth>=enterWidth&&checkWidth<=exitWidth){me._changeBreakpoint(state);}},_changeBreakpoint:function(state){var me=this,previousState=me._previousState=me._currentState,currentState=me._currentState=state;return me.trigger('exitBreakpoint',previousState).trigger('changeBreakpoint',{'entering':currentState,'exiting':previousState}).trigger('enterBreakpoint',currentState)._switchListener(previousState,currentState)._switchPlugins(previousState,currentState);},_switchListener:function(fromState,toState){var me=this,previousListeners=me._getBreakpointListeners(fromState),currentListeners=me._getBreakpointListeners(toState),eventObj={'exiting':fromState,'entering':toState},callFn,len,i;for(i=0,len=previousListeners.length;i<len;i++){if(typeof(callFn=previousListeners[i].exit)==='function'){callFn(eventObj);}}
for(i=0,len=currentListeners.length;i<len;i++){if(typeof(callFn=currentListeners[i].enter)==='function'){callFn(eventObj);}}
return me;},_getBreakpointListeners:function(state){var me=this,listeners=me._listeners,breakpointListeners=[],len=listeners.length,i=0,listenerType;for(;i<len;i++){if((listenerType=listeners[i].state)===state||listenerType==='*'){breakpointListeners.push(listeners[i]);}}
return breakpointListeners;},_switchPlugins:function(fromState,toState){var me=this,plugins=me._plugins,fromSelectors=plugins[fromState]||{},fromKeys=Object.keys(fromSelectors),selector,oldPluginConfigs,newPluginConfigs,configKeys,pluginName,plugin,$el,toSelectors=plugins[toState]||{},toKeys=Object.keys(toSelectors),lenKeys,lenConfig,lenEl,x,y,z;for(x=0,lenKeys=fromKeys.length;x<lenKeys;x++){selector=fromKeys[x];oldPluginConfigs=fromSelectors[selector];$el=$(selector);if(!oldPluginConfigs||!(lenEl=$el.length)){continue;}
newPluginConfigs=toSelectors[selector];configKeys=Object.keys(oldPluginConfigs);for(y=0,lenConfig=configKeys.length;y<lenConfig;y++){pluginName=configKeys[y];if(!newPluginConfigs||!(newPluginConfigs[pluginName])){me.destroyPlugin($el,pluginName);continue;}
if(JSON.stringify(newPluginConfigs[pluginName])===JSON.stringify(oldPluginConfigs[pluginName])){for(z=0;z<lenEl;z++){if(!(plugin=$($el[z]).data('plugin_'+pluginName))){continue;}
if(typeof plugin.update==='function'){plugin.update(fromState,toState);}}
continue;}
me.destroyPlugin($el,pluginName);}}
for(x=0,lenKeys=toKeys.length;x<lenKeys;x++){selector=toKeys[x];newPluginConfigs=toSelectors[selector];$el=$(selector);if(!newPluginConfigs||!$el.length){continue;}
configKeys=Object.keys(newPluginConfigs);for(y=0,lenConfig=configKeys.length;y<lenConfig;y++){pluginName=configKeys[y];if(!$el.data('plugin_'+pluginName)){$el[pluginName](newPluginConfigs[pluginName]);}}}
return me;},destroyPlugin:function(selector,pluginName){var $el=(typeof selector==='string')?$(selector):selector,name='plugin_'+pluginName,len=$el.length,i=0,$currentEl,plugin;if(!len){return;}
for(;i<len;i++){$currentEl=$($el[i]);if((plugin=$currentEl.data(name))){plugin.destroy();$currentEl.removeData(name);}}},getViewportWidth:function(){var width=window.innerWidth;if(typeof width==='number'){return width;}
return(width=document.documentElement.clientWidth)!==0?width:document.body.clientWidth;},getViewportHeight:function(){var height=window.innerHeight;if(typeof height==='number'){return height;}
return(height=document.documentElement.clientHeight)!==0?height:document.body.clientHeight;},getPreviousState:function(){return this._previousState;},isPreviousState:function(state){var states=state instanceof Array?state:Array.prototype.slice.call(arguments),previousState=this._previousState,len=states.length,i=0;for(;i<len;i++){if(previousState===states[i]){return true;}}
return false;},getCurrentState:function(){return this._currentState;},isCurrentState:function(state){var states=state instanceof Array?state:Array.prototype.slice.call(arguments),currentState=this._currentState,len=states.length,i=0;for(;i<len;i++){if(currentState===states[i]){return true;}}
return false;},isPortraitMode:function(){return!!this.matchMedia('(orientation: portrait)').matches;},isLandscapeMode:function(){return!!this.matchMedia('(orientation: landscape)').matches;},getDevicePixelRatio:function(){return window.devicePixelRatio||1;},isBrowser:function(browser){var regEx=new RegExp(browser.toLowerCase(),'i');return this._checkUserAgent(regEx);},_checkUserAgent:function(regEx){return!!navigator.userAgent.toLowerCase().match(regEx);},_browserDetection:function(){var me=this,detections={};detections['is--edge']=me._checkUserAgent(/edge\//);detections['is--opera']=me._checkUserAgent(/opera/);detections['is--chrome']=!detections['is--edge']&&me._checkUserAgent(/\bchrome\b/);detections['is--firefox']=me._checkUserAgent(/firefox/);detections['is--webkit']=!detections['is--edge']&&me._checkUserAgent(/webkit/);detections['is--safari']=!detections['is--edge']&&!detections['is--chrome']&&me._checkUserAgent(/safari/)&&me._checkUserAgent(/trident/);detections['is--ie']=!detections['is--opera']&&(me._checkUserAgent(/msie/)||me._checkUserAgent(/trident\/7/));detections['is--ie-touch']=detections['is--ie']&&me._checkUserAgent(/touch/);detections['is--gecko']=!detections['is--webkit']&&me._checkUserAgent(/gecko/);$.each(detections,function(key,value){if(value)$html.addClass(key);});},hasCookiesAllowed:hasCookiesAllowed,_getCurrentDevice:function(){var i=0,width=this.getViewportWidth(),device='desktop',devices=window.statisticDevices||[];for(;i<devices.length;i++){if(width>=~~(devices[i].enter)&&width<=~~(devices[i].exit)){device=devices[i].device;}}
return device;},_setDeviceCookie:function(){if(!hasCookiesAllowed()){return;}
var device=this._getCurrentDevice();document.cookie='x-ua-device='+device+'; path=/';},_scrollBarSize:(function(){var $el=$('<div>',{css:{width:100,height:100,overflow:'scroll',position:'absolute',top:-9999}}),el=$el[0],width,height;$('body').append($el);width=el.offsetWidth-el.clientWidth;height=el.offsetHeight-el.clientHeight;$($el).remove();return{width:width,height:height};}()),getScrollBarSize:function(){return $.extend({},this._scrollBarSize);},getScrollBarWidth:function(){return this._scrollBarSize.width;},getScrollBarHeight:function(){return this._scrollBarSize.height;},matchMedia:window.matchMedia.bind(window),requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window),getVendorProperty:function(property,softError){var cache=this._vendorPropertyCache,style=vendorPropertyDiv.style;if(cache[property]){return cache[property];}
if(property in style){return(cache[property]=property);}
var prop=property.charAt(0).toUpperCase()+property.substr(1),len=vendorPrefixes.length,i=0,vendorProp;for(;i<len;i++){vendorProp=vendorPrefixes[i]+prop;if(vendorProp in style){return(cache[property]=vendorProp);}}
return(cache[property]=(softError?property:null));}});})(jQuery,window,document);;(function(window,document){'use strict';window.StorageManager=(function(){var storage={},p;var enableBlackHoleStorage=function(){var blackHoleStorage={length:0,clear:function(){},getItem:function(){return null;},key:function(){return null;},removeItem:function(){return null;},setItem:function(){return null;}};storage={local:blackHoleStorage,session:blackHoleStorage};};try{if(window.StateManager.hasCookiesAllowed()){storage={local:window.localStorage,session:window.sessionStorage};}else{enableBlackHoleStorage();}}catch(err){enableBlackHoleStorage();}
function hasCookiesSupport(){if('cookie'in document&&(document.cookie.length>0)){return true;}
document.cookie='testcookie=1;';var writeTest=(document.cookie.indexOf('testcookie')!==-1);document.cookie='testcookie=1'+';expires=Sat, 01-Jan-2000 00:00:00 GMT';return writeTest;}
for(p in storage){if(!storage.hasOwnProperty(p)){continue;}
try{storage[p].setItem('storage','');storage[p].removeItem('storage');}catch(err){}}
return{getStorage:function(type){return storage[type];},getSessionStorage:function(){return this.getStorage('session');},getLocalStorage:function(){return this.getStorage('local');},clear:function(type){this.getStorage(type).clear();},getItem:function(type,key){return this.getStorage(type).getItem(key);},key:function(type,i){return this.getStorage(type).key(i);},removeItem:function(type,key){this.getStorage(type).removeItem(key);},setItem:function(type,key,value){this.getStorage(type).setItem(key,value);},hasCookiesSupport:hasCookiesSupport()};})();})(window,document);;(function($){'use strict';var $html=$('html');$.plugin('swOffcanvasMenu',{defaults:{'wrapSelector':'.page-wrap','moveWrapper':false,'offCanvasSelector':'.sidebar-main','closeButtonSelector':'.entry--close-off-canvas','direction':'fromLeft','offCanvasElementCls':'off-canvas','leftMenuCls':'is--left','rightMenuCls':'is--right','activeMenuCls':'is--active','openClass':'is--open','fullscreen':false,'fullscreenCls':'is--full-screen','disableTransitions':false,'disableTransitionCls':'no--transitions','mode':'local','ajaxURL':''},init:function(){var me=this,opts=me.opts,themeConfig=window.themeConfig,$offCanvas;opts.moveWrapper=opts.moveWrapper||!!(themeConfig&&!~~themeConfig.offcanvasOverlayPage);me.applyDataAttributes();me.$pageWrap=$(opts.wrapSelector);me.isOpened=false;if(opts.mode==='ajax'){$offCanvas=me.$offCanvas=$('<div>',{'class':opts.offCanvasElementCls}).appendTo('body');}else{$offCanvas=me.$offCanvas=$(opts.offCanvasSelector);$offCanvas.addClass(opts.offCanvasElementCls);}
$offCanvas.addClass((opts.direction==='fromLeft')?opts.leftMenuCls:opts.rightMenuCls);$offCanvas.addClass(opts.disableTransitionCls);if(!opts.disableTransitions){$offCanvas.removeClass(opts.disableTransitionCls);}
if(opts.fullscreen){$offCanvas.addClass(opts.fullscreenCls);}
setTimeout(function(){$offCanvas.addClass(opts.activeMenuCls);},0);me.registerEventListeners();},registerEventListeners:function(){var me=this,opts=me.opts;me._on(me.$el,'click touch',$.proxy(me.onClickElement,me));me.$offCanvas.on(me.getEventName('click'),opts.closeButtonSelector,$.proxy(me.onClickCloseButton,me));$.subscribe(me.getEventName('plugin/swOffcanvasMenu/onBeforeOpenMenu'),$.proxy(me.onBeforeOpenMenu,me));$.publish('plugin/swOffcanvasMenu/onRegisterEvents',[me]);},onBeforeOpenMenu:function(event,plugin){var me=this;if(plugin!==me){me.closeMenu();}},onClickElement:function(event){var me=this;if(!$.contains(me.$offCanvas[0],(event.target||event.currentTarget))){event.preventDefault();}
me.openMenu();$.publish('plugin/swOffcanvasMenu/onClickElement',[me,event]);},onClickCloseButton:function(event){var me=this;event.preventDefault();event.stopPropagation();me.closeMenu();$.publish('plugin/swOffcanvasMenu/onClickCloseButton',[me,event]);},openMenu:function(){var me=this,opts=me.opts,menuWidth=me.$offCanvas.outerWidth();if(me.isOpened){return;}
me.isOpened=true;$.publish('plugin/swOffcanvasMenu/onBeforeOpenMenu',[me]);$html.addClass('no--scroll');$.overlay.open({onClose:$.proxy(me.closeMenu,me)});if(opts.moveWrapper){if(opts.direction==='fromRight'){menuWidth*=-1;}
me.$pageWrap.css('left',menuWidth);}
me.$offCanvas.addClass(opts.openClass);$.publish('plugin/swOffcanvasMenu/onOpenMenu',[me]);if(opts.mode==='ajax'&&opts.ajaxURL){$.ajax({url:opts.ajaxURL,success:function(result){me.$offCanvas.html(result);}});}},closeMenu:function(){var me=this,opts=me.opts;if(!me.isOpened){return;}
me.isOpened=false;$.overlay.close();$html.removeClass('no--scroll');if(opts.moveWrapper){me.$pageWrap.css('left',0);}
me.$offCanvas.removeClass(opts.openClass);$.publish('plugin/swOffcanvasMenu/onCloseMenu',[me]);},destroy:function(){var me=this,opts=me.opts;me.closeMenu();me.$offCanvas.removeClass(opts.offCanvasElementCls).removeClass(opts.activeMenuCls).removeClass(opts.openClass).prop('style','');if(opts.moveWrapper){me.$pageWrap.prop('style','');}
me.$el.off(me.getEventName('click'),opts.closeButtonSelector);$.unsubscribe(me.getEventName('plugin/swOffcanvasMenu/onBeforeOpenMenu'));me._destroy();}});})(jQuery);;(function($,StateManager,window){'use strict';var msPointerEnabled=window.navigator.msPointerEnabled,$body=$('body');$.plugin('swSearch',{defaults:{activeCls:'is--active',searchFieldSelector:'.main-search--field',resultsSelector:'.main-search--results',resultLinkSelector:'.search-result--link',resultItemSelector:'.result--item',loadingIndicatorSelector:'.form--ajax-loader',headerSelector:'.header-main',activeHeaderClass:'is--active-searchfield',triggerSelector:'.entry--trigger',requestUrl:'',keyBoardNavigation:true,activeOnStart:false,minLength:3,searchDelay:250,animationSpeed:200,keyMap:{'UP':38,'DOWN':40,'ENTER':13}},init:function(){var me=this,$el=me.$el,opts=me.opts;me.applyDataAttributes();me.requestURL=opts.requestUrl||window.controller.ajax_search;if(!me.requestURL){throw new Error('Parameter "requestUrl" needs to be set.');}
var convertUrlToRelativeUrl=function(url){url=url.replace('https:','');url=url.replace('http:','');return url;};me.requestURL=convertUrlToRelativeUrl(me.requestURL);me.$searchField=$el.find(opts.searchFieldSelector);me.$results=$el.find(opts.resultsSelector);me.$loader=$el.find(opts.loadingIndicatorSelector);me.$toggleSearchBtn=$el.find(opts.triggerSelector);me.$mainHeader=$(opts.headerSelector);me.lastSearchTerm='';me.keyupTimeout=0;me._isSubmitting=false;me.registerListeners();},registerListeners:function(){var me=this,opts=me.opts,$searchField=me.$searchField,$formElement=me.$searchField.closest('form');me._on($searchField,'keyup',$.proxy(me.onKeyUp,me));me._on($searchField,'keydown',$.proxy(me.onKeyDown,me));me._on(me.$toggleSearchBtn,'click',$.proxy(me.onClickSearchEntry,me));me._on($formElement,'submit',$.proxy(me.onSubmit,me));if(msPointerEnabled){me.$results.on('click',opts.resultLinkSelector,function(event){window.location.href=$(event.currentTarget).attr('href');});}
StateManager.registerListener({state:'xs',enter:function(){if(opts.activeOnStart){me.openMobileSearch();}},exit:function(){me.closeMobileSearch();}});$.publish('plugin/swSearch/onRegisterEvents',[me]);},onKeyDown:function(event){var me=this,opts=me.opts,keyMap=opts.keyMap,keyCode=event.which,navKeyPressed=opts.keyBoardNavigation&&(keyCode===keyMap.UP||keyCode===keyMap.DOWN||keyCode===keyMap.ENTER);$.publish('plugin/swSearch/onKeyDown',[me,event]);if(navKeyPressed&&me.$results.hasClass(opts.activeCls)){me.onKeyboardNavigation(keyCode);event.preventDefault();return false;}
return true;},onKeyUp:function(event){var me=this,opts=me.opts,term=me.$searchField.val()+'',timeout=me.keyupTimeout;$.publish('plugin/swSearch/onKeyUp',[me,event]);if(timeout){window.clearTimeout(timeout);}
if(term.length<opts.minLength){me.lastSearchTerm='';me.closeResult();return;}
if(term===me.lastSearchTerm){return;}
me.keyupTimeout=window.setTimeout($.proxy(me.triggerSearchRequest,me,term),opts.searchDelay);},onSubmit:function(event){var me=this;if(me._isSubmitting){event.preventDefault();return;}
me._isSubmitting=true;},triggerSearchRequest:function(searchTerm){var me=this;me.$loader.fadeIn(me.opts.animationSpeed);me.lastSearchTerm=$.trim(searchTerm);$.publish('plugin/swSearch/onSearchRequest',[me,searchTerm]);if(me.lastSearchAjax){me.lastSearchAjax.abort();}
me.lastSearchAjax=$.ajax({url:me.requestURL,dataType:'html',data:{'sSearch':me.lastSearchTerm},'success':function(response){me.showResult(response);$.publish('plugin/swSearch/onSearchResponse',[me,searchTerm,response]);}});},showResult:function(response){var me=this,opts=me.opts;me.$loader.fadeOut(opts.animationSpeed);me.$results.empty().html(response).addClass(opts.activeCls).show();if(!StateManager.isCurrentState('xs')){$body.on(me.getEventName('click touchstart'),$.proxy(me.onClickBody,me));}
picturefill();$.publish('plugin/swSearch/onShowResult',[me]);},closeResult:function(){var me=this;me.$results.removeClass(me.opts.activeCls).hide().empty();$.publish('plugin/swSearch/onCloseResult',[me]);},onClickBody:function(event){var me=this,target=event.target,pluginEl=me.$el[0],resultsEl=me.$results[0];if(target===pluginEl||target===resultsEl||$.contains(pluginEl,target)||$.contains(resultsEl,target)){return;}
$body.off(me.getEventName('click touchstart'));me.closeMobileSearch();},onKeyboardNavigation:function(keyCode){var me=this,opts=me.opts,keyMap=opts.keyMap,$results=me.$results,activeClass=opts.activeCls,$selected=$results.find('.'+activeClass),$resultItems;$.publish('plugin/swSearch/onKeyboardNavigation',[me,keyCode]);if(keyCode===keyMap.UP||keyCode===keyMap.DOWN){$resultItems=$results.find(opts.resultItemSelector);if(!$selected.length&&keyCode==keyMap.DOWN){me.selectFirstResultItem($resultItems);return;}
if(!$selected.length&&keyCode==keyMap.UP){me.selectLastResultItem($resultItems);return;}
$resultItems.removeClass(activeClass);if(me.selectResultItem(keyCode,$selected)){return;}}
switch(keyCode){case keyMap.DOWN:me.selectFirstResultItem($resultItems);break;case keyMap.UP:me.selectLastResultItem($resultItems);break;case keyMap.ENTER:me.onPressEnter($selected);break;}},onClickSearchEntry:function(event){var me=this,$el=me.$el,opts=me.opts;$.publish('plugin/swSearch/onClickSearchEntry',[me,event]);if(!StateManager.isCurrentState('xs')){return;}
event.preventDefault();event.stopPropagation();$el.hasClass(opts.activeCls)?me.closeMobileSearch():me.openMobileSearch();},openMobileSearch:function(){var me=this,$el=me.$el,opts=me.opts,activeCls=opts.activeCls;$body.on(me.getEventName('click touchstart'),$.proxy(me.onClickBody,me));$el.addClass(activeCls);me.$toggleSearchBtn.addClass(activeCls);me.$mainHeader.addClass(opts.activeHeaderClass);me.$searchField.focus();$.publish('plugin/swSearch/onOpenMobileSearch',[me]);},closeMobileSearch:function(){var me=this,$el=me.$el,opts=me.opts,activeCls=opts.activeCls;$el.removeClass(activeCls);me.$toggleSearchBtn.removeClass(activeCls);me.$mainHeader.removeClass(opts.activeHeaderClass);me.$searchField.blur();$.publish('plugin/swSearch/onCloseMobileSearch',[me]);me.closeResult();},selectFirstResultItem:function(resultItems){var me=this,opts=me.opts,activeClass=opts.activeCls;$.publish('plugin/swSearch/onSelectFirstResultItem',[me,resultItems]);resultItems.first().addClass(activeClass);},selectLastResultItem:function(resultItems){var me=this,opts=me.opts,activeClass=opts.activeCls;$.publish('plugin/swSearch/onSelectLastResultItem',[me,resultItems]);resultItems.last().addClass(activeClass);},selectResultItem:function(keyCode,$selected){var me=this,opts=me.opts,keyMap=opts.keyMap,activeClass=opts.activeCls,$nextSibling;$.publish('plugin/swSearch/onSelectNextResultItem',[me,keyCode]);$nextSibling=$selected[(keyCode===keyMap.DOWN)?'next':'prev'](opts.resultItemSelector);if($nextSibling.length){$nextSibling.addClass(activeClass);return true;}
return false;},onPressEnter:function($selected){var me=this,opts=me.opts;$.publish('plugin/swSearch/onPressEnter',[me,$selected]);if($selected.length){window.location.href=$selected.find(opts.resultLinkSelector).attr('href');return;}
me.$searchField.parent().submit();},destroy:function(){var me=this;me.closeMobileSearch();$body.off(me.getEventName('click touchstart'));me._destroy();}});})(jQuery,StateManager,window);;(function($){$.plugin('swTabMenu',{defaults:{'pluginClass':'js--tab-menu','tabContainerSelector':'.tab--navigation','tabSelector':'.tab--link','containerListSelector':'.tab--container-list','containerSelector':'.tab--container','contentSelector':'.tab--content','hasContentClass':'has--content','activeTabClass':'is--active','activeContainerClass':'is--active','startIndex':-1,'scrollable':false},init:function(){var me=this,opts=me.opts,$el=me.$el,$container,$tab;me.applyDataAttributes();$el.addClass(opts.pluginClass);me.$tabContainer=$el.find(opts.tabContainerSelector);me.$containerList=$el.find(opts.containerListSelector);me.$tabs=me.$tabContainer.find(opts.tabSelector);me.$container=me.$containerList.find(opts.containerSelector);me.$container.each(function(i,el){$container=$(el);$tab=$(me.$tabs.get(i));if($container.find(opts.contentSelector).html().trim().length){$container.addClass(opts.hasContentClass);$tab.addClass(opts.hasContentClass);if(opts.startIndex===-1){$tab.addClass(opts.activeTabClass);opts.startIndex=i;}}});if(me.opts.scrollable){me.$el.swMenuScroller({'listSelector':me.$tabContainer});}
opts.startIndex=Math.max(opts.startIndex,0);me._index=null;me.registerEventListeners();me.changeTab(opts.startIndex);},registerEventListeners:function(){var me=this;me.$tabs.each(function(i,el){me._on(el,'click touchstart',$.proxy(me.changeTab,me,i));});$.publish('plugin/swTabMenu/onRegisterEvents',[me]);},changeTab:function(index,event){var me=this,opts=me.opts,activeTabClass=opts.activeTabClass,activeContainerClass=opts.activeContainerClass,$tab,tabId,dataUrl,$container;if(event){event.preventDefault();}
if(index===me._index){return;}
me._index=index;$tab=$(me.$tabs.get(index));$container=$(me.$container.get(index));me.$tabContainer.find('.'+activeTabClass).removeClass(activeTabClass);$tab.addClass(activeTabClass);me.$containerList.find('.'+activeContainerClass).removeClass(activeContainerClass);$container.addClass(activeContainerClass);dataUrl=$tab.attr('data-url');tabId=$container.attr('data-tab-id');if($tab.attr('data-mode')==='remote'&&dataUrl){$container.load(dataUrl);}
if(tabId!==undefined){$.publish('onShowContent-'+tabId,[me,index]);}
$.publish('plugin/swTabMenu/onChangeTab',[me,index]);},destroy:function(){var me=this,menuScroller=me.$el.data('plugin_swMenuScroller');if(menuScroller!==undefined){menuScroller.destroy();}
me.$el.removeClass(me.opts.pluginClass);me._destroy();}});})(jQuery);;(function($,Modernizr,window,Math){'use strict';var transitionProperty=StateManager.getVendorProperty('transition'),transformProperty=StateManager.getVendorProperty('transform'),killEvent=function(event){event.preventDefault();event.stopPropagation();};$.plugin('swImageSlider',{defaults:{animationSpeed:350,animationEasing:'cubic-bezier(.2,.89,.75,.99)',thumbnails:true,dotNavigation:true,arrowControls:true,touchControls:true,autoSlide:false,pinchToZoom:false,swipeToSlide:true,pullPreview:false,doubleTap:false,doubleTapPeriod:400,preventScrolling:false,minZoom:1,maxZoom:'auto',moveTolerance:30,swipeTolerance:50,swipePeriod:250,pullTolerance:'auto',startIndex:0,autoSlideInterval:5000,loopSlides:false,imageContainerSelector:'.image-slider--container',imageSlideSelector:'.image-slider--slide',thumbnailContainerSelector:'.image-slider--thumbnails',thumbnailSlideSelector:'.image-slider--thumbnails-slide',thumbnailSelector:'.thumbnail--link',dotNavSelector:'.image-slider--dots',dotLinkSelector:'.dot--link',thumbnailArrowCls:'thumbnails--arrow',leftArrowCls:'arrow is--left',rightArrowCls:'arrow is--right',thumbnailArrowTopCls:'is--top',thumbnailArrowLeftCls:'is--left',thumbnailArrowRightCls:'is--right',thumbnailArrowBottomCls:'is--bottom',activeStateClass:'is--active',dragClass:'is--dragging',noThumbClass:'no--thumbnails',imageSelector:'.image-slider--item img',itemSelector:'.image-slider--item',hiddenClass:'is--hidden'},init:function(){var me=this,opts=me.opts;me.applyDataAttributes();me._$slideContainer=me.$el.find(opts.imageContainerSelector);me._$slide=me._$slideContainer.find(opts.imageSlideSelector);me._slideIndex=opts.startIndex;me._slideInterval=0;me._$currentImage=null;me._minZoom=parseFloat(opts.minZoom)||1;me._maxZoom=parseFloat(opts.maxZoom);me._autoScale=!me._maxZoom&&(me._maxZoom=me._minZoom);if(opts.thumbnails){me._$thumbnailContainer=me.$el.find(opts.thumbnailContainerSelector);me._$thumbnailSlide=me._$thumbnailContainer.find(opts.thumbnailSlideSelector);me._thumbnailOrientation=me.getThumbnailOrientation();me._thumbnailOffset=0;me.createThumbnailArrows();}
if(opts.dotNavigation){me._$dotNav=me.$el.find(opts.dotNavSelector);me._$dots=me._$dotNav.find(opts.dotLinkSelector);me.setActiveDot(me._slideIndex);}
me.trackItems();if(opts.arrowControls){me.createArrows();}
if(opts.thumbnails){me.trackThumbnailControls();me.setActiveThumbnail(me._slideIndex);}
me.setIndex(me._slideIndex);me._grabImage=false;me._startTouchPoint=new Vector(0,0);me._imageTranslation=new Vector(0,0);me._imageScale=1;me._touchDistance=0;me._lastTouchTime=0;me._lastMoveTime=0;me._lockSlide=false;me.registerEvents();},registerEvents:function(){var me=this,opts=me.opts,$slide=me._$slide;if(opts.touchControls){me._on($slide,'touchstart mousedown',$.proxy(me.onTouchStart,me));me._on($slide,'touchmove mousemove',$.proxy(me.onTouchMove,me));me._on($slide,'touchend mouseup mouseleave',$.proxy(me.onTouchEnd,me));me._on($slide,'MSHoldVisual',killEvent);me._on($slide,'click',$.proxy(me.onClick,me));if(!opts.preventScrolling&&('ontouchstart'in window||navigator.msMaxTouchPoints)){me._on($slide,'movestart',function(e){if((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY)){me._lockSlide=true;e.preventDefault();}});}
if(opts.pinchToZoom){me._on($slide,'mousewheel DOMMouseScroll scroll',$.proxy(me.onScroll,me));}
if(opts.doubleTap){me._on($slide,'dblclick',$.proxy(me.onDoubleClick,me));}}
if(opts.arrowControls){me._on(me._$arrowLeft,'click touchstart',$.proxy(me.onLeftArrowClick,me));me._on(me._$arrowRight,'click touchstart',$.proxy(me.onRightArrowClick,me));}
if(opts.thumbnails){me._$thumbnails.each($.proxy(me.applyClickEventHandler,me));me._on(me._$thumbnailArrowPrev,'click touchstart',$.proxy(me.onThumbnailPrevArrowClick,me));me._on(me._$thumbnailArrowNext,'click touchstart',$.proxy(me.onThumbnailNextArrowClick,me));if(opts.touchControls){me._on(me._$thumbnailSlide,'touchstart',$.proxy(me.onThumbnailSlideTouch,me));me._on(me._$thumbnailSlide,'touchmove',$.proxy(me.onThumbnailSlideMove,me));}}
if(opts.dotNavigation&&me._$dots){me._$dots.each($.proxy(me.applyClickEventHandler,me));}
if(opts.autoSlide){me.startAutoSlide();me._on(me.$el,'mouseenter',$.proxy(me.stopAutoSlide,me));me._on(me.$el,'mouseleave',$.proxy(me.startAutoSlide,me));}
StateManager.on('resize',me.onResize,me);$.publish('plugin/swImageSlider/onRegisterEvents',[me]);},onTouchStart:function(event){var me=this,opts=me.opts,pointers=me.getPointers(event),pointerA=pointers[0],currTime=Date.now(),startPoint=me._startTouchPoint,startX=startPoint.x,startY=startPoint.y,distance,deltaX,deltaY;startPoint.set(pointerA.clientX,pointerA.clientY);if(pointers.length===1){me._lastMoveTime=currTime;if(opts.autoSlide){me.stopAutoSlide();}
if(event.originalEvent instanceof MouseEvent){event.preventDefault();me._grabImage=true;me._$slideContainer.addClass(opts.dragClass);return;}
if(!opts.doubleTap){return;}
deltaX=Math.abs(pointerA.clientX-startX);deltaY=Math.abs(pointerA.clientY-startY);distance=Math.sqrt(deltaX*deltaX+deltaY*deltaY);if(currTime-me._lastTouchTime<opts.doubleTapPeriod&&distance<=opts.moveTolerance){me.onDoubleClick(event);return;}
me._lastTouchTime=currTime;}else{event.preventDefault();}},onTouchMove:function(event){var me=this,opts=me.opts,touches=me.getPointers(event),touchA=touches[0],touchB=touches[1],scale=me._imageScale,startTouch=me._startTouchPoint,touchDistance=me._touchDistance,slideStyle=me._$slide[0].style,percentage,offset,distance,deltaX,deltaY;if(touches.length>2){return;}
if(touches.length===1){if(event.originalEvent instanceof MouseEvent&&!me._grabImage){return;}
deltaX=touchA.clientX-startTouch.x;deltaY=touchA.clientY-startTouch.y;if(scale===1){if(me._lockSlide){return;}
offset=(me._slideIndex*-100);percentage=(deltaX/me._$slide.width())*100;if(me._slideIndex===0&&deltaX>0){percentage*=Math.atan(percentage)/Math.PI;}
if(me._slideIndex===me._itemCount-1&&deltaX<0){percentage*=Math.atan(percentage)/-Math.PI;}
if(transitionProperty&&transformProperty){slideStyle[transitionProperty]='none';slideStyle[transformProperty]='translateX('+(offset+percentage)+'%)';}else{slideStyle.left=(offset+percentage)+'%';}
if(opts.preventScrolling){event.preventDefault();}
return;}
startTouch.set(touchA.clientX,touchA.clientY);me.translate(deltaX/scale,deltaY/scale);event.preventDefault();return;}
if(!opts.pinchToZoom||!touchB){return;}
deltaX=Math.abs(touchA.clientX-touchB.clientX);deltaY=Math.abs(touchA.clientY-touchB.clientY);distance=Math.sqrt(deltaX*deltaX+deltaY*deltaY);if(touchDistance===0){me._touchDistance=distance;return;}
me.scale((distance-touchDistance)/100);me._touchDistance=distance;},onTouchEnd:function(event){var me=this,opts=me.opts,touches=event.changedTouches,remaining=event.originalEvent.touches,touchA=(touches&&touches[0])||event.originalEvent,touchB=remaining&&remaining[0],swipeTolerance=opts.swipeTolerance,pullTolerance=(typeof opts.pullTolerance==='number')?opts.pullTolerance:me._$slide.width()/3,startPoint=me._startTouchPoint,deltaX,deltaY,absX,absY,swipeValid,pullValid;if(event.originalEvent instanceof MouseEvent&&!me._grabImage){return;}
me._touchDistance=0;me._grabImage=false;me._$slideContainer.removeClass(opts.dragClass);me._lockSlide=false;if(touchB){startPoint.set(touchB.clientX,touchB.clientY);return;}
if(opts.autoSlide){me.startAutoSlide();}
if(!opts.swipeToSlide||me._imageScale>1){return;}
deltaX=startPoint.x-touchA.clientX;deltaY=startPoint.y-touchA.clientY;absX=Math.abs(deltaX);absY=Math.abs(deltaY);swipeValid=(Date.now()-me._lastMoveTime)<opts.swipePeriod&&absX>swipeTolerance&&absY<swipeTolerance;pullValid=(absX>=pullTolerance);if(Math.sqrt(deltaX*deltaX+deltaY*deltaY)>opts.moveTolerance){event.preventDefault();}
if(pullValid||swipeValid){(deltaX<0)?me.slidePrev():me.slideNext();return;}
me.slide(me._slideIndex);},onClick:function(event){var me=this,opts=me.opts,touches=event.changedTouches,touchA=(touches&&touches[0])||event.originalEvent,startPoint=me._startTouchPoint,deltaX=startPoint.x-touchA.clientX,deltaY=startPoint.y-touchA.clientY;if(Math.sqrt(deltaX*deltaX+deltaY*deltaY)>opts.moveTolerance){event.preventDefault();event.stopImmediatePropagation();}
$.publish('plugin/swImageSlider/onClick',[me,event]);},onScroll:function(event){var me=this,e=event.originalEvent;if((e.detail?e.detail*-1:e.wheelDelta)>0){me.scale(0.25);}else{me.scale(-0.25);}
event.preventDefault();$.publish('plugin/swImageSlider/onScroll',[me,event]);},onDoubleClick:function(event){var me=this;if(!me.opts.doubleTap){return;}
event.preventDefault();if(me._imageScale<=1){me.scale(1,true);}else{me.setScale(1,true);}
$.publish('plugin/swImageSlider/onDoubleClick',[me,event]);},onLeftArrowClick:function(event){var me=this;event.preventDefault();me.slidePrev();$.publish('plugin/swImageSlider/onLeftArrowClick',[me,event]);},onRightArrowClick:function(event){var me=this;event.preventDefault();me.slideNext();$.publish('plugin/swImageSlider/onRightArrowClick',[me,event]);},onThumbnailPrevArrowClick:function(event){event.preventDefault();var me=this,$container=me._$thumbnailContainer,size=me._thumbnailOrientation==='horizontal'?$container.innerWidth():$container.innerHeight();me.setThumbnailSlidePosition(me._thumbnailOffset+(size/2),true);$.publish('plugin/swImageSlider/onThumbnailPrevArrowClick',[me,event]);},onThumbnailNextArrowClick:function(event){event.preventDefault();var me=this,$container=me._$thumbnailContainer,size=me._thumbnailOrientation==='horizontal'?$container.innerWidth():$container.innerHeight();me.setThumbnailSlidePosition(me._thumbnailOffset-(size/2),true);$.publish('plugin/swImageSlider/onThumbnailNextArrowClick',[me,event]);},onMouseLeave:function(event){var me=this;me._grabImage=false;me._$slideContainer.removeClass(me.opts.dragClass);me.slide(me._slideIndex);$.publish('plugin/swImageSlider/onMouseLeave',[me,event]);},onResize:function(newWidth){var me=this;me.updateMaxZoomValue();me.scale(0);me.translate(0,0);if(me.opts.thumbnails){me.trackThumbnailControls();}
$.publish('plugin/swImageSlider/onResize',[me,newWidth]);},onThumbnailSlideTouch:function(event){var me=this,pointers=me.getPointers(event),pointerA=pointers[0];me._startTouchPoint.set(pointerA.clientX,pointerA.clientY);$.publish('plugin/swImageSlider/onThumbnailSlideTouch',[me,event,pointerA.clientX,pointerA.clientY]);},onThumbnailSlideMove:function(event){event.preventDefault();var me=this,pointers=me.getPointers(event),pointerA=pointers[0],startPoint=me._startTouchPoint,isHorizontal=me._thumbnailOrientation==='horizontal',posA=isHorizontal?pointerA.clientX:pointerA.clientY,posB=isHorizontal?startPoint.x:startPoint.y,delta=posA-posB;startPoint.set(pointerA.clientX,pointerA.clientY);me.setThumbnailSlidePosition(me._thumbnailOffset+delta,false);me.trackThumbnailControls();$.publish('plugin/swImageSlider/onThumbnailSlideTouch',[me,event,pointerA.clientX,pointerA.clientY]);},getPointers:function(event){var origEvent=event.originalEvent||event;return origEvent.touches||[origEvent];},getTransformedPosition:function(x,y,scale){var me=this,$image=me._$currentImage,$container=me._$slideContainer,minX=Math.max(0,(($image.width()*scale-$container.width())/scale)/2),minY=Math.max(0,(($image.height()*scale-$container.height())/scale)/2),newPos=new Vector(Math.max(minX*-1,Math.min(minX,x)),Math.max(minY*-1,Math.min(minY,y)));$.publish('plugin/swImageSlider/onGetTransformedPosition',[me,newPos,x,y,scale]);return newPos;},getMinScale:function(){return this._minZoom;},getMaxScale:function(){return this._maxZoom;},setTranslation:function(x,y){var me=this,newPos=me.getTransformedPosition(x,y,me._imageScale);me._imageTranslation.set(newPos.x,newPos.y);me.updateTransform(false);$.publish('plugin/swImageSlider/onSetTranslation',[me,x,y]);},translate:function(x,y){var me=this,translation=me._imageTranslation;me.setTranslation(translation.x+x,translation.y+y);$.publish('plugin/swImageSlider/onTranslate',[me,x,y]);},setScale:function(scale,animate,callback){var me=this,oldScale=me._imageScale;me.updateMaxZoomValue();me._imageScale=Math.max(me._minZoom,Math.min(me._maxZoom,scale));if(me._imageScale===oldScale){if(typeof callback==='function'){callback.call(me);}
return;}
me.updateTransform(animate,callback);$.publish('plugin/swImageSlider/onSetScale',[me,scale,animate,callback]);},getScale:function(){return this._imageScale;},scale:function(factor,animate,callback){var me=this;me.setScale(me._imageScale+factor,animate,callback);$.publish('plugin/swImageSlider/onScale',[me,factor,animate,callback]);},updateTransform:function(animate,callback){var me=this,translation=me._imageTranslation,scale=me._imageScale,newPosition=me.getTransformedPosition(translation.x,translation.y,scale),image=me._$currentImage[0],animationSpeed=me.opts.animationSpeed;translation.set(newPosition.x,newPosition.y);image.style[transitionProperty]=animate?('all '+animationSpeed+'ms'):'';image.style[transformProperty]='scale('+scale+') translate('+translation.x+'px, '+translation.y+'px)';$.publish('plugin/swImageSlider/onUpdateTransform',[me,animate,callback]);if(!callback){return;}
if(!animate){callback.call(me);return;}
setTimeout($.proxy(callback,me),animationSpeed);},applyClickEventHandler:function(index,el){var me=this,$el=$(el),i=index||$el.index();me._on($el,'click',function(event){event.preventDefault();me.slide(i);});$.publish('plugin/swImageSlider/onApplyClickEventHandler',[me,index,el]);},createArrows:function(){var me=this,opts=me.opts,hiddenClass=' '+opts.hiddenClass;me._$arrowLeft=$('<a>',{'class':opts.leftArrowCls+((opts.loopSlides||me._slideIndex>0)&&me._itemCount>1?'':hiddenClass)}).appendTo(me._$slideContainer);me._$arrowRight=$('<a>',{'class':opts.rightArrowCls+((opts.loopSlides||me._slideIndex<me._itemCount-1)&&me._itemCount>1?'':hiddenClass)}).appendTo(me._$slideContainer);$.publish('plugin/swImageSlider/onCreateArrows',[me,me._$arrowLeft,me._$arrowRight]);},createThumbnailArrows:function(){var me=this,opts=me.opts,isHorizontal=(me._thumbnailOrientation==='horizontal'),prevClass=isHorizontal?opts.thumbnailArrowLeftCls:opts.thumbnailArrowTopCls,nextClass=isHorizontal?opts.thumbnailArrowRightCls:opts.thumbnailArrowBottomCls;me._$thumbnailArrowPrev=$('<a>',{'class':opts.thumbnailArrowCls+' '+prevClass}).appendTo(me._$thumbnailContainer);me._$thumbnailArrowNext=$('<a>',{'class':opts.thumbnailArrowCls+' '+nextClass}).appendTo(me._$thumbnailContainer);$.publish('plugin/swImageSlider/onCreateThumbnailArrows',[me,me._$thumbnailArrowPrev,me._$thumbnailArrowNext]);},trackItems:function(){var me=this,opts=me.opts;me._$items=me._$slide.find(opts.itemSelector);picturefill();me._$images=me._$slide.find(opts.imageSelector);if(opts.thumbnails){me._$thumbnails=me._$thumbnailContainer.find(opts.thumbnailSelector);me._thumbnailCount=me._$thumbnails.length;if(me._thumbnailCount===0){me.$el.addClass(opts.noThumbClass);opts.thumbnails=false;}}
me._itemCount=me._$items.length;$.publish('plugin/swImageSlider/onTrackItems',[me]);},setIndex:function(index){var me=this,slideStyle=me._$slide[0].style,percentage=((index||me._slideIndex)*-100);if(transformProperty&&transitionProperty){slideStyle[transitionProperty]='none';slideStyle[transformProperty]='translateX('+percentage+'%)';}else{slideStyle.left=percentage+'%';}
me._$currentImage=$(me._$images[index]);me.updateMaxZoomValue();$.publish('plugin/swImageSlider/onSetIndex',[me,index]);},getIndex:function(event){return this._slideIndex;},updateMaxZoomValue:function(){var me=this,$currentImage=me._$currentImage,image=$currentImage[0];if(!me._autoScale){return;}
if(!image){me._maxZoom=me._minZoom;return;}
me._maxZoom=Math.max(image.naturalWidth,image.naturalHeight)/Math.max($currentImage.width(),$currentImage.height());$.publish('plugin/swImageSlider/onUpdateMaxZoomValue',[me,me._maxZoom]);},getThumbnailOrientation:function(){var $container=this._$thumbnailContainer;return($container.innerWidth()>$container.innerHeight())?'horizontal':'vertical';},setActiveThumbnail:function(index){var me=this,isHorizontal=me._thumbnailOrientation==='horizontal',orientation=isHorizontal?'left':'top',$thumbnail=me._$thumbnails.eq(index),$container=me._$thumbnailContainer,thumbnailPos=$thumbnail.position(),slidePos=me._$thumbnailSlide.position(),slideOffset=slidePos[orientation],posA=thumbnailPos[orientation]*-1,posB=thumbnailPos[orientation]+(isHorizontal?$thumbnail.outerWidth():$thumbnail.outerHeight()),containerSize=isHorizontal?$container.width():$container.height(),activeClass=me.opts.activeStateClass,newPos;if(posA<slideOffset&&posB*-1<slideOffset+(containerSize*-1)){newPos=containerSize-Math.max(posB,containerSize);}else{newPos=Math.max(posA,slideOffset);}
me._$thumbnails.removeClass(activeClass);$thumbnail.addClass(activeClass);me.setThumbnailSlidePosition(newPos,true);$.publish('plugin/swImageSlider/onSetActiveThumbnail',[me,index]);},setActiveDot:function(index){var me=this,$dots=me._$dots;if(me.opts.dotNavigation&&$dots){$dots.removeClass(me.opts.activeStateClass);$dots.eq(index||me._slideIndex).addClass(me.opts.activeStateClass);}
$.publish('plugin/swImageSlider/onSetActiveDot',[me,index]);},setThumbnailSlidePosition:function(offset,animate){var me=this,$slide=me._$thumbnailSlide,$container=me._$thumbnailContainer,isHorizontal=me._thumbnailOrientation==='horizontal',sizeA=isHorizontal?$container.innerWidth():$container.innerHeight(),sizeB=isHorizontal?$slide.outerWidth(true):$slide.outerHeight(true),min=Math.min(0,sizeA-sizeB),css={};me._thumbnailOffset=Math.max(min,Math.min(0,offset));css[isHorizontal?'left':'top']=me._thumbnailOffset;css[isHorizontal?'top':'left']='auto';if(!animate){$slide.css(css);}else{$slide[Modernizr.csstransitions?'transition':'animate'](css,me.animationSpeed,$.proxy(me.trackThumbnailControls,me));}
$.publish('plugin/swImageSlider/onSetThumbnailSlidePosition',[me,offset,animate]);},trackThumbnailControls:function(){var me=this,opts=me.opts,isHorizontal=me._thumbnailOrientation==='horizontal',$container=me._$thumbnailContainer,$slide=me._$thumbnailSlide,$prevArr=me._$thumbnailArrowPrev,$nextArr=me._$thumbnailArrowNext,activeCls=me.opts.activeStateClass,pos,orientation;if(!$slide){return;}
pos=$slide.position();orientation=me.getThumbnailOrientation();if(me._thumbnailOrientation!==orientation){$prevArr.toggleClass(opts.thumbnailArrowLeftCls,!isHorizontal).toggleClass(opts.thumbnailArrowTopCls,isHorizontal);$nextArr.toggleClass(opts.thumbnailArrowRightCls,!isHorizontal).toggleClass(opts.thumbnailArrowBottomCls,isHorizontal);me._thumbnailOrientation=orientation;me.setActiveThumbnail(me._slideIndex);}
if(me._thumbnailOrientation==='horizontal'){$prevArr.toggleClass(activeCls,pos.left<0);$nextArr.toggleClass(activeCls,($slide.innerWidth()+pos.left)>$container.innerWidth());}else{$prevArr.toggleClass(activeCls,pos.top<0);$nextArr.toggleClass(activeCls,($slide.innerHeight()+pos.top)>$container.innerHeight());}
$.publish('plugin/swImageSlider/onTrackThumbnailControls',[me]);},startAutoSlide:function(){var me=this;me.stopAutoSlide(me._slideInterval);me._slideInterval=window.setTimeout($.proxy(me.slideNext,me),me.opts.autoSlideInterval);$.publish('plugin/swImageSlider/onStartAutoSlide',[me,me._slideInterval]);},stopAutoSlide:function(){var me=this;window.clearTimeout(me._slideInterval);$.publish('plugin/swImageSlider/onStopAutoSlide',[me]);},slide:function(index,callback){var me=this,opts=me.opts,slideStyle=me._$slide[0].style;me._slideIndex=index;if(opts.thumbnails){me.setActiveThumbnail(index);me.trackThumbnailControls();}
if(opts.dotNavigation&&me._$dots){me.setActiveDot(index);}
if(opts.autoSlide){me.stopAutoSlide();me.startAutoSlide();}
me.resetTransformation(true,function(){if(transitionProperty&&transformProperty){slideStyle[transitionProperty]='all '+opts.animationSpeed+'ms '+opts.animationEasing;slideStyle[transformProperty]='translateX('+(index*-100)+'%)';if(typeof callback==='function'){setTimeout($.proxy(callback,me),opts.animationSpeed);}}else{me._$slide.animate({'left':(index*-100)+'%','easing':'ease-out'},opts.animationSpeed,$.proxy(callback,me));}});me._$currentImage=$(me._$images[index]);me.updateMaxZoomValue();if(opts.arrowControls){me._$arrowLeft.toggleClass(opts.hiddenClass,!opts.loopSlides&&index<=0);me._$arrowRight.toggleClass(opts.hiddenClass,!opts.loopSlides&&index>=me._itemCount-1);}
$.publish('plugin/swImageSlider/onSlide',[me,index,callback]);},resetTransformation:function(animate,callback){var me=this,translation=me._imageTranslation;me._touchDistance=0;if(me._imageScale!==1||translation.x!==0||translation.y!==0){me._imageScale=1;me._imageTranslation.set(0,0);me.updateTransform(animate,callback);}else if(callback){callback.call(me);}
$.publish('plugin/swImageSlider/onResetTransformation',[me,animate,callback]);},slideNext:function(){var me=this,newIndex=me._slideIndex+1,itemCount=me._itemCount,isLooping=me.opts.loopSlides;me._lastTouchTime=0;me.slide((newIndex>=itemCount&&isLooping)?0:Math.min(itemCount-1,newIndex));$.publish('plugin/swImageSlider/onSlideNext',[me,newIndex]);},slidePrev:function(){var me=this,newIndex=me._slideIndex-1,itemCount=me._itemCount,isLooping=me.opts.loopSlides;me._lastTouchTime=0;me.slide((newIndex<0&&isLooping)?itemCount-1:Math.max(0,newIndex));$.publish('plugin/swImageSlider/onSlidePrev',[me,newIndex]);},destroy:function(){var me=this,opts=me.opts;me.resetTransformation(false);me._$slideContainer=null;me._$items=null;me._$currentImage=null;if(opts.dotNavigation&&me._$dots){me._$dots.removeClass(me.opts.activeStateClass);me._$dotNav=null;me._$dots=null;}
if(opts.arrowControls){me._$arrowLeft.remove();me._$arrowRight.remove();}
if(opts.thumbnails){me._$thumbnailArrowPrev.remove();me._$thumbnailArrowNext.remove();me._$thumbnailContainer=null;me._$thumbnailSlide=null;me._$thumbnails.removeClass(me.opts.activeStateClass);me._$thumbnails=null;}
if(opts.autoSlide){me.stopAutoSlide();}
StateManager.off('resize',me.onResize,me);me._destroy();}});function Vector(x,y){var me=this;me.x=x||0;me.y=y||0;}
Vector.prototype.set=function(x,y){var me=this;me.x=(typeof x==='number')?x:me.x;me.y=(typeof y==='number')?y:me.y;};})(jQuery,Modernizr,window,Math);;(function($){'use strict';$.plugin('swImageZoom',{defaults:{showTitle:true,containerCls:'js--img-zoom--container',lensCls:'js--img-zoom--lens',flyoutCls:'js--img-zoom--flyout',titleContainerCls:'js--img-zoom--title',activeSelector:'.is--active',animationSpeed:300},init:function(){var me=this;me.applyDataAttributes();me.active=false;me.$container=me.$el.find('.image-slider--slide');me.imageBox=me.$el.find('.image--box');me.$imageElements=me.$el.find('.image--element');me.$thumbnails=me.$el.find('.thumbnail--link');me.$flyout=me.createFlyoutElement();me.$lens=me.createLensElement();if(me.opts.showTitle){me.$title=me.createTitleContainer();}
me.zoomImage=false;me.$activeImage=me.getActiveImageElement();me.flyoutWidth=me.$flyout.outerWidth();me.flyoutHeight=me.$flyout.outerHeight();me.registerEvents();},registerEvents:function(){var me=this;$('body').on('scroll.imageZoom',$.proxy(me.stopZoom,me));me._on(me.$container,'mousemove',$.proxy(me.onMouseMove,me));me._on(me.$container,'mouseout',$.proxy(me.stopZoom,me));me._on(me.$lens,'click',$.proxy(me.onLensClick,me));$.subscribe(me.getEventName('plugin/swImageSlider/onRightArrowClick'),$.proxy(me.stopZoom,me));$.subscribe(me.getEventName('plugin/swImageSlider/onLeftArrowClick'),$.proxy(me.stopZoom,me));$.subscribe(me.getEventName('plugin/swImageSlider/onClick'),$.proxy(me.stopZoom,me));$.subscribe(me.getEventName('plugin/swImageSlider/onLightbox'),$.proxy(me.stopZoom,me));$.publish('plugin/swImageZoom/onRegisterEvents',[me]);},createLensElement:function(){var me=this,$el=$('<div>',{'class':me.opts.lensCls,'html':'&nbsp;'}).appendTo(me.$container);$.publish('plugin/swImageZoom/onCreateLensElement',[me,$el]);return $el;},createFlyoutElement:function(){var me=this,$el=$('<div>',{'class':me.opts.flyoutCls}).appendTo(me.$el);$.publish('plugin/swImageZoom/onCreateFlyoutElement',[me,$el]);return $el;},createTitleContainer:function(){var me=this,$el;if(!me.$flyout.length||!me.opts.showTitle){return;}
$el=$('<div>',{'class':me.opts.titleContainerCls}).appendTo(me.$flyout);$.publish('plugin/swImageZoom/onCreateTitleContainer',[me,$el]);return $el;},getActiveImageThumbnail:function(){var me=this,$thumbnail=me.$thumbnails.filter(me.opts.activeSelector);$.publish('plugin/swImageZoom/onGetActiveImageThumbnail',[me,$thumbnail]);return $thumbnail;},getActiveImageElement:function(){var me=this,$el;me.$activeImageThumbnail=me.getActiveImageThumbnail();if(!me.$activeImageThumbnail.length){$el=me.$imageElements.eq(0);}else{$el=me.$imageElements.eq(me.$activeImageThumbnail.index());}
$.publish('plugin/swImageZoom/onGetActiveImageElement',[me,$el]);return $el;},setLensSize:function(factor){var me=this;me.lensWidth=me.flyoutWidth/factor;me.lensHeight=me.flyoutHeight/factor;if(me.lensWidth>me.imageWidth){me.lensWidth=me.imageWidth;}
if(me.lensHeight>me.imageHeight){me.lensHeight=me.imageHeight;}
me.$lens.css({'width':me.lensWidth,'height':me.lensHeight});$.publish('plugin/swImageZoom/onSetLensSize',[me,me.$lens,factor]);},setLensPosition:function(x,y){var me=this;me.$lens.css({'top':y,'left':x});$.publish('plugin/swImageZoom/onSetLensPosition',[me,me.$lens,x,y]);},showLens:function(){var me=this;me.$lens.stop(true,true).fadeIn(me.opts.animationSpeed);$.publish('plugin/swImageZoom/onShowLens',[me,me.$lens]);},hideLens:function(){var me=this;me.$lens.stop(true,true).fadeOut(me.opts.animationSpeed);$.publish('plugin/swImageZoom/onHideLens',[me,me.$lens]);},setZoomPosition:function(x,y){var me=this;me.$flyout.css('backgroundPosition',x+'px '+y+'px');$.publish('plugin/swImageZoom/onSetZoomPosition',[me,me.$flyout,x,y]);},showZoom:function(){var me=this;me.$flyout.stop(true,true).fadeIn(me.opts.animationSpeed);$.publish('plugin/swImageZoom/onShowZoom',[me,me.$flyout]);},hideZoom:function(){var me=this;me.$flyout.stop(true,true).fadeOut(me.opts.animationSpeed);$.publish('plugin/swImageZoom/onHideZoom',[me,me.$flyout]);},setImageTitle:function(title){var me=this;if(!me.opts.showTitle||!me.$title.length){return;}
me.$title.html('<span>'+(title||me.imageTitle)+'</span>');$.publish('plugin/swImageZoom/onSetImageTitle',[me,me.$title,title]);},onMouseMove:function(event){var me=this;if(!me.zoomImage){me.activateZoom();return;}
var containerOffset=me.$container.offset(),mouseX=event.pageX,mouseY=event.pageY,containerX=mouseX-containerOffset.left,containerY=mouseY-containerOffset.top,lensX=containerX-(me.lensWidth/2),lensY=containerY-(me.lensHeight/2),minX=me.imageOffset.left-containerOffset.left,minY=me.imageOffset.top-containerOffset.top,maxX=minX+me.imageWidth-me.$lens.outerWidth(),maxY=minY+me.imageHeight-me.$lens.outerHeight(),lensLeft=me.clamp(lensX,minX,maxX),lensTop=me.clamp(lensY,minY,maxY),zoomLeft=-(lensLeft-minX)*me.factor,zoomTop=-(lensTop-minY)*me.factor;if(minX>=maxX){zoomLeft=zoomLeft+(me.flyoutWidth/2)-(me.zoomImage.width/2);}
if(minY>=maxY){zoomTop=zoomTop+(me.flyoutHeight/2)-(me.zoomImage.height/2);}
if(mouseX>me.imageOffset.left&&mouseX<me.imageOffset.left+me.imageWidth&&mouseY>me.imageOffset.top&&mouseY<me.imageOffset.top+me.imageHeight){me.showLens();me.showZoom();me.setLensPosition(lensLeft,lensTop);me.setZoomPosition(zoomLeft,zoomTop);}else{me.stopZoom();}},setActiveImage:function(){var me=this;me.$activeImageElement=me.getActiveImageElement();me.$activeImage=me.$activeImageElement.find('img');me.imageTitle=me.$activeImageElement.attr('data-alt');me.imageWidth=me.$activeImage.innerWidth();me.imageHeight=me.$activeImage.innerHeight();me.imageOffset=me.$activeImage.offset();$.publish('plugin/swImageZoom/onSetActiveImage',me);},activateZoom:function(){var me=this;me.setActiveImage();if(!me.zoomImage){me.zoomImageUrl=me.$activeImageElement.attr('data-img-original');me.zoomImage=new Image();me.zoomImage.onload=function(){me.factor=me.zoomImage.width/me.$activeImage.innerWidth();me.setLensSize(me.factor);me.$flyout.css('background','url('+me.zoomImageUrl+') 0px 0px no-repeat #fff');if(me.opts.showTitle){me.setImageTitle(me.title);}
$.publish('plugin/swImageZoom/onZoomImageLoaded',[me,me.zoomImage]);};me.zoomImage.src=me.zoomImageUrl;}
$.publish('plugin/swImageZoom/onActivateZoom',me);me.active=true;},stopZoom:function(){var me=this;me.hideLens();me.hideZoom();me.zoomImage=false;me.active=false;$.publish('plugin/swImageZoom/onStopZoom',me);},onLensClick:function(event){$.publish('plugin/swImageZoom/onLensClick',[this,event]);},clamp:function(number,min,max){return Math.max(min,Math.min(max,number));},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swImageSlider/onRightArrowClick'));$.unsubscribe(me.getEventName('plugin/swImageSlider/onLeftArrowClick'));$.unsubscribe(me.getEventName('plugin/swImageSlider/onClick'));$.unsubscribe(me.getEventName('plugin/swImageSlider/onLightbox'));me.$lens.remove();me.$flyout.remove();me.$container.removeClass(me.opts.containerCls);$('body').off('scroll.imageZoom');me._destroy();}});})(jQuery);;(function($){'use strict';$.plugin('swCollapsePanel',{alias:'collapsePanel',defaults:{collapseTarget:false,contentSiblingSelector:'.collapse--content',collapseTargetCls:'js--collapse-target',collapsedStateCls:'is--collapsed',activeTriggerCls:'is--active',closeSiblings:false,animationSpeed:400,hashPrefix:'show-',action:'toggle'},init:function(){var me=this,opts=me.opts;me.applyDataAttributes();if(opts.collapseTarget){me.$targetEl=$(opts.collapseTarget);}else{me.$targetEl=me.$el.next(opts.contentSiblingSelector);}
me.$targetEl.addClass(opts.collapseTargetCls);me.handleHashParameter();me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$el,'click',function(e){e.preventDefault();switch(me.opts.action){case'open':me.openPanel();break;case'close':me.closePanel();break;default:me.toggleCollapse();}});$.publish('plugin/swCollapsePanel/onRegisterEvents',[me]);},toggleCollapse:function(){var me=this;if(me.$targetEl.hasClass(me.opts.collapsedStateCls)){me.closePanel();}else{me.openPanel();}
$.publish('plugin/swCollapsePanel/onToggleCollapse',[me]);},openPanel:function(){var me=this,opts=me.opts,$targetEl=me.$targetEl,$siblings=$('.'+opts.collapseTargetCls).not($targetEl),tabId=$targetEl.parent().attr('data-tab-id');me.$el.addClass(opts.activeTriggerCls);if($targetEl.hasClass(opts.collapsedStateCls)){return;}
$targetEl.finish().slideDown(opts.animationSpeed,function(){$.publish('plugin/swCollapsePanel/onOpen',[me]);}).addClass(opts.collapsedStateCls);if(opts.closeSiblings){$siblings.finish().slideUp(opts.animationSpeed,function(){$siblings.removeClass(opts.collapsedStateCls);$siblings.prev().removeClass(opts.activeTriggerCls);});}
if(tabId!==undefined){$.publish('onShowContent-'+tabId,[me]);}
$.publish('plugin/swCollapsePanel/onOpenPanel',[me]);},closePanel:function(){var me=this,opts=me.opts;me.$el.removeClass(opts.activeTriggerCls);if(!me.$targetEl.hasClass(opts.collapsedStateCls)){return;}
me.$targetEl.finish().slideUp(opts.animationSpeed,function(){me.$targetEl.removeClass(opts.collapsedStateCls);$.publish('plugin/swCollapsePanel/onClose',[me]);});$.publish('plugin/swCollapsePanel/onClosePanel',[me]);},handleHashParameter:function(){var me=this,hash=window.location.hash,prefixLength=me.opts.hashPrefix.length;if(hash.indexOf(me.opts.hashPrefix)!==1){return;}
if(!me.$targetEl.is('#'+hash.substr(prefixLength+1))){return;}
me.openPanel();},destroy:function(){var me=this,opts=me.opts;me.$el.removeClass(opts.activeTriggerCls);me.$targetEl.removeClass(opts.collapsedStateCls).removeClass(opts.collapseTargetCls).prop('style','');me._destroy();}});})(jQuery);;(function($){'use strict';$.plugin('swAutoSubmit',{defaults:{'loadingindicator':true},init:function(){var me=this;me.applyDataAttributes();me.$form=$(me.$el.parents('form')[0]);me._on(me.$el,'change',$.proxy(me.onChangeSelection,me));$.publish('plugin/swAutoSubmit/onRegisterEvents',[me]);},onChangeSelection:function(){var me=this;if(me.opts.loadingindicator){$.loadingIndicator.open({closeOnClick:false});}
$.publish('plugin/swAutoSubmit/onChangeSelection',[me]);me.$form.submit();}});})(jQuery);;(function($){'use strict';$.plugin('swScrollAnimate',{defaults:{scrollContainerSelector:'body, html',scrollTarget:0,animationSpeed:500,easing:'swing'},init:function(){var me=this,opts=me.opts;me.applyDataAttributes();me.$container=$(opts.scrollContainerSelector);if(typeof opts.scrollTarget==='string'){me.$targetEl=$(opts.scrollTarget);}
me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$el,'touchstart click',$.proxy(me.onClickElement,me));$.publish('plugin/swScrollAnimate/onRegisterEvents',[me]);},onClickElement:function(event){event.preventDefault();var me=this,opts=me.opts;$.publish('plugin/swScrollAnimate/onClickElement',[me,event]);if(me.$targetEl){me.scrollToElement(me.$targetEl);return;}
me.scrollToPosition(opts.scrollTarget);},scrollToElement:function($targetEl,offset){var me=this;if(!$targetEl.length){return;}
$.publish('plugin/swScrollAnimate/onScrollToElement',[me,$targetEl,offset]);me.scrollToPosition($targetEl.offset().top+~~(offset));},scrollToPosition:function(position){var me=this;me.$container.animate({scrollTop:position},me.opts.animationSpeed,me.opts.easing,function(){$.publish('plugin/swScrollAnimate/onScrollEnd',[me,position]);});$.publish('plugin/swScrollAnimate/onScrollToPosition',[me,position]);},destroy:function(){this._destroy();}});})(jQuery);;(function($,window){'use strict';var $window=$(window);jQuery.extend(jQuery.easing,{easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;}});$.plugin('swProductSlider',{defaults:{mode:'local',orientation:'horizontal',itemMinWidth:220,itemMinHeight:240,itemsPerSlide:1,infiniteSlide:true,autoSlide:false,autoSlideDirection:'next',autoSlideSpeed:4,autoScroll:false,autoScrollDirection:'next',autoScrollSpeed:1,scrollDistance:350,animationSpeed:400,arrowControls:true,arrowAction:'slide',wrapperCls:'product-slider',horizontalCls:'is--horizontal',verticalCls:'is--vertical',arrowCls:'product-slider--arrow',prevArrowCls:'arrow--prev',nextArrowCls:'arrow--next',containerSelector:'.product-slider--container',itemSelector:'.product-slider--item',ajaxCtrlUrl:null,ajaxCategoryID:null,ajaxMaxShow:30,ajaxShowLoadingIndicator:true,ajaxLoadingIndicatorCls:'js--loading-indicator indicator--absolute',ajaxLoadingIndicatorIconCls:'icon--default',initOnEvent:null},init:function(){var me=this;me.applyDataAttributes();me.autoScrollAnimation=false;me.autoSlideAnimation=false;me.bufferedCall=false;me.initialized=false;me.scrollingReachedEndOfItems=false;me.totalUniqueItems=0;me.itemsPerSlide=me.opts.itemsPerSlide;me.isLoading=false;me.isAnimating=false;if(me.opts.mode==='ajax'&&me.opts.ajaxCtrlUrl===null){console.error('The controller url for the ajax slider is not defined!');return;}
if(me.opts.mode==='ajax'&&me.opts.ajaxShowLoadingIndicator){me.showLoadingIndicator();}
if(me.opts.initOnEvent!==null){$.subscribe(me.getEventName(me.opts.initOnEvent),function(){if(!me.initialized){me.initSlider();me.registerEvents();}});}else{me.initSlider();me.registerEvents();}},update:function(){var me=this;if(!me.initialized||!me.$el.is(':visible')){return false;}
me.trackItems();me.setSizes();var copyCount=me.itemsCount-me.totalUniqueItems,copySize=me.itemsPerPage+me.itemsPerSlide;if(me.totalUniqueItems&&me.totalUniqueItems<=me.itemsPerPage){me.$items.slice(me.totalUniqueItems,me.itemsCount).remove();me.trackItems();}else if(me.totalUniqueItems&&copySize>copyCount){me.cloneItems(copyCount,copySize);me.trackItems();}else if(!me.totalUniqueItems&&me.isActive()&&me.opts.mode!=='ajax'){me.initInfiniteSlide();}
me.setPosition(0);me.trackArrows();$.publish('plugin/swProductSlider/onUpdate',[me]);},initSlider:function(){var me=this,opts=me.opts;me.$el.addClass(opts.wrapperCls);me.createContainer();me.trackItems();me.setSizes();me.currentPosition=me.getScrollPosition();if(me.itemsCount<=0&&opts.mode==='ajax'){me.loadItems(0,Math.min(me.itemsPerPage*2,opts.ajaxMaxShow),$.proxy(me.initSlider,me));return;}
if(me.opts.arrowControls&&me.isActive())me.createArrows();if(me.opts.autoScroll&&me.isActive())me.autoScroll();if(me.opts.autoSlide&&me.isActive())me.autoSlide();if(me.opts.mode!=='ajax'&&me.isActive()){me.initInfiniteSlide();}
me.initialized=true;$.publish('plugin/swProductSlider/onInitSlider',[me]);},registerEvents:function(){var me=this;me._on(me.$el,'touchstart mouseenter',$.proxy(me.onMouseEnter,me));me._on(me.$el,'mouseleave',$.proxy(me.onMouseLeave,me));me._on(me.$container,'scroll',$.proxy(me.onScroll,me));me._on($window,'resize',$.proxy(me.buffer,me,me.update,600));$.subscribe(me.getEventName('plugin/swTabMenu/onChangeTab'),$.proxy(me.update,me));$.subscribe(me.getEventName('plugin/swCollapsePanel/onOpenPanel'),$.proxy(me.update,me));$.publish('plugin/swProductSlider/onRegisterEvents',[me]);},isActive:function(){var me=this;return me.$items.length>me.itemsPerPage;},getScrollPosition:function(orientation){var me=this,o=orientation||me.opts.orientation;return(o==='vertical')?me.$container.scrollTop():me.$container.scrollLeft();},setPosition:function(position){var me=this,pos=position||0,method=(me.opts.orientation==='vertical')?'scrollTop':'scrollLeft';me.$container[method](pos);me.currentPosition=pos;$.publish('plugin/swProductSlider/onSetPosition',[me,pos]);},setSizes:function(orientation){var me=this,o=orientation||me.opts.orientation,containerSize=(o==='vertical')?me.$el.innerHeight():me.$el.innerWidth(),itemSize=(o==='vertical')?me.opts.itemMinHeight:me.opts.itemMinWidth;me.itemsPerPage=Math.floor(containerSize/itemSize);if(me.itemsPerPage<1)me.itemsPerPage=1;me.itemsPerSlide=Math.min(me.opts.itemsPerSlide,me.itemsPerPage);me.itemSizePercent=100/me.itemsPerPage;if(o==='vertical'){me.$items.css({'height':me.itemSizePercent+'%'});me.itemSize=Math.ceil(me.$items.outerHeight());}else{me.$items.css({'width':me.itemSizePercent+'%'});me.itemSize=Math.ceil(me.$items.outerWidth());}
window.picturefill();$.publish('plugin/swProductSlider/onSetSizes',[me,orientation]);},trackItems:function(){var me=this;me.$items=me.$container.find(me.opts.itemSelector);me.itemsCount=me.$items.length;$.publish('plugin/swProductSlider/onTrackItems',[me,me.items,me.itemsCount]);return me.itemsCount;},trackArrows:function(){var me=this;if(!me.$arrowPrev||!me.$arrowNext){if(me.isActive()&&me.opts.arrowControls)me.createArrows();return;}
if(!me.isActive()){me.$arrowPrev.hide();me.$arrowNext.hide();return;}
var slideEnd=me.currentPosition+me.$container[(me.opts.orientation==='vertical')?'outerHeight':'outerWidth']();me.$arrowPrev[(me.currentPosition>5)?'show':'hide']();me.$arrowNext[(slideEnd>=parseInt(me.itemSize*me.itemsCount,10)-5)?'hide':'show']();$.publish('plugin/swProductSlider/onTrackArrows',[me,me.$arrowPrev,me.$arrowNext]);},showLoadingIndicator:function(){var me=this;me.$ajaxLoadingIndicator=$('<div>',{'class':me.opts.ajaxLoadingIndicatorCls,'html':$('<i>',{'class':me.opts.ajaxLoadingIndicatorIconCls})}).appendTo(me.$el);},removeLoadingIndicator:function(){var me=this;if(me.$ajaxLoadingIndicator){me.$ajaxLoadingIndicator.remove();}},loadItems:function(start,limit,callback){var me=this,data={'start':start,'limit':limit};if(me.opts.ajaxCategoryID!==null){data['category']=me.opts.ajaxCategoryID;}
me.isLoading=true;$.publish('plugin/swProductSlider/onLoadItemsBefore',[me,data]);$.ajax({url:me.opts.ajaxCtrlUrl,method:'GET',data:data,success:function(response){me.removeLoadingIndicator();me.isLoading=false;me.$container.append(response);if(me.itemsCount===me.trackItems()){me.initInfiniteSlide();}
me.setSizes();me.trackArrows();$.publish('plugin/swProductSlider/onLoadItemsSuccess',[me,response]);if(typeof callback==='function'&&me.itemsCount>0){callback.call(me,response);}}});$.publish('plugin/swProductSlider/onLoadItems',[me]);},createContainer:function(orientation){var me=this,o=orientation||me.opts.orientation,orientationCls=(o==='vertical')?me.opts.verticalCls:me.opts.horizontalCls,$container=me.$el.find(me.opts.containerSelector);if(!$container.length){$container=$('<div>',{'class':me.opts.containerSelector.substr(1)}).appendTo(me.$el);}
$container.addClass(orientationCls);me.$container=$container;$.publish('plugin/swProductSlider/onCreateContainer',[me,$container,orientation]);return $container;},createArrows:function(){var me=this,orientationCls=(me.opts.orientation==='vertical')?me.opts.verticalCls:me.opts.horizontalCls;if(!me.opts.arrowControls||!me.isActive()){return;}
if(!me.$arrowPrev){me.$arrowPrev=$('<a>',{'class':me.opts.arrowCls+' '+
me.opts.prevArrowCls+' '+
orientationCls}).prependTo(me.$el);me._on(me.$arrowPrev,'click',$.proxy(me.onArrowClick,me,'prev'));}
if(!me.$arrowNext){me.$arrowNext=$('<a>',{'class':me.opts.arrowCls+' '+
me.opts.nextArrowCls+' '+
orientationCls}).prependTo(me.$el);me._on(me.$arrowNext,'click',$.proxy(me.onArrowClick,me,'next'));}
me.trackArrows();$.publish('plugin/swProductSlider/onCreateArrows',[me,me.$arrowPrev,me.$arrowNext]);},onArrowClick:function(type,event){var me=this,next=(me.opts.arrowAction==='scroll')?'scrollNext':'slideNext',prev=(me.opts.arrowAction==='scroll')?'scrollPrev':'slidePrev';event.preventDefault();me[(type==='prev')?prev:next]();$.publish('plugin/swProductSlider/onArrowClick',[me,event,type]);},onMouseEnter:function(event){var me=this;me.stopAutoScroll();me.stopAutoSlide();$.publish('plugin/swProductSlider/onMouseEnter',[me,event]);},onMouseLeave:function(event){var me=this;if(me.isActive()&&me.opts.autoScroll)me.autoScroll();if(me.isActive()&&me.opts.autoSlide)me.autoSlide();$.publish('plugin/swProductSlider/onMouseLeave',[me,event]);},onScroll:function(event){var me=this;if(!me.isAnimating){me.currentPosition=me.getScrollPosition();}
me.trackArrows();if(me.opts.mode!=='ajax'||me.isLoading){return;}
var position=me.getScrollPosition(),scrolledItems=Math.floor(position/me.itemSize),itemsLeftToLoad=me.opts.ajaxMaxShow-me.itemsCount,loadMoreCount=me.itemsCount-me.itemsPerPage*2;if(!me.totalUniqueItems&&itemsLeftToLoad===0){me.initInfiniteSlide();}
if(!me.totalUniqueItems&&scrolledItems>=loadMoreCount&&itemsLeftToLoad>0){me.loadItems(me.itemsCount,Math.min(me.itemsPerPage,itemsLeftToLoad));}
$.publish('plugin/swProductSlider/onScroll',[me,event]);},initInfiniteSlide:function(){var me=this;if(!me.opts.infiniteSlide){return;}
me.cloneItems(0,me.itemsPerPage+me.itemsPerSlide);me.totalUniqueItems=me.itemsCount;me.trackItems();$.publish('plugin/swProductSlider/onInitInfiniteSlide',[me]);},cloneItems:function(start,end){var me=this,$copyItems=me.$items.slice(start,end);me.$container.append($copyItems.clone());$.publish('plugin/swProductSlider/onCloneItems',[me,start,end,$copyItems]);},resetToStart:function(){var me=this;me.scrollingReachedEndOfItems=false;me.setPosition((Math.floor(me.currentPosition/me.itemSize)-me.totalUniqueItems)*me.itemSize);$.publish('plugin/swProductSlider/onResetToStart',[me,me.currentPosition]);},slideNext:function(){var me=this;if(me.scrollingReachedEndOfItems){me.resetToStart();}
me.currentPosition=Math.floor((me.currentPosition+me.itemSize*me.itemsPerSlide)/me.itemSize)*me.itemSize;me.slide(me.currentPosition);if(me.totalUniqueItems&&(me.currentPosition/me.itemSize)>=me.totalUniqueItems){me.scrollingReachedEndOfItems=true;}
$.publish('plugin/swProductSlider/onSlideNext',[me,me.currentPosition]);},slidePrev:function(){var me=this;me.scrollingReachedEndOfItems=false;me.currentPosition=Math.ceil((me.currentPosition-me.itemSize*me.itemsPerSlide)/me.itemSize)*me.itemSize;me.slide(me.currentPosition);$.publish('plugin/swProductSlider/onSlidePrev',[me,me.currentPosition]);},slideToElement:function($el,orientation){var me=this,o=orientation||me.opts.orientation,position=$el.position(),slide=(o==='vertical')?position.top:position.left;me.slide(slide);$.publish('plugin/swProductSlider/onSlideToElement',[me,$el,orientation]);},slide:function(position){var me=this,animation={};me.isAnimating=true;animation[(me.opts.orientation==='vertical')?'scrollTop':'scrollLeft']=position;me.$container.stop().animate(animation,me.opts.animationSpeed,'easeOutExpo',function(){me.currentPosition=me.getScrollPosition();me.isAnimating=false;$.publish('plugin/swProductSlider/onSlideFinished',[me,me.currentPosition]);});$.publish('plugin/swProductSlider/onSlide',[me,position]);},autoSlide:function(slideDirection,slideSpeed){var me=this,direction=slideDirection||me.opts.autoSlideDirection,speed=slideSpeed||me.opts.autoSlideSpeed,method=(direction==='prev')?me.slidePrev:me.slideNext;me.autoSlideAnimation=window.setInterval($.proxy(method,me),speed*1000);$.publish('plugin/swProductSlider/onAutoSlide',[me,me.autoSlideAnimation,slideDirection,slideSpeed]);},stopAutoSlide:function(){var me=this;window.clearInterval(me.autoSlideAnimation);me.autoSlideAnimation=false;$.publish('plugin/swProductSlider/onStopAutoSlide',[me]);},scrollNext:function(scrollDistance){var me=this;me.currentPosition+=scrollDistance||me.opts.scrollDistance;me.slide(me.currentPosition);$.publish('plugin/swProductSlider/onScrollNext',[me,me.currentPosition,scrollDistance]);},scrollPrev:function(scrollDistance){var me=this;me.currentPosition-=scrollDistance||me.opts.scrollDistance;me.slide(me.currentPosition);$.publish('plugin/swProductSlider/onScrollPrev',[me,me.currentPosition,scrollDistance]);},autoScroll:function(scrollDirection,scrollSpeed){var me=this,direction=scrollDirection||me.opts.autoScrollDirection,speed=scrollSpeed||me.opts.autoScrollSpeed,position=me.getScrollPosition();me.autoScrollAnimation=StateManager.requestAnimationFrame($.proxy(me.autoScroll,me,direction,speed));me.setPosition((direction==='prev')?position-speed:position+speed);if(me.totalUniqueItems&&(me.currentPosition/me.itemSize)>=me.totalUniqueItems){me.setPosition(0);}
$.publish('plugin/swProductSlider/onAutoScroll',[me,me.autoScrollAnimation,scrollDirection,scrollSpeed]);},stopAutoScroll:function(){var me=this;StateManager.cancelAnimationFrame(me.autoScrollAnimation);me.autoScrollAnimation=false;$.publish('plugin/swProductSlider/onStopAutoScroll',[me]);},buffer:function(func,bufferTime){var me=this;window.clearTimeout(me.bufferedCall);me.bufferedCall=window.setTimeout($.proxy(func,me),bufferTime);$.publish('plugin/swProductSlider/onBuffer',[me,me.bufferedCall,func,bufferTime]);},destroy:function(){var me=this;if(me.opts.initOnEvent!==null){$.unsubscribe(me.getEventName(me.opts.initOnEvent));}
$.unsubscribe(me.getEventName('plugin/swTabMenu/onChangeTab'));$.unsubscribe(me.getEventName('plugin/swCollapsePanel/onOpenPanel'));if(me.$arrowPrev)me.$arrowPrev.remove();if(me.$arrowNext)me.$arrowNext.remove();me.stopAutoSlide();me.stopAutoScroll();me._destroy();}});})(jQuery,window);;(function($){'use strict';$.plugin('swRegister',{defaults:{hiddenClass:'is--hidden',errorClass:'has--error',formSelector:'.register--form',submitBtnSelector:'.register--submit,.address--form-submit',typeFieldSelector:'.register--customertype select,.address--customertype select,.address--customertype input',companyType:'business',skipAccountSelector:'.register--check input',altShippingSelector:'.register--alt-shipping input',companyFieldSelector:'.register--company,.address--company',accountFieldSelector:'.register--account-information',shippingFieldSelector:'.register--shipping',paymentFieldSelector:'.payment--content',paymentInputSelector:'.payment--selection-input input',countryFieldSelector:'.select--country',stateContainerSelector:'.register--state-selection, .address--state-selection',paymentMethodSelector:'.payment--method',inputSelector:'.is--required',errorMessageClass:'register--error-msg',personalEmailSelector:'#register_personal_email',personalPasswordSelector:'#register_personal_password',personalEmailConfirmationSelector:'#register_personal_emailConfirmation',personalPasswordConfirmationSelector:'#register_personal_passwordConfirmation',personalGuestSelector:'#register_personal_skipLogin'},init:function(){var me=this,opts=me.opts,$el=me.$el;me.applyDataAttributes();me.$personalEmail=$el.find(opts.personalEmailSelector);me.$personalPassword=$el.find(opts.personalPasswordSelector);me.$personalEmailConfirmation=$el.find(opts.personalEmailConfirmationSelector);me.$personalPasswordConfirmation=$el.find(opts.personalPasswordConfirmationSelector);me.$personalGuest=$el.find(opts.personalGuestSelector);me.$form=$el.find(opts.formSelector);me.$submitBtn=$el.find(opts.submitBtnSelector);me.$typeSelection=$el.find(opts.typeFieldSelector);me.$skipAccount=$el.find(opts.skipAccountSelector);me.$alternativeShipping=$el.find(opts.altShippingSelector);me.$companyFieldset=$el.find(opts.companyFieldSelector);me.$accountFieldset=$el.find(opts.accountFieldSelector);me.$shippingFieldset=$el.find(opts.shippingFieldSelector);me.$countySelectFields=$el.find(opts.countryFieldSelector);me.$paymentMethods=$el.find(opts.paymentMethodSelector);me.$inputs=$el.find(opts.inputSelector);me.$stateContainers=$el.find(opts.stateContainerSelector);me.checkType();me.checkSkipAccount();me.checkChangeShipping();me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$typeSelection,'change',$.proxy(me.checkType,me));me._on(me.$skipAccount,'change',$.proxy(me.checkSkipAccount,me));me._on(me.$alternativeShipping,'change',$.proxy(me.checkChangeShipping,me));me._on(me.$countySelectFields,'change',$.proxy(me.onCountryChanged,me));me._on(me.$paymentMethods,'change',$.proxy(me.onPaymentChanged,me));me._on(me.$form,'focusout',$.proxy(me.onValidateInput,me));me._on(me.$submitBtn,'click',$.proxy(me.onSubmitBtn,me));$.publish('plugin/swRegister/onRegisterEvents',[me]);},checkType:function(){var me=this,opts=me.opts,$fieldSet=me.$companyFieldset,hideCompanyFields=(me.$typeSelection.length&&me.$typeSelection.val()!==opts.companyType),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(!hideCompanyFields)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(!hideCompanyFields)?'removeClass':'addClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);if(!hideCompanyFields){$fieldSet.find('input, select, textarea').prop('disabled',false);}else{$fieldSet.find('input, select, textarea').attr('disabled','disabled');}
$.publish('plugin/swRegister/onCheckType',[me,hideCompanyFields]);},checkSkipAccount:function(){var me=this,opts=me.opts,$fieldSet=me.$accountFieldset,isChecked=me.$skipAccount.is(':checked'),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(!isChecked)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(isChecked)?'addClass':'removeClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);$.publish('plugin/swRegister/onCheckSkipAccount',[me,isChecked]);},checkChangeShipping:function(){var me=this,opts=me.opts,$fieldSet=me.$shippingFieldset,isChecked=me.$alternativeShipping.is(':checked'),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(isChecked)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(isChecked)?'removeClass':'addClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);$.publish('plugin/swRegister/onCheckChangeShipping',[me,isChecked]);},onCountryChanged:function(event){var me=this,$select=$(event.currentTarget),countryId=$select.val(),addressType=$select.attr('data-address-type'),$stateContainers;$.publish('plugin/swRegister/onCountryChangedBefore',[me,event,countryId,addressType]);me.resetStateSelections(addressType);$stateContainers=me.$stateContainers.filter('[data-address-type="'+addressType+'"]');if($stateContainers.length===0){$stateContainers=me.$stateContainers;}
$stateContainers=$stateContainers.filter('[data-country-id="'+countryId+'"]');if($stateContainers.length){$stateContainers.removeClass(me.opts.hiddenClass);$select=$stateContainers.find('select');$select.prop('disabled',false);}
$.publish('plugin/swRegister/onCountryChanged',[me,event,countryId,addressType]);},resetStateSelections:function(addressType){var me=this,$select,$stateContainers,$stateContainer;$stateContainers=me.$stateContainers.filter('[data-address-type="'+addressType+'"]');if($stateContainers.length===0){$stateContainers=me.$stateContainers;}
$.each($stateContainers,function(index,stateContainer){$stateContainer=$(stateContainer);$select=$stateContainer.find('select');$select.attr('disabled','disabled');$stateContainer.addClass(me.opts.hiddenClass);});},onPaymentChanged:function(){var me=this,opts=me.opts,inputClass=opts.inputSelector,hiddenClass=opts.hiddenClass,inputSelector=opts.paymentInputSelector,paymentSelector=opts.paymentFieldSelector,requiredMethod,$fieldSet,isChecked,radio,$el;$.each(me.$paymentMethods,function(index,el){$el=$(el);radio=$el.find(inputSelector);isChecked=radio[0].checked;requiredMethod=(isChecked)?me.setHtmlRequired:me.removeHtmlRequired;requiredMethod($el.find(inputClass));$fieldSet=$el.find(paymentSelector);$fieldSet[((isChecked)?'removeClass':'addClass')](hiddenClass);});$.publish('plugin/swRegister/onPaymentChanged',[me]);},onSubmitBtn:function(){var me=this,$input;me.$inputs.each(function(){$input=$(this);if(!$input.val()){me.setFieldAsError($input);}});$.publish('plugin/swRegister/onSubmitButton',[me]);},onValidateInput:function(event){var me=this,$el=$(event.target),id=$el.attr('id'),action,relatedTarget=event.relatedTarget||document.activeElement,hasEmailConfirmation=me.$personalEmailConfirmation.length>0,hasPasswordConfirmation=me.$personalPasswordConfirmation.length>0;me.$targetElement=$(relatedTarget);switch(id){case me.$personalEmail.prop('id'):case me.$personalEmailConfirmation.prop('id'):if(hasEmailConfirmation&&(me.$personalEmail.val().length<=0||me.$personalEmailConfirmation.val().length<=0)){break;}
action='ajax_validate_email';break;case me.$personalPassword.prop('id'):case me.$personalPasswordConfirmation.prop('id'):if(hasPasswordConfirmation&&(me.$personalPassword.val().length<=0||me.$personalPasswordConfirmation.val().length<=0)){break;}
action='ajax_validate_password';break;default:break;}
if(!$el.val()&&$el.attr('required')){me.setFieldAsError($el);}else if($el.attr('type')==='checkbox'&&!$el.is(':checked')){me.setFieldAsError($el);}else if(action){me.validateUsingAjax($el,action);}else{me.setFieldAsSuccess($el);}
$.publish('plugin/swRegister/onValidateInput',[me,event,action]);},setHtmlRequired:function($elements){$elements.attr({'required':'required','aria-required':'true'});$.publish('plugin/swRegister/onSetHtmlRequired',[this,$elements]);},removeHtmlRequired:function($inputs){$inputs.prop('required',false).prop('aria-required',false);$.publish('plugin/swRegister/onRemoveHtmlRequired',[this,$inputs]);},setFieldAsError:function($el){var me=this;$el.addClass(me.opts.errorClass);$.publish('plugin/swRegister/onSetFieldAsError',[me,$el]);},setFieldAsSuccess:function($el){var me=this;$el.removeClass(me.opts.errorClass);$.publish('plugin/swRegister/onSetFieldAsSuccess',[me,$el]);},validateUsingAjax:function($input,action){var me=this,data='action='+action+'&'+me.$el.find('form').serialize(),URL=window.controller.ajax_validate+'/'+action;if(!URL){return;}
$.publish('plugin/swRegister/onValidateBefore',[me,data,URL]);$.ajax({'data':data,'type':'post','dataType':'json','url':URL,'success':$.proxy(me.onValidateSuccess,me,action,$input)});},onValidateSuccess:function(action,$input,result){var me=this,isError,errorMessages=[],skipEmailConfirmationError=me.$targetElement.attr('name')==me.$personalEmailConfirmation.attr('name')&&typeof me.$personalEmailConfirmation.val()==='undefined',skipPasswordConfirmationError=me.$targetElement.attr('name')==me.$personalPasswordConfirmation.attr('name')&&typeof me.$personalPasswordConfirmation.val()==='undefined';$('#'+action+'--message').remove();if(!result){return;}
if(skipEmailConfirmationError){result['emailConfirmation']=false;}else if(skipPasswordConfirmationError){result['passwordConfirmation']=false;}
for(var key in result){isError=!!result[key];if(!isError){continue;}
if(key=='emailConfirmation'&&skipEmailConfirmationError){result[key]=false;continue;}else if(key=='passwordConfirmation'&&skipPasswordConfirmationError){result[key]=false;continue;}
if($input.attr('name')==me.$personalEmailConfirmation.attr('name')||$input.attr('name')==me.$personalGuest.attr('name')){$input=me.$personalEmail;}else if($input.attr('name')==me.$personalPasswordConfirmation.attr('name')){$input=me.$personalPassword;}
errorMessages.push(result[key]);}
if(result){me.updateFieldFlags(result);}
if(errorMessages&&errorMessages.length){$('<div>',{'html':'<p>'+errorMessages.join('<br/>')+'</p>','id':action+'--message','class':me.opts.errorMessageClass}).insertAfter($input);me.setFieldAsError($input);}
$.publish('plugin/swRegister/onValidateSuccess',[me,$input]);},updateFieldFlags:function(flags){var me=this,$el=me.$el,keys=Object.keys(flags),len=keys.length,i=0,flag,$input;for(;i<len;i++){flag=keys[i];$input=$el.find('.'+flag);if(flags[flag]){me.setFieldAsError($input);continue;}
me.setFieldAsSuccess($input);}
$.publish('plugin/swRegister/onUpdateFields',[me,flags]);},destroy:function(){this._destroy();}});})(jQuery);;(function($,window){'use strict';var emptyFn=function(){},$html=$('html');$.modal={_$modalBox:null,_$header:null,_$title:null,_$content:null,_$closeButton:null,defaults:{mode:'local',sizing:'auto',width:600,height:600,maxHeight:0,overlay:true,closeOnOverlay:true,showCloseButton:true,animationSpeed:500,title:'',src:'',closeKeys:[27],keyboardClosing:true,onClose:emptyFn,updateImages:false,additionalClass:''},options:{},open:function(content,options){var me=this,$modalBox=me._$modalBox,opts;me.options=opts=$.extend({},me.defaults,options);if(opts.overlay){$.overlay.open($.extend({},{closeOnClick:opts.closeOnOverlay,onClose:$.proxy(me.onOverlayClose,me)}));}
if(!$modalBox){me.initModalBox();me.registerEvents();$modalBox=me._$modalBox;}
me._$closeButton.toggle(opts.showCloseButton);$modalBox.toggleClass('sizing--auto',opts.sizing==='auto');$modalBox.toggleClass('sizing--fixed',opts.sizing==='fixed');$modalBox.toggleClass('sizing--content',opts.sizing==='content');$modalBox.toggleClass('no--header',opts.title.length===0);$modalBox.addClass(opts.additionalClass);if(opts.sizing==='content'){opts.height='auto';}else{$modalBox.css('top',0);}
me.setTitle(opts.title);me.setWidth(opts.width);me.setHeight(opts.height);me.setMaxHeight(opts.maxHeight);$modalBox.css('display','block');switch(opts.mode){case'ajax':$.ajax(content,{data:{isXHR:1},success:function(result){me.setContent(result);$.publish('plugin/swModal/onOpenAjax',me);}});me.options.src=content;break;case'iframe':me.setContent('<iframe class="content--iframe" src="'+content+'" width="100%" height="100%"></iframe>');me.options.src=content;break;default:me.setContent(content);break;}
me.setTransition({opacity:1},me.options.animationSpeed,'linear');$html.addClass('no--scroll');$.publish('plugin/swModal/onOpen',[me]);return me;},close:function(){var me=this,opts=me.options,$modalBox=me._$modalBox;if(opts.overlay){$.overlay.close();}
$html.removeClass('no--scroll');if($modalBox!==null){me.setTransition({opacity:0},opts.animationSpeed,'linear',function(){$modalBox.removeClass(opts.additionalClass);$modalBox.css('display','none');opts.onClose.call(me);me._$content.empty();});}
$.publish('plugin/swModal/onClose',[me]);return me;},setTransition:function(css,duration,animation,callback){var me=this,$modalBox=me._$modalBox,opts=$.extend({animation:'ease',duration:me.options.animationSpeed},{animation:animation,duration:duration});if(!$.support.transition){$modalBox.stop(true).animate(css,opts.duration,opts.animation,callback);return;}
$modalBox.stop(true).transition(css,opts.duration,opts.animation,callback);$.publish('plugin/swModal/onSetTransition',[me,css,opts]);},setTitle:function(title){var me=this;me._$title.html(title);$.publish('plugin/swModal/onSetTitle',[me,title]);},setContent:function(content){var me=this,opts=me.options;me._$content.html(content);if(opts.sizing==='content'){me.center();window.setTimeout(me.center.bind(me),25);}
if(opts.updateImages){picturefill();}
$.publish('plugin/swModal/onSetContent',[me]);},setWidth:function(width){var me=this;me._$modalBox.css('width',(typeof width==='string'&&!(/^\d+$/.test(width)))?width:parseInt(width,10));$.publish('plugin/swModal/onSetWidth',[me]);},setHeight:function(height){var me=this,hasTitle=me._$title.text().length>0,headerHeight;height=(typeof height==='string'&&!(/^\d+$/.test(height)))?height:window.parseInt(height,10);if(hasTitle){headerHeight=window.parseInt(me._$header.css('height'),10);me._$content.css('height',(height-headerHeight));}else{me._$content.css('height','100%');}
me._$modalBox.css('height',height);$.publish('plugin/swModal/onSetHeight',[me]);},setMaxHeight:function(height){var me=this;if(!height){return;}
height=(typeof height==='string'&&!(/^\d+$/.test(height)))?height:window.parseInt(height,10);me._$modalBox.css('max-height',height);$.publish('plugin/swModal/onSetMaxHeight',[me]);},initModalBox:function(){var me=this;me._$modalBox=$('<div>',{'class':'js--modal'});me._$header=$('<div>',{'class':'header'}).appendTo(me._$modalBox);me._$title=$('<div>',{'class':'title'}).appendTo(me._$header);me._$content=$('<div>',{'class':'content'}).appendTo(me._$modalBox);me._$closeButton=$('<div>',{'class':'btn icon--cross is--small btn--grey modal--close'}).appendTo(me._$modalBox);$('body').append(me._$modalBox);$.publish('plugin/swModal/onInit',[me]);},registerEvents:function(){var me=this,$window=$(window);me._$closeButton.on('click.modal touchstart.modal',$.proxy(me.close,me));$window.on('keydown.modal',$.proxy(me.onKeyDown,me));StateManager.on('resize',me.onWindowResize,me);StateManager.registerListener({state:'xs',enter:function(){me._$modalBox.addClass('is--fullscreen');},exit:function(){me._$modalBox.removeClass('is--fullscreen');}});$.publish('plugin/swModal/onRegisterEvents',[me]);},onKeyDown:function(event){var me=this,keyCode=event.which,keys=me.options.closeKeys,len=keys.length,i=0;if(!me.options.keyboardClosing){return;}
for(;i<len;i++){if(keys[i]===keyCode){me.close();}}
$.publish('plugin/swModal/onKeyDown',[me,event,keyCode]);},onWindowResize:function(event){var me=this;if(me.options.sizing==='content'){me.center();}
$.publish('plugin/swModal/onWindowResize',[me,event]);},center:function(){var me=this,$modalBox=me._$modalBox,windowHeight=window.innerHeight||$(window).height();$modalBox.css('top',(windowHeight-$modalBox.height())/2);$.publish('plugin/swModal/onCenter',[me]);},onOverlayClose:function(){var me=this;if(!me.options.closeOnOverlay){return;}
me.close();$.publish('plugin/swModal/onOverlayClick',[me]);},destroy:function(){var me=this,p;me._$modalBox.remove();me._$modalBox=null;me._$header=null;me._$title=null;me._$content=null;me._$closeButton=null;for(p in me.options){if(!me.options.hasOwnProperty(p)){continue;}
delete me.options[p];}
StateManager.off('resize',me.onWindowResize,[me]);}};$.plugin('swModalbox',{defaults:{targetSelector:'',content:'',mode:'local'},init:function(){var me=this,opts;me.opts=$.extend({},Object.create($.modal.defaults),me.opts);me.applyDataAttributes();opts=me.opts;me.$target=opts.targetSelector&&(me.$target=me.$el.find(opts.targetSelector)).length?me.$target:me.$el;me._isOpened=false;me._on(me.$target,'click',$.proxy(me.onClick,me));$.subscribe(me.getEventName('plugin/swModal/onClose'),$.proxy(me.onClose,me));$.publish('plugin/swModalbox/onRegisterEvents',[me]);},onClick:function(event){event.preventDefault();var me=this,target=(me.$target.length===1&&me.$target)||$(event.currentTarget);$.modal.open(me.opts.content||(me.opts.mode!=='local'?target.attr('href'):target),me.opts);me._isOpened=true;$.publish('plugin/swModalbox/onClick',[me,event]);},onClose:function(){var me=this;me._isOpened=false;$.publish('plugin/swModalbox/onClose',[me]);},destroy:function(){var me=this;if(me._isOpened){$.modal.close();}
$.unsubscribe(me.getEventName('plugin/swModal/onClose'));me._destroy();}});})(jQuery,window);;(function($,window,document,undefined){'use strict';$.plugin('swSelectboxReplacement',{defaults:{'baseCls':'js--fancy-select select-field','polyfillSelector':'.js--fancy-select, .select-field','compatibility':true},init:function(){var me=this;me.applyDataAttributes(true);me.createTemplate();return me;},createTemplate:function(){var me=this,$parent=me.$el.parent(me.opts.polyfillSelector),$wrapEl;if($parent.length>0){return false;}
$wrapEl=$('<div>',{'class':me.opts.baseCls});if(me.opts.compatibility){$wrapEl.addClass(me.$el.attr('class'));}
me.$wrapEl=me.$el.wrap($wrapEl);$.publish('plugin/swSelectboxReplacement/onCreateTemplate',[me,me.$wrapEl]);return me.$wrapEl;}});})(jQuery,window,document);;(function($,window){'use strict';$.plugin('swCaptcha',{defaults:{autoLoad:false,src:'',hasError:false},init:function(){var me=this,$el=me.$el;me.applyDataAttributes(true);var hasSource=me.opts.src.length>0,isHoneypot=me.opts.src.indexOf('honeypot')>=0;if(!hasSource||isHoneypot){return;}
if(me.opts.hasError){window.setTimeout($.proxy(me.sendRequest,me),1000);return;}
if(me.opts.autoLoad){me.sendRequest();}else{me.$form=$el.closest('form');me.$formInputs=me.$form.find(':input:not([name="__csrf_token"], select)');me._on(me.$formInputs,'focus',$.proxy(me.onInputFocus,me));}},onInputFocus:function(){var me=this;me._off(me.$formInputs,'focus');me.sendRequest();},sendRequest:function(){var me=this,$el=me.$el;$.ajax({url:me.opts.src,cache:false,success:function(response){$el.html(response);$.publish('plugin/swCaptcha/onSendRequestSuccess',[me]);}});$.publish('plugin/swCaptcha/onSendRequest',[me]);}});})(jQuery,window);;(function($){'use strict';$.plugin('swDropdownMenu',{defaults:{activeCls:'js--is--dropdown-active',preventDefault:true,closeOnBody:true,blockedElements:'.service--link, .compare--list, .compare--entry, '+'.compare--link, .btn--item-delete, .compare--icon-remove, .navigation--link, '+'.blocked--link'},init:function(){var me=this;me._on(me.$el,'touchstart click',$.proxy(me.onClickMenu,me));$.publish('plugin/swDropdownMenu/onRegisterEvents',[me]);},onClickMenu:function(event){var me=this;me.applyDataAttributes();if($(event.target).is(me.opts.blockedElements)){return;}
if(me.opts.preventDefault){event.preventDefault();}
me.$el.toggleClass(me.opts.activeCls);if(me.opts.closeOnBody){event.stopPropagation();$('body').on(me.getEventName('touchstart click'),$.proxy(me.onClickBody,me));}
$.publish('plugin/swDropdownMenu/onClickMenu',[me,event]);},onClickBody:function(event){var me=this;if($(event.target).is(me.opts.blockedElements)){return;}
event.preventDefault();$('body').off(me.getEventName('touchstart click'));me.$el.removeClass(me.opts.activeCls);$.publish('plugin/swDropdownMenu/onClickBody',[me,event]);},destroy:function(){var me=this;me._destroy();}});})(jQuery);;(function($){'use strict';function LoadingIndicator(indicatorOptions){indicatorOptions=indicatorOptions||{};this.options=$.extend({},this.defaults,indicatorOptions);return this;}
LoadingIndicator.prototype={$loader:null,defaults:{loaderCls:'js--loading-indicator',iconCls:'icon--default',loadingCls:'js--is-loading',delay:0,animationSpeed:500,closeOnClick:true,openOverlay:true,renderElement:'body',theme:'dark'},open:function(callback,scope){var me=this,deferred=$.Deferred(),elements;callback=callback||$.noop;scope=scope||me;me.$loader=me._createLoader();$(me.options.renderElement).append(me.$loader).addClass(me.options.loadingCls);me._updateLoader();if(me.options.openOverlay!==false){me.overlay=new Overlay($.extend({},{closeOnClick:me.options.closeOnClick,onClose:me.close.bind(me),delay:me.options.delay,renderElement:me.options.renderElement,theme:me.options.theme}));me.overlay.open();}
elements={loader:me,overlay:(me.options.openOverlay!==false)?me.overlay.overlay:null};me._timeout=window.setTimeout(function(){me.$loader.fadeIn(me.options.animationSpeed,function(){deferred.resolve(elements);callback.call(scope,elements);$.publish('plugin/swLoadingIndicator/onOpenFinished',[me,elements]);});},me.options.delay);$.publish('plugin/swLoadingIndicator/onOpen',[me,elements]);return deferred;},close:function(callback,scope){var me=this,opts=me.options,deferred=$.Deferred();callback=callback||$.noop;scope=scope||me;if(!me.$loader||me.$loader===null){deferred.reject(new Error('Element does not contains a loading indicator.'));return deferred;}
me.$loader.fadeOut(opts.animationSpeed||me.defaults.animationSpeed,function(){if(me._timeout){window.clearTimeout(me._timeout);}
if(opts.openOverlay!==false){me.overlay.close().then(function(){$(me.options.renderElement).removeClass(me.options.loadingCls);});}
me.$loader.remove();deferred.resolve(me);callback.call(scope);$.publish('plugin/swLoadingIndicator/onCloseFinished',[me]);});$.publish('plugin/swLoadingIndicator/onClose',[me]);return deferred;},_updateLoader:function(){var me=this,opts=me.options,$loader=me.$loader,$icon=$($loader.children()[0]);if(!$loader.hasClass(opts.loaderCls)){$loader.removeClass('').addClass(opts.loaderCls);}
if(!$icon.hasClass(opts.iconCls)){$icon.removeClass('').addClass(opts.iconCls);}},_createLoader:function(){var me=this,loader;loader=$('<div>',{'class':me.options.loaderCls}).append($('<div>',{'class':me.options.iconCls}));return loader;}};$.loadingIndicator={open:function(indicatorOptions,callback,scope){if($.isFunction(indicatorOptions)){callback=indicatorOptions;indicatorOptions={};}
callback=callback||$.noop;scope=scope||this;$.loadingIndicator.loader=new LoadingIndicator(indicatorOptions);return $.loadingIndicator.loader.open(callback,scope);},close:function(callback,scope){var deferred=$.Deferred();callback=callback||$.noop;scope=scope||this;if(!$.loadingIndicator.loader){deferred.reject(new Error('No global loading indicator found.'));return deferred;}
return $.loadingIndicator.loader.close(callback,scope);}};$.fn.extend({setLoading:function(toggle,opts,callback,scope){var deferred=$.Deferred(),target=this,$target=$(target),elements;if($.isFunction(opts)){scope=callback;callback=opts;opts={};}
callback=callback||$.noop;scope=scope||target;opts=opts||{};if(toggle){var loader=new LoadingIndicator($.extend({},{renderElement:target},opts));if($target.find('.'+loader.options.loaderCls).length){deferred.reject(new Error('Element has an loading indicator already.'));return deferred;}
loader.open().always(function(elements){$target.data('__loadingIndicator',elements);deferred.resolve(target,elements);callback.call(scope,elements);});return deferred;}
elements=$target.data('__loadingIndicator');if(!elements||!elements.hasOwnProperty('loader')){deferred.reject(new Error('Element does not contains a loading indicator.'));return deferred;}
if(elements.overlay){elements.overlay.close();}
elements.loader.close().then(function(){deferred.resolve(target);callback.call(scope,target);});return deferred;}});window.LoadingIndicator=LoadingIndicator;})(jQuery);;(function($){'use strict';function Overlay(options){options=options||{};this.options=$.extend({},this.defaults,options);return this;}
Overlay.prototype={isOpen:false,defaults:{renderElement:'body',overlayCls:'js--overlay',relativeClass:'js--overlay-relative',openClass:'is--open',closableClass:'is--closable',closeOnClick:true,onClick:$.noop,onClose:$.noop,events:['click','touchstart','MSPointerDown'].join('.overlay')+'.overlay',isScrollable:false,theme:'dark',delay:0},open:function(callback,scope){var me=this,deferred=$.Deferred(),$renderElement=$(me.options.renderElement);me.$overlay=me._generateOverlay();callback=callback||$.noop;scope=scope||me;me._timeout=window.setTimeout(function(){window.clearTimeout(me._timeout);delete me._timeout;$renderElement.addClass(me.options.relativeClass);me.$overlay.appendTo($renderElement);window.setTimeout(function(){me.$overlay.addClass(me.options.openClass);},1);me.isOpen=true;if(me.options.closeOnClick){me.$overlay.addClass(me.options.closableClass);}
deferred.resolve(me,me.$overlay);callback.call(scope,me,me.$overlay);},me.options.delay);me.$overlay.on(me.options.events,$.proxy(me.onOverlayClick,this,me.options));return deferred;},close:function(callback,scope){var me=this,$renderElement=$(me.options.renderElement),deferred=$.Deferred();callback=callback||$.noop;scope=scope||me;if(me._timeout){window.clearTimeout(me._timeout);delete me._timeout;}
if(!me.isOpen){deferred.reject(new Error('No global overlay found.'));return deferred;}
me.isOpen=false;me.$overlay.removeClass(me.options.openClass+' '+me.options.closableClass);$renderElement.removeClass(me.options.relativeClass);me.$overlay.one('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(){me.$overlay.off(me.options.events).prop('style','').remove();deferred.resolve(me);callback.call(scope);});return deferred;},onOverlayClick:function(options){var me=this;if(options){if(typeof options.onClick==='function'){options.onClick.call(me.$overlay);}
if(options.closeOnClick===false){return;}
if(typeof options.onClose==='function'&&options.onClose.call(me.$overlay)===false){return;}}
me.close();},_generateOverlay:function(){var me=this,$overlay=$('<div>',{'class':[me.options.overlayCls,'theme--'+me.options.theme].join(' ')});if(!me.options.isScrollable){return $overlay.on('mousewheel DOMMouseScroll',function(event){event.preventDefault();});}
return $overlay;}};$.overlay={overlay:null,open:function(options,callback,scope){if($.isFunction(options)){callback=options;scope=callback;options={};}
callback=callback||$.noop;options=options||{};scope=scope||this;$.overlay.overlay=new Overlay(options);return $.overlay.overlay.open(callback,scope);},close:function(callback,scope){var deferred=$.Deferred();callback=callback||$.noop;scope=scope||this;if(!$.overlay.overlay){deferred.reject(new Error('No global overlay found.'));return deferred;}
return $.overlay.overlay.close(callback,scope);}};window.Overlay=Overlay;})(jQuery);;(function($){'use strict';$.plugin('swFormPolyfill',{defaults:{eventType:'click'},init:function(){var me=this;if(!me.isSupportedBrowser()){return false;}
me.applyDataAttributes();me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$el,me.opts.eventType,$.proxy(me.onSubmitForm,this));$.publish('plugin/swFormPolyfill/onRegisterEvents',[me]);},isSupportedBrowser:function(){var me=this;return me.isIE()||me.isEdge();},isIE:function(){var myNav=navigator.userAgent.toLowerCase();return myNav.indexOf('msie')!==-1||!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);},isEdge:function(){var myNav=navigator.userAgent.toLowerCase();return myNav.indexOf('edge')!==-1;},onSubmitForm:function(){var me=this,id='#'+me.$el.attr('form'),$form=$(id);if(!$form.length){return false;}
$form.submit();$.publish('plugin/swFormPolyfill/onSubmitForm',[me,$form]);},destroy:function(){var me=this;me._destroy();}});})(jQuery);;(function($,window){'use strict';$.plugin('swPseudoText',{defaults:{eventType:'keyup'},init:function(){var me=this,selector=$(me.$el.attr('data-selector')),val;if(!selector.length){throw new Error('Given selector does not match any element on the page.');}
me._on(me.$el,me.opts.eventType,function(){val=me.$el.val();selector.val(val.length?val:'');});}});})(jQuery,window);;(function($){var emptyObj={};$.plugin('swLastSeenProducts',{defaults:{productLimit:20,baseUrl:'/',shopId:1,currentArticle:emptyObj,listSelector:'.last-seen-products--slider',containerSelector:'.last-seen-products--container',itemCls:'last-seen-products--item product-slider--item product--box box--slider',titleCls:'last-seen-products-item--title product--title',imageCls:'last-seen-products-item--image product--image',noPicture:''},init:function(){var me=this;me.applyDataAttributes();me.$list=me.$el.find(me.opts.listSelector);me.$container=me.$list.find(me.opts.containerSelector);me.productSlider=me.$list.data('plugin_swProductSlider');if(!me.productSlider){return;}
me.storage=StorageManager.getLocalStorage();if($('body').hasClass('is--ctl-detail')){me.collectProduct(me.opts.currentArticle);$.subscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'),$.proxy(me.onAjaxVariantChange,me));}
me.createProductList();},onAjaxVariantChange:function(){var me=this;me.collectProduct(window.lastSeenProductsConfig.currentArticle);me.clearProductList();me.createProductList();},clearProductList:function(){var me=this;me.$container.children().remove();},createProductList:function(){var me=this,opts=me.opts,itemKey='lastSeenProducts-'+opts.shopId+'-'+opts.baseUrl,productsJson=me.storage.getItem(itemKey),products=productsJson?JSON.parse(productsJson):[],len=Math.min(opts.productLimit,products.length);if(len>1){me.$el.removeClass('is--hidden');}
$.each(products,function(i,product){if(product.articleId===opts.currentArticle.articleId){return;}
me.$container.append(me.createTemplate(product));});me.productSlider.initSlider();$.publish('plugin/swLastSeenProducts/onCreateProductList',[me]);},createTemplate:function(article){var me=this,$template=$('<div>',{'class':me.opts.itemCls,'html':[me.createProductImage(article),me.createProductTitle(article)],'data-ordernumber':article.orderNumber});$.publish('plugin/swLastSeenProducts/onCreateTemplate',[me,$template,article]);return $template;},createProductTitle:function(data){var me=this,$title=$('<a>',{'rel':'nofollow','class':me.opts.titleCls,'title':data.articleName,'href':data.linkDetailsRewritten,'html':data.articleName});$.publish('plugin/swLastSeenProducts/onCreateProductTitle',[me,$title,data]);return $title;},createProductImage:function(data){var me=this,image=data.images[0],element,imageEl,imageMedia,srcSet;element=$('<a>',{'class':me.opts.imageCls,'href':data.linkDetailsRewritten,'title':data.articleName});imageEl=$('<span>',{'class':'image--element'}).appendTo(element);imageMedia=$('<span>',{'class':'image--media'}).appendTo(imageEl);if(image){srcSet=image.sourceSet;}else{srcSet=me.opts.noPicture;}
$('<img>',{'srcset':srcSet,'alt':data.articleName,'title':data.articleName}).appendTo(imageMedia);$.publish('plugin/swLastSeenProducts/onCreateProductImage',[me,element,data]);return element;},collectProduct:function(newProduct){var me=this,opts=me.opts,itemKey='lastSeenProducts-'+opts.shopId+'-'+opts.baseUrl,productsJson=me.storage.getItem(itemKey),products=productsJson?JSON.parse(productsJson):[],linkDetailsQuery='',len=products.length,i=0,url,urlQuery;if(!newProduct||$.isEmptyObject(newProduct)){return;}
for(;i<len;i++){if(products[i]&&products[i].articleId===newProduct.articleId){products.splice(i,1);}}
url=newProduct.linkDetailsRewritten;urlQuery=me.extractQueryParameters(url);delete urlQuery.c;if($.param(urlQuery)){linkDetailsQuery=$.param(urlQuery);linkDetailsQuery='?'+linkDetailsQuery;}
if(url.indexOf('/sCategory')!==-1){newProduct.linkDetailsRewritten=url.replace(/\/?sCategory\/[0-9]+/i,'');}else if(url.indexOf('?')!==-1){newProduct.linkDetailsRewritten=url.substring(0,url.indexOf('?'))+linkDetailsQuery;}
products.splice(0,0,newProduct);while(products.length>opts.productLimit+1){products.pop();}
me.storage.setItem(itemKey,JSON.stringify(products));$.publish('plugin/swLastSeenProducts/onCollectProduct',[me,newProduct]);},extractQueryParameters:function(url){var queryParams={};if(url.indexOf('?')===-1){return{};}
url=url.substring(url.indexOf('?'));url=url.substring(1);$.each(url.split('&'),function(key,param){param=param.split('=');param[0]=decodeURIComponent(param[0]);param[1]=decodeURIComponent(param[1]);if(param[0].length&&param[1].length&&!queryParams.hasOwnProperty(param[0])){queryParams[param[0]]=param[1];}});return queryParams;},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'));me._destroy();}});}(jQuery));;(function($,window,Math){'use strict';$.lightbox={modal:false,open:function(imageURL){var me=this,size;me.image=new Image();me.content=me.createContent(imageURL);me.image.onload=function(){size=me.getOptimizedSize(me.image.width,me.image.height);me.modal=$.modal.open(me.content,{'width':size.width,'height':size.height});$(window).on('resize.lightbox',function(){me.setSize(me.image.width,me.image.height);});$.subscribe(me.getEventName('plugin/swModal/onClose'),function(){$(window).off('resize.lightbox');});};me.image.src=imageURL;$.publish('plugin/swLightbox/onOpen',[me]);},createContent:function(imageURL){var me=this,content=$('<div>',{'class':'lightbox--container','html':$('<img>',{'src':imageURL,'class':'lightbox--image'})});$.publish('plugin/swLightbox/onCreateContent',[me,content,imageURL]);return content;},setSize:function(width,height){var me=this,size=me.getOptimizedSize(width,height);if(!me.modal){return;}
me.modal.setWidth(size.width);me.modal.setHeight(size.height);$.publish('plugin/swLightbox/onSetSize',[me,width,height]);},getOptimizedSize:function(width,height){var me=this,aspect=width/height,maxWidth=Math.round(window.innerWidth*0.9),maxHeight=Math.round(window.innerHeight*0.9),size;if(width>maxWidth){width=maxWidth;height=Math.round(width/aspect);}
if(height>maxHeight){height=maxHeight;width=Math.round(height*aspect);}
size={'width':width,'height':height};$.publish('plugin/swLightbox/onGetOptimizedSize',[me,size]);return size;},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swModal/onClose'));me._destroy();}};})(jQuery,window,Math);;(function($,Modernizr,location){'use strict';$.plugin('swAjaxProductNavigation',{defaults:{arrowFadeSpeed:500,arrowOffset:40,arrowSlideOffset:140,arrowSlideClass:'can--slide',productBoxSelector:'.product--box',productDetailsSelector:'.product--details',prevLinkSelector:'.navigation--link.link--prev',nextLinkSelector:'.navigation--link.link--next',breadcrumbButtonSelector:'.content--breadcrumb .breadcrumb--button',imageContainerSelector:'.image--container',listingSelectors:['.listing .product--box .product--image','.listing .product--box .product--title','.listing .product--box .product--actions .action--more']},init:function(){var me=this,$el=me.$el,opts=me.opts,isListing=$el.hasClass('is--ctl-listing'),isDetail=$el.hasClass('is--ctl-detail'),params=me.parseQueryString(location.href);if(!(isListing||isDetail)){return;}
me.applyDataAttributes();me.storage=StorageManager.getStorage('session');if(isListing){me.registerListingEventListeners();return;}
me.$prevButton=$el.find(opts.prevLinkSelector);me.$nextButton=$el.find(opts.nextLinkSelector);me.$backButton=$el.find(opts.breadcrumbButtonSelector);me.$productDetails=$el.find(opts.productDetailsSelector);me.categoryId=~~(me.$productDetails.attr('data-category-id')||(params&&params.c));me.orderNumber=me.$productDetails.attr('data-main-ordernumber');me.productState=me.getProductState();if(!me.categoryId){return;}
if(!$.isEmptyObject(me.productState)&&me.productState.ordernumber!==me.orderNumber){me.clearProductState();me.productState={};}
me.registerDetailEventListeners();me.getProductNavigation();},parseQueryString:function(url){var params={},urlParts=(url+'').split('?'),queryParts,part,key,value,p;if(urlParts.length<2){return params;}
queryParts=urlParts[1].split('&');for(p in queryParts){if(!queryParts.hasOwnProperty(p)){continue;}
part=queryParts[p].split('=');key=decodeURIComponent(part[0]);value=decodeURIComponent(part[1]||'');params[key]=$.isNumeric(value)?parseFloat(value):value;}
$.publish('plugin/swAjaxProductNavigation/onParseQueryString',[this,url,params]);return params;},getProductState:function(){var me=this,state=JSON.parse(me.storage.getItem('lastProductState'))||{};$.publish('plugin/swAjaxProductNavigation/onGetProductState',[me,state]);return state;},setProductState:function(params){var me=this;me.storage.setItem('lastProductState',JSON.stringify(params));$.publish('plugin/swAjaxProductNavigation/onSetProductState',[me,params]);},clearProductState:function(){var me=this;me.storage.removeItem('lastProductState');$.publish('plugin/swAjaxProductNavigation/onClearProductState',[me]);},registerListingEventListeners:function(){var me=this,selectors=me.opts.listingSelectors.join(', ');me.$el.on(me.getEventName('click'),selectors,$.proxy(me.onClickProductInListing,me));$.publish('plugin/swAjaxProductNavigation/onRegisterEventsListing',[me]);},onClickProductInListing:function(event){var me=this,opts=me.opts,$target=$(event.target),$parent=$target.parents(opts.productBoxSelector),params=me.parseQueryString(location.href);me.setProductState($.extend({},params,{'categoryId':~~($parent.attr('data-category-id')),'ordernumber':$parent.attr('data-ordernumber')}));$.publish('plugin/swAjaxProductNavigation/onClickProductInListing',[me,event]);},registerDetailEventListeners:function(){var me=this;StateManager.on('resize',me.checkPossibleSliding,me);me._on(me.$prevButton,'click',$.proxy(me.onArrowClick,me));me._on(me.$nextButton,'click',$.proxy(me.onArrowClick,me));$.publish('plugin/swAjaxProductNavigation/onRegisterEventsDetail',[me]);},onArrowClick:function(event){var me=this,$target=$(event.currentTarget);if(!$.isEmptyObject(me.productState)){me.productState.ordernumber=$target.attr('data-ordernumber');me.setProductState(me.productState);}
$.publish('plugin/swAjaxProductNavigation/onArrowClick',[me,event]);},checkPossibleSliding:function(){var me=this,opts=me.opts,offset=opts.arrowOffset,slideOffset=opts.arrowSlideOffset,$prevBtn=me.$prevButton,$nextBtn=me.$nextButton,remainingSpacePrev,remainingSpaceNext,prevBtnImage,nextBtnImage;if(!$nextBtn.length||!$prevBtn.length){return false;}
remainingSpacePrev=$prevBtn.offset().left+offset;remainingSpaceNext=$(window).width()-$nextBtn.offset().left-$nextBtn.outerWidth()+offset;prevBtnImage=$prevBtn.find(opts.imageContainerSelector).css('background-image');nextBtnImage=$nextBtn.find(opts.imageContainerSelector).css('background-image');$prevBtn[(prevBtnImage!=='none'&&remainingSpacePrev>=slideOffset)?'addClass':'removeClass'](opts.arrowSlideClass);$nextBtn[(nextBtnImage!=='none'&&remainingSpaceNext>=slideOffset)?'addClass':'removeClass'](opts.arrowSlideClass);$.publish('plugin/swAjaxProductNavigation/onCheckPossibleSliding',[me]);},getProductNavigation:function(){var me=this,url=me.$productDetails.attr('data-product-navigation'),params=$.extend({},me.productState,{'ordernumber':me.orderNumber,'categoryId':me.categoryId});if($.isEmptyObject(params)||!url||!url.length){return;}
$.ajax({'url':url,'data':params,'method':'GET','dataType':'json','success':$.proxy(me.onProductNavigationLoaded,me)});$.publish('plugin/swAjaxProductNavigation/onGetProductNavigation',[me]);},onProductNavigationLoaded:function(response){var me=this,opts=me.opts,$prevBtn=me.$prevButton,$nextBtn=me.$nextButton,listing=response.currentListing,prevProduct=response.previousProduct,nextProduct=response.nextProduct,animSpeed=opts.arrowFadeSpeed,animCss={opacity:1};$.publish('plugin/swAjaxProductNavigation/onProductNavigationLoaded',[me,response]);if(listing&&listing.href){me.$backButton.attr('href',listing.href);}
if(typeof prevProduct==='object'){$prevBtn.attr('data-ordernumber',prevProduct.orderNumber);if(prevProduct.image){$prevBtn.find(opts.imageContainerSelector).css('background-image','url('+prevProduct.image.thumbnails[0].source+')');}
$prevBtn.attr('href',prevProduct.href).attr('title',prevProduct.name).css('display','inline');if(Modernizr.csstransitions){$prevBtn.transition(animCss,animSpeed);}else{$prevBtn.animate(animCss,animSpeed);}}
if(typeof nextProduct==='object'){$nextBtn.attr('data-ordernumber',nextProduct.orderNumber);if(nextProduct.image){$nextBtn.find(opts.imageContainerSelector).css('background-image','url('+nextProduct.image.thumbnails[0].source+')');}
$nextBtn.attr('href',nextProduct.href).attr('title',nextProduct.name).css('display','inline');if(Modernizr.csstransitions){$nextBtn.transition(animCss,animSpeed);}else{$nextBtn.animate(animCss,animSpeed);}}
me.checkPossibleSliding();$.publish('plugin/swAjaxProductNavigation/onProductNavigationFinished',[me,response]);},destroy:function(){var me=this,selectors=me.opts.listingSelectors.join(', ');StateManager.off('resize',me.checkPossibleSliding,me);me.$el.off(me.getEventName('click'),selectors);me._destroy();}});})(jQuery,Modernizr,location);;(function($){'use strict';$.plugin('swNewsletter',{defaults:{unsubscribeCaptchaRequired:false,captchaSelector:'input[name="sCaptcha"]',captchaFormSelector:'.newsletter--captcha-form',checkMailSelector:'.newsletter--checkmail',additionalFormSelector:'.newsletter--additional-form',formSelector:'form',submitButtonSelector:'button[type=submit]',},init:function(){var me=this;me.applyDataAttributes();me.$checkMail=me.$el.find(me.opts.checkMailSelector);me.$addionalForm=me.$el.find(me.opts.additionalFormSelector);me.$captchaForm=me.$el.find(me.opts.captchaFormSelector);me.$form=me.$el.find(me.opts.formSelector);me._on(me.$checkMail,'change',$.proxy(me.refreshAction,me));$.subscribe(me.getEventName('plugin/swCaptcha/onSendRequestSuccess'),$.proxy(me.onCaptchaLoaded,me));me._on(me.$form,'submit',$.proxy(me.submit,me));$.publish('plugin/swNewsletter/onRegisterEvents',[me]);me.$checkMail.trigger('change');},refreshAction:function(event){var me=this,$el=$(event.currentTarget),val=$el.val();if(val==='-1'){me.$addionalForm.hide();if(!me.opts.unsubscribeCaptchaRequired){me.$captchaForm.hide();if(me.$captchaField){me.$captchaField.prop('required',false);me.$captchaField.prop('aria-required',false);}}}else{me.$addionalForm.show();if(!me.opts.unsubscribeCaptchaRequired){me.$captchaForm.show();if(me.$captchaField){me.$captchaField.attr('required',true);me.$captchaField.attr('aria-required',true);}}}
$.publish('plugin/swNewsletter/onRefreshAction',[me]);},submit:function(){var me=this;me.$el.find(me.opts.submitButtonSelector).attr('disabled','disabled').addClass('disabled');},onCaptchaLoaded:function(){var me=this;me.$captchaField=me.$captchaForm.find(me.opts.captchaSelector);me.$checkMail.trigger('change');},destroy:function(){this._destroy();}});}(jQuery));;(function($){'use strict';$.plugin('swMenuScroller',{defaults:{activeItemSelector:'.is--active',listSelector:'*[class$="--list"]',wrapperClass:'js--menu-scroller',listClass:'js--menu-scroller--list',itemClass:'js--menu-scroller--item',leftArrowClass:'js--menu-scroller--arrow left--arrow',rightArrowClass:'js--menu-scroller--arrow right--arrow',arrowContentClass:'arrow--content',leftArrowContent:'&#58897;',rightArrowContent:'&#58895;',scrollStep:'auto',animationSpeed:400,arrowOffset:25},init:function(){var me=this,opts=me.opts,$activeChild;me.applyDataAttributes();me.scrollStep=(opts.scrollStep==='auto')?me.$el.width()/2:parseFloat(opts.scrollStep);me.$list=me.$el.find(opts.listSelector);me.scrollBarOffset=0;me.initTemplate();me.registerEvents();me.updateButtons();$activeChild=me.$list.children(opts.activeItemSelector);if($activeChild.length){me.jumpToElement($activeChild);}},initTemplate:function(){var me=this,opts=me.opts,$el=me.$el,$list=me.$list;$el.addClass(opts.wrapperClass);$list.addClass(opts.listClass);me.updateScrollBarOffset();$list.children().addClass(opts.itemClass);me.$leftArrow=$('<div>',{'html':$('<span>',{'class':opts.arrowContentClass,'html':opts.leftArrowContent}),'class':opts.leftArrowClass}).appendTo($el);me.$rightArrow=$('<div>',{'html':$('<span>',{'class':opts.arrowContentClass,'html':opts.rightArrowContent}),'class':opts.rightArrowClass}).appendTo($el);$.publish('plugin/swMenuScroller/onInitTemplate',[me]);},updateScrollBarOffset:function(){var me=this,$list=me.$list,offset;offset=me.scrollBarOffset=Math.min(Math.abs($list[0].scrollHeight-$list.height())*-1,me.scrollBarOffset);$list.css({'bottom':offset,'margin-top':offset});$.publish('plugin/swMenuScroller/onUpdateScrollBarOffset',[me,offset]);},registerEvents:function(){var me=this;StateManager.on('resize',me.updateResize,me);me._on(me.$leftArrow,'click touchstart',$.proxy(me.onLeftArrowClick,me));me._on(me.$rightArrow,'click touchstart',$.proxy(me.onRightArrowClick,me));me._on(me.$list,'scroll',$.proxy(me.updateButtons,me));$.publish('plugin/swMenuScroller/onRegisterEvents',[me]);},updateResize:function(){var me=this,opts=me.opts,viewPortWidth=me.$el.width();me.updateScrollBarOffset();if(opts.scrollStep==='auto'){me.scrollStep=viewPortWidth/2;}
me.updateButtons();$.publish('plugin/swMenuScroller/onUpdateResize',[me]);},onLeftArrowClick:function(event){event.preventDefault();var me=this;me.addOffset(me.scrollStep*-1);$.publish('plugin/swMenuScroller/onLeftArrowClick',[me]);},onRightArrowClick:function(event){event.preventDefault();var me=this;me.addOffset(me.scrollStep);$.publish('plugin/swMenuScroller/onRightArrowClick',[me]);},addOffset:function(offset){this.setOffset(this.$list.scrollLeft()+offset,true);},setOffset:function(offset,animate){var me=this,opts=me.opts,$list=me.$list,maxWidth=$list.prop('scrollWidth')-me.$el.width(),newPos=Math.max(0,Math.min(maxWidth,offset));if(animate!==false){$list.stop(true).animate({'scrollLeft':newPos},opts.animationSpeed,$.proxy(me.updateButtons,me));$.publish('plugin/swMenuScroller/onSetOffset',[me,offset,animate]);return;}
$list.scrollLeft(newPos);me.updateButtons();$.publish('plugin/swMenuScroller/onSetOffset',[me,offset,animate]);},updateButtons:function(){var me=this,$list=me.$list,elWidth=me.$el.width(),listWidth=$list.prop('scrollWidth'),scrollLeft=$list.scrollLeft();me.$leftArrow.toggle(scrollLeft>0);me.$rightArrow.toggle(listWidth>elWidth&&scrollLeft<(listWidth-elWidth));$.publish('plugin/swMenuScroller/onUpdateButtons',[me,me.$leftArrow,me.$rightArrow]);},jumpToElement:function($el){var me=this,$list=me.$list,elWidth=me.$el.width(),scrollLeft=$list.scrollLeft(),leftPos=$el.position().left,rightPos=leftPos+$el.outerWidth(true),newPos;if(leftPos>scrollLeft&&rightPos>scrollLeft+elWidth){newPos=rightPos-elWidth+me.opts.arrowOffset;}else{newPos=Math.min(leftPos-me.$leftArrow.width(),scrollLeft);}
me.setOffset(newPos,false);$.publish('plugin/swMenuScroller/onJumpToElement',[me,$el,newPos]);},destroy:function(){var me=this,opts=me.opts;StateManager.off('resize',me.updateResize,me);me.$el.removeClass(opts.wrapperClass);me.$list.removeClass(opts.listClass);me.$list.css({'bottom':'','margin-top':''});me.$list.children().removeClass(opts.itemClass);me.$leftArrow.remove();me.$rightArrow.remove();me._destroy();}});}(jQuery));;(function($){'use strict';$.plugin('swShippingPayment',{defaults:{formSelector:'#shippingPaymentForm',radioSelector:'input.auto_submit[type=radio]',submitSelector:'input[type=submit]'},init:function(){var me=this;me.applyDataAttributes();me.registerEvents();},registerEvents:function(){var me=this;me.$el.on('change',me.opts.radioSelector,$.proxy(me.onInputChanged,me));$.publish('plugin/swShippingPayment/onRegisterEvents',[me]);},onInputChanged:function(){var me=this,form=me.$el.find(me.opts.formSelector),url=form.attr('action'),data=form.serialize()+'&isXHR=1';$.publish('plugin/swShippingPayment/onInputChangedBefore',[me]);$.loadingIndicator.open();$.ajax({type:'POST',url:url,data:data,success:function(res){me.$el.empty().html(res);me.$el.find('input[type="submit"][form], button[form]').swFormPolyfill();$.loadingIndicator.close();window.picturefill();$.publish('plugin/swShippingPayment/onInputChanged',[me]);}});},destroy:function(){var me=this;me.$el.off('change',me.opts.radioSelector);me._destroy();}});})(jQuery);;(function($,window){'use strict';$.plugin('swAddArticle',{defaults:{'eventName':'click','addArticleUrl':window.controller['ajax_add_article'],'sliderPerPageDefault':3,'showModal':true,'productSliderSelector':'.js--modal .product-slider'},init:function(){var opts=this.opts;this.applyDataAttributes();opts.showModal=!!opts.showModal&&opts.showModal!=='false';this._on(this.$el,opts.eventName,$.proxy(this.sendSerializedForm,this));$('body').on('click.modal','*[data-modal-close="true"]',$.proxy(this.closeModal,this));StateManager.addPlugin(opts.productSliderSelector,'swProductSlider');},sendSerializedForm:function(event){event.preventDefault();var me=this,opts=me.opts,$el=me.$el,ajaxData=$el.serialize();ajaxData+='&isXHR=1';if(opts.showModal){$.loadingIndicator.open({'openOverlay':true});}
$.publish('plugin/swAddArticle/onBeforeAddArticle',[me,ajaxData]);$.ajax({data:ajaxData,dataType:'html',method:'POST',url:opts.addArticleUrl,success:function(result){$.publish('plugin/swAddArticle/onAddArticle',[me,result]);if(!opts.showModal){return;}
$.loadingIndicator.close(function(){$.modal.open(result,{width:750,sizing:'content',onClose:me.onCloseModal.bind(me)});picturefill();StateManager.updatePlugin(opts.productSliderSelector,'swProductSlider');$.publish('plugin/swAddArticle/onAddArticleOpenModal',[me,result]);});}});},closeModal:function(event){event.preventDefault();$.modal.close();$.publish('plugin/swAddArticle/onCloseModal',[this]);},onCloseModal:function(){StateManager.destroyPlugin(this.opts.productSliderSelector,'swProductSlider');$.publish('plugin/swAddArticle/onCloseModal',[this]);}});})(jQuery,window);;(function($,window,document){'use strict';var $document=$(document);function round(value,base,method){var rounding=method||'round',b=base||1,factor=1/b;return Math[rounding](value*factor)/factor;}
function roundPretty(value,method){var rounding=method||'round',digits=countDigits(value),step=(digits>1)?2:1,base=5*Math.pow(10,digits-step);return round(value,base,rounding);}
function countDigits(value){if(value<=0){return 1;}
return~~(Math.log(Math.floor(value))/Math.LN10+1);}
function clamp(value,min,max){return Math.max(min,Math.min(max,value));}
function int(value){return parseFloat(value);}
$.plugin('swRangeSlider',{defaults:{sliderContainerCls:'range-slider--container',rangeBarCls:'range-slider--range-bar',handleCls:'range-slider--handle',handleMinCls:'is--min',handleMaxCls:'is--max',activeDraggingCls:'is--dragging',minInputElSelector:'*[data-range-input="min"]',maxInputElSelector:'*[data-range-input="max"]',minLabelElSelector:'*[data-range-label="min"]',maxLabelElSelector:'*[data-range-label="max"]',labelFormat:'',suffix:'',roundPretty:false,startMin:20,startMax:80,rangeMin:0,rangeMax:100,stepCount:100,digits:2,stepCurve:'linear'},init:function(){var me=this;me.applyDataAttributes();me.$minInputEl=me.$el.find(me.opts.minInputElSelector);me.$maxInputEl=me.$el.find(me.opts.maxInputElSelector);me.$minLabel=me.$el.find(me.opts.minLabelElSelector);me.$maxLabel=me.$el.find(me.opts.maxLabelElSelector);me.dragState=false;me.dragType='min';me.createSliderTemplate();me.validateStepCurve();me.computeBaseValues();me.registerEvents();},validateStepCurve:function(){var me=this,validCurves=['linear','log'];me.opts.stepCurve=me.opts.stepCurve.toString().toLowerCase();if(validCurves.indexOf(me.opts.stepCurve)<0){me.opts.stepCurve='linear';}},registerEvents:function(){var me=this;me._on(me.$minHandle,'mousedown touchstart',$.proxy(me.onStartDrag,me,'min',me.$minHandle));me._on(me.$maxHandle,'mousedown touchstart',$.proxy(me.onStartDrag,me,'max',me.$maxHandle));me._on($document,'mouseup touchend',$.proxy(me.onEndDrag,me));me._on($document,'mousemove touchmove',$.proxy(me.slide,me));$.publish('plugin/swRangeSlider/onRegisterEvents',[me]);},createSliderTemplate:function(){var me=this;me.$rangeBar=me.createRangeBar();me.$container=me.createRangeContainer();me.$minHandle=me.createHandle('min');me.$maxHandle=me.createHandle('max');me.$minHandle.appendTo(me.$rangeBar);me.$maxHandle.appendTo(me.$rangeBar);me.$rangeBar.appendTo(me.$container);me.$container.prependTo(me.$el);},createRangeContainer:function(){var me=this,$container=$('<div>',{'class':me.opts.sliderContainerCls});$.publish('plugin/swRangeSlider/onCreateRangeContainer',[me,$container]);return $container;},createRangeBar:function(){var me=this,$bar=$('<div>',{'class':me.opts.rangeBarCls});$.publish('plugin/swRangeSlider/onCreateRangeBar',[me,$bar]);return $bar;},createHandle:function(type){var me=this,typeClass=(type=='max')?me.opts.handleMaxCls:me.opts.handleMinCls,$handle=$('<div>',{'class':me.opts.handleCls+' '+typeClass});$.publish('plugin/swRangeSlider/onCreateHandle',[me,$handle]);return $handle;},computeBaseValues:function(){var me=this;me.minRange=int(me.opts.rangeMin);me.maxRange=int(me.opts.rangeMax);if(me.opts.roundPretty){me.minRange=roundPretty(me.minRange,'floor');me.maxRange=roundPretty(me.maxRange,'ceil');}
me.range=me.maxRange-me.minRange;me.stepSize=me.range/int(me.opts.stepCount);me.stepWidth=100/int(me.opts.stepCount);me.minValue=(me.opts.startMin===me.opts.rangeMin||me.opts.startMin<=me.minRange)?me.minRange:int(me.opts.startMin);me.maxValue=(me.opts.startMax===me.opts.rangeMax||me.opts.startMax>=me.maxRange)?me.maxRange:int(me.opts.startMax);if(me.maxValue==me.minValue||me.maxValue==0){me.maxValue=me.maxRange;}
$.publish('plugin/swRangeSlider/onComputeBaseValues',[me,me.minValue,me.maxValue]);me.setRangeBarPosition(me.minValue,me.maxValue);me.updateLayout();},setRangeBarPosition:function(minValue,maxValue){var me=this,min=minValue||me.minValue,max=maxValue||me.maxValue,left=me.getPositionByValue(min),right=me.getPositionByValue(max),width=right-left;me.$rangeBar.css({'left':left+'%','width':width+'%'});$.publish('plugin/swRangeSlider/onSetRangeBarPosition',[me,me.$rangeBar,minValue,maxValue]);},setMin:function(min,updateInput){var me=this,update=updateInput||false;min=(min===me.opts.rangeMin||min<=me.minRange)?me.minRange:int(min);me.minValue=min;if(update){me.updateMinInput(min);}
me.setRangeBarPosition();me.updateLayout();$.publish('plugin/swRangeSlider/onSetMin',[me,min,updateInput]);},setMax:function(max,updateInput){var me=this,update=updateInput||false;max=(max===me.opts.rangeMax||max>=me.maxRange)?me.maxRange:int(max);me.maxValue=max;if(update){me.updateMaxInput(max);}
me.setRangeBarPosition();me.updateLayout();$.publish('plugin/swRangeSlider/onSetMax',[me,max,updateInput]);},reset:function(param){var me=this;if(param=='max'){me.maxValue=me.maxRange;me.$maxInputEl.attr('disabled','disabled').val(me.maxRange).trigger('change');}else{me.minValue=me.minRange;me.$minInputEl.attr('disabled','disabled').val(me.minRange).trigger('change');}
me.setRangeBarPosition();me.updateLayout();$.publish('plugin/swRangeSlider/onReset',[me,param]);},onStartDrag:function(type,$handle){var me=this;$handle.addClass(me.opts.activeDraggingCls);me.dragState=true;me.dragType=type;$.publish('plugin/swRangeSlider/onStartDrag',[me,type,$handle]);},onEndDrag:function(){var me=this;if(!me.dragState){return;}
me.dragState=false;me.updateLayout();me.$minHandle.removeClass(me.opts.activeDraggingCls);me.$maxHandle.removeClass(me.opts.activeDraggingCls);if(me.dragType=='max'){me.updateMaxInput(me.maxValue);}else{me.updateMinInput(me.minValue);}
$(me).trigger('rangeChange',me);$.publish('plugin/swRangeSlider/onEndDrag',[me,me.dragType]);},slide:function(event){var me=this;if(!me.dragState){return;}
var pageX=(event.originalEvent.touches)?event.originalEvent.touches[0].pageX:event.pageX,offset=me.$container.offset(),width=me.$container.innerWidth(),mouseX=pageX-offset.left,xPercent=clamp(round((100/width*mouseX),me.stepWidth,'round'),0,100),value=me.getValueByPosition(xPercent);event.preventDefault();if(me.dragType=='max'){var minValue=me.getValueByPosition(me.getPositionByValue(me.minValue)+me.stepWidth);me.setMax(clamp(value,minValue,me.maxRange));}else{var maxValue=me.getValueByPosition(me.getPositionByValue(me.maxValue)-me.stepWidth);me.setMin(clamp(value,me.minRange,maxValue));}
$.publish('plugin/swRangeSlider/onSlide',[me,event,xPercent,value]);},updateMinInput:function(value){var me=this;if(!me.$minInputEl.length){return;}
if(value<=me.opts.rangeMin){me.$minInputEl.prop('disabled','disabled').trigger('change');}else{me.$minInputEl.val(me.formatValueFloat(value)).prop('disabled',false).trigger('change');}
$.publish('plugin/swRangeSlider/onUpdateMinInput',[me,me.$minInputEl,value]);},updateMaxInput:function(value){var me=this;if(!me.$maxInputEl.length){return;}
if(value>=me.opts.rangeMax){me.$maxInputEl.prop('disabled','disabled').trigger('change');}else{me.$maxInputEl.val(me.formatValueFloat(value)).prop('disabled',false).trigger('change');}
$.publish('plugin/swRangeSlider/onUpdateMaxInput',[me,me.$maxInputEl,value]);},updateMinLabel:function(value){var me=this;if(me.$minLabel.length){me.$minLabel.html(me.formatValue(value));$.publish('plugin/swRangeSlider/onUpdateMinLabel',[me,me.$minLabel,value]);}},updateMaxLabel:function(value){var me=this;if(me.$maxLabel.length){me.$maxLabel.html(me.formatValue(value));$.publish('plugin/swRangeSlider/onUpdateMaxLabel',[me,me.$maxLabel,value]);}},updateLayout:function(minValue,maxValue){var me=this,min=minValue||me.minValue,max=maxValue||me.maxValue;me.updateMinLabel(min);me.updateMaxLabel(max);$.publish('plugin/swRangeSlider/onUpdateLayout',[me,minValue,maxValue]);},roundValue:function(value){var me=this;if(value<0.1){value=me.roundTo(value,0.001);}else if(value<1){value=me.roundTo(value,0.01);}else if(value<10){value=me.roundTo(value,0.10);}else if(value<100){value=me.roundTo(value,1);}else{value=me.roundTo(value,5);}
return value;},formatValueFloat:function(value){if(value!=this.minRange&&value!=this.maxRange){value=this.roundValue(value);}
var division=Math.pow(10,this.opts.digits);value=Math.round(value*division)/division;value=value.toFixed(this.opts.digits);return value;},formatValue:function(value){var me=this;$.publish('plugin/swRangeSlider/onFormatValueBefore',[me,value]);if(value!=me.minRange&&value!=me.maxRange){value=me.roundValue(value);}
if(!me.opts.labelFormat.length){return value.toFixed(me.opts.digits)+' '+me.opts.suffix;}
var division=Math.pow(10,me.opts.digits);value=Math.round(value*division)/division;value=value.toFixed(me.opts.digits);if(me.opts.labelFormat.indexOf('0.00')>=0){value=me.opts.labelFormat.replace('0.00',value)+' '+me.opts.suffix;}else{value=value.replace('.',',');value=me.opts.labelFormat.replace('0,00',value)+' '+me.opts.suffix;}
$.publish('plugin/swRangeSlider/onFormatValue',[me,value]);return value;},roundTo:function(value,num){var resto=value%num;if(resto<=(num/2)){return value-resto;}else{return value+num-resto;}},getPositionByValue:function(value){var me=this;if(me.opts.stepCurve=='log'){return me._getPositionLog(value);}
return me._getPositionLinear(value);},_getPositionLog:function(value){var me=this,val=(value>0)?Math.log(value):value,minp=0,maxp=me.opts.stepCount,minv=(me.opts.rangeMin>0)?Math.log(me.opts.rangeMin):me.opts.rangeMin,maxv=(me.opts.rangeMax>0)?Math.log(me.opts.rangeMax):me.opts.rangeMax,scale=(maxv-minv)/(maxp-minp),pos=minp+(val-minv)/scale;pos=Math.round(pos*me.stepWidth);return(pos>0&&pos)||0;},_getPositionLinear:function(value){var me=this;return 100/me.range*(value-me.minRange);},getValueByPosition:function(position){var me=this;if(me.opts.stepCurve=='log'){return me._getValueLog(position);}
return me._getValueLinear(position);},_getValueLinear:function(position){var me=this;return(me.range/100*position)+me.minRange;},_getValueLog:function(position){var me=this;if(position===0){return me.minRange;}else if(position===100){return me.maxRange;}
var minp=0,maxp=me.opts.stepCount,minv=(me.opts.rangeMin>0)?Math.log(me.opts.rangeMin):me.opts.rangeMin,maxv=(me.opts.rangeMax>0)?Math.log(me.opts.rangeMax):me.opts.rangeMax,scale=(maxv-minv)/(maxp-minp);position=position/me.stepWidth;return Math.exp(minv+scale*(position-minp));},getStepWidth:function(value){var me=this;if(me.opts.stepCurve=='log'){return value;}
return me.stepWidth;},destroy:function(){var me=this;me._destroy();}});})(jQuery,window,document);;(function($,window,document,undefined){'use strict';var specialComponents={'value':{updateFacet:function(data){var me=this;if(me.isChecked(me.$inputs)){return;}
me.disable(me.$el,data===null);me.disable(me.$inputs,data===null);}},'value-list':{updateFacet:function(data){this.updateValueList(data);}},'value-list-single':{compOpts:{checkboxSelector:'input[type="checkbox"]'},initComponent:function(){var me=this;me.$inputs=me.$el.find(me.opts.checkboxSelector);me.registerComponentEvents();},validateComponentShouldBeDisabled:function(data,values,checkedIds){if(checkedIds.length>0){return false;}
if(values&&values.length<=0){return true;}
return data==null;},registerComponentEvents:function(){var me=this;me._on(me.$inputs,'change',function(event){var $el=$(event.currentTarget);if($el.is(':checked')){me.$inputs.not($el).attr('disabled','disabled').parent().addClass('is--disabled');window.setTimeout(function(){me.close();},250);}
me.onChange(event);});},updateFacet:function(data){this.updateValueList(data);},validateElementShouldBeDisabled:function($element,activeIds,ids,checkedIds,value){var val=$element.val();if(checkedIds.length>0){return checkedIds.indexOf(val)===-1;}
if(activeIds.length>0){return activeIds.indexOf(val)===-1;}
return ids.indexOf(val)===-1;}},'radio':{compOpts:{radioInputSelector:'input[type="radio"]'},initComponent:function(){var me=this;me.$radioInputs=me.$el.find(me.opts.radioInputSelector);me.$inputs=me.$radioInputs;me.registerComponentEvents();},registerComponentEvents:function(){var me=this;me._on(me.$radioInputs,'change',function(event){me.onChange(event);});},updateFacet:function(data){this.updateValueList(data);}},'value-tree':{updateFacet:function(data){this.updateValueList(data);},getValueIds:function(values){var ids=[];$(values).each(function(index,value){ids.push(value.id+'');});return ids;},registerComponentEvents:function(){var me=this;me._on(me.$inputs,'change',function(event){var $el=$(event.currentTarget);if($el.is(':checked')){me.$inputs.not($el).attr('disabled','disabled').parent().addClass('is--disabled');me.$inputs.not($el).prop('checked',false);}else{me.$inputs.prop('disabled',false).parent().removeClass('is--disabled');}
me.onChange(event);});},getValues:function(data,$elements){return this.recursiveGetValues(data.values);},recursiveGetValues:function(values){var items=[];var me=this;$(values).each(function(index,value){items.push(value);if(value.values.length>0){items=items.concat(me.recursiveGetValues(value.values));}});return items;}},'value-tree-single':{updateFacet:function(data){this.updateValueList(data);},registerComponentEvents:function(){var me=this;me._on(me.$inputs,'change',function(event){var $el=$(event.currentTarget);if($el.is(':checked')){me.$inputs.not($el).attr('disabled','disabled').parent().addClass('is--disabled');me.$inputs.not($el).prop('checked',false);}
me.onChange(event);});},getValues:function(data,$elements){if(!data||!data.values){return[];}
return this.recursiveGetValues(data.values);},recursiveGetValues:function(values){var me=this,items=[];$(values).each(function(index,value){value.id=value.id+'';items.push(value);if(value.values.length>0){items=items.concat(me.recursiveGetValues(value.values));}});return items;},validateElementShouldBeDisabled:function($element,activeIds,ids,checkedIds,value){var val=$element.val();if(activeIds.length>0){return activeIds.indexOf(val)===-1;}
if(checkedIds.length>0){return checkedIds.indexOf(val)===-1;}
return ids.indexOf(val)===-1;}},'range':{compOpts:{rangeSliderSelector:'*[data-range-slider="true"]'},initComponent:function(){var me=this;me.$rangeSliderEl=me.$el.find(me.opts.rangeSliderSelector);me.$rangeInputs=me.$rangeSliderEl.find('input');me.rangeSlider=me.$rangeSliderEl.data('plugin_swRangeSlider');me.registerComponentEvents();},updateFacet:function(data){var me=this,initial,isFiltered;initial=me.rangeSlider.opts;isFiltered=(me.rangeSlider.minValue!=initial.rangeMin||me.rangeSlider.maxValue!=initial.rangeMax);if(!isFiltered&&data){isFiltered=data.activeMin!==data.min||data.activeMax!==data.max;}
if(isFiltered){me.disableComponent(false);return;}
if(data===null){me.disableComponent(true);return;}
if(data.min==data.max){me.disableComponent(true);return;}
me.disableComponent(false);me.rangeSlider.opts.rangeMax=data.max;me.rangeSlider.opts.rangeMin=data.min;me.rangeSlider.opts.startMax=data.activeMax;me.rangeSlider.opts.startMin=data.activeMin;me.rangeSlider.computeBaseValues();},registerComponentEvents:function(){var me=this;me._on(me.$rangeInputs,'change',$.proxy(me.onChange,me));}},'date':{compOpts:{datePickerSelector:'*[data-datepicker="true"]'},initComponent:function(){var me=this;me.$datePickerEl=me.$el.find(me.opts.datePickerSelector);me.datePicker=me.$datePickerEl.data('plugin_swDatePicker');me.isRangeSlider=me.$datePickerEl.attr('data-mode')=='range';me.$form=me.$el.parents('form');me._bufferID=null;me.registerComponentEvents();},registerComponentEvents:function(){var me=this;me._on(me.$datePickerEl,'change',$.proxy(me.onChange,me));},onChange:function(event){var me=this;me.disableComponent(false);if(!me.datePicker.suspended){if(me.datePicker.opts.enableTime&&me.$form.attr('data-instant-filter-result')==='true'){me.buffer($.proxy(me.triggerChange,me,event),850);}else{me.triggerChange(event);}}
$.publish('plugin/swFilterComponent/onChange',[me,event]);},triggerChange:function(event){var me=this,$el=$(event.currentTarget);$el.trigger('onChange',[me,$el]);me._bufferID=null;},buffer:function(callback,duration){var me=this;if(me._bufferID){window.clearTimeout(me._bufferID);}
me._bufferID=window.setTimeout(callback,duration);},updateFacet:function(data){var me=this;if(data===null){me.disableComponent(true);return;}
var isFiltered=me.datePicker.flatpickr.selectedDates.length>0;if(data.min&&data.max){if(data.min===data.max&&!isFiltered){me.disableComponent(true);return;}
if(isFiltered){me.disableComponent(false);return;}
me.datePicker.suspendEvents();me.datePicker.flatpickr.set('minDate',data.min);me.datePicker.flatpickr.set('maxDate',data.max);me.datePicker.resumeEvents();me.disableComponent(false);return;}
if(!data.values||data.values.length<=0){me.disableComponent(true);return;}
if(isFiltered){me.datePicker.flatpickr.set('enable',me.datePicker.opts.enabledDates);me.disableComponent(false);return;}
var enabledDates=[];$.each(data.values,function(index,option){enabledDates.push(option.id);});me.datePicker.flatpickr.set('enable',enabledDates);me.disableComponent(enabledDates.length<=0);},disableComponent:function(disable){var me=this;if(disable&&this.$el.hasClass(this.opts.collapseCls)){this.close();}
this.setDisabledClass(this.$el,disable);if(me.isRangeSlider){me.datePicker.$rangeEndInput.prop('disabled',false);me.datePicker.$rangeStartInput.prop('disabled',false);if(disable){me.datePicker.$rangeEndInput.prop('disabled','disabled');me.datePicker.$rangeStartInput.prop('disabled','disabled');}}else{me.$datePickerEl.prop('disabled',false);if(disable){me.$datePickerEl.prop('disabled','disabled');}}}},'rating':{compOpts:{starInputSelector:'.filter-panel--star-rating input'},initComponent:function(){var me=this;me.$starInputs=me.$el.find(me.opts.starInputSelector);me.$inputs=me.$starInputs;me.registerComponentEvents();},registerComponentEvents:function(){var me=this;me._on(me.$starInputs,'change',function(event){var $el=$(event.currentTarget);me.$starInputs.parents('.rating-star--outer-container').removeClass('is--active');me.$starInputs.not($el).prop('checked',false);if($el.is(':checked')){$el.parents('.rating-star--outer-container').addClass('is--active');$el.prop('disabled',false);}
me.onChange(event);});},updateFacet:function(data){this.updateValueList(data);},validateElementShouldBeDisabled:function($element,activeIds,ids,checkedIds,value){var val=$element.val();if(value){return false;}
return checkedIds.indexOf(val)===-1;},setDisabledClass:function($element,disabled){$element.removeClass('is--disabled');$element.parents('.rating-star--outer-container').removeClass('is--disabled');if(disabled){$element.addClass('is--disabled');$element.parents('.rating-star--outer-container').addClass('is--disabled');}}}};$.plugin('swFilterComponent',{defaults:{type:'value',facetName:null,collapseCls:'is--collapsed',titleSelector:'.filter-panel--title',checkBoxSelector:'input[type="checkbox"]'},init:function(){var me=this;me.applyDataAttributes();me.type=me.$el.attr('data-filter-type')||me.opts.type;me.facetName=me.$el.attr('data-facet-name');me.$title=me.$el.find(me.opts.titleSelector);me.$siblings=me.$el.siblings('*[data-filter-type]');if(specialComponents[me.type]!==undefined){$.extend(me,specialComponents[me.type]);$.extend(me.opts,me.compOpts);}
me.initComponent();me.registerEvents();me.subscribeEvents();},subscribeEvents:function(){var me=this;$.subscribe(me.getEventName('plugin/swListingActions/onGetFilterResultFinished'),$.proxy(me.onUpdateFacets,me));},onUpdateFacets:function(event,plugin,response){var me=this;if(!response.hasOwnProperty('facets')){return;}
var facet=me.getFacet(response.facets,me.facetName);me.updateFacet(facet);},initComponent:function(){var me=this;me.$inputs=me.$el.find(me.opts.checkBoxSelector);me.registerComponentEvents();$.publish('plugin/swFilterComponent/onInitComponent',[me]);},registerEvents:function(){var me=this;if(me.type!='value'){me._on(me.$title,'click',$.proxy(me.toggleCollapse,me,true));}
$.publish('plugin/swFilterComponent/onRegisterEvents',[me]);},registerComponentEvents:function(){var me=this;me._on(me.$inputs,'change',$.proxy(me.onChange,me));$.publish('plugin/swFilterComponent/onRegisterComponentEvents',[me]);},onChange:function(event){var me=this,$el=$(event.currentTarget);me.$el.trigger('onChange',[me,$el]);$.publish('plugin/swFilterComponent/onChange',[me,event]);},getType:function(){return this.type;},open:function(closeSiblings){var me=this;if(closeSiblings){me.$siblings.removeClass(me.opts.collapseCls);}
me.$el.addClass(me.opts.collapseCls);$.publish('plugin/swFilterComponent/onOpen',[me]);},close:function(){var me=this;me.$el.removeClass(me.opts.collapseCls);$.publish('plugin/swFilterComponent/onClose',[me]);},toggleCollapse:function(){var me=this,shouldOpen=!me.$el.hasClass(me.opts.collapseCls);if(me.$el.hasClass('is--disabled')){me.close();return;}
if(shouldOpen){me.open(true);}else{me.close();}
$.publish('plugin/swFilterComponent/onToggleCollapse',[me,shouldOpen]);},destroy:function(){var me=this;me._destroy();},updateFacet:function(data){},updateValueList:function(data){var me=this,$elements,values,ids,activeIds,checkedIds;$elements=me.convertToElementList(me.$inputs);values=me.getValues(data,$elements);values=me.convertValueIds(values);ids=me.getValueIds(values);activeIds=me.getActiveValueIds(values);checkedIds=me.getElementValues(me.getCheckedElements($elements));if(me.validateComponentShouldBeDisabled(data,values,checkedIds)){me.disableAll($elements,values);return;}
$elements.each(function(index,$element){var val=$element.val()+'';var value=me.findValue(val,values);var disable=me.validateElementShouldBeDisabled($element,activeIds,ids,checkedIds,value);me.disable($element,disable);me.setDisabledClass($element.parents('.filter-panel--input'),disable);});me.disableComponent(me.allDisabled($elements));},convertValueIds:function(values){values.forEach(function(value,index){value.id=value.id+'';});return values;},disableComponent:function(disable){if(disable&&this.$el.hasClass(this.opts.collapseCls)){this.close();}
this.setDisabledClass(this.$el,disable);},validateComponentShouldBeDisabled:function(data,values,checkedIds){return data==null&&checkedIds.length<=0;},disableAll:function($elements,values){var me=this;$elements.each(function(index,$element){me.disable($element,true);me.setDisabledClass($element.parents('.filter-panel--input'),true);});me.disableComponent(true);},validateElementShouldBeDisabled:function($element,activeIds,ids,checkedIds,value){var val=$element.val()+'';if(activeIds.indexOf(val)>=0){return false;}else if(ids.indexOf(val)>=0){return false;}else if(checkedIds.indexOf(val)>=0){return false;}
return true;},getFacet:function(facets,name){var found=null;facets.forEach(function(facet,index){if(facet.facetName==name){found=facet;return false;}});return found;},isChecked:function($element){return $element.is(':checked');},getCheckedElements:function($elements){var actives=[],me=this;$elements.each(function(index,$element){if(me.isChecked($element)){actives.push($element);}});return actives;},getElementValues:function($elements){return $elements.map(function($element){return $element.val()+'';});},findValue:function(val,values){var value=null;$(values).each(function(index,item){if(item.id==val){value=item;}});return value;},disable:function($element,disabled){this.setDisabledClass($element,disabled);this.disableElement($element,disabled);},disableElement:function($element,disabled){$element.prop('disabled',false);if(disabled){$element.prop('disabled','disabled');}},setDisabledClass:function($element,disabled){$element.removeClass('is--disabled');if(disabled){$element.addClass('is--disabled');}},allDisabled:function($elements){var me=this,allDisabled=true;$elements.each(function(index,$element){if(!me.isDisabled($element)){allDisabled=false;}});return allDisabled;},isDisabled:function($element){return $element.hasClass('is--disabled');},getValueIds:function(values){var ids=[];$(values).each(function(index,value){ids.push(value.id);});return ids;},getActiveValueIds:function(values){var ids=[];$(values).each(function(index,value){if(value.active){ids.push(value.id);}});return ids;},convertToElementList:function(elements){var $elements=[];$(elements).each(function(index,element){$elements.push($(element));});return $($elements);},getValues:function(data,$elements){var me=this;if(!data){return[];}
if(data.hasOwnProperty('values')){return data.values;}
var values=[];$(data.facetResults).each(function(index,group){$(group.values).each(function(index,item){if(me.valueExists(item.id,$elements)){values.push(item);}});});return values;},valueExists:function(value,$elements){var exists=false;$elements.each(function(index,input){var val=$(input).val()+'';if(val==value){exists=true;return false;}});return exists;}});})(jQuery,window,document,undefined);;(function($,window,StateManager,undefined){'use strict';var $body=$('body');$.plugin('swListingActions',{defaults:{filterFormSelector:'*[data-filter-form="true"]',filterComponentSelector:'*[data-filter-type]',filterTriggerSelector:'*[data-filter-trigger="true"]',filterTriggerIconSelector:'.action--collapse-icon',filterContainerSelector:'.action--filter-options',filterInnerContainerSelector:'.filter--container',actionFormSelector:'*[data-action-form="true"]',actionLinkSelector:'*[data-action-link="true"]',activeFilterContSelector:'.filter--active-container',applyFilterBtnSelector:'.filter--btn-apply',activeFilterCls:'filter--active',activeFilterIconCls:'filter--active-icon',collapsedCls:'is--collapsed',hasActiveFilterCls:'is--active-filter',activeCls:'is--active',disabledCls:'is--disabled',filterCountSelector:'.filter--count',loadingClass:'is--loading',propertyPrefixChar:'__',bufferTime:850,animationSpeed:400,instantFilterActiveCls:'is--instant-filter-active',listingSelector:'.listing--container > .listing',paginationSelector:'.listing--paging.panel--paging',infiniteScrollingAttribute:'data-infinite-scrolling',paginationBarPerPageSelector:'.per-page--field.action--field',pageInputSelector:'input[name=p]',sortInputSelector:'input[name=o]',perPageInputSelector:'input[name=n]',sortActionFormSelector:'.action--sort',perPageActionFormSelector:'.action--per-page',listingWrapperSelector:'.listing--wrapper',loadingIndSelector:'.listing--wrapper',noResultContainerSelector:'.listing-no-filter-result .alert',isLoadingCls:'is--loading',loadingIndConfig:{theme:'light',animationSpeed:100,closeOnClick:false},filterCloseBtnSelector:'.filter--close-btn',closeFilterOffCanvasBtnIcon:'<i class="icon--arrow-right"></i>',searchHeadlineProductCountSelector:'.search--headline .headline--product-count',filterFacetContainerSelector:'.filter--facet-container',filterActionButtonBottomSelector:'.filter--actions.filter--actions-bottom',sidebarLoadingIndicatorParentSelector:'.content-main--inner',addArticleSelector:'*[data-add-article="true"]',listingScrollThreshold:-10},init:function(){var me=this,filterCount;me.applyDataAttributes();$('.sidebar-filter--loader').appendTo('.sidebar-filter--content');me.$filterForm=$(me.opts.filterFormSelector);me.$filterComponents=me.$filterForm.find(me.opts.filterComponentSelector);me.$filterTrigger=me.$el.find(me.opts.filterTriggerSelector);me.$filterTriggerIcon=me.$filterTrigger.find(me.opts.filterTriggerIconSelector);me.$filterCont=$(me.opts.filterContainerSelector);me.$actionForms=$(me.opts.actionFormSelector);me.$actionLinks=$(me.opts.actionLinkSelector);me.$activeFilterCont=me.$filterForm.find(me.opts.activeFilterContSelector);me.$applyFilterBtn=me.$filterForm.find(me.opts.applyFilterBtnSelector);me.$listing=$(me.opts.listingSelector);me.$pageInput=$(me.$filterForm.find(me.opts.pageInputSelector));me.$sortInput=$(me.$filterForm.find(me.opts.sortInputSelector));me.$perPageInput=$(me.$filterForm.find(me.opts.perPageInputSelector));me.$listingWrapper=me.$el.parent(me.opts.listingWrapperSelector);me.$closeFilterOffCanvasBtn=$(me.opts.filterCloseBtnSelector);me.$filterFacetContainer=me.$filterForm.find(me.opts.filterFacetContainerSelector);me.$filterActionButtonBottom=me.$filterForm.find(me.opts.filterActionButtonBottomSelector);me.$sidebarModeLoadionIndicator=$(me.opts.sidebarLoadingIndicatorParentSelector);me.$noFilterResultContainer=$(me.opts.noResultContainerSelector);me.searchHeadlineProductCount=$(me.opts.searchHeadlineProductCountSelector);me.listingUrl=me.$filterForm.attr('data-listing-url');me.loadFacets=me.$filterForm.attr('data-load-facets')==='true';me.showInstantFilterResult=me.$filterForm.attr('data-instant-filter-result')==='true';me.isInfiniteScrolling=me.$listing.attr(me.opts.infiniteScrollingAttribute);me.isFilterpanelInSidebar=me.$filterForm.attr('data-is-in-sidebar')==='true';me.controllerURL=window.location.href.split('?')[0];me.resetLabel=me.$activeFilterCont.attr('data-reset-label');me.propertyFieldNames=[];me.activeFilterElements={};me.categoryParams={};me.urlParams='';me.bufferTimeout=0;me.closeFilterOffCanvasBtnText=me.$closeFilterOffCanvasBtn.html();me.closeFilterOffCanvasBtnTextWithProducts=me.$closeFilterOffCanvasBtn.attr('data-show-products-text');me.getPropertyFieldNames();me.setCategoryParamsFromTopLocation();me.createActiveFiltersFromCategoryParams();me.createUrlParams();filterCount=Object.keys(me.activeFilterElements).length;me.updateFilterTriggerButton(filterCount>1?filterCount-1:filterCount);me.initStateHandling();me.registerEvents();me.$loadingIndicatorElement=$(me.opts.loadingIndSelector);me.$offCanvasLoadingIndicator=$(me.opts.filterInnerContainerSelector);$.subscribe('action/fetchListing',$.proxy(me.onSendListingRequest,me));me.disableActiveFilterContainer(true);var isFiltered=me.$filterForm.attr('data-is-filtered');if(isFiltered>0&&me.loadFacets){me.getFilterResult(me.urlParams,true,false);}},initStateHandling:function(){var me=this,enterFn=$.proxy(me.onEnterMobile,me),exitFn=$.proxy(me.onExitMobile,me);StateManager.registerListener([{state:'xs',enter:enterFn,exit:exitFn},{state:'s',enter:enterFn,exit:exitFn}]);$.publish('plugin/swListingActions/onInitStateHandling',[me]);},onEnterMobile:function(){var me=this,opts=me.opts;me.$filterForm.prop('style','');me.$filterFacetContainer.prop('style','');me.$filterActionButtonBottom.prop('style','');me.disableActiveFilterContainer(false);me.$filterCont.removeClass(opts.collapsedCls);me.$filterTrigger.removeClass(opts.activeCls);$.publish('plugin/swListingActions/onEnterMobile',[me]);},disableActiveFilterContainer:function(disabled){var me=this;$.publish('plugin/swListingActions/disableActiveFilter',[this,disabled]);if(me.showInstantFilterResult||me.isFilterpanelInSidebar){return;}
if(disabled){me.$activeFilterCont.addClass(me.opts.disabledCls);}else if(me.$activeFilterCont.hasClass(me.opts.disabledCls)){me.$activeFilterCont.removeClass(me.opts.disabledCls);}},onExitMobile:function(){if(StateManager.isCurrentState(['xs','s'])){return;}
if(Object.keys(this.activeFilterElements).length&&!this.isFilterpanelInSidebar){this.disableActiveFilterContainer(true);}
$.publish('plugin/swListingActions/onExitMobile',[this]);},registerEvents:function(){this._on(this.$filterForm,'submit',$.proxy(this.onFilterSubmit,this));this._on(this.$actionForms,'submit',$.proxy(this.onActionSubmit,this));this._on(this.$actionLinks,'click',$.proxy(this.onActionLink,this));this._on(this.$filterComponents,'onChange',$.proxy(this.onComponentChange,this));this._on(this.$filterTrigger,'click',$.proxy(this.onFilterTriggerClick,this));this._on($body,'click',$.proxy(this.onBodyClick,this));this.$activeFilterCont.on(this.getEventName('click'),'.'+this.opts.activeFilterCls,$.proxy(this.onActiveFilterClick,this));this.$listingWrapper.on(this.getEventName('submit'),this.opts.actionFormSelector,$.proxy(this.onActionSubmit,this));this.$listingWrapper.on(this.getEventName('click'),this.opts.actionLinkSelector,$.proxy(this.onActionLink,this));$.publish('plugin/swListingActions/onRegisterEvents',[this]);},onFilterSubmit:function(event){event.preventDefault();var formData=this.$filterForm.serializeArray(),categoryParams=this.setCategoryParamsFromData(formData,false);this.applyCategoryParams(categoryParams);$.publish('plugin/swListingActions/onFilterSubmit',[this,event]);},onActionSubmit:function(event){event.preventDefault();var $form=$(event.currentTarget),formData=$form.serializeArray(),categoryParams=this.setCategoryParamsFromData(formData,true);if(this.showInstantFilterResult){this.setPageInput(this.getFormValue(formData,'p'));if(this.isSortAction($form)){this.setSortInput(this.getFormValue(formData,'o'));}else if(this.isPerPageAction($form)){this.setPerPageInput(this.getFormValue(formData,'n'));}}
this.applyCategoryParams(categoryParams);$.publish('plugin/swListingActions/onActionSubmit',[this,event]);},getFormValue:function(data,key){var value='';$.each(data,function(index,item){if(item.name===key){value=item.value;}});return value;},isSortAction:function($form){return $form.is(this.opts.sortActionFormSelector);},isPerPageAction:function($form){return $form.is(this.opts.perPageActionFormSelector);},setPageInput:function(value){this.$pageInput.val(value);},setSortInput:function(value){this.$sortInput.val(value);},setPerPageInput:function(value){this.$perPageInput.val(value);},onActionLink:function(event){event.preventDefault();var me=this,$link=$(event.currentTarget),linkParams=$link.attr('href').split('?')[1],linkParamsArray=linkParams.split('&'),paramValue;if(me.showInstantFilterResult){$.each(linkParamsArray,function(index,param){paramValue=param.split('=');if(paramValue[0]==='p'){me.setPageInput(paramValue[1]);}});}
this.applyCategoryParams(this.setCategoryParamsFromUrlParams(linkParams));$.publish('plugin/swListingActions/onActionLink',[this,event]);},onFilterTriggerClick:function(event){event.preventDefault();if(StateManager.isCurrentState(['xs','s'])){return;}
if(this.$filterCont.hasClass(this.opts.collapsedCls)){this.closeFilterPanel();}else{this.openFilterPanel();}
$.publish('plugin/swListingActions/onFilterTriggerClick',[this,event]);},onBodyClick:function(event){var $target=$(event.target);if(!$target.is(this.opts.filterComponentSelector+', '+this.opts.filterComponentSelector+' *')){$.each(this.$filterComponents,function(index,item){$(item).data('plugin_swFilterComponent').close();});}
$.publish('plugin/swListingActions/onBodyClick',[this,event]);},onComponentChange:function(event){var urlParams,formData,categoryParams;if(this.showInstantFilterResult){this.setPageInput(1);}
formData=this.$filterForm.serializeArray();categoryParams=this.setCategoryParamsFromData(formData);urlParams=this.createUrlParams(categoryParams);this.createActiveFiltersFromCategoryParams(categoryParams);this.enableButtonLoading();this.buffer($.proxy(this.getFilterResult,this,urlParams,this.loadFacets,this.showInstantFilterResult),this.opts.bufferTime);$.publish('plugin/swListingActions/onComponentChange',[this,event]);},onActiveFilterClick:function(event){var me=this,$activeFilter=$(event.currentTarget),param=$activeFilter.attr('data-filter-param'),isMobile=StateManager.isCurrentState(['xs','s']);if(param==='reset'){$.each(me.activeFilterElements,function(key){me.removeActiveFilter(key);me.resetFilterProperty(key);});$.each(me.$filterComponents,function(i,component){var $component=$(component),componentPlugin=$component.data('plugin_swFilterComponent');$.each(componentPlugin.$inputs,function(i,item){componentPlugin.disable($(item),false);componentPlugin.disableComponent(false);});$component.removeClass(me.opts.disabledCls).find('.'+me.opts.disabledCls).removeClass(me.opts.disabledCls);});if(!isMobile&&!me.$filterCont.hasClass(me.opts.collapsedCls)){me.applyCategoryParams();}}else if(!me.$activeFilterCont.hasClass(me.opts.disabledCls)||me.$filterCont.is('.off-canvas.is--open')){me.removeActiveFilter(param);me.resetFilterProperty(param);}
$.publish('plugin/swListingActions/onActiveFilterClick',[me,event]);},getPropertyFieldNames:function(){var me=this;$.each(me.$filterComponents,function(index,item){var $comp=$(item),types=['value-list','value-list-single','value-tree','media','value-tree-single','date'],type=$comp.attr('data-filter-type'),fieldName=$comp.attr('data-field-name');if(types.indexOf(type)>=0&&me.propertyFieldNames.indexOf(fieldName)===-1){me.propertyFieldNames.push(fieldName);}});$.publish('plugin/swListingActions/onGetPropertyFieldNames',[me,me.propertyFieldNames]);return me.propertyFieldNames;},setCategoryParamsFromData:function(formData,extend){var tempParams={};$.each(formData,function(index,item){if(item['value']){tempParams[item['name']]=item['value'];}});if(extend){return $.extend(this.categoryParams,tempParams);}
this.categoryParams=tempParams;$.publish('plugin/swListingActions/onSetCategoryParamsFromData',[this,tempParams]);return tempParams;},setCategoryParamsFromTopLocation:function(){var urlParams=window.location.search.substr(1),categoryParams=this.setCategoryParamsFromUrlParams(urlParams);$.publish('plugin/swListingActions/onSetCategoryParamsFromData',[this,categoryParams]);return categoryParams;},setCategoryParamsFromUrlParams:function(urlParamString){var me=this,categoryParams,params;if(urlParamString.length<=0){categoryParams={};$.publish('plugin/swListingActions/onSetCategoryParamsFromUrlParams',[me,categoryParams]);return categoryParams;}
categoryParams=me.categoryParams;params=urlParamString.split('&');$.each(params,function(index,item){var param=item.split('=');param=$.map(param,function(val){val=val.replace(/\+/g,'%20');return decodeURIComponent(val);});if(param[1]==='reset'){delete categoryParams[param[0]];}else if(me.propertyFieldNames.indexOf(param[0])!==-1){var properties=param[1].split('|');$.each(properties,function(index,property){categoryParams[me.opts.propertyPrefixChar+param[0]+me.opts.propertyPrefixChar+property]=property;});}else{categoryParams[param[0]]=param[1];}});$.publish('plugin/swListingActions/onSetCategoryParamsFromUrlParams',[me,categoryParams]);return categoryParams;},applyCategoryParams:function(categoryParams){var params=categoryParams||this.categoryParams,urlParams=this.createUrlParams(params);this.applyUrlParams(urlParams);$.publish('plugin/swListingActions/onApplyCategoryParams',[this,categoryParams]);},createUrlParams:function(categoryParams){var catParams=categoryParams||this.categoryParams,params=this.cleanParams(catParams),filterList=[];$.each(params,function(key,value){filterList.push(encodeURIComponent(key)+'='+encodeURIComponent(value));});this.urlParams='?'+filterList.join('&');$.publish('plugin/swListingActions/onCreateUrlParams',[this,this.urlParams]);return this.urlParams;},cleanParams:function(params){var me=this,propertyParams={};$.each(params,function(key,value){if(key.substr(0,2)===me.opts.propertyPrefixChar){var propertyKey=key.split(me.opts.propertyPrefixChar)[1];if(propertyParams[propertyKey]!==undefined){propertyParams[propertyKey]+='|'+value;}else{propertyParams[propertyKey]=value;}}else{propertyParams[key]=value;}});return propertyParams;},applyUrlParams:function(urlParams){var params=urlParams||this.urlParams,formData,categoryParams,paramsForFilterResult;if(this.showInstantFilterResult){formData=this.$filterForm.serializeArray();categoryParams=this.setCategoryParamsFromData(formData);paramsForFilterResult=this.createUrlParams(categoryParams);this.enableButtonLoading();this.buffer($.proxy(this.getFilterResult,this,paramsForFilterResult,false,this.showInstantFilterResult),this.opts.bufferTime);}else{window.location.href=this.getListingUrl(params,false);}
$.publish('plugin/swListingActions/onApplyUrlParams',[this,urlParams]);},getListingUrl:function(urlParams,encode){var params=urlParams||this.urlParams,url;if(encode){url=encodeURI(this.controllerURL+params);}else{url=this.controllerURL+params;}
$.publish('plugin/swListingActions/onGetListingUrl',[this,url,urlParams,encode]);return url;},buffer:function(func,bufferTime){if(this.bufferTimeout){clearTimeout(this.bufferTimeout);}
this.bufferTimeout=setTimeout(func,bufferTime);$.publish('plugin/swListingActions/onBuffer',[this,this.bufferTimeout,func,bufferTime]);},resetBuffer:function(){this.bufferTimeout=0;$.publish('plugin/swListingActions/onResetBuffer',[this,this.bufferTimeout]);},onSendListingRequest:function(event,params,loadFacets,loadProducts,callback){var formData=this.$filterForm.serializeArray();$.each(formData,function(index,item){if(!params.hasOwnProperty(item.name)){if(!item.value||(typeof item.value==='string'&&item.value.length<=0)){return;}
params[item.name]=item.value;}});this.sendListingRequest(params,loadFacets,loadProducts,callback,true);},sendListingRequest:function(params,loadFacets,loadProducts,callback,appendDefaults){if(typeof params==='object'){params='?'+$.param(params);}
this.resetBuffer();$.ajax({type:'get',url:this.buildListingUrl(params,loadFacets,loadProducts),success:$.proxy(callback,this)});$.publish('plugin/swListingActions/onGetFilterResult',[this,params]);},getFilterResult:function(urlParams,loadFacets,loadProducts){var me=this,params=urlParams||me.urlParams,loadingIndicator=me.$loadingIndicatorElement;if(me.$filterCont.is('.off-canvas.is--open')){loadingIndicator=me.$offCanvasLoadingIndicator;}else if(me.isFilterpanelInSidebar){loadingIndicator=me.$sidebarModeLoadionIndicator;}
me.resetBuffer();me.enableLoading(loadingIndicator,loadProducts,function(){me.sendListingRequest(params,loadFacets,loadProducts,function(response){me.disableLoading(loadingIndicator,loadProducts,response,function(){me.updateListing(response);$.publish('plugin/swListingActions/onGetFilterResultFinished',[me,response,params]);});});});},enableLoading:function(loadingIndicator,loadProducts,callback){callback=$.isFunction(callback)?callback:$.noop;if(loadProducts){this.$listing.addClass(this.opts.isLoadingCls);loadingIndicator.setLoading(true,this.opts.loadingIndConfig).then($.proxy(callback,this));}else{this.enableButtonLoading();callback.call(this);}},enableButtonLoading:function(){if(!this.showInstantFilterResult){this.$applyFilterBtn.addClass(this.opts.loadingClass);}},disableLoading:function(loadingIndicator,loadProducts,response,callback){callback=$.isFunction(callback)?callback:$.noop;if(loadProducts){loadingIndicator.setLoading(false).then($.proxy(callback,this));}else{this.$applyFilterBtn.removeClass(this.opts.loadingClass);this.updateFilterButton(response.totalCount);callback.call(this);}},buildListingUrl:function(formParams,loadFacets,loadProducts){var url=this.listingUrl+formParams;if(loadProducts){url+='&loadProducts=1';}
if(loadFacets){url+='&loadFacets=1';}
return url;},updateListing:function(response){var html,listing=this.$listing,pages;if(!response.hasOwnProperty('listing')){listing.removeClass(this.opts.isLoadingCls);return;}
this.updateFilterCloseButton(response.totalCount);this.updateSearchHeadline(response.totalCount);this.updateNoResultContainer(response.totalCount);html=response.listing.trim();listing.html(html);window.picturefill();listing.removeClass(this.opts.isLoadingCls);window.history.pushState('data','',window.location.href.split('?')[0]+this.urlParams);$.publish('plugin/swListingActions/updateListing',[this,html]);StateManager.updatePlugin(this.opts.addArticleSelector,'swAddArticle');if(this.isInfiniteScrolling){pages=Math.ceil(response.totalCount/this.$perPageInput.val());listing.attr('data-pages',pages);listing.data('plugin_swInfiniteScrolling').destroy();StateManager.addPlugin(this.opts.listingSelector,'swInfiniteScrolling');$.publish('plugin/swListingActions/updateInfiniteScrolling',[this,html,pages]);}else{this.updatePagination(response);this.scrollToTopPagination();}},scrollToTopPagination:function(){var $htmlBodyCt=$('html, body'),listingScrollThreshold=this.opts.listingScrollThreshold,listingActionPos=this.$el.offset().top+listingScrollThreshold,scrollTop=$htmlBodyCt.scrollTop();if(scrollTop===0){scrollTop=$('body').scrollTop();}
if(scrollTop>listingActionPos){$htmlBodyCt.animate({scrollTop:listingActionPos},this.opts.animationSpeed);}},updateFilterCloseButton:function(totalCount){var filterCount=Object.keys(this.activeFilterElements).length;if(filterCount>0){this.$closeFilterOffCanvasBtn.html(this.closeFilterOffCanvasBtnTextWithProducts.replace('%s',totalCount)+this.opts.closeFilterOffCanvasBtnIcon);$.publish('plugin/swListingActions/updateFilterCloseBtnWithProductsCount',[this,totalCount]);}else{this.$closeFilterOffCanvasBtn.html(this.closeFilterOffCanvasBtnText);$.publish('plugin/swListingActions/updateFilterCloseBtnDefault',[this]);}
this.updateFilterTriggerButton(filterCount>1?filterCount-1:filterCount);},updateSearchHeadline:function(totalCount){if(this.searchHeadlineProductCount.length>0){this.searchHeadlineProductCount.html(totalCount);}},updateNoResultContainer:function(totalCount){if(totalCount>0){if(!this.$noFilterResultContainer.hasClass('is--hidden')){this.$noFilterResultContainer.addClass('is--hidden');}
return;}
if(this.$noFilterResultContainer.hasClass('is--hidden')){this.$noFilterResultContainer.removeClass('is--hidden');}},updatePagination:function(response){var html=response.pagination.trim();$(this.opts.paginationSelector).replaceWith(html);StateManager.updatePlugin(this.opts.paginationBarPerPageSelector,'swAutoSubmit');$.publish('plugin/swListingActions/updatePagination',[this,html]);},updateFilterButton:function(count){this.$applyFilterBtn.find(this.opts.filterCountSelector).html(count);if(count<=0){this.$applyFilterBtn.attr('disabled','disabled');}else{this.$applyFilterBtn.prop('disabled',false);}
$.publish('plugin/swListingActions/onUpdateFilterButton',[this,count]);},updateFilterTriggerButton:function(activeFilterCount){this.$filterTriggerIcon.html(activeFilterCount||'');$.publish('plugin/swListingActions/onUpdateFilterTriggerButton',[this,activeFilterCount]);},createActiveFiltersFromCategoryParams:function(categoryParams){var me=this,count=0,params=categoryParams||this.categoryParams;$.each(this.activeFilterElements,function(key){if(params[key]===undefined||params[key]===0){me.removeActiveFilter(key);}});$.each(params,function(key,value){me.createActiveFilter(key,value);});$.each(this.activeFilterElements,function(){count++;});if(count>1){this.createActiveFilterElement('reset',this.resetLabel);}
this.$filterCont.toggleClass(this.opts.hasActiveFilterCls,(count>0));if(this.showInstantFilterResult&&count>0){this.$filterCont.addClass(this.opts.instantFilterActiveCls);}
if(!this.opts.isFilterpanelInSidebar){this.$activeFilterCont.toggleClass(this.opts.collapsedCls,this.$filterCont.hasClass(this.opts.collapsedCls));}
$.publish('plugin/swListingActions/onCreateActiveFiltersFromCategoryParams',[this,categoryParams]);},createActiveFilter:function(param,value){var label=this.createActiveFilterLabel(param,value);if(label!==undefined&&label.length){if(this.activeFilterElements[param]!==undefined){this.updateActiveFilterElement(param,label);}else{this.createActiveFilterElement(param,label);}}
$.publish('plugin/swListingActions/onCreateActiveFilter',[this,param,value]);},createActiveFilterElement:function(param,label){this.activeFilterElements[param]=$('<span>',{'class':this.opts.activeFilterCls,'html':this.getLabelIcon()+label,'data-filter-param':param}).appendTo(this.$activeFilterCont);$.publish('plugin/swListingActions/onCreateActiveFilterElement',[this,param,label]);},updateActiveFilterElement:function(param,label){this.activeFilterElements[param].html(this.getLabelIcon()+label);$.publish('plugin/swListingActions/onUpdateActiveFilterElement',[this,param,label]);},removeActiveFilter:function(param){this.activeFilterElements[param].remove();delete this.activeFilterElements[param];$.publish('plugin/swListingActions/onRemoveActiveFilter',[this,param]);},resetFilterProperty:function(param){var $input,rangeSlider;if(param==='rating'){$input=this.$filterForm.find('.filter--rating .is--active input[name="rating"]');$input.prop('checked',false).trigger('change');}else{$input=this.$filterForm.find('[name="'+this.escapeDoubleQuotes(param)+'"]');if($input.is('[data-range-input]')){rangeSlider=$input.parents('[data-range-slider="true"]').data('plugin_swRangeSlider');rangeSlider.reset($input.attr('data-range-input'));}else if($input.is('[data-datepicker="true"]')||$input.is('[data-date-range-input]')){$input.trigger('clear');}else{$input.prop('checked',false).trigger('change');}}
$.publish('plugin/swListingActions/onResetFilterProperty',[this,param]);},createActiveFilterLabel:function(param,value){var $label,labelText='',valueString=value+'';if(param==='rating'&&value>0){labelText=this.createStarLabel(value);}else{$label=this.$filterForm.find('label[for="'+this.escapeDoubleQuotes(param)+'"]');if($label.is('[data-range-label]')){labelText=$label.prev('span').html()+$label.html();}else if($label.is('[data-date-range-label]')){labelText=$label.html()+' '+$label.next('[data-date-range-input]').attr('data-display-value');}else if($label.find('img').length){labelText=$label.find('img').attr('alt');}else if($label.closest(this.opts.filterComponentSelector).is('[data-filter-type="radio"]')){var activeRadioId=$label.closest(this.opts.filterComponentSelector).find('input:checked').attr('id');labelText=this.$filterForm.find('label[for="'+this.escapeDoubleQuotes(activeRadioId)+'"]').html();}else if(value>0||valueString.length>0){labelText=$label.html();}}
$.publish('plugin/swListingActions/onCreateActiveFilterLabel',[this,labelText,param,value]);return labelText;},escapeDoubleQuotes:function(str){return str.replace(/\\([\s\S])|(")/g,'\\$1$2');},createStarLabel:function(stars){var label='',i=0;for(i;i<5;i++){if(i<stars){label+='<i class="icon--star"></i>';}else{label+='<i class="icon--star-empty"></i>';}}
$.publish('plugin/swListingActions/onCreateStarLabel',[this,label,stars]);return label;},getLabelIcon:function(){var icon='<span class="'+this.opts.activeFilterIconCls+'"></span>';$.publish('plugin/swListingActions/onCreateStarLabel',[this,icon]);return icon;},openFilterPanel:function(){if(!this.$filterCont.hasClass(this.opts.hasActiveFilterCls)){this.$activeFilterCont.slideDown(this.opts.animationSpeed);}
this.$filterFacetContainer.slideDown(this.opts.animationSpeed);this.$filterActionButtonBottom.slideDown(this.opts.animationSpeed);this.disableActiveFilterContainer(false);this.$filterCont.addClass(this.opts.collapsedCls);this.$filterTrigger.addClass(this.opts.activeCls);$.publish('plugin/swListingActions/onOpenFilterPanel',[this]);},closeFilterPanel:function(){if(!this.$filterCont.hasClass(this.opts.hasActiveFilterCls)){this.$activeFilterCont.slideUp(this.opts.animationSpeed);}
this.$filterFacetContainer.slideUp(this.opts.animationSpeed);this.$filterActionButtonBottom.slideUp(this.opts.animationSpeed);this.disableActiveFilterContainer(true);this.$filterCont.removeClass(this.opts.collapsedCls);this.$filterTrigger.removeClass(this.opts.activeCls);$.publish('plugin/swListingActions/onCloseFilterPanel',[this]);},destroy:function(){this.$el.off(this.getEventName('click'),'.'+this.opts.activeFilterCls);this.$listingWrapper.off(this.getEventName('submit'),this.opts.actionFormSelector);this.$listingWrapper.off(this.getEventName('click'),this.opts.actionLinkSelector);this._destroy();}});})(jQuery,window,StateManager,undefined);;(function($,window){'use strict';$.plugin('swCollapseCart',{defaults:{'ajaxCartURL':window.controller['ajax_cart'],'triggerElSelector':'.navigation--entry.entry--cart','itemContainerSelector':'.item--container','removeItemSelector':'.action--remove','offcanvasCloseElSelector':'.close--off-canvas','loadingIconClass':'icon--loading-indicator','loadingIconWrapperClass':'ajax--cart','activeClass':'is--shown','displayMode':'collapsible','shippingCalculatorOptions':'.table--shipping-costs select'},init:function(){var me=this,opts;me.applyDataAttributes(false,['ajaxCartURL']);opts=me.opts;me._$triggerEl=$(opts.triggerElSelector);me._$linkEl=me._$triggerEl.find('.cart--link');me._isOverMe=false;me._isCartLoading=false;me._$loadingIcon=$('<i>',{'class':opts.loadingIconClass});me._isOpened=false;if(me.isDisplayMode('offcanvas')){me._$triggerEl.swOffcanvasMenu({'offCanvasSelector':me.$el,'direction':'fromRight'});}
me.registerEvents();},registerEvents:function(){var me=this;me.$el.on(me.getEventName('click'),me.opts.removeItemSelector,$.proxy(me.onRemoveButtonClick,me));me.$el.on(me.getEventName('click touchstart'),me.opts.offcanvasCloseElSelector,$.proxy(me.onCloseButtonClick,me));if(me.isDisplayMode('offcanvas')){me._on(me._$triggerEl,'click touchstart',$.proxy(me.onMouseEnter,me));$.subscribe(me.getEventName('plugin/swAddArticle/onAddArticle'),$.proxy(me.onArticleAdded,me));$.subscribe(me.getEventName('plugin/swAddArticle/onBeforeAddArticle'),$.proxy(me.onBeforeAddArticle,me));}else{me._on(me._$triggerEl,'mouseenter touchstart',$.proxy(me.onMouseEnter,me));me._on(me._$triggerEl,'mouseleave',$.proxy(me.onMouseLeave,me));me._on(me._$triggerEl,'click',$.proxy(me.onClick,me));me._on(me.$el,'mouseleave',$.proxy(me.onMouseLeave,me));$('.container--ajax-cart,'+me.opts.triggerElSelector).on(me.getEventName('mouseover'),$.proxy(me.onMouseHoverStart,me)).on(me.getEventName('mouseleave'),$.proxy(me.onMouseHoverEnd,me));}
$.publish('plugin/swCollapseCart/onRegisterEvents',[me]);},onBeforeAddArticle:function(){this.showLoadingIndicator();this.openMenu();$.publish('plugin/swCollapseCart/onBeforeAddArticle',[this]);},onArticleAdded:function(event,plugin,response){if(this.isDisplayMode('collapsible')){return;}
this.$el.html(response).find('.ajax--cart .alert').removeClass('is--hidden');picturefill();this._on(this.$el.find(this.opts.shippingCalculatorOptions),'change',$.proxy(this.onShippingCalculationChange,this));$.publish('plugin/swCollapseCart/onArticleAdded',[this]);},onMouseEnter:function(event){var me=this;if(me.isDisplayMode('offcanvas')){event.preventDefault();me.showLoadingIndicator();me.openMenu();me.loadCart();}else{if(me.isCartLoading()){me.showLoadingIndicator();me.openMenu();}else{me.buffer(function(){if(me.isOverMe()===false||me._wasClicked===true){return;}
me.showLoadingIndicator();me.openMenu();me.loadCart(function(){$('body').one('touchstart',$.proxy(me.onMouseLeave,me));$.publish('plugin/swCollapseCart/onMouseEnterLoaded',[me,event]);});$.publish('plugin/swCollapseCart/onMouseEnterBuffer',[me,event]);},500);}}
$.publish('plugin/swCollapseCart/onMouseEnter',[me,event]);},onMouseLeave:function(event){var target=event.toElement||event.relatedTarget||event.target;$.publish('plugin/swCollapseCart/onMouseLeave',[this,event]);if(this.isElementOrChild(this.$el[0],target)||this.isElementOrChild(this._$triggerEl[0],target)){return;}
this.closeMenu();this.clearBuffer();},onCloseButtonClick:function(event){event.preventDefault();$.publish('plugin/swCollapseCart/onCloseButton',[this]);this.closeMenu();},onRemoveButtonClick:function(event){event.preventDefault();var me=this,$currentTarget=$(event.currentTarget),$parent=$currentTarget.parent(),$form=$currentTarget.closest('form'),url;if($currentTarget.attr('href')){url=$currentTarget.attr('href');}else{url=$form.attr('action');}
$.publish('plugin/swCollapseCart/onRemoveArticle',[me,event]);$parent.html(me._$loadingIcon.clone());$.ajax({url:url,dataType:'html',method:'POST',success:function(result){me.$el.html(result);picturefill();$.publish('plugin/swCollapseCart/onRemoveArticleFinished',[me,event,result]);}});},buffer:function(func,bufferTime){this.clearBuffer();this.bufferTimeout=setTimeout(func,bufferTime);},clearBuffer:function(){if(this.bufferTimeout){clearTimeout(this.bufferTimeout);}},isElementOrChild:function(firstEl,secondEl){return firstEl===secondEl||$.contains(firstEl,secondEl);},isDisplayMode:function(mode){return this.opts.displayMode===mode;},showLoadingIndicator:function(){this.$el.html($('<div>',{'class':this.opts.loadingIconWrapperClass,'html':this._$loadingIcon.clone()}));$.publish('plugin/swCollapseCart/onShowLoadingIndicator',[this]);},openMenu:function(){var plugin;this._isOpened=true;if(this.isDisplayMode('offcanvas')&&(plugin=this._$triggerEl.data('plugin_swOffcanvasMenu'))){plugin.openMenu();}else{this.$el.addClass(this.opts.activeClass);}
$.publish('plugin/swCollapseCart/onMenuOpen',[this]);},loadCart:function(callback,settings){var me=this,opts=me.opts,$el=me.$el,url=opts.ajaxCartURL;settings=settings||{};if(me.isCartLoading()){return;}
$.publish('plugin/swCollapseCart/onLoadCart',[me]);me._$linkEl.addClass('is--disabled');me._isCartLoading=true;$.ajax({url:url,dataType:'html',data:settings,success:function(result){$el.html(result);picturefill();me._on(me.$el.find(me.opts.shippingCalculatorOptions),'change',$.proxy(me.onShippingCalculationChange,me));if(typeof callback==='function'){callback();}
$.publish('plugin/swCollapseCart/onLoadCartFinished',[me,result]);},complete:function(){me._$linkEl.removeClass('is--disabled');me._isCartLoading=false;}});},closeMenu:function(){var plugin;this._isOpened=false;if(this.isDisplayMode('offcanvas')&&(plugin=this._$triggerEl.data('plugin_swOffcanvasMenu'))){plugin.closeMenu();}else{this.$el.removeClass(this.opts.activeClass);}
$.publish('plugin/swCollapseCart/onCloseMenu',[this]);},onClick:function(event){if(this.isCartLoading()){event.preventDefault();return false;}
this._wasClicked=true;},isCartLoading:function(){return!!this._isCartLoading;},isOverMe:function(){return!!this._isOverMe;},onMouseHoverStart:function(){this._isOverMe=true;},onMouseHoverEnd:function(){this._isOverMe=false;},onShippingCalculationChange:function(event){var me=this,form=$(event.target).closest('form');$.publish('plugin/swCollapseCart/onShippingCalculationChange',[this]);me.showLoadingIndicator();$.ajax({type:'POST',url:form.attr('action'),data:form.serialize(),success:function(res){me.loadCart(function(){},{openShippingCalculations:true});$.publish('plugin/swCollapseCart/onShippingCalculationChangeFinished',[this]);}});},destroy:function(){$.unsubscribe(this.getEventName('plugin/swAddArticle/onAddArticle'));$.unsubscribe(this.getEventName('plugin/swAddArticle/onBeforeAddArticle'));this.off(this.eventSuffix);this._destroy();}});})(jQuery,window);;(function($,window,document,undefined){'use strict';var $window=$(window),$body=$('body');$.plugin('swEmotionLoader',{defaults:{controllerUrl:null,availableDevices:null,deviceTypes:{'xl':'0','l':'1','m':'2','s':'3','xs':'4'},wrapperSelector:'.emotion--wrapper',loadingOverlaySelector:'.emotion--overlay'},init:function(){var me=this,opts=me.opts;me.applyDataAttributes();if(opts.controllerUrl===null||opts.availableDevices===null){me.$el.remove();return;}
me.$emotion=false;me.availableDevices=(opts.availableDevices+'').split(',');me.$overlay=$(me.opts.loadingOverlaySelector);me.loadEmotion();me.registerEvents();},registerEvents:function(){var me=this;StateManager.on('resize',$.proxy(me.onDeviceChange,me));$.publish('plugin/swEmotionLoader/onRegisterEvents',[me]);},onDeviceChange:function(){var me=this;me.loadEmotion();$.publish('plugin/swEmotionLoader/onDeviceChange',[me]);},loadEmotion:function(controllerUrl,deviceState){var me=this,devices=me.availableDevices,types=me.opts.deviceTypes,url=controllerUrl||me.opts.controllerUrl,state=deviceState||StateManager.getCurrentState();if(devices.indexOf(types[state])===-1){me.$overlay.remove();me.hideEmotion();return;}
if(!devices.length||!state.length||!url.length){me.$overlay.remove();me.hideEmotion();return;}
if(me.$emotion&&me.$emotion.length){me.$overlay.remove();me.showEmotion();return;}
me.showEmotion();if(me.isLoading){return;}
me.isLoading=true;me.$overlay.insertBefore('.content-main');$.ajax({url:url,method:'GET',success:function(response){me.isLoading=false;me.$overlay.remove();$.publish('plugin/swEmotionLoader/onLoadEmotionLoaded',[me]);if(!response.length){me.hideEmotion();return;}
me.initEmotion(response);$.publish('plugin/swEmotionLoader/onLoadEmotionFinished',[me]);}});$.publish('plugin/swEmotionLoader/onLoadEmotion',[me]);},initEmotion:function(html){var me=this;me.$el.html(html);me.$emotion=me.$el.find('*[data-emotion="true"]');if(!me.$emotion.length){return;}
me.$emotion.swEmotion();$.publish('plugin/swEmotionLoader/onInitEmotion',[me,html]);},showEmotion:function(){var me=this;me.$el.css('display','block');$.publish('plugin/swEmotionLoader/onShowEmotion',[me]);},hideEmotion:function(){var me=this;me.$el.css('display','none');$.publish('plugin/swEmotionLoader/onHideEmotion',[me]);},destroy:function(){var me=this;me._destroy();}});$.plugin('swEmotion',{defaults:{gridMode:'resize',baseWidth:1160,fullscreen:false,columns:4,cellHeight:185,cellSpacing:10,elementSelector:'.emotion--element',gridSizerSelector:'.emotion--sizer',bannerElSelector:'[data-coverImage="true"]',videoElSelector:'.emotion--video',wrapperSelector:'.emotion--wrapper',},init:function(){var me=this;me.applyDataAttributes();me.bufferedCall=false;me.$contentMain=$('.content-main');me.$container=me.$el.parents('.content--emotions');me.$wrapper=me.$el.parents(me.opts.wrapperSelector);me.$elements=me.$el.find(me.opts.elementSelector);me.$gridSizer=me.$el.find(me.opts.gridSizerSelector);me.$bannerElements=me.$elements.find(me.opts.bannerElSelector);me.$videoElements=me.$elements.find(me.opts.videoElSelector);me.$productSliderElements=me.$elements.find('*[data-product-slider="true"]');me.remSpacing=~~me.opts.cellSpacing/16;me.currentState=window.StateManager.getCurrentState();if(me.opts.fullscreen){me.initFullscreen();}
me.initState(me.currentState);me.initMode(me.opts.gridMode);me.initElements();me.registerEvents();},initMode:function(gridMode){var me=this,mode=gridMode||me.opts.gridMode,modeMethod='init'+mode.charAt(0).toUpperCase()+mode.slice(1)+'Grid';if(typeof me[modeMethod]==='function'){me[modeMethod]();}else{me.initFluidGrid();}
if(mode!=='resize'){me.setContainerSpacing();}},initState:function(state){var me=this;state=state||window.StateManager.getCurrentState();me.$sizer=me.$el.find('.emotion--sizer-'+state);me.clsPrefix='-'+state;if(me.$sizer.length<=0){me.$sizer=me.$el.find('.emotion--sizer');me.clsPrefix='';}
me.rows=~~me.$sizer.attr('data-rows');},initElements:function(){var me=this;if(me.opts.gridMode!=='rows'){$.each(me.$bannerElements,function(index,item){$(item).swEmotionBanner();});}
$.each(me.$videoElements,function(index,item){$(item).swEmotionVideo();});StateManager.updatePlugin('*[data-product-slider="true"]','swProductSlider');StateManager.updatePlugin('*[data-image-slider="true"]','swImageSlider');StateManager.updatePlugin('*[data-modalbox="true"]','swModalbox');window.picturefill();$.publish('plugin/swEmotion/onInitElements',[me]);},initFullscreen:function(){var me=this;$body.addClass('is--no-sidebar');me.$contentMain.addClass('is--fullscreen');me.$wrapper.addClass('is--fullscreen');$.publish('plugin/swEmotion/onInitFullscreen',[me]);},removeFullscreen:function(showSidebar){var me=this;if(showSidebar)$body.removeClass('is--no-sidebar');me.$contentMain.removeClass('is--fullscreen');me.$wrapper.removeClass('is--fullscreen');$.publish('plugin/swEmotion/onRemoveFullscreen',[me,showSidebar]);},initMasonryGrid:function(){var me=this;me.initFluidGrid();$.publish('plugin/swEmotion/onInitMasonryGrid',[me]);},initFluidGrid:function(){var me=this;me.setElementHeights();me.setElementPositions();$.publish('plugin/swEmotion/onInitFluidGrid',[me]);},initResizeGrid:function(){var me=this;me.baseWidth=~~me.opts.baseWidth;me.$el.css('width',me.baseWidth+me.opts.cellSpacing);if(!me.opts.fullscreen){me.$wrapper.css('max-width',me.baseWidth);}
me.setElementHeights();me.setElementPositions();me.scale();$.publish('plugin/swEmotion/onInitScaleGrid',[me]);},initRowsGrid:function(){var me=this,r,c,rowCls,colCls,element,elementCols,lastCol=0,colExp=new RegExp(' col'+me.clsPrefix+'-(\\d)','i'),hiddenElements=$('<div>',{'class':'hidden-elements'}),rows=[];me.$elements.filter('.is--hidden'+me.clsPrefix).appendTo(hiddenElements);for(r=1;r<=me.rows;r++){rows[r]=$('<div>',{'class':'emotion--row row--'+r});lastCol=0;for(c=1;c<=me.opts.columns;c++){rowCls='.start-row'+me.clsPrefix+'-'+r;colCls='.start-col'+me.clsPrefix+'-'+c;element=me.$elements.filter(rowCls+colCls).not('.is--hidden'+me.clsPrefix);if(element.length>0){elementCols=~~(element.attr('class').match(colExp)[1]||1);element.appendTo(rows[r]);if(c-lastCol>1){element.css('margin-left',100/me.opts.columns*(c-lastCol-1)+'%');}else{element.css('margin-left','inherit');}
lastCol=c+elementCols-1;}}}
me.$el.find(':not([data-rows])').remove();hiddenElements.appendTo(me.$el);$.each(rows,function(rowIndex,$row){me.$el.append($row);});$.publish('plugin/swEmotion/onInitRowsGrid',[me,rows,hiddenElements]);},registerEvents:function(){var me=this;window.StateManager.on('resize',$.proxy(me.onResize,me));if(me.opts.fullscreen){$.subscribe(me.getEventName('plugin/swEmotionLoader/onShowEmotion'),$.proxy(me.onShow,me));$.subscribe(me.getEventName('plugin/swEmotionLoader/onHideEmotion'),$.proxy(me.onHide,me));}
$.publish('plugin/swEmotion/onRegisterEvents',[me]);},onResize:function(){var me=this,state=window.StateManager.getCurrentState();me.initState(state);if(me.opts.gridMode==='resize'){me.scale();}
if(me.opts.gridMode==='resize'||me.opts.gridMode==='fluid'){me.setElementHeights();me.setElementPositions();}
if(me.opts.gridMode==='rows'&&me.currentState!==state){me.initRowsGrid();}
me.$bannerElements.trigger('emotionResize');me.$videoElements.trigger('emotionResize');me.currentState=state;$.publish('plugin/swEmotion/onResize',[me,me.currentState]);},onShow:function(event,emotion){var me=this;if(emotion.$el.is(me.$el)){me.initFullscreen();}
$.publish('plugin/swEmotion/onShow',[me,event,emotion]);},onHide:function(event,emotion){var me=this;if(emotion.$el.is(me.$el)){me.removeFullscreen();}
$.publish('plugin/swEmotion/onHide',[me,event,emotion]);},setContainerSpacing:function(){var me=this;me.$el.css({'margin-left':-me.remSpacing+'rem'});$.publish('plugin/swEmotion/onSetContainerSpacing',[me]);},setElementPositions:function(){var me=this,i=1;for(i;i<=me.rows;i++){var top=100/me.rows*(i-1);me.$elements.filter('.start-row'+me.clsPrefix+'-'+i).css('top',top+'%');}
$.publish('plugin/swEmotion/onSetElementPositions',[me]);},setElementHeights:function(){var me=this,i=1;for(i;i<=me.rows;i++){var height=100/me.rows*i;me.$elements.filter('.row'+me.clsPrefix+'-'+i).css('height',height+'%');}
$.publish('plugin/swEmotion/onSetElementHeights',[me]);},scale:function(){var me=this,width=(me.opts.fullscreen)?$window.outerWidth():me.$wrapper.outerWidth(),ratio=me.baseWidth/me.$el.outerHeight(),factor=width/me.baseWidth,containerStyle=me.$el.get(0).style,wrapperHeight=width/ratio;$.extend(containerStyle,{'MsTransform':'scale('+factor+') translateX('+-me.remSpacing+'rem)','OTransform':'scale('+factor+') translateX('+-me.remSpacing+'rem)','MozTransform':'scale('+factor+') translateX('+-me.remSpacing+'rem)','webkitTransform':'scale('+factor+') translateX('+-me.remSpacing+'rem)','transform':'scale('+factor+') translateX('+-me.remSpacing+'rem)'});me.$wrapper.css('height',wrapperHeight);$.publish('plugin/swEmotion/onScale',[me,width,factor,wrapperHeight]);},buffer:function(func,bufferTime){var me=this;window.clearTimeout(me.bufferedCall);me.bufferedCall=window.setTimeout($.proxy(func,me),bufferTime);$.publish('plugin/swEmotion/onBuffer',[me,me.bufferedCall,func,bufferTime]);},destroy:function(){var me=this;if(me.opts.fullscreen){$.unsubscribe(me.getEventName('plugin/swEmotionLoader/onShowEmotion'));$.unsubscribe(me.getEventName('plugin/swEmotionLoader/onHideEmotion'));}
me._destroy();}});$.plugin('swEmotionBanner',{defaults:{width:null,height:null,containerSelector:'.banner--content'},init:function(){var me=this;me.applyDataAttributes();me.$container=me.$el.find(me.opts.containerSelector);me.$image=me.$container.find('img');me.imageRatio=me.opts.width/me.opts.height;me._hasPictureElement=(me.$container.find('picture').length>=1);me.resizeBanner();me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$el,'emotionResize',$.proxy(me.resizeBanner,me));$.publish('plugin/swEmotionBanner/onRegisterEvents',[me]);},resizeBanner:function(){var me=this,containerWidth=me.$el.width(),containerHeight=me.$el.height(),containerRatio=containerWidth/containerHeight,orientation=me.imageRatio>containerRatio,bannerWidth=orientation?containerHeight*me.imageRatio:'100%',bannerHeight=orientation?'100%':containerWidth/me.imageRatio;me.$container.css({'width':bannerWidth,'height':bannerHeight});if(me._hasPictureElement){me.$image.css({'width':bannerWidth});}
$.publish('plugin/swEmotionBanner/onResizeBanner',[me]);},destroy:function(){var me=this;me._destroy();}});$.plugin('swEmotionVideo',{defaults:{mode:'cover',scaleOriginX:50,scaleOriginY:50,scale:1,playIconCls:'icon--play',pauseIconCls:'icon--pause',videoSelector:'.video--element',coverSelector:'.video--cover',playBtnSelector:'.video--play-btn',playIconSelector:'.video--play-icon'},init:function(){var me=this;me.applyDataAttributes();me.$video=me.$el.find(me.opts.videoSelector);me.$videoCover=me.$el.find(me.opts.coverSelector);me.$playBtn=me.$el.find(me.opts.playBtnSelector);me.$playBtnIcon=me.$playBtn.find(me.opts.playIconSelector);me.player=me.$video.get(0);if(me.$video.attr('muted')!==undefined){me.player.volume=0.0;}
me.setScaleOrigin(me.opts.scaleOriginX,me.opts.scaleOriginY);me.registerEvents();},registerEvents:function(){var me=this;me._on(me.$video,'loadedmetadata',$.proxy(me.onLoadMeta,me));me._on(me.$video,'canplay',$.proxy(me.onCanPlay,me));me._on(me.$video,'play',$.proxy(me.onVideoPlay,me));me._on(me.$video,'ended',$.proxy(me.onVideoEnded,me));me._on(me.$el,'emotionResize',$.proxy(me.resizeVideo,me));me._on(me.$videoCover,'click',$.proxy(me.onPlayClick,me));me._on(me.$playBtn,'click',$.proxy(me.onPlayClick,me));$.publish('plugin/swEmotionVideo/onRegisterEvents',[me]);},onLoadMeta:function(event){var me=this;me.videoWidth=me.player.videoWidth;me.videoHeight=me.player.videoHeight;me.videoRatio=me.videoWidth/me.videoHeight;me.resizeVideo();$.publish('plugin/swEmotionVideo/onLoadMeta',[me,event]);},onCanPlay:function(event){var me=this;if(!me.player.paused||me.player.autoplay){me.$playBtnIcon.addClass(me.opts.pauseIconCls).removeClass(me.opts.playIconCls);}
$.publish('plugin/swEmotionVideo/onCanPlay',[me,event]);},onVideoPlay:function(event){var me=this;me.$videoCover.hide();$.publish('plugin/swEmotionVideo/onVideoPlay',[me,event]);},onVideoEnded:function(event){var me=this;me.$playBtnIcon.removeClass(me.opts.pauseIconCls).addClass(me.opts.playIconCls);$.publish('plugin/swEmotionVideo/onVideoEnded',[me,event]);},onPlayClick:function(event){var me=this;event.preventDefault();(me.player.paused)?me.playVideo():me.stopVideo();$.publish('plugin/swEmotionVideo/onPlayClick',[me,event]);},playVideo:function(){var me=this;me.$playBtnIcon.addClass(me.opts.pauseIconCls).removeClass(me.opts.playIconCls);me.player.play();$.publish('plugin/swEmotionVideo/onPlayVideo',[me]);},stopVideo:function(){var me=this;me.$playBtnIcon.removeClass(me.opts.pauseIconCls).addClass(me.opts.playIconCls);me.player.pause();$.publish('plugin/swEmotionVideo/onStopVideo',[me]);},resizeVideo:function(){var me=this;if(me.opts.mode==='scale'){return;}
var containerWidth=me.$el.outerWidth(),containerHeight=me.$el.outerHeight(),containerRatio=containerWidth/containerHeight,orientation=me.videoRatio>containerRatio,positiveFactor=me.videoRatio/containerRatio,negativeFactor=containerRatio/me.videoRatio;if(me.opts.mode==='stretch'){if(orientation){me.transformVideo('scaleY('+positiveFactor*me.opts.scale+')');}else{me.transformVideo('scaleX('+negativeFactor*me.opts.scale+')');}}
if(me.opts.mode==='cover'){if(orientation){me.transformVideo('scaleX('+positiveFactor*me.opts.scale+') scaleY('+positiveFactor*me.opts.scale+')');}else{me.transformVideo('scaleX('+negativeFactor*me.opts.scale+') scaleY('+negativeFactor*me.opts.scale+')');}}
$.publish('plugin/swEmotionVideo/onResizeVideo',[me]);},setScaleOrigin:function(originX,originY){var me=this,x=originX||me.opts.scaleOriginX,y=originY||me.opts.scaleOriginY,origin=x+'% '+y+'%';me.$video.css({'-ms-transform-origin':origin,'-o-transform-origin':origin,'-moz-transform-origin':origin,'-webkit-transform-origin':origin,'transform-origin':origin});$.publish('plugin/swEmotionVideo/onSetScaleOrigin',[me,x,y]);},transformVideo:function(transformation){var me=this,videoElementStyle=me.player.style;$.extend(videoElementStyle,{'MsTransform':transformation,'OTransform':transformation,'MozTransform':transformation,'webkitTransform':transformation,'transform':transformation});$.publish('plugin/swEmotionVideo/onTransformVideo',[me,transformation]);},destroy:function(){var me=this;me._destroy();}});})(jQuery,window,document);;(function($){'use strict';$.plugin('swProductCompareAdd',{defaults:{compareMenuSelector:'.entry--compare',hiddenCls:'is--hidden'},init:function(){this.$el.on(this.getEventName('click'),'*[data-product-compare-add="true"]',$.proxy(this.onAddArticleCompare,this));$.publish('plugin/swProductCompareAdd/onRegisterEvents',[this]);},onAddArticleCompare:function(event){var me=this,$target=$(event.target),$form=$target.closest('form'),addArticleUrl;event.preventDefault();if($target.attr('href')){addArticleUrl=$target.attr('href');}else{addArticleUrl=$form.attr('action');}
if(!addArticleUrl){return;}
$.overlay.open({closeOnClick:false});$.loadingIndicator.open({openOverlay:false});$.publish('plugin/swProductCompareAdd/onAddArticleCompareBefore',[me,event]);$.ajax({url:addArticleUrl,dataType:'html',method:'POST',success:function(data){var compareMenu=$(me.opts.compareMenuSelector),modal;if(compareMenu.hasClass(me.opts.hiddenCls)){compareMenu.removeClass(me.opts.hiddenCls);}
if(data.indexOf('data-max-reached="true"')!==-1){$.loadingIndicator.close(function(){modal=$.modal.open(data,{sizing:'content',overlay:false});modal.options.overlay=true;});}else{compareMenu.html(data);$('*[data-product-compare-menu="true"]').swProductCompareMenu();$.loadingIndicator.close(function(){$('html, body').animate({scrollTop:($('.top-bar').offset().top)},'slow');$.overlay.close();});}
$.publish('plugin/swProductCompareAdd/onAddArticleCompareSuccess',[me,event,data,compareMenu]);}});$.publish('plugin/swProductCompareAdd/onAddArticleCompare',[me,event]);},destroy:function(){this.$el.off(this.getEventName('click'));this._destroy();}});})(jQuery);;(function($){'use strict';$.plugin('swProductCompareMenu',{defaults:{compareMenuSelector:'.entry--compare',startCompareSelector:'.btn--compare-start',deleteCompareSelector:'.btn--compare-delete',deleteCompareItemSelector:'.btn--item-delete',modalSelector:'.js--modal',modalContentInnerSelector:'.modal--compare',compareEntriesSelector:'.compare--list .compare--entry',compareEntrySelector:'.compare--entry',hiddenCls:'is--hidden'},init:function(){var me=this,$compareMenu=$(me.opts.compareMenuSelector);if(!$compareMenu.is(':empty')){$compareMenu.removeClass(me.opts.hiddenCls);}
me._on(me.opts.startCompareSelector,'touchstart click',$.proxy(me.onStartCompare,me));me._on(me.opts.deleteCompareSelector,'touchstart click',$.proxy(me.onDeleteCompare,me));me._on(me.opts.deleteCompareItemSelector,'touchstart click',$.proxy(me.onDeleteItem,me));$.publish('plugin/swProductCompareMenu/onRegisterEvents',[me]);},onStartCompare:function(event){event.preventDefault();var me=this,startCompareBtn=me.$el.find(me.opts.startCompareSelector),modalUrl=startCompareBtn.attr('href'),modalTitle=startCompareBtn.attr('data-modal-title');$.loadingIndicator.open({closeOnClick:false});$.publish('plugin/swProductCompareMenu/onStartCompareBefore',[me]);$.ajax({url:modalUrl,dataType:'html',success:function(template){$.publish('plugin/swProductCompareMenu/onStartCompareSuccess',[me,template]);$.loadingIndicator.close(function(){$.modal.open(template,{title:modalTitle,sizing:'content'});var templateWidth=$(me.opts.modalSelector).find(me.opts.modalContentInnerSelector).outerWidth();$(me.opts.modalSelector).css('width',templateWidth);picturefill();var maxRows=0;$('.entry--property').each(function(){var row=~~($(this).attr('data-property-row'));if(row>maxRows){maxRows=row;}});var maximumHeight,rowSelector,i=1;for(;i<=maxRows;i++){rowSelector='.entry--property[data-property-row="'+i+'"]';maximumHeight=0;$(rowSelector).each(function(){var rowHeight=$(this).height();if(rowHeight>maximumHeight){maximumHeight=rowHeight;}});$(rowSelector).height(maximumHeight);}
$.publish('plugin/swProductCompareMenu/onStartCompareFinished',[me,template]);});}});$.publish('plugin/swProductCompareMenu/onStartCompare',[me]);},onDeleteCompare:function(event){var me=this,$target=$(event.currentTarget),deleteCompareBtn=me.$el.find(me.opts.deleteCompareSelector),$form=deleteCompareBtn.closest('form'),$menu=$(me.opts.compareMenuSelector),deleteUrl;event.preventDefault();if($target.attr('href')){deleteUrl=$target.attr('href');}else{deleteUrl=$form.attr('action');}
$.ajax({url:deleteUrl,dataType:'html',success:function(){$menu.empty().addClass(me.opts.hiddenCls);$.publish('plugin/swProductCompareMenu/onDeleteCompareSuccess',[me]);}});$.publish('plugin/swProductCompareMenu/onDeleteCompare',[me]);},onDeleteItem:function(event){event.preventDefault();var me=this,$deleteBtn=$(event.currentTarget),$form=$deleteBtn.closest('form'),rowElement=$deleteBtn.closest(me.opts.compareEntrySelector),compareCount=$(me.opts.compareEntriesSelector).length,deleteUrl;if($deleteBtn.attr('href')){deleteUrl=$deleteBtn.attr('href');}else{deleteUrl=$form.attr('action');}
if(compareCount>1){rowElement.slideUp('fast',function(){rowElement.remove();});$('.compare--quantity').html('('+(compareCount-1)+')');$.ajax({url:deleteUrl,dataType:'html',success:function(response){$.publish('plugin/swProductCompareMenu/onDeleteItemSuccess',[me,response]);}});}else{$.ajax({url:deleteUrl,dataType:'html',success:function(response){$(me.opts.compareMenuSelector).empty().addClass(me.opts.hiddenCls);$('*[data-product-compare-menu="true"]').swProductCompareMenu();$.publish('plugin/swProductCompareMenu/onDeleteItemSuccess',[me,response]);}});}
$.publish('plugin/swProductCompareMenu/onDeleteItem',[me,event,deleteUrl]);},destroy:function(){this._destroy();}});})(jQuery);;(function($,window){'use strict';var parseQueryString=function(url){var qparams={},parts=(url||'').split('?'),qparts,qpart,i=0;if(parts.length<=1){return qparams;}
qparts=parts[1].split('&');for(i in qparts){var key,value;qpart=qparts[i].split('=');key=decodeURIComponent(qpart[0]);value=decodeURIComponent(qpart[1]||'');qparams[key]=($.isNumeric(value)?parseFloat(value,10):value);}
return qparams;};$.plugin('swInfiniteScrolling',{defaults:{'enabled':true,'eventName':'scroll','categoryId':0,'pagingSelector':'.listing--paging','productBoxSelector':'.product--box','defaultPerPageSelector':'.action--per-page','defaultChangeLayoutSelector':'.action--change-layout','threshold':3,'loadMoreCls':'js--load-more','loadPreviousCls':'js--load-previous','loadBtnCls':'btn is--primary is--icon-right','loadMoreSnippet':'Weitere Artikel laden','loadPreviousSnippet':'Vorherige Artikel laden','listingContainerSelector':'.listing--container','pagingBottomSelector':'.listing--bottom-paging','listingActionsWrapper':'infinite--actions',ajaxUrl:window.controller.ajax_listing||null,productBoxLayout:null,delegateConSelector:'.listing--wrapper',addArticleSelector:'*[data-add-article="true"]',pageShortParameter:'p'},init:function(){var me=this;me.$delegateContainer=$(me.opts.delegateConSelector);me.applyDataAttributes();if(!me.opts.enabled||!me.$el.is(':visible')||me.opts.ajaxUrl===null){return;}
$(me.opts.pagingSelector).remove();$(me.opts.pagingBottomSelector).remove();me.maxPages=me.$el.attr('data-pages');if(me.maxPages<=1){return;}
me.isLoading=false;me.isFinished=false;me.fetchCount=0;me.previousPageIndex=0;me.$buttonWrapperTop=$('<div>',{'class':me.opts.listingActionsWrapper});me.$buttonWrapperBottom=$('<div>',{'class':me.opts.listingActionsWrapper});$(me.opts.listingContainerSelector).after(me.$buttonWrapperBottom);$(me.opts.listingContainerSelector).before(me.$buttonWrapperTop);me.baseUrl=window.location.href.split('?')[0];me.ajax={'url':me.opts.ajaxUrl,'params':parseQueryString(window.location.href)};me.params=parseQueryString(window.location.href);me.historyParams=$.extend({},me.params);if(me.opts.productBoxLayout){me.params.productBoxLayout=me.opts.productBoxLayout||null;}
me.upperParams=$.extend({},me.params);me.urlBasicMode=false;if(!me.params[me.opts.pageShortParameter]){me.basicModeSegments=window.location.pathname.split('/');me.basicModePageKey=$.inArray('sPage',me.basicModeSegments);me.basicModePageValue=me.basicModeSegments[me.basicModePageKey+1];if(me.basicModePageValue){me.urlBasicMode=true;me.params[me.opts.pageShortParameter]=me.basicModePageValue;me.upperParams[me.opts.pageShortParameter]=me.basicModePageValue;}}
if(!me.params[me.opts.pageShortParameter]){me.params[me.opts.pageShortParameter]=1;}
me.startPage=me.params[me.opts.pageShortParameter];me.currentPushState='';if(me.params[me.opts.pageShortParameter]&&me.params[me.opts.pageShortParameter]>1){me.showLoadPrevious();}
me._on(window,me.opts.eventName,$.proxy(me.onScrolling,me));me.$delegateContainer.on(me.getEventName('click'),'.'+me.opts.loadMoreCls,$.proxy(me.onLoadMore,me));me.$delegateContainer.on(me.getEventName('click'),'.'+me.opts.loadPreviousCls,$.proxy(me.onLoadPrevious,me));$.publish('plugin/swInfiniteScrolling/onRegisterEvents',[me]);},update:function(){var me=this;me.opts.enabled=me.$el.is(':visible');$.publish('plugin/swInfiniteScrolling/onUpdate',[me]);},onScrolling:function(){var me=this;if(me.isLoading||!me.opts.enabled){return;}
var $window=$(window),docTop=$window.scrollTop()+$window.height(),fetchPoint=me.$el.find(me.opts.productBoxSelector).last(),fetchPointOffset=fetchPoint.offset().top,bufferSize=fetchPoint.height(),triggerPoint=fetchPointOffset-bufferSize;if(docTop>triggerPoint&&(me.params[me.opts.pageShortParameter]<me.maxPages)){me.fetchNewPage();}
var $products=$('*[data-page-index]'),visibleProducts=$.grep($products,function(item){return $(item).offset().top<=docTop;});var $firstProduct=$(visibleProducts).last(),tmpPageIndex=$firstProduct.attr('data-page-index');var tmpParams=me.historyParams;delete tmpParams.c;if(!tmpParams[me.opts.pageShortParameter]||!tmpPageIndex){tmpParams[me.opts.pageShortParameter]=me.startPage;}
if(tmpPageIndex){tmpParams[me.opts.pageShortParameter]=tmpPageIndex;}
var tmpPushState=me.baseUrl+'?'+$.param(tmpParams);if(me.urlBasicMode){if(!tmpPageIndex){tmpPageIndex=me.basicModePageValue;}
var segments=me.basicModeSegments;segments[me.basicModePageKey+1]=tmpPageIndex;tmpPushState=segments.join('/');}
if(me.currentPushState!=tmpPushState){me.currentPushState=tmpPushState;if(!history||!history.pushState){return;}
history.pushState('data','',me.currentPushState);}
$.publish('plugin/swInfiniteScrolling/onScrolling',[me]);},fetchNewPage:function(){var me=this;if(me.isFinished||me.params[me.opts.pageShortParameter]>=me.maxPages){return;}
if(me.isLoading){return;}
if(me.fetchCount>=me.opts.threshold){var button=me.generateButton('next');me.$buttonWrapperBottom.html(button);me.isFinished=true;return;}
me.isLoading=true;me.openLoadingIndicator();me.params[me.opts.pageShortParameter]++;me.fetchCount++;if(!me.params.c&&me.opts.categoryId){me.params.c=me.opts.categoryId;}
$.publish('plugin/swInfiniteScrolling/onBeforeFetchNewPage',[me]);$.publish('action/fetchListing',[me.params,false,true,$.proxy(me.appendListing,me)]);$.publish('plugin/swInfiniteScrolling/onFetchNewPage',[me]);},generateButton:function(buttonType){var me=this,type=buttonType||'next',cls=(type=='previous')?me.opts.loadPreviousCls:me.opts.loadMoreCls,snippet=(type=='previous')?me.opts.loadPreviousSnippet:me.opts.loadMoreSnippet,$button=$('<a>',{'class':me.opts.loadBtnCls+' '+cls,'html':snippet+' <i class="icon--cw is--large"></i>'});$.publish('plugin/swInfiniteScrolling/onLoadMore',[me,$button,buttonType]);return $button;},onLoadMore:function(event){event.preventDefault();var me=this;$('.'+me.opts.loadMoreCls).remove();me.isFinished=false;if(me.maxPages>=me.opts.threshold){me.opts.threshold++;}
me.fetchNewPage();$.publish('plugin/swInfiniteScrolling/onLoadMore',[me,event]);},showLoadPrevious:function(){var me=this,button=me.generateButton('previous');me.$buttonWrapperTop.html(button);$.publish('plugin/swInfiniteScrolling/onShowLoadPrevious',[me,button]);},onLoadPrevious:function(event){event.preventDefault();var me=this,callback;$('.'+me.opts.loadPreviousCls).remove();me.openLoadingIndicator('top');var tmpParams=me.upperParams;if(!tmpParams.c&&me.opts.categoryId){tmpParams.c=me.opts.categoryId;}
tmpParams[me.opts.pageShortParameter]=tmpParams[me.opts.pageShortParameter]-1;$.publish('plugin/swInfiniteScrolling/onBeforeFetchPreviousPage',[me]);me.previousLoadPage=tmpParams[me.opts.pageShortParameter];callback=function(response){me.prependListing(response);if(tmpParams[me.opts.pageShortParameter]>1){me.showLoadPrevious();}};$.publish('action/fetchListing',[tmpParams,false,true,callback]);$.publish('plugin/swInfiniteScrolling/onLoadPrevious',[me,event]);},appendListing:function(response){var me=this,template;template=response.listing.trim();$.publish('plugin/swInfiniteScrolling/onFetchNewPageLoaded',[me,template]);if(!template){me.isFinished=true;me.closeLoadingIndicator();return;}
me.$el.append(template);picturefill();me.closeLoadingIndicator();StateManager.addPlugin(me.opts.addArticleSelector,'swAddArticle');me.isLoading=false;if(me.params[me.opts.pageShortParameter]>=me.maxPages){me.isFinished=true;}
$.publish('plugin/swInfiniteScrolling/onFetchNewPageFinished',[me,template]);},prependListing:function(response){var me=this;me.$el.prepend(response.listing.trim());picturefill();me.closeLoadingIndicator();StateManager.addPlugin(me.opts.addArticleSelector,'swAddArticle');me.isLoading=false;$.publish('plugin/swInfiniteScrolling/onLoadPreviousFinished',[me,response.listing]);},openLoadingIndicator:function(type){var me=this,$indicator=$('.js--loading-indicator.indicator--relative');if($indicator.length){return;}
$indicator=$('<div>',{'class':'js--loading-indicator indicator--relative','html':$('<i>',{'class':'icon--default'})});if(!type){me.$el.parent().after($indicator);}else{me.$el.parent().before($indicator);}
$.publish('plugin/swInfiniteScrolling/onOpenLoadingIndicator',[me,$indicator]);},closeLoadingIndicator:function(){var me=this,$indicator=$('.js--loading-indicator.indicator--relative');if(!$indicator.length){return;}
$indicator.remove();$.publish('plugin/swInfiniteScrolling/onCloseLoadingIndicator',[me]);},destroy:function(){var me=this;if(me.$buttonWrapperTop){me.$buttonWrapperTop.remove();}
if(me.$buttonWrapperBottom){me.$buttonWrapperBottom.remove();}
me.$delegateContainer.off(me.getEventName('click'),'.'+me.opts.loadMoreCls);me.$delegateContainer.off(me.getEventName('click'),'.'+me.opts.loadPreviousCls);me._destroy();}});})(jQuery,window);;(function($){'use strict';$.plugin('swOffcanvasButton',{defaults:{pluginClass:'js--off-canvas-button',contentSelector:'.offcanvas--content',closeButtonSelector:'.close--off-canvas',fullscreen:true},init:function(){var me=this,$el=me.$el,opts=me.opts,selector=$el.find(opts.contentSelector);if(selector.length===0){selector=$(opts.contentSelector);}
me.applyDataAttributes();$el.addClass(opts.pluginClass);$el.swOffcanvasMenu({'direction':'fromRight','offCanvasSelector':selector,'fullscreen':opts.fullscreen,'closeButtonSelector':opts.closeButtonSelector});},destroy:function(){var me=this,$el=me.$el,plugin=$el.data('plugin_swOffcanvasMenu');if(plugin){plugin.destroy();}
$el.removeClass(me.opts.pluginClass);me._destroy();}});}(jQuery));;(function($,Modernizr){'use strict';$.plugin('swSubCategoryNav',{defaults:{'enabled':true,'eventName':'click','sidebarCategorySelector':'.sidebar--navigation','backwardsSelector':'.link--go-back','forwardsSelector':'.link--go-forward','mainMenuSelector':'.link--go-main','mainCategoryId':null,'categoryId':null,'fetchUrl':'','overlaySelector':'.offcanvas--overlay','sidebarMainSelector':'.sidebar-main','mobileNavigationSelector':'.navigation--smartphone','loadingClass':'sidebar--ajax-loader','backSlideClass':'background','iconRightSelector':'.is--icon-right','disableScrollingClass':'is--inactive','animationSpeedIn':450,'animationSpeedOut':300,'easingIn':'cubic-bezier(.3,0,.15,1)','easingOut':'cubic-bezier(.02, .01, .47, 1)','easingFallback':'swing'},init:function(){var me=this,transitionSupport=Modernizr.csstransitions,opts;me.applyDataAttributes();opts=me.opts;if(!opts.enabled||!opts.mainCategoryId){return;}
me.$sidebar=me.$el.closest(opts.sidebarMainSelector);me.$sidebarWrapper=me.$el;me.$navigation=me.$el.closest(opts.mobileNavigationSelector);me.$navigation.show();me.$loadingIcon=$('<div>',{'class':opts.loadingClass});me.slideFunction=transitionSupport?'transition':'animate';me.easingEffectIn=transitionSupport?opts.easingIn:opts.easingFallback;me.easingEffectOut=transitionSupport?opts.easingOut:opts.easingFallback;me.inProgress=false;$(opts.sidebarCategorySelector+' ul').not('.navigation--level-high').css('display','none');me.addEventListener();if(!opts.categoryId||!opts.fetchUrl||((opts.mainCategoryId==opts.categoryId)&&(opts.fetchUrl.indexOf('getCategory')!==-1))){return;}
$.get(opts.fetchUrl,function(template){me.$sidebarWrapper.css('display','none');me.$sidebar.addClass(opts.disableScrollingClass).append(template);$(opts.overlaySelector).addClass(opts.backSlideClass);});},addEventListener:function(){var me=this,opts=me.opts,$sidebar=me.$sidebar,eventName=opts.eventName;$sidebar.on(me.getEventName(eventName),opts.backwardsSelector,$.proxy(me.onClickBackButton,me));$sidebar.on(me.getEventName(eventName),opts.forwardsSelector,$.proxy(me.onClickForwardButton,me));$sidebar.on(me.getEventName(eventName),opts.mainMenuSelector,$.proxy(me.onClickMainMenuButton,me));$.publish('plugin/swSubCategoryNav/onRegisterEvents',[me]);},onClickBackButton:function(event){event.preventDefault();var me=this,$target=$(event.target),url=$target.attr('href'),parentId=~~$target.attr('data-parentId');if(me.inProgress){return;}
me.inProgress=true;$.publish('plugin/swSubCategoryNav/onClickBackButton',[me,event]);if(!url||(parentId===me.opts.mainCategoryId)&&(url.indexOf('getCategory')!==-1)){me.slideToMainMenu();return;}
me.loadTemplate(url,me.slideOut,$target);},onClickForwardButton:function(event){event.preventDefault();var me=this,$target=$(event.currentTarget),url=$target.attr('data-fetchUrl');if(me.inProgress){return;}
me.inProgress=true;$.publish('plugin/swSubCategoryNav/onClickForwardButton',[me,event]);me.$sidebar.addClass(me.opts.disableScrollingClass);me.loadTemplate(url,me.slideIn,$target);},onClickMainMenuButton:function(event){event.preventDefault();var me=this;if(me.inProgress){return;}
me.inProgress=true;$.publish('plugin/swSubCategoryNav/onClickMainMenuButton',[me,event]);me.slideToMainMenu();},loadTemplate:function(url,callback,$loadingTarget){var me=this;$.publish('plugin/swSubCategoryNav/onLoadTemplateBefore',[me]);if(!$loadingTarget){$.get(url,function(template){$.publish('plugin/swSubCategoryNav/onLoadTemplate',[me]);callback.call(me,template);});return;}
$loadingTarget.find(me.opts.iconRightSelector).fadeOut('fast');$loadingTarget.append(me.$loadingIcon);me.$loadingIcon.fadeIn();$.get(url,function(template){me.$loadingIcon.hide();$.publish('plugin/swSubCategoryNav/onLoadTemplate',[me]);callback.call(me,template);});},slideOut:function(template){var me=this,opts=me.opts,$overlays,$slide;$.publish('plugin/swSubCategoryNav/onSlideOutBefore',[me]);me.$sidebar.append(template);$overlays=$(opts.overlaySelector);$overlays.toggleClass(opts.backSlideClass);$slide=$overlays.not('.'+opts.backSlideClass);$slide[me.slideFunction]({'left':280},opts.animationSpeedOut,me.easingEffectOut,function(){$slide.remove();me.inProgress=false;$.publish('plugin/swSubCategoryNav/onSlideOut',[me]);});},slideIn:function(template){var me=this,opts=me.opts,$overlays,$slide,$el;$.publish('plugin/swSubCategoryNav/onSlideInBefore',[me]);me.$sidebar.scrollTop(0);me.$sidebar.append(template);$overlays=$(opts.overlaySelector);$slide=$overlays.not('.'+opts.backSlideClass).css({'left':280,'display':'block'});$slide[me.slideFunction]({'left':0},opts.animationSpeedIn,me.easingEffectIn,function(){$overlays.each(function(i,el){$el=$(el);if($el.hasClass(opts.backSlideClass)){$el.remove();}});$slide.addClass(opts.backSlideClass);me.$sidebarWrapper.css('display','none');me.$navigation.hide().show(0);$slide.addClass(opts.backSlideClass);me.inProgress=false;$.publish('plugin/swSubCategoryNav/onSlideIn',[me]);});},slideToMainMenu:function(){var me=this,opts=me.opts,$overlay=$(opts.overlaySelector);$.publish('plugin/swSubCategoryNav/onSlideToMainMenuBefore',[me]);me.$sidebarWrapper.css('display','block');me.$sidebarWrapper.find(me.opts.iconRightSelector).fadeIn('slow');$overlay[me.slideFunction]({'left':280},opts.animationSpeedOut,me.easingEffectOut,function(){$overlay.remove();me.$sidebar.removeClass(opts.disableScrollingClass);me.inProgress=false;$.publish('plugin/swSubCategoryNav/onSlideToMainMenu',[me]);});},destroy:function(){var me=this,opts=me.opts,$sidebar=me.$sidebar,$sidebarWrapper=me.$sidebarWrapper;if($sidebar){$sidebar.off(me.getEventName(opts.eventName),'**');}
me.$navigation.hide();$(opts.sidebarCategorySelector+' ul').not('.navigation--level-high').css('display','block');if($sidebarWrapper){me.$sidebarWrapper.css('display','block');}
$(opts.overlaySelector).remove();me._destroy();}});}(jQuery,Modernizr));;(function($,window,undefined){'use strict';$.plugin('swAjaxWishlist',{defaults:{counterSelector:'.notes--quantity',wishlistSelector:'.entry--notepad',iconCls:'icon--check',savedCls:'js--is-saved',text:'Gemerkt',delay:1500},init:function(){this.applyDataAttributes();this.$wishlistButton=$(this.opts.wishlistSelector);this.$counter=$(this.opts.counterSelector);this.registerEvents();},registerEvents:function(){this.$el.on(this.getEventName('click'),'.action--note, .link--notepad',$.proxy(this.triggerRequest,this));$.publish('plugin/swAjaxWishlist/onRegisterEvents',[this]);},triggerRequest:function(event){var $target=$(event.currentTarget),url=$target.attr('data-ajaxUrl');if(typeof url==='undefined'||$target.hasClass(this.opts.savedCls)){return;}
event.preventDefault();$.ajax({url:url,dataType:'json',method:'POST',success:$.proxy(this.responseHandler,this,$target)});$.publish('plugin/swAjaxWishlist/onTriggerRequest',[this,event,url]);},responseHandler:function($target,response){$.publish('plugin/swAjaxWishlist/onTriggerRequestLoaded',[this,$target,response]);if(!response.success){return;}
this.updateCounter(response.notesCount);this.animateElement($target);$.publish('plugin/swAjaxWishlist/onTriggerRequestFinished',[this,$target,response]);},animateElement:function($target){var me=this,$icon=$target.find('i'),originalIcon=$icon[0].className,$text=$target.find('.action--text'),originalText=$text.html();$target.addClass(me.opts.savedCls);$text.html($target.attr('data-text')||me.opts.text);$icon.removeClass(originalIcon).addClass(me.opts.iconCls);window.setTimeout(function(){$target.removeClass(me.opts.savedCls);$text.html(originalText);$icon.removeClass(me.opts.iconCls).addClass(originalIcon);$.publish('plugin/swAjaxWishlist/onAnimateElementFinished',[me,$target]);},me.opts.delay);$.publish('plugin/swAjaxWishlist/onAnimateElement',[me,$target]);},updateCounter:function(count){var $btn=this.$wishlistButton,animate='transition';if(this.$counter.length){this.$counter.html(count);return this.$counter;}
this.$counter=$('<span>',{'class':'badge notes--quantity','html':count,'css':{'opacity':0}}).appendTo($btn.find('a'));if(!$.support.transition){animate='animate';}
this.$counter[animate]({'opacity':1},500);$.publish('plugin/swAjaxWishlist/onUpdateCounter',[this,this.$counter,count]);return this.$counter;},destroy:function(){this.$el.off(this.getEventName('click'));}});})(jQuery,window);;(function($,window,undefined){'use strict';$.plugin('swPreloaderButton',{defaults:{loaderCls:'js--loading',checkFormIsValid:true},init:function(){var me=this;me.applyDataAttributes();me.opts.checkFormIsValid=me.opts.checkFormIsValid&&me.checkForValiditySupport();me._on(me.$el,'click',$.proxy(me.onShowPreloader,me));$.publish('plugin/swPreloaderButton/onRegisterEvents',[me]);},checkForValiditySupport:function(){var me=this,element=document.createElement('input'),valid=(typeof element.validity==='object');$.publish('plugin/swPreloaderButton/onCheckForValiditySupport',[me,valid]);return valid;},onShowPreloader:function(){var me=this;if(me.opts.checkFormIsValid){var $form=$('#'+me.$el.attr('form'));if(!$form.length){$form=me.$el.parents('form');}
if(!$form.length||!$form[0].checkValidity()){return;}}
window.setTimeout(function(){me.$el.html(me.$el.text()+'<div class="'+me.opts.loaderCls+'"></div>').attr('disabled','disabled');$.publish('plugin/swPreloaderButton/onShowPreloader',[me]);},25);},reset:function(){var me=this;me.$el.prop('disabled',false).find('.'+me.opts.loaderCls).remove();}});})(jQuery,window);;(function($,window){'use strict';$.plugin('swImageGallery',{defaults:{imageContainerSelector:'.image-slider--container',imageSlideSelector:'.image-slider--slide',thumbnailContainerSelector:'.image-slider--thumbnails',imageGalleryClass:'image--gallery',previousKeyCode:37,nextKeyCode:39,maxZoom:'auto',disabledClass:'is--disabled',btnClass:'btn is--small',zoomInClass:'icon--plus3 button--zoom-in',zoomOutClass:'icon--minus3 button--zoom-out',zoomResetClass:'icon--resize-shrink button--zoom-reset'},init:function(){var me=this;me.applyDataAttributes();me._$imageContainer=me.$el.find(me.opts.imageContainerSelector);if(!me._$imageContainer.length){return;}
me._$thumbContainer=me.$el.find(me.opts.thumbnailContainerSelector);me._$imageContainerClone=me._$imageContainer.clone();me._$thumbContainerClone=me._$thumbContainer.clone();me.$zoomOutBtn=me.createZoomOutButton().appendTo(me._$imageContainerClone);me.$zoomResetBtn=me.createZoomResetButton().appendTo(me._$imageContainerClone);me.$zoomInBtn=me.createZoomInButton().appendTo(me._$imageContainerClone);me.$template=null;me.registerEvents();},createZoomInButton:function(){var me=this,opts=this.opts,$zoomInButton=$('<div>',{'class':opts.btnClass+' '+opts.zoomInClass});$.publish('plugin/swImageGallery/onCreateZoomInButton',[me,$zoomInButton]);return $zoomInButton;},createZoomOutButton:function(){var me=this,opts=me.opts,$zoomOutButton=$('<div>',{'class':opts.btnClass+' '+opts.zoomOutClass});$.publish('plugin/swImageGallery/onCreateZoomOutButton',[me,$zoomOutButton]);return $zoomOutButton;},createZoomResetButton:function(){var me=this,opts=me.opts,$zoomResetButton=$('<div>',{'class':opts.btnClass+' '+opts.zoomResetClass});$.publish('plugin/swImageGallery/onCreateZoomResetButton',[me,$zoomResetButton]);return $zoomResetButton;},registerEvents:function(){var me=this;me._on(me._$imageContainer.find(me.opts.imageSlideSelector),'click',$.proxy(me.onClick,me));$.subscribe(me.getEventName('plugin/swImageSlider/onSlide'),$.proxy(me.onImageUpdate,me));$.subscribe(me.getEventName('plugin/swImageSlider/onUpdateTransform'),$.proxy(me.onImageUpdate,me));me._on(window,'keydown',$.proxy(me.onKeyDown,me));$.publish('plugin/swImageGallery/onRegisterEvents',[me]);},getImageSlider:function(){var me=this,$template=me.$template,slider=($template&&$template.data('plugin_swImageSlider'))||null;$.publish('plugin/swImageGallery/onGetImageSlider',[me,slider]);return slider;},onImageUpdate:function(event,context){var me=this,plugin=me.getImageSlider();if(plugin!==context){return;}
me.toggleButtons(plugin);$.publish('plugin/swImageGallery/onImageUpdate',[me,event,plugin]);},onResetZoom:function(event){var me=this,plugin=me.getImageSlider();event.preventDefault();if(!plugin||me.$zoomResetBtn.hasClass(me.opts.disabledClass)){return;}
me.disableButtons();plugin.resetTransformation(true,function(){me.toggleButtons(plugin);$.publish('plugin/swImageGallery/onResetZoomFinished',[me,event,plugin]);});$.publish('plugin/swImageGallery/onResetZoom',[me,event,plugin]);},onZoomIn:function(event){var me=this,plugin=me.getImageSlider();event.preventDefault();if(!plugin||me.$zoomInBtn.hasClass(me.opts.disabledClass)){return;}
me.disableButtons();plugin.scale(1,true,function(){me.toggleButtons(plugin);$.publish('plugin/swImageGallery/onZoomInFinished',[me,event,plugin]);});$.publish('plugin/swImageGallery/onZoomIn',[me,event,plugin]);},onZoomOut:function(event){var me=this,plugin=me.getImageSlider();event.preventDefault();if(!plugin||me.$zoomOutBtn.hasClass(me.opts.disabledClass)){return;}
me.disableButtons();plugin.scale(-1,true,function(){me.toggleButtons(plugin);$.publish('plugin/swImageGallery/onZoomOutFinished',[me,event,plugin]);});$.publish('plugin/swImageGallery/onZoomOut',[me,event,plugin]);},onKeyDown:function(event){var me=this,opts=me.opts,plugin=me.getImageSlider(),keyCode=event.which;if(!plugin){return;}
if(keyCode===opts.previousKeyCode){plugin.slidePrev();}
if(keyCode===opts.nextKeyCode){plugin.slideNext();}
$.publish('plugin/swImageGallery/onKeyDown',[me,event,keyCode]);},createTemplate:function(){var me=this,$template,$el,img;me._$imageContainerClone.find('span[data-img-original]').each(function(i,el){$el=$(el);img=$('<img>',{'class':'image--element','src':$el.attr('data-img-original')});$el.replaceWith(img);});me._$thumbContainerClone.find('a.thumbnails--arrow').remove();me._$imageContainerClone.find('.arrow').remove();$template=$('<div>',{'class':me.opts.imageGalleryClass,'html':[me._$imageContainerClone,me._$thumbContainerClone]});$.publish('plugin/swImageGallery/onCreateTemplate',[me,$template]);return $template;},onClick:function(event){var me=this,imageSlider=me.$el.data('plugin_swImageSlider');$.modal.open(me.$template||(me.$template=me.createTemplate()),{width:'100%',height:'100%',animationSpeed:350,additionalClass:'image-gallery--modal no--border-radius',onClose:me.onCloseModal.bind(me)});me._on(me.$zoomInBtn,'click touchstart',$.proxy(me.onZoomIn,me));me._on(me.$zoomOutBtn,'click touchstart',$.proxy(me.onZoomOut,me));me._on(me.$zoomResetBtn,'click touchstart',$.proxy(me.onResetZoom,me));picturefill();me.$template.swImageSlider({dotNavigation:false,swipeToSlide:true,pinchToZoom:true,doubleTap:true,maxZoom:me.opts.maxZoom,startIndex:imageSlider?imageSlider.getIndex():0,preventScrolling:true});me.toggleButtons(me.getImageSlider());$.publish('plugin/swImageGallery/onClick',[me,event]);},onCloseModal:function(){var me=this,plugin=me.getImageSlider();if(!plugin){return;}
plugin.destroy();$.publish('plugin/swImageGallery/onCloseModal',[me]);},disableButtons:function(){var me=this,disabledClass=me.opts.disabledClass;me.$zoomResetBtn.addClass(disabledClass);me.$zoomOutBtn.addClass(disabledClass);me.$zoomInBtn.addClass(disabledClass);$.publish('plugin/swImageGallery/onDisableButtons',[me]);},toggleButtons:function(plugin){var me=this,disabledClass=me.opts.disabledClass,scale,minScale,maxScale;if(!plugin){return;}
scale=plugin.getScale();minScale=plugin.getMinScale();maxScale=plugin.getMaxScale();me.$zoomResetBtn.toggleClass(disabledClass,scale===minScale);me.$zoomOutBtn.toggleClass(disabledClass,scale===minScale);me.$zoomInBtn.toggleClass(disabledClass,scale===maxScale);$.publish('plugin/swImageGallery/onToggleButtons',[me]);},destroy:function(){var me=this,plugin=me.getImageSlider();if(plugin){plugin.destroy();}
$.unsubscribe(me.getEventName('plugin/swImageSlider/onSlide'));$.unsubscribe(me.getEventName('plugin/swImageSlider/onUpdateTransform'));me.$template.remove();me.$template=null;me.$zoomOutBtn.remove();me.$zoomResetBtn.remove();me.$zoomInBtn.remove();me._$imageContainer=null;me._$thumbContainer=null;me._$imageContainerClone=null;me._$thumbContainerClone=null;}});})(jQuery,window);;(function($){$.plugin('swOffcanvasHtmlPanel',{defaults:{'offcanvasContent':'.teaser--text-long','shortDescription':'.teaser--text-short','offcanvasTrigger':'.text--offcanvas-link','offCanvasSelector':'.teaser--text-offcanvas','offCanvasCloseSelector':'.close--off-canvas','offCanvasDirection':'fromRight','hiddenCls':'is--hidden'},init:function(){var me=this,opts=me.opts,$el=me.$el;me.applyDataAttributes();me._$shortText=$el.find(opts.shortDescription).removeClass(opts.hiddenCls);me._$longText=$el.find(opts.offcanvasContent).addClass(opts.hiddenCls);me._$offCanvas=$el.find(opts.offCanvasSelector).removeClass(opts.hiddenCls);me._$offcanvasTrigger=$el.find(opts.offcanvasTrigger);me._$offcanvasTrigger.swOffcanvasMenu({'offCanvasSelector':opts.offCanvasSelector,'closeButtonSelector':opts.offCanvasCloseSelector,'direction':opts.offCanvasDirection});},destroy:function(){var me=this,hiddenClass=me.opts.hiddenCls,plugin=me._$offcanvasTrigger.data('plugin_swOffcanvasMenu');me._$longText.removeClass(hiddenClass);me._$shortText.addClass(hiddenClass);me._$offCanvas.addClass(hiddenClass);if(plugin){plugin.destroy();}
me._destroy();}});})(jQuery);;(function($,window){'use strict';$.plugin('swJumpToTab',{defaults:{contentCls:'has--content',tabDetail:'.tab-menu--product',tabCrossSelling:'.tab-menu--cross-selling',btnJumpSelectors:['.product--rating-link','.link--publish-comment']},init:function(){var me=this,param=decodeURI((RegExp('(?:action|jumpTab)=(.+?)(&|$)').exec(location.search)||[null,null])[1]);me.applyDataAttributes();me.$htmlBody=$('body, html');me.$tabMenuCrossSelling=me.$el.find(me.opts.tabCrossSelling);me.lastClick=0;me.resizeCrossSelling();me.registerEvents();if(param==='rating'){var $tab=$('[data-tabName="'+param+'"]'),index=$tab.index()||1;me.jumpToTab(index,$tab);}},resizeCrossSelling:function(){var me=this,$container;if(StateManager.isCurrentState(['xs','s'])&&me.$tabMenuCrossSelling.length){me.$tabMenuCrossSelling.find('.tab--container').each(function(i,el){$container=$(el);if($container.find('.tab--content').html().trim().length){$container.addClass('has--content');}});}},registerEvents:function(){var me=this;me.$el.on(me.getEventName('click touchstart'),me.opts.btnJumpSelectors.join(', '),$.proxy(me.onJumpToTab,me));$.publish('plugin/swJumpToTab/onRegisterEvents',[me]);},onJumpToTab:function(event){var me=this,$tab=$('[data-tabName="rating"]'),index=$tab.index()||1;if(event.timeStamp<me.lastClick+10){return;}
me.lastClick=event.timeStamp;event.preventDefault();me.jumpToTab(index,$tab);$.publish('plugin/swJumpToTab/onClick',[me,event]);},jumpToTab:function(tabIndex,jumpTo){var me=this;me.tabMenuProduct=me.$el.find(me.opts.tabDetail).data('plugin_swTabMenu');if(!me.$el.hasClass('is--ctl-blog')&&me.tabMenuProduct){me.tabMenuProduct.changeTab(tabIndex);}
$.publish('plugin/swJumpToTab/onChangeTab',[me,tabIndex,jumpTo]);if(!jumpTo||!jumpTo.length){return;}
me.$htmlBody.animate({scrollTop:$(jumpTo).offset().top},0);$.publish('plugin/swJumpToTab/onJumpToTab',[me,tabIndex,jumpTo]);},destroy:function(){var me=this;me.$el.off(this.getEventName('click'),me.opts.btnJumpSelectors.join(', '));me._destroy();}});})(jQuery,window);;(function($,window){$.plugin('swAjaxVariant',{hasHistorySupport:Modernizr.history,initialPopState:true,defaults:{productDetailsSelector:'.product--detail-upper',configuratorFormSelector:'.configurator--form',orderNumberSelector:'.entry--sku .entry--content',historyIdentifier:'sw-ajax-variants',productDetailsDescriptionSelector:'.content--description',footerJavascriptInlineSelector:'#footer--js-inline'},init:function(){if(!this.$el.find('.product--configurator').length){return;}
this.applyDataAttributes();this.$el.on(this.getEventName('click'),'*[data-ajax-variants="true"]',$.proxy(this.onChange,this)).on(this.getEventName('change'),'*[data-ajax-select-variants="true"]',$.proxy(this.onChange,this)).on(this.getEventName('click'),'.reset--configuration',$.proxy(this.onChange,this));$(window).on('popstate',$.proxy(this.onPopState,this));if(this.hasHistorySupport){this.publishInitialState();}},publishInitialState:function(){var stateObj=this._createHistoryStateObject();window.history.replaceState(stateObj.state,stateObj.title);},requestData:function(values,pushState){var me=this,stateObj=me._createHistoryStateObject();$.loadingIndicator.open({closeOnClick:false,delay:100});$.publish('plugin/swAjaxVariant/onBeforeRequestData',[me,values,stateObj.location]);values.template='ajax';if(stateObj.params.hasOwnProperty('c')){values.c=stateObj.params.c;}
$.ajax({url:stateObj.location,data:values,method:'GET',success:function(response){var $response=$($.parseHTML(response,document,true)),$productDetails,$productDescription,ordernumber;$productDetails=$response.find(me.opts.productDetailsSelector);$(me.opts.productDetailsSelector).html($productDetails.html());$productDescription=$response.find(me.opts.productDetailsDescriptionSelector);$(me.opts.productDetailsDescriptionSelector).html($productDescription.html());ordernumber=$.trim(me.$el.find(me.opts.orderNumberSelector).text());window.controller=window.snippets=window.themeConfig=window.lastSeenProductsConfig=window.csrfConfig=null;$(me.opts.footerJavascriptInlineSelector).replaceWith($response.filter(me.opts.footerJavascriptInlineSelector));StateManager.addPlugin('*[data-image-slider="true"]','swImageSlider').addPlugin('.product--image-zoom','swImageZoom','xl').addPlugin('*[data-image-gallery="true"]','swImageGallery').addPlugin('*[data-add-article="true"]','swAddArticle').addPlugin('*[data-modalbox="true"]','swModalbox');if(Object.prototype.hasOwnProperty.call(window,'replaceAsyncReady')&&typeof(window.replaceAsyncReady)==='function'){window.replaceAsyncReady();}
$.publish('plugin/swAjaxVariant/onRequestData',[me,response,values,stateObj.location]);if(pushState&&me.hasHistorySupport){me.pushState(stateObj,ordernumber);$.publish('plugin/swAjaxVariant/onHistoryChanged',[me,response,values,stateObj.location]);}},complete:function(response,status){$.loadingIndicator.close();$.publish('plugin/swAjaxVariant/onRequestDataCompleted',[me,response,status,values,stateObj.location]);}});},pushState:function(stateObj,ordernumber){var location=stateObj.location+'?number='+ordernumber;if(stateObj.params.hasOwnProperty('c')){location+='&c='+stateObj.params.c;}
window.history.pushState(stateObj.state,stateObj.title,location);},onPopState:function(event){var state=event.originalEvent.state;if(!state||!state.hasOwnProperty('type')||state.type!=='sw-ajax-variants'){return;}
if($('html').hasClass('is--safari')&&this.initialPopState){this.initialPopState=false;return;}
if(!state.values.length){state='';}
if(state&&state.scrollPos){window.setTimeout(function(){$(window).scrollTop(state.scrollPos);},10);}
$.publish('plugin/swAjaxVariant/onPopState',[this,state]);if(state&&state.values){this.requestData(state.values,false);}},onChange:function(event){var $target=$(event.target),$form=$target.parents('form'),values={};$.each($form.serializeArray(),function(i,item){if(item.name==='__csrf_token'){return;}
values[item.name]=item.value;});event.preventDefault();if(!this.hasHistorySupport){$.loadingIndicator.open({closeOnClick:false,delay:0});$form.submit();return false;}
$.publish('plugin/swAjaxVariant/onChange',[this,values,$target]);this.requestData(values,true);},_getUrlParams:function(){var search=window.location.search.substring(1),urlParams=search.split('&'),params={};$.each(urlParams,function(i,param){param=param.split('=');if(param[0].length&&param[1]&&param[1].length&&!params.hasOwnProperty(param[0])){params[decodeURIComponent(param[0])]=decodeURIComponent(param[1]);}});return params;},_getUrl:function(){return window.location.protocol+'//'+window.location.host+window.location.pathname;},_createHistoryStateObject:function(){var $form=this.$el.find(this.opts.configuratorFormSelector),urlParams=this._getUrlParams(),location=this._getUrl();return{state:{type:this.opts.historyIdentifier,values:$form.serialize(),scrollPos:$(window).scrollTop()},title:document.title,location:location,params:urlParams};}});})(jQuery,window);;(function($,window,document){'use strict';$.getCookie=function(name){var value='; '+document.cookie,parts=value.split('; '+name+'=');if(parts.length===2){return parts.pop().split(';').shift();}
return undefined;};$.removeCookie=function(name){var basePath=window.csrfConfig.basePath||'/';document.cookie=name+'=; path='+basePath+'; expires=Thu, 01 Jan 1970 00:00:01 GMT;';};var CSRF={storageKey:'__csrf_token-'+window.csrfConfig.shopId,pendingRequests:{},allowedDomains:[window.location.protocol+'//'+window.location.hostname],getToken:function(){return $.getCookie(this.storageKey);},checkToken:function(){return this.getToken()!==undefined;},createTokenField:function(){var me=this;return $('<input>',{'type':'hidden','name':'__csrf_token','value':me.getToken()});},addTokenField:function(formElement){formElement.append(CSRF.createTokenField());$.publish('plugin/swCsrfProtection/addTokenField',[this,formElement]);},getFormElements:function(){return $('form[method="post"]');},updateForms:function(){var me=this,formElements=me.getFormElements();$.each(formElements,function(index,formElement){var csrfInput;formElement=$(formElement);csrfInput=formElement.find('input[name="__csrf_token"]');if(!CSRF.isLocalLink(formElement.attr('action'))){return;}
if(csrfInput.length>0){csrfInput.val(me.getToken());}else{me.addTokenField(formElement);}});$.publish('plugin/swCsrfProtection/updateForms',[this,formElements]);},setupAjax:function(){var me=this;$(document).ajaxSend($.proxy(me._ajaxBeforeSend,me));$(document).ajaxComplete($.proxy(me._ajaxAfterSend,me));$.publish('plugin/swCsrfProtection/setupAjax',[me,me.getToken()]);},_ajaxAfterSend:function(){window.setTimeout(function(){this.updateForms();}.bind(this),1);},_ajaxBeforeSend:function(event,request,settings){settings=settings||{};if(settings.hasOwnProperty('ignoreCSRFHeader')||settings.ignoreCSRFHeader===true||!this.isLocalLink(settings.url)){return;}
request.setRequestHeader('X-CSRF-Token',this.getToken());},requestToken:function(){var me=this;if(window.StateManager.hasCookiesAllowed()||window.cookieRemoval===1){$.ajax({url:window.csrfConfig.generateUrl,success:function(response,status,xhr){me.saveToken(xhr.getResponseHeader('x-csrf-token'));$.publish('plugin/swCsrfProtection/requestToken',[me,me.getToken()]);me.afterInit();}});}},saveToken:function(token){var me=this,basePath=window.csrfConfig.basePath||'/';document.cookie=me.storageKey+'='+token+'; path='+basePath;},init:function(){var me=this;if(me.checkToken()){me.afterInit();return;}
me.requestToken();},afterInit:function(){var me=this;me.updateForms();me.setupAjax();$.publish('plugin/swCsrfProtection/init',[me]);},isLocalLink:function(link){if(link===undefined||link===null||link[0]==='/'){return true;}
for(var index in this.allowedDomains){if(link.indexOf(this.allowedDomains[index])===0){return true;}}
return false;}};$(function(){CSRF.init();});window.CSRF=CSRF;})(jQuery,window,document);;(function($){'use strict';$.plugin('swPanelAutoResizer',{defaults:{panelHeaderSelector:'.panel--header',panelBodySelector:'.panel--body',panelFooterSelector:'.panel--actions',maxHeight:null},$elChildren:null,isModal:false,init:function(){var me=this;me.applyDataAttributes();me.$elChildren=me.$el.children();me.isModal=me.$el.closest('.js--modal').length>0;$.subscribe(me.getEventName('plugin/swPanelAutoResizer/onAfterSetHeight'),$.proxy(me._onAfterSetHeight,me));$.publish('plugin/swPanelAutoResizer/onInit',[me]);me.update();$.publish('plugin/swPanelAutoResizer/onAfterInit',[me]);},_onAfterSetHeight:function(event,context){var me=this;if(me===context){return;}
if(me.$el.closest(context.$el).length>0){me._calculateColumns();me.resize();}},_calculateColumns:function(){var me=this,maxWidth=me.$el.width(),width=0,columns=0,childWidth=0;$.each(me.$elChildren,function(index,child){childWidth=$(child).width();if((width+childWidth)>maxWidth){return;}
width+=childWidth;columns++;});me._columns=columns;},update:function(){var me=this;if(me._resizeTimeout){window.clearTimeout(me._resizeTimeout);}
me._resizeTimeout=window.setTimeout(function(){$.publish('plugin/swPanelAutoResizer/onUpdate',[me]);me._calculateColumns();me.resize();$.publish('plugin/swPanelAutoResizer/afterUpdate',[me]);},150);},getMaxHeight:function($elements){var me=this,opts=me.opts,itemHeight=0,height=0;$.publish('plugin/swPanelAutoResizer/onGetMaxHeight',[me]);$elements.each(function(index,childElement){$(childElement).css('height','auto');});$elements.each(function(index,childElement){itemHeight=$(childElement).height();if(itemHeight>height){height=itemHeight;}});if(opts.maxHeight!==null&&opts.maxHeight<height){height=opts.maxHeight;}
$.publish('plugin/swPanelAutoResizer/onAfterGetMaxHeight',[me,height]);return height;},setHeight:function($elements,height){var me=this;if(height<=0){return;}
$.publish('plugin/swPanelAutoResizer/onSetHeight',[me]);$.each($elements,function(index,childElement){$(childElement).height(height);});$.publish('plugin/swPanelAutoResizer/onAfterSetHeight',[me]);},resize:function(selector){var me=this,height=0,chunkItems=[],i=0,childrenCount=me.$elChildren.length;if(typeof selector==='undefined'){me.resize(me.opts.panelHeaderSelector);me.resize(me.opts.panelBodySelector);me.resize(me.opts.panelFooterSelector);return;}
$.publish('plugin/swPanelAutoResizer/onResize',[me,selector]);if(me._columns>1){for(i;i<childrenCount;i+=me._columns){chunkItems=me.$elChildren.slice(i,i+me._columns).map(function(index,child){return $(child).find(selector).first();});height=me.getMaxHeight(chunkItems);me.setHeight(chunkItems,height);}}else{me.resetHeight();}
me._centerModal();$.publish('plugin/swPanelAutoResizer/onAfterResize',[me,selector]);},_centerModal:function(){if(this.isModal===false){return;}
$.modal.center();},resetHeight:function(){var me=this,opts=me.opts;var allSelectorClass=[opts.panelHeaderSelector,opts.panelBodySelector,opts.panelFooterSelector].join(',');me.$elChildren.find(allSelectorClass).each(function(index,childElement){$(childElement).css('height','auto');});},destroy:function(){var me=this;me.resetHeight();$.unsubscribe(me.getEventName('plugin/swPanelAutoResizer/onAfterSetHeight'));me._destroy();}});})(jQuery);;(function($,window){'use strict';$.addressSelection={_name:'addressSelection',_previousOptions:{},defaults:{id:null,formSelector:'.address-manager--selection-form',width:'80%',height:'80%',sizing:'content',sessionKey:'',setDefaultBillingAddress:null,setDefaultShippingAddress:null},getEventName:function(event){return event+'.'+this._name;},openPrevious:function(){this.open(this._previousOptions);},open:function(options){var me=this,sizing,extraData,maxHeight=0;me.opts=$.extend({},me.defaults,options);extraData={sessionKey:me.opts.sessionKey,setDefaultBillingAddress:me.opts.setDefaultBillingAddress,setDefaultShippingAddress:me.opts.setDefaultShippingAddress};sizing=me.opts.sizing;me._previousOptions=Object.create(me.opts);if(window.StateManager._getCurrentDevice()==='mobile'){sizing='auto';}else{maxHeight=me.opts.height;}
$.modal.close();$.loadingIndicator.open();$.publish('plugin/swAddressSelection/onBeforeAddressFetch',[me]);$.ajax({'url':window.controller['ajax_address_selection'],'data':{id:me.opts.id,extraData:extraData},'success':function(data){$.loadingIndicator.close(function(){$.subscribe(me.getEventName('plugin/swModal/onOpen'),$.proxy(me._onSetContent,me));$.modal.open(data,{width:me.opts.width,maxHeight:maxHeight,additionalClass:'address-manager--modal address-manager--selection',sizing:sizing});$.unsubscribe(me.getEventName('plugin/swModal/onOpen'));});$.publish('plugin/swAddressSelection/onAddressFetchSuccess',[me,data]);}});},_onSetContent:function(event,$modal){var me=this;me._registerPlugins();me._bindButtonAction($modal);},_registerPlugins:function(){window.StateManager.addPlugin('*[data-panel-auto-resizer="true"]','swPanelAutoResizer').addPlugin('*[data-address-editor="true"]','swAddressEditor').addPlugin('*[data-preloader-button="true"]','swPreloaderButton');$.publish('plugin/swAddressSelection/onRegisterPlugins',[this]);},_bindButtonAction:function($modal){var me=this;$.publish('plugin/swAddressSelection/onBeforeBindButtonAction',[me,$modal]);$modal._$content.find(me.opts.formSelector).on('submit',function(event){var $target=$(event.target);event.preventDefault();$.publish('plugin/swAddressSelection/onBeforeSave',[me,$target]);$.ajax({method:$target.attr('method'),url:$target.attr('action'),data:$target.serialize(),success:function(response){me.onSave($modal,response);}});});$.publish('plugin/swAddressSelection/onAfterBindButtonAction',[me,$modal]);},onSave:function($modal,response){var me=this;$.publish('plugin/swAddressSelection/onAfterSave',[me,$modal,response]);window.location.reload();}};$.plugin('swAddressSelection',{init:function(){var me=this;me.opts=$.extend({},Object.create($.addressSelection.defaults),me.opts);me.applyDataAttributes(true);me._on(me.$el,'click',$.proxy(me.onClick,me));$.publish('plugin/swAddressSelection/onRegisterEvents',[me]);},onClick:function(event){event.preventDefault();$.addressSelection.open(this.opts);}});})(jQuery,window);;(function($,window){'use strict';$.plugin('swAddressEditor',{defaults:{id:null,submitButtonSelector:'.address--form-submit',width:650,height:'80%',sizing:'content',sessionKey:'',setDefaultBillingAddress:null,setDefaultShippingAddress:null,showSelectionOnClose:false},init:function(){var me=this;me.applyDataAttributes(true);me._on(me.$el,'click',$.proxy(me.onClick,me));$.publish('plugin/swAddressEditor/onRegisterEvents',[me]);},onClick:function(event){var me=this;event.preventDefault();$.publish('plugin/swAddressEditor/onBeforeClick',[me,me.opts.id]);if(me.opts.id){me.open(me.opts.id);}else{me.open();}
$.publish('plugin/swAddressEditor/onAfterClick',[me,me.opts.id]);},open:function(addressId){var me=this,sizing=me.opts.sizing,maxHeight=0,requestData={id:addressId||null,extraData:{sessionKey:me.opts.sessionKey,setDefaultBillingAddress:me.opts.setDefaultBillingAddress,setDefaultShippingAddress:me.opts.setDefaultShippingAddress}};if(window.StateManager._getCurrentDevice()==='mobile'){sizing='auto';}else{maxHeight=me.opts.height;}
$.modal.close();$.loadingIndicator.open();$.publish('plugin/swAddressEditor/onBeforeOpen',[me,requestData]);$.ajax({'url':window.controller['ajax_address_editor'],'data':requestData,'success':function(data){$.loadingIndicator.close(function(){$.subscribe(me.getEventName('plugin/swModal/onOpen'),$.proxy(me._onSetContent,me));$.modal.open(data,{width:me.opts.width,height:me.opts.height,maxHeight:maxHeight,sizing:sizing,additionalClass:'address-manager--modal address-manager--editor',addressId:addressId});$.unsubscribe(me.getEventName('plugin/swModal/onOpen'));});$.publish('plugin/swAddressEditor/onAddressFetchSuccess',[me,data]);}});$.publish('plugin/swAddressEditor/onAfterOpen',[me]);},_onSetContent:function(event,$modal){var me=this;me._registerPlugins();me._bindButtonAction($modal);},_registerPlugins:function(){window.StateManager.addPlugin('div[data-register="true"]','swRegister').addPlugin('*[data-preloader-button="true"]','swPreloaderButton');$.publish('plugin/swAddressEditor/onRegisterPlugins',[this]);},_bindButtonAction:function($modal){var me=this,$submitButtons=$modal._$content.find(me.opts.submitButtonSelector),$actionInput=$modal._$content.find('input[name=saveAction]');$.publish('plugin/swAddressEditor/onBeforeBindButtonAction',[me,$modal]);$submitButtons.on('click',function(event){var $elem=$(this);event.preventDefault();$actionInput.val($elem.attr('data-value'));$elem.closest('form').submit();});$modal._$content.find('form').on('submit',function(event){var $target=$(event.target),actionData={id:$modal.options.addressId||null};me._resetErrorMessage($modal);me._disableSubmitButtons($modal);event.preventDefault();$.each($target.serializeArray(),function(){actionData[this.name]=this.value;});$.publish('plugin/swAddressEditor/onBeforeSave',[me,actionData]);$.ajax({url:$target.attr('action'),data:actionData,method:'POST',success:function(response){me.onSave($modal,response);}});});$.publish('plugin/swAddressEditor/onAfterBindButtonAction',[me,$modal]);},onSave:function($modal,response){var me=this;$.publish('plugin/swAddressEditor/onAfterSave',[me,$modal,response]);if(response.success===true){if(me.opts.showSelectionOnClose){$.addressSelection.openPrevious();}else{window.location.reload();}}else{me._highlightErrors($modal,response.errors);me._enableSubmitButtons($modal);}},_highlightErrors:function($modal,errors){var fieldPrefix=$modal._$content.find('.address-form--panel').attr('data-prefix')||'address';$modal._$content.find('.address-editor--errors').removeClass('is--hidden');$.each(errors,function(field){$modal._$content.find('[name="'+fieldPrefix+'['+field+']"]').addClass('has--error');});},_resetErrorMessage:function($modal){$modal._$content.find('.address-editor--errors').addClass('is--hidden');},_disableSubmitButtons:function($modal){var me=this;$modal._$content.find(me.opts.submitButtonSelector).attr('disabled','disabled');},_enableSubmitButtons:function($modal){var me=this;$modal._$content.find(me.opts.submitButtonSelector).prop('disabled',false).data('plugin_swPreloaderButton').reset();}});})(jQuery,window);(function($,window){$.plugin('swDatePicker',{defaults:{mode:'single',utc:false,wrap:false,'static':false,weekNumbers:false,allowInput:false,clickOpens:true,time_24hr:true,enableTime:false,noCalendar:false,dateFormat:'Y-m-d',timeFormat:' H:i:S',altInput:true,rangeStartInput:null,rangeEndInput:null,altInputClass:'flatpickr-input form-control input',altFormat:'F j, Y',altTimeFormat:' - H:i',multiDateSeparator:null,defaultDate:null,minDate:null,maxDate:null,enabledDates:null,parseDate:null,autoSubmit:false},init:function(el,options){var me=this,globalConfig=window.datePickerGlobalConfig||{};me.opts=$.extend({},me.defaults,globalConfig,options);me.applyDataAttributes(true);me.suspended=false;if(me.opts.enableTime){me.opts.dateFormat=me.opts.dateFormat+me.opts.timeFormat;me.opts.altFormat=me.opts.altFormat+me.opts.altTimeFormat;}
if(me.opts.mode==='range'&&me.opts.rangeStartInput!==null){me.$rangeStartInput=$('[name="'+me.opts.rangeStartInput+'"]');}
if(me.opts.mode==='range'&&me.opts.rangeEndInput!==null){me.$rangeEndInput=$('[name="'+me.opts.rangeEndInput+'"]');}
me.initFlatpickr();me.registerEvents();$.publish('plugin/swDatePicker/onInit',[me]);},initFlatpickr:function(){var me=this,config=$.extend({},me.opts);me.currentValue=me.$el.val();if(me.opts.mode==='multiple'&&me.opts.multiDateSeparator!==null){me.$el.val(me.convertMultiSeparatorToFlatpickr(me.$el.val()));}
if(me.opts.enabledDates!==null){if(typeof me.opts.enabledDates==='string'){me.opts.enabledDates=me.opts.enabledDates.split(',');}
config['enable']=me.opts.enabledDates;}
config['onReady']=$.proxy(me.onPickerReady,me);config['onChange']=$.proxy(me.onPickerChange,me);config['onOpen']=$.proxy(me.onPickerOpen,me);config['onClose']=$.proxy(me.onPickerClose,me);me.flatpickr=me.$el.flatpickr(config);if(me.opts.mode==='multiple'&&me.opts.multiDateSeparator!==null){me.$el.val(me.convertMultiSeparator(me.$el.val()));}
if(me.opts.mode==='range'){me.setDatePickerValFromInputs();me.setStartInputVal();me.setEndInputVal();}
$.publish('plugin/swDatePicker/onInitFlatpickr',[me,me.flatpickr,config]);},registerEvents:function(){var me=this;me._on(me.$el,'clear',$.proxy(me.onInputClear,me));me._on(me.$el,'change',$.proxy(me.onInputChange,me));if(me.$rangeStartInput){me._on(me.$rangeStartInput,'clear',$.proxy(me.onRangeInputClear,me,me.$rangeStartInput));me._on(me.$rangeStartInput,'change',$.proxy(me.onInputChange,me));}
if(me.$rangeEndInput){me._on(me.$rangeEndInput,'clear',$.proxy(me.onRangeInputClear,me,me.$rangeEndInput));me._on(me.$rangeEndInput,'change',$.proxy(me.onInputChange,me));}
$.subscribe(me.getEventName('plugin/swOffcanvasMenu/onCloseMenu'),$.proxy(me.close,me));$.subscribe(me.getEventName('plugin/swOffcanvasMenu/onBeforeOpenMenu'),$.proxy(me.close,me));$.publish('plugin/swDatePicker/onRegisterEvents',[me]);},open:function(){var me=this;me.flatpickr.open();},close:function(){var me=this;me.flatpickr.close();},onInputClear:function(){var me=this;me.flatpickr.clear();$.publish('plugin/swDatePicker/onInputClear',[me]);},onInputChange:function(event){var me=this;if(me.suspended){event.preventDefault();event.stopPropagation();return false;}
$.publish('plugin/swDatePicker/onInputChange',[me]);},onRangeInputClear:function($input){var me=this;$input.val('');me.$el.trigger('change');me.setDatePickerValFromInputs();$.publish('plugin/swDatePicker/onRangeInputClear',[me]);},onPickerReady:function(){var me=this;$.publish('plugin/swDatePicker/onPickerReady',[me]);},onPickerChange:function(){var me=this;if(me.opts.mode==='range'){me.setStartInputVal();me.setEndInputVal();}
if(me.opts.mode==='multiple'&&me.opts.multiDateSeparator!==null){me.$el.val(me.convertMultiSeparator(me.$el.val()));}
$.publish('plugin/swDatePicker/onPickerChange',[me]);},onPickerOpen:function(){var me=this;me.currentValue=me.$el.val();$.publish('plugin/swDatePicker/onPickerOpen',[me]);},onPickerClose:function(){var me=this;if(me.opts.autoSubmit&&me.currentValue!==me.$el.val()){me.$el.parents('form').submit();}
$.publish('plugin/swDatePicker/onPickerClose',[me]);},setStartInputVal:function(value){var me=this;if(me.$rangeStartInput){var val=value||me.flatpickr.selectedDates[0]||'',altVal=val;if(val&&val!==''){val=me.formatDate(val);altVal=me.formatDate(altVal,me.opts.altFormat);}
me.$rangeStartInput.val(val);if(me.opts.altFormat){me.$rangeStartInput.attr('data-display-value',altVal);}}
$.publish('plugin/swDatePicker/onSetStartInputVal',[me]);},setEndInputVal:function(value){var me=this;if(me.$rangeEndInput){var val=value||me.flatpickr.selectedDates[1]||'',altVal=val;if(val&&val!==''){val=me.formatDate(val);altVal=me.formatDate(altVal,me.opts.altFormat);}
me.$rangeEndInput.val(val);if(me.opts.altFormat){me.$rangeEndInput.attr('data-display-value',altVal);}}
$.publish('plugin/swDatePicker/onSetEndInputVal',[me]);},setDatePickerValFromInputs:function(){var me=this,values=[];if(me.$rangeStartInput&&me.$rangeStartInput.val().length>0){values.push(me.$rangeStartInput.val());}
if(me.$rangeEndInput&&me.$rangeEndInput.val().length>0){values.push(me.$rangeEndInput.val());}
me.flatpickr.setDate(values);$.publish('plugin/swDatePicker/onSetDatePickerValFromInputs',[me]);},getRangeStartValue:function(){var me=this;if(!me.$rangeStartInput){return null;}
$.publish('plugin/swDatePicker/onGetRangeStartValue',[me]);return me.$rangeStartInput.val();},getRangeEndValue:function(){var me=this;if(!me.$rangeEndInput){return null;}
$.publish('plugin/swDatePicker/onGetRangeEndValue',[me]);return me.$rangeEndInput.val();},suspendEvents:function(){var me=this;me.suspended=true;$.publish('plugin/swDatePicker/onSuspendEvents',[me]);},resumeEvents:function(){var me=this;me.suspended=false;$.publish('plugin/swDatePicker/onResumeEvents',[me]);},convertMultiSeparator:function(value){var me=this;if(me.opts.multiDateSeparator===null){return value;}
var convertValue=value.split('; ').join(me.opts.multiDateSeparator);$.publish('plugin/swDatePicker/onConvertMultiSeparator',[me,convertValue]);return convertValue;},convertMultiSeparatorToFlatpickr:function(value){var me=this;if(me.opts.multiDateSeparator===null){return value;}
var convertValue=value.split(me.opts.multiDateSeparator).join('; ');$.publish('plugin/swDatePicker/onConvertMultiSeparatorToFlatpickr',[me,convertValue]);return convertValue;},formatDate:function(date,dateFormat){var me=this;if(!date){return false;}
dateFormat=dateFormat||me.opts.dateFormat;var formattedDate=me.flatpickr.formatDate(dateFormat,date);$.publish('plugin/swDatePicker/onFormatDate',[me,formattedDate,dateFormat,date]);return formattedDate;},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swOffcanvasMenu/onCloseMenu'));$.unsubscribe(me.getEventName('plugin/swOffcanvasMenu/onBeforeOpenMenu'));me.flatpickr.destroy();me._destroy();$.publish('plugin/swDatePicker/onDestroy',[me]);}});})(jQuery,window);;(function($,window){'use strict';$.plugin('swStorageField',{defaults:{storageType:'session',storageKeyPrefix:'sw-local-',storageKeyName:null,storeEvent:'blur'},init:function(){var me=this;me.applyDataAttributes();me.storage=window.StorageManager.getStorage(me.opts.storageType);me.storageKey=me.getStorageKey();me.$form=me.getParentForm();me.setFieldValueFromStorage();me.registerEvents();$.publish('plugin/swStorageField/init',[me]);},getStorageKey:function(){var me=this,fieldName=me.$el.attr('name'),key=me.opts.storageKeyPrefix;if(me.opts.storageKeyName!==null){key+=me.opts.storageKeyName.toLowerCase();}else if(fieldName&&fieldName.length){key+=fieldName.toLowerCase();}
$.publish('plugin/swStorageField/getStorageKey',[me,key]);return key;},getParentForm:function(){var me=this,$form=me.$el.parents('form');if(me.$el.is('[data-selector]')){$form=$(me.$el.attr('data-selector')).parents('form');}
$.publish('plugin/swStorageField/getParentForm',[me,$form]);return($form.length>0)?$form:null;},setFieldValueFromStorage:function(){var me=this,value=me.storage.getItem(me.storageKey);if(value&&value.length){me.$el.val(value);if(me.$el.is('[data-selector]')){$(me.$el.attr('data-selector')).val(value);}}
$.publish('plugin/swStorageField/setFieldValueFromStorage',[me]);},registerEvents:function(){var me=this;me._on(me.$el,me.opts.storeEvent,$.proxy(me.storeValue,me));if(me.$form&&me.$form!==null){me._on(me.$form,'submit',$.proxy(me.onFormSubmit,me));}
$.publish('plugin/swStorageField/onRegisterEvents',[me]);},storeValue:function(){var me=this,value=me.$el.val();me.storage.setItem(me.storageKey,value);$.publish('plugin/swStorageField/storeValue',[me]);},onFormSubmit:function(){var me=this;me.storage.removeItem(me.storageKey);$.publish('plugin/swStorageField/onFormSubmit',[me]);},destroy:function(){var me=this;me._destroy();}});})(jQuery,window);;(function($,window){'use strict';var $body=$('body');$.plugin('swCookiePermission',{defaults:{isHiddenClass:'is--hidden',cookieMessageShowingClass:'cookie--permission--message',acceptButtonSelector:'.cookie-permission--accept-button',declineButtonSelector:'.cookie-permission--decline-button',closeButtonSelector:'.cookie-permission--close-button',privacyLinkSelector:'.cookie-permission--privacy-link',shopId:0,urlPrefix:'',title:''},cookieStorageKeyPrefix:'hide-cookie-permission',init:function(){var me=this;me.applyDataAttributes();me.createProperties();me.preparePrivacyLink();me.registerEvents();me.displayCookiePermission(function(display){if(display){me.showElement();}});},calculatePermissionHeight:function(){return this.$el.css('height');},setPermissionHeight:function(){$body.css('padding-bottom',this.calculatePermissionHeight());},update:function(){this.setPermissionHeight();},createProperties:function(){this.$privacyLink=this.$el.find(this.opts.privacyLinkSelector);this.$acceptButton=this.$el.find(this.opts.acceptButtonSelector);this.$declineButton=this.$el.find(this.opts.declineButtonSelector);this.storageKey=this.createStorageKey();this.storage=window.StorageManager.getLocalStorage();},preparePrivacyLink:function(){var prefix=this.opts.urlPrefix,href;if(!this.$privacyLink){return;}
href=this.$privacyLink.attr('href')||'';if(href.match(/^(http:|https:)/)){return;}
if(href.match(/^\//)){prefix=this.opts.urlPrefix.replace(/(\/)$/,'');}
this.$privacyLink.attr('href',[prefix,href].join(''));},registerEvents:function(){this._on(this.$acceptButton,'click',$.proxy(this.onAcceptButtonClick,this));this._on(this.$declineButton,'click',$.proxy(this.onDeclineButtonClick,this));},displayCookiePermission:function(callback){if((window.cookieRemoval===2&&document.cookie.indexOf('allowCookie')!==-1)||(window.cookieRemoval===1&&document.cookie.indexOf('cookieDeclined')!==-1)){callback(false);return;}
callback(!this.storage.getItem(this.storageKey));},createStorageKey:function(){var delimiter='-';return[this.cookieStorageKeyPrefix,delimiter,this.opts.shopId].join('');},onAcceptButtonClick:function(event){event.preventDefault();try{window.localStorage.setItem(this.storageKey,'true');}catch(err){}
var d=new Date();d.setTime(d.getTime()+(180*24*60*60*1000));document.cookie='allowCookie=1; path=/;expires='+d.toGMTString()+';';this.hideElement();},onDeclineButtonClick:function(event){event.preventDefault();document.cookie='cookieDeclined=1; path=/;';this.hideElement();},onCloseButtonClick:function(event){event.preventDefault();this.hideElement();},showElement:function(){if(window.cookieRemoval===2){$.modal.open(this.$el.html(),{title:this.opts.title,sizing:'content',width:500});this.$acceptButton=$(this.opts.acceptButtonSelector);this.$closeButton=$(this.opts.closeButtonSelector);this._on(this.$acceptButton,'click',$.proxy(this.onAcceptButtonClick,this));this._on(this.$closeButton,'click',$.proxy(this.onCloseButtonClick,this));}else{this.$el.removeClass(this.opts.isHiddenClass);this.setPermissionHeight();}},hideElement:function(){this.$el.addClass(this.opts.isHiddenClass);$body.css('padding-bottom',0);$.modal.close();}});}(jQuery,window));(function($,window){window.StateManager.init([{state:'xs',enter:0,exit:29.9375},{state:'s',enter:30,exit:47.9375},{state:'m',enter:48,exit:63.9375},{state:'l',enter:64,exit:78.6875},{state:'xl',enter:78.75,exit:322.5}]);window.StateManager.addPlugin('*[data-offcanvas="true"]','swOffcanvasMenu',['xs','s']).addPlugin('*[data-datepicker="true"]','swDatePicker').addPlugin('*[data-search="true"]','swSearch').addPlugin('.footer--column .column--headline','swCollapsePanel',{contentSiblingSelector:'.column--content'},['xs','s']).addPlugin('#new-customer-action, .registration--menu-entry','swCollapsePanel',['xs','s']).addPlugin('*[data-image-slider="true"]','swImageSlider').addPlugin('.product--image-zoom','swImageZoom','xl').addPlugin('.blog-filter--trigger','swCollapsePanel',['xs','s','m','l']).addPlugin('.category--teaser .hero--text','swOffcanvasHtmlPanel',['xs','s']).addPlugin('*[data-product-slider="true"]','swProductSlider').addPlugin('.product--rating-link, .link--publish-comment','swScrollAnimate',{scrollTarget:'.tab-menu--product'},['s','m','l','xl']).addPlugin('a.link--publish-comment','swOffcanvasButton',{contentSelector:'#tab--product-comment'},['xs']).addPlugin('.tab-menu--product','swTabMenu',['s','m','l','xl']).addPlugin('.tab-menu--cross-selling','swTabMenu',['m','l','xl']).addPlugin('.tab-menu--product .tab--container','swOffcanvasButton',{titleSelector:'.tab--title',previewSelector:'.tab--preview',contentSelector:'.tab--content'},['xs']).addPlugin('.tab-menu--cross-selling .tab--header','swCollapsePanel',{'contentSiblingSelector':'.tab--content'},['xs','s']).addPlugin('body','swAjaxProductNavigation').addPlugin('*[data-collapse-panel="true"]','swCollapsePanel').addPlugin('*[data-range-slider="true"]','swRangeSlider').addPlugin('*[data-auto-submit="true"]','swAutoSubmit').addPlugin('*[data-drop-down-menu="true"]','swDropdownMenu').addPlugin('*[data-newsletter="true"]','swNewsletter').addPlugin('*[data-pseudo-text="true"]','swPseudoText').addPlugin('*[data-preloader-button="true"]','swPreloaderButton').addPlugin('*[data-filter-type]','swFilterComponent').addPlugin('*[data-listing-actions="true"]','swListingActions').addPlugin('*[data-scroll="true"]','swScrollAnimate').addPlugin('*[data-ajax-wishlist="true"]','swAjaxWishlist').addPlugin('*[data-image-gallery="true"]','swImageGallery').addPlugin('.emotion--wrapper','swEmotionLoader').addPlugin('input[type="submit"][form], button[form]','swFormPolyfill').addPlugin('select:not([data-no-fancy-select="true"])','swSelectboxReplacement').addPlugin('div.captcha--placeholder[data-src]','swCaptcha').addPlugin('*[data-modalbox="true"]','swModalbox').addPlugin('.is--ctl-detail','swJumpToTab',['m','l','xl']).addPlugin('*[data-ajax-shipping-payment="true"]','swShippingPayment').addPlugin('*[data-invalid-tos-jump="true"]','swInvalidTosJump').addPlugin('div[data-register="true"]','swRegister').addPlugin('*[data-last-seen-products="true"]','swLastSeenProducts',$.extend({},window.lastSeenProductsConfig)).addPlugin('*[data-add-article="true"]','swAddArticle').addPlugin('*[data-menu-scroller="true"]','swMenuScroller').addPlugin('*[data-collapse-cart="true"]','swCollapseCart').addPlugin('*[data-compare-ajax="true"]','swProductCompareAdd').addPlugin('*[data-product-compare-menu="true"]','swProductCompareMenu').addPlugin('*[data-infinite-scrolling="true"]','swInfiniteScrolling').addPlugin('*[data-ajax-variants-container="true"]','swAjaxVariant').addPlugin('*[data-subcategory-nav="true"]','swSubCategoryNav',['xs','s']).addPlugin('*[data-panel-auto-resizer="true"]','swPanelAutoResizer').addPlugin('*[data-address-selection="true"]','swAddressSelection').addPlugin('*[data-address-editor="true"]','swAddressEditor').addPlugin('*[data-cookie-permission="true"]','swCookiePermission').addPlugin('.navigation--entry.entry--account.with-slt','swDropdownMenu',['m','l','xl']).addPlugin('*[data-storage-field="true"]','swStorageField');$(function($){if(!StorageManager.hasCookiesSupport){createNoCookiesNoticeBox(window.snippets.noCookiesNotice);}
function createNoCookiesNoticeBox(message){$('<div/>',{'class':'alert is--warning no--cookies'}).append($('<div/>',{'class':'alert--icon'}).append($('<i/>',{'class':'icon--element icon--warning'}))).append($('<div/>',{'class':'alert--content','html':message}).append($('<a/>',{'class':'close--alert','html':''}).on('click',function(){$(this).closest('.no--cookies').hide();}))).appendTo('.page-wrap');}
$('*[data-lightbox="true"]').on('click.lightbox',function(event){var $el=$(this),target=($el.is('[data-lightbox-target]'))?$el.attr('data-lightbox-target'):$el.attr('href');event.preventDefault();if(target.length){$.lightbox.open(target);}});$('.add-voucher--checkbox').on('change',function(event){var method=(!$(this).is(':checked'))?'addClass':'removeClass';event.preventDefault();$('.add-voucher--panel')[method]('is--hidden');});$('body').on('click touchstart','.table--shipping-costs-trigger',function(event){event.preventDefault();var $this=$(this),$next=$this.parent().find('.table--shipping-costs'),method=($next.hasClass('is--hidden'))?'removeClass':'addClass';$next[method]('is--hidden');});function cartRefresh(){var ajaxCartRefresh=window.controller.ajax_cart_refresh,$cartAmount=$('.cart--amount'),$cartQuantity=$('.cart--quantity');if(!ajaxCartRefresh.length){return;}
$.publish('plugin/swResponsive/onCartRefresh');$.ajax({url:ajaxCartRefresh,dataType:'json',success:function(cart){if(!cart.amount||isNaN(cart.quantity)){return;}
$cartAmount.html(cart.amount);$cartQuantity.html(cart.quantity).removeClass('is--hidden');if(cart.quantity===0){$cartQuantity.addClass('is--hidden');}
$.publish('plugin/swResponsive/onCartRefreshSuccess',[cart]);}});}
$.subscribe('plugin/swAddArticle/onAddArticle',cartRefresh);$.subscribe('plugin/swCollapseCart/onRemoveArticleFinished',cartRefresh);});})(jQuery,window);;(function($,window){'use strict';$.plugin('swInvalidTosJump',{defaults:{jumpLabelSelector:'label[for="sAGB"]',errorClass:'has--error'},init:function(){var me=this;me.$jumpLabel=$(me.opts.jumpLabelSelector);me._on(me.$el,'invalid',$.proxy(me.jumpToInvalid,me));},jumpToInvalid:function(){var me=this;window.scroll(0,me.$el.offset().top-(window.innerHeight/2));me.$jumpLabel.addClass(me.opts.errorClass);}});})(jQuery,window);var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},r=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},q=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,e)).finalize(b)}}});var n=d.algo={};return d}(Math);(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,l)}})();CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();
/*!
* swAddArticle Override for
* "Bogx Product Configurator" extended for Designer-Image (own config images) from fabric.js Canvas-Content
* bogx-add-article
*
* Copyright (c) Borucinski Grafix, bogx.de
* Alle Rechte vorbehalten / All rights reserved by Borucinski Grafix, bogx.de
*
* Distributed only under the licence by Borucinski Grafix, bogx.de
* http://bogx.de
*
* This notice shall be included in all copies or substantial portions software.
* Contact http://bogx.de/ for documentation, updates and examples.
*/
'use strict';$.overridePlugin('swAddArticle',{sendSerializedForm:function(event){var me=this,opts=me.opts,$el=me.$el;if(document.getElementById('bogx_config')){event.preventDefault();var formData=$el.serialize(),canvas_export='png',imgData,imgSvg,imgBlob,otherData;formData+='&isXHR=1';if(opts.showModal){$.loadingIndicator.open({'openOverlay':true});}
var bogxCanvas=$('#bogx_canvas');var bogxCanvasJSON;var bogxImage,scale,multiplier=1.0;var fd=new FormData();if(bogxCanvas.length>0&&$el.attr('name')==="sAddToBasket"){var curvedtext_selector='input.bogx--input[data-datatype="curved_text"]';var cstyle=bogxCanvas.attr('data-canvasjson');var cstyleJSON=(cstyle!=='')?me.StringToJson(cstyle):'undefined';scale=parseFloat(bogxCanvas.attr('data-canvas_scale'));if(!isNaN(scale)){multiplier=1.0/scale;}
if(typeof cstyleJSON!=='undefined'&&Object.keys(cstyleJSON).length>0){if(cstyleJSON['export'])canvas_export=cstyleJSON['export'].toLowerCase();}
bogxCanvasJSON=window.bogxCanvas.toJSON();var bogxCanvasJSONStr=JSON.stringify(bogxCanvasJSON);if(canvas_export==='png'){bogxImage=window.bogxCanvas.toDataURL({format:"png",multiplier:multiplier});imgData=bogxImage.replace(/^data:image\/(png|jpg);base64,/,"");fd.append('image',imgData);if($(curvedtext_selector).length<=0){imgSvg=window.bogxCanvas.toSVG({width:window.bogxCanvas.width*multiplier,height:window.bogxCanvas.height*multiplier});if(imgSvg!==undefined){imgBlob=new Blob([imgSvg],{type:'svg+xml;charset=utf-8',endings:'native'});fd.append('file',imgBlob);}}}else if(canvas_export==='svg'){bogxImage=window.bogxCanvas.toDataURL({format:"png",multiplier:multiplier});imgData=bogxImage.replace(/^data:image\/(png|jpg);base64,/,"");fd.append('image',imgData);if($(curvedtext_selector).length<=0){imgSvg=window.bogxCanvas.toSVG({width:window.bogxCanvas.width*multiplier,height:window.bogxCanvas.height*multiplier});if(imgSvg!==undefined){imgBlob=new Blob([imgSvg],{type:'svg+xml;charset=utf-8',endings:'native'});fd.append('file',imgBlob);}}}else if(canvas_export==='jpg'){bogxImage=window.bogxCanvas.toDataURL({format:"jpg",multiplier:multiplier});imgData=bogxImage.replace(/^data:image\/(png|jpg);base64,/,"");fd.append('image',imgData);}
otherData=$el.serializeArray();$.each(otherData,function(key,input){if(input.name==="bogxProductConfiguratorSelection"){var config_json_string=sessionStorage.getItem("bogxProductConfiguratorSelection");var config_json_string_encrypted=me.CryptoJSAesEncrypt("Bogx_Product_Configurator_Selection",config_json_string);fd.append(input.name,config_json_string_encrypted);}else{fd.append(input.name,input.value);}});fd.append('bogxDesignerCanvas',bogxCanvasJSONStr);fd.append('isXHR',1);formData=fd;}else if($el.attr('name')==="sAddToBasket"){otherData=$('form[name="sAddToBasket"]').serializeArray();$.each(otherData,function(key,input){if(input.name==="bogxProductConfiguratorSelection"){var config_json_string=sessionStorage.getItem("bogxProductConfiguratorSelection");var config_json_string_encrypted=me.CryptoJSAesEncrypt("Bogx_Product_Configurator_Selection",config_json_string);fd.append(input.name,config_json_string_encrypted);}else{fd.append(input.name,input.value);}});fd.append('isXHR',1);formData=fd;}else if($el.hasClass('buybox--form')){otherData=$el.serializeArray();$.each(otherData,function(key,input){fd.append(input.name,input.value);});fd.append('isXHR',1);formData=fd;}
$.publish('plugin/swAddArticle/onBeforeAddArticle',[me,formData]);$.ajax({data:formData,dataType:'html',type:'POST',enctype:'multipart/form-data',cache:false,contentType:false,processData:false,traditional:true,url:opts.addArticleUrl,success:function(result){$.publish('plugin/swAddArticle/onAddArticle',[me,result]);console.log("Artikel erfolgreich per POST an Basket gesendet");if(!opts.showModal){return;}
$.loadingIndicator.close(function(){$.modal.open(result,{width:750,sizing:'content',onClose:me.onCloseModal.bind(me)});picturefill();StateManager.updatePlugin('.js--modal .product-slider','swProductSlider');$.publish('plugin/swAddArticle/onAddArticleOpenModal',[me,result]);});}});}else{me.superclass.sendSerializedForm.apply(this,arguments);}},CryptoJSAesEncrypt:function(passphrase,plain_text){var salt=CryptoJS.lib.WordArray.random(256);var iv=CryptoJS.lib.WordArray.random(16);var key=CryptoJS.PBKDF2(passphrase,salt,{hasher:CryptoJS.algo.SHA512,keySize:64/8,iterations:999});var encrypted=CryptoJS.AES.encrypt(plain_text,key,{iv:iv});var data={ciphertext:CryptoJS.enc.Base64.stringify(encrypted.ciphertext),salt:CryptoJS.enc.Hex.stringify(salt),iv:CryptoJS.enc.Hex.stringify(iv)}
return JSON.stringify(data);},StringToJson:function(json_str){return JSON.parse(json_str);},});
/*!
* bogx-add-dcl.js
* Add Direct Configurator Link to Data Base ("bogx_dcl")
* by Konrad Borucinski
*
* This notice shall be included in all copies or substantial portions software.
* Contact https://bogx.de for documentation, updates and examples.
*/
;(function($,window){'use strict';$.plugin('bogxAddDcl',{defaults:{method:'post',},init:function(){var me=this;me.applyDataAttributes();me.registerEvents();},update:function(){var me=this;},registerEvents:function(){var me=this;me._on($(document),'touchstart click','#bogx_add_dcl',function(event){var target=event.target;if($(target).length>0&&$(target).hasClass('bogx--add-dclbutton')){event.preventDefault();console.log("Save/Add Configuration as DCL is clicked");var addToDCLScript=$(target).attr('data-script');$.confirm({title:globalNotes['dcl_header'],content:globalNotes['dcl_save'],buttons:{'Abbruch':function(){console.log("Saving canceled");},'Speichern':function(){me.addToDcl(addToDCLScript);}},useBootstrap:false,boxWidth:'350px',});}});},addToDcl:function(addToDCLScript){var me=this;var config_data=sessionStorage.getItem("bogxProductConfiguratorSelection");var data=new window.FormData();data.append("product_configuration",config_data);var request=$.ajax({url:addToDCLScript,type:me.opts.method,data:data,cache:false,contentType:false,processData:false});request.done(function(response,textStatus,jqXHR){var data=JSON.parse(response);var responseText=data.message;var aid=data.aid;if(responseText==="SAVED"){$.alert({title:globalNotes['dcl_header'],content:globalNotes['dcl_saved']+', id='+aid,useBootstrap:false,boxWidth:'350px',});}else if(responseText==="EXIST"){$.alert({title:globalNotes['dcl_header'],content:globalNotes['dcl_exist']+', id='+aid,useBootstrap:false,boxWidth:'350px',});}
$.publish('plugin/bogxAddDcl/afterAddToDcl',[me,aid]);console.log(textStatus+": "+responseText);});request.fail(function(jqXHR,textStatus,error){console.log(textStatus);console.log(error);});},destroy:function(){var me=this;me._destroy();}});StateManager.addPlugin('#bogx_add_dcl','bogxAddDcl',{});})(jQuery,window);
/*!
* swCollapsePanel Override for
* "Bogx Product Configurator" extended for Grid by Open Collapse Panel
* bogx-collapse-panel
*
* Copyright (c) Borucinski Grafix, bogx.de
* Alle Rechte vorbehalten / All rights reserved by Borucinski Grafix, bogx.de
*
* Distributed only under the licence by Borucinski Grafix, bogx.de
* http://bogx.de
*
* This notice shall be included in all copies or substantial portions software.
* Contact http://bogx.de/ for documentation, updates and examples.
*/
'use strict';$.overridePlugin('swCollapsePanel',{openPanel:function(){var me=this,opts=me.opts,$targetEl=me.$targetEl,$siblings=$('.'+opts.collapseTargetCls).not($targetEl),tabId=$targetEl.parent().attr('data-tab-id');me.$el.addClass(opts.activeTriggerCls);if($targetEl.hasClass(opts.collapsedStateCls)){return;}
$targetEl.finish().slideDown(opts.animationSpeed,function(){$.publish('plugin/swCollapsePanel/onOpen',[me]);}).addClass(opts.collapsedStateCls);if(opts.closeSiblings){$siblings.finish().slideUp(opts.animationSpeed,function(){$siblings.removeClass(opts.collapsedStateCls);$siblings.prev().removeClass(opts.activeTriggerCls);});}
if(tabId!==undefined){$.publish('onShowContent-'+tabId,[me]);}
$.publish('plugin/swCollapsePanel/onOpenPanel',[me,me.$el]);}});;(function($,window){'use strict';$.plugin('bogxConfigModal',{defaults:{"buybutton":'.buybox--button',},init:function(){var me=this;me.applyDataAttributes();me.replacePriceTotal();me.replaceQuantityInput();me.updateModal();me.registerEvents();},registerEvents:function(){var me=this;var $selector_buybutton=$(me.opts.buybutton);var $selector_addtocart=$('#bogx_modal_footer_addtocart');var call_button=bogx_modal_call_button;var config_button="<button class=\"config--button block btn is--primary is--icon-right is--center is--large bogx--fullsize\""+" name=\""+call_button+"\">"+call_button+"</button>";$selector_buybutton.addClass('bogx--hidden');$(config_button).insertBefore(me.opts.buybutton);var $selector_backbutton=$('.bogx--modal-footer > .modal-navi > .back');$selector_backbutton.css('display','none');$('ul.modal-steps li:first').addClass('active');$('div.content-step-1').css('display','block');var $selector_steps=$('ul.modal-steps li');var count=$selector_steps.length;var width=100/count;var final_width=width-0.2;var $selector_backbutton_final=$('#bogx_modal_footer_final_back');$selector_backbutton_final.attr("data-id",count);$selector_steps.css({'width':final_width+'%'});$('.config--button').click(function(event){event.preventDefault();$('.product--image-container').css('z-index','-1');var obj_modal=document.getElementById("bogx_config_modal");var close=document.getElementsByClassName("modal-close")[0];obj_modal.style.display="block";close.onclick=function(){obj_modal.style.display="none";$('.product--image-container').css('z-index','');};window.onclick=function(event){if(event.target===obj_modal){obj_modal.style.display="none";$('.product--image-container').css('z-index','');}}});var event;if(bogx_tooltip_show==='hover'){event='mouseenter'}else{event='click touchstart'}
$('.bogx--modal-qtip').each(function(){$(this).qtip({prerender:true,overwrite:false,content:{text:$(this).find('.bogx--modal-qtip-content')},show:{event:event,solo:true},hide:'click unfocus',style:{classes:'qtip-bootstrap bogx-custom-qtip'},position:{viewport:$('.modal-content'),my:'top center',at:'bottom center',adjust:{method:'none'}}});});me._on($(document),'touch click',function(event){var targetDiv=event.target;var targetDivParent=event.target.parentNode;var $selector_config=$('#bogx_config');var $selector_steps=$('ul.modal-steps li');var new_id;if($(targetDivParent).hasClass('modal-steps')&&$(targetDiv).hasClass('modal-step')){if(!$(targetDiv).hasClass('is--disabled')){$selector_backbutton=$('.bogx--modal-footer > .modal-navi > .back');$selector_backbutton.css('display','block');new_id=parseInt($(targetDiv).attr("data-id"),10);if(new_id===1){$selector_backbutton.css('display','none');}
$('.bogx--main-step').css('display','none');$('div.content-step-'+new_id).css('display','block');$selector_steps.removeClass('active');$('li.step-'+new_id).addClass('active');$selector_config.attr('data-modal_active',new_id);me.updateModal();me.replacePriceTotal();}}else if($(targetDivParent).hasClass('modal-navi')&&$(targetDiv).hasClass('next')){if(!$(targetDiv).hasClass('is--disabled')){$selector_backbutton=$('.bogx--modal-footer > .modal-navi > .back')
$selector_backbutton.css('display','block');var data_id=parseInt($(targetDiv).attr("data-id"),10);if(data_id===count){$selector_steps.css('display','none');$('.bogx--calculate-price').css('display','block');}
new_id=data_id+1;$('.bogx--main-step').css('display','none');while($('#steps_count_'+new_id).hasClass('bogx--hidden')){new_id+=1;}
$('div.content-step-'+new_id).css('display','block');$selector_steps.removeClass('active');$('li.step-'+new_id).addClass('active');$selector_config.attr('data-modal_active',new_id);me.updateModal();me.replacePriceTotal();}}else if($(targetDivParent).hasClass('modal-navi')&&$(targetDiv).hasClass('back')){$selector_backbutton=$('.bogx--modal-footer > .modal-navi > .back')
$selector_backbutton.css('display','block');data_id=$(targetDiv).attr("data-id");if(data_id==='2'){$selector_backbutton.css('display','none');}
new_id=parseInt(data_id,10)-1;$('.bogx--main-step').css('display','none');while($('#steps_count_'+new_id).hasClass('bogx--hidden')){new_id-=1;}
$('div.content-step-'+new_id).css('display','block');$selector_steps.removeClass('active');$('li.step-'+new_id).addClass('active');$selector_config.attr('data-modal_active',new_id);me.replacePriceTotal();}else if($(targetDivParent).hasClass('bogx--calculate-buttons')&&$(targetDiv).hasClass('back')){data_id=$(targetDiv).attr("data-id");if(data_id==='1'){$selector_backbutton=$('.bogx--modal-footer > .modal-navi > .back')
$selector_backbutton.css('display','none');$('li.step-'+data_id).css('display','block');$('.content_step-'+data_id).css('display','block');}else{$selector_steps.css('display','block');$('li.step-'+data_id).addClass('active').css('display','block');$('.content-step-'+data_id).css('display','block');}
$('.bogx--calculate-price').css('display','none');}});$selector_addtocart.click(function(event){$('form.buybox--form').submit();$('.bogx--modal').css('display','none');$('.product--image-container').css('z-index','');});me._on($(document),'change',function(event){var target=$(event.target);var quantity;if(target.is('select')&&target.is('#sQuantity')){quantity=$("#sQuantity option:selected").val();var sQuantity=$('input[name="sQuantity"]');if(sQuantity.length>0){sQuantity.val(quantity);}}});$.subscribe('plugin/bogxProductConfigurator/afterUpdateConfigurator',function(plugin,obj){me.updateModal();});},updateModal:function(){var me=this;var $selector_steps=$('ul.modal-steps li');var count=$selector_steps.length;var active_modal=$('#bogx_config').attr('data-modal_active');if(active_modal){var nextButton=$('.bogx--modal-footer > .modal-navi > .next[data-id='+active_modal+']');var addtocart=$('#bogx_modal_footer_addtocart');var $selector=$('div.content-step-'+active_modal);var $child_with_warning1=$selector.find('div.bogx--warning-header');var $child_with_warning2=$selector.find('div.bogx--warning-content');if($child_with_warning1.length>0||$child_with_warning2.length>0){if(nextButton.length>0){nextButton.addClass('is--disabled');nextButton.attr('aria-disabled','true');nextButton.attr('disabled','disabled');}
if(addtocart.length>0){addtocart.addClass('is--disabled');addtocart.attr('aria-disabled','true');addtocart.attr('disabled','disabled');}}else{if(nextButton.length>0){nextButton.removeClass('is--disabled');nextButton.prop('disabled',false);nextButton.removeAttr('aria-disabled');}
if(addtocart.length>0){addtocart.removeClass('is--disabled');addtocart.prop('disabled',false);addtocart.removeAttr('aria-disabled');}}
var i=active_modal;var disable_rest=false;for(i;i<=count;i++){var step=$('li.step-'+i);var $selector=$('div.content-step-'+i);var $child_with_warning1=$selector.find('div.bogx--warning-header');var $child_with_warning2=$selector.find('div.bogx--warning-content');if($child_with_warning1.length>0||$child_with_warning2.length>0){if(step.length>0&&i!==active_modal){step.addClass('is--disabled');step.attr('disabled','disabled');}
disable_rest=true;}else if(disable_rest){if(step.length>0){step.addClass('is--disabled');step.attr('disabled','disabled');}}else{if(step.length>0){step.removeClass('is--disabled');step.prop('disabled',false);}}}}},replacePriceTotal:function(){var active_modal=$('#bogx_config').attr('data-modal_active');var $activeModalNavi=$('#bogx_modal_navi_'+active_modal);$('#bogx_modal_total_wrap').insertBefore($activeModalNavi).removeClass('bogx--hidden');},replaceQuantityInput:function(){if($('div.buybox--quantity').length>0){var selector_backtotal=$('#bogx_modal_footer_final_back');$('div.buybox--quantity').insertAfter(selector_backtotal);$('div.buybox--quantity').addClass('quantity');$('div.buybox--quantity').removeClass('bogx--hidden');var quantity=1;var sQuantity=$('input[name="sQuantity"]');if(sQuantity.length>0){sQuantity.val(quantity);}else{var inputHiddenAdd=$('input[name="sAdd"]');var quantityHiddenInput=$('<input type="hidden" name="sQuantity" value="'+quantity+'">');quantityHiddenInput.insertAfter(inputHiddenAdd);}}}});StateManager.addPlugin('#bogx_config_modal','bogxConfigModal',{});})(jQuery,window);;(function($,window){'use strict';Number.isInteger=Number.isInteger||function(value){return typeof value==='number'&&isFinite(value)&&Math.floor(value)===value;};if(typeof Object.assign!='function'){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){'use strict';if(target==null){throw new TypeError('Cannot convert undefined or null to object');}
var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}
return to;},writable:true,configurable:true});}
var group_name,title;$.plugin('bogxProductConfigurator',{defaults:{"configurator":"","product_image":"","user_group":"","additional_text_active":"1","prices_gross":"1","tax":"19","surcharges_gross":"1","total_dual":"0","currency":"","currency_factor":"1","baseprice_netto":"0","baseprice":"0","pseudoprice":"0","basepriceview":"update","minprice":"0","nullprice":"0","unitprice_precision":"4","articleid":"","articleordernumber":"","detail_link":"","buyboxbutton_active":"1","deliveryunit":"","default_shippingtime":"","dispatchrule":"","deliveryrule":"","default_dispatchvalue":0,"exportdesigner":"png","basketdesigner":"1","blackoptions_active":'0',"bogxCustomStorage":{},"defaultsJSON":{},"detachedStore":{},"additionalsJSON":{},"surchargeJSON":{},"formelJSON":{},"blockpricesJSON":{},"parentgroupsJSON":{},"parentgroupsErrors":[],"childrenOfParentCurrentDetach":{},'quantityLimits':{},'blackoptions':{},'customUnitPrice':{},"totalsurcharge":0,"totalQuantity":1,"totalQuantityUnit":"","basketButton":".bogx--buybutton","basketButtonHint":"#bogx_buybox_hint",'basicPriceFlag':true,'gesamtpreis':0,'basketAttributes':[],"basketSurchargeJSON":{},"additionalText":"","basketPartsList":{},"basketButtonActiveJSON":{},"designerFABRIC":{},"initializeUpdate":true,"waitForDetach":false,},init:function(){var me=this;me.applyDataAttributes();if(window.bogxDefaultsJSON&&!$.isEmptyObject(window.bogxDefaultsJSON)){me.opts.defaultsJSON=window.bogxDefaultsJSON;}else{me.opts.defaultsJSON={};}
if(sessionStorage.getItem('bogx_formel')!==null){me.opts.formelJSON=JSON.parse(sessionStorage.getItem('bogx_formel'));}
me.opts.blackoptions_active=bogx_blackoptions_active;if(me.opts.blackoptions_active==='1'&&bogx_blackoptions!==''){me.opts.blackoptions=me.StringToJson(bogx_blackoptions);}
me.opts.detachedStore={};me.opts.additionalsJSON={};me.blockPricesInit();if(me.opts.nullprice===1||me.opts.nullprice==="1"||me.opts.baseprice===0.01||bogx_show_prices==='0'){me.opts.baseprice="0";}else if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.baseprice_netto,10)!==0&&parseInt(me.opts.baseprice,10)!==0){me.opts.baseprice=(parseFloat(me.opts.baseprice_netto)*(1+parseFloat(me.opts.tax)*0.01)).toString();}
if(bogx_show_prices==='0'){me.quantityHandler(1);}
if(me.opts.dispatchrule===""){me.opts.dispatchrule="none";}
if(me.opts.deliveryrule===""){me.opts.deliveryrule="none";}
if($.isEmptyObject(me.opts.defaultsJSON)){me.convertDefaultJson();window.bogxDefaultsJSON=me.opts.defaultsJSON;}
me.opts.surchargeJSON=me.StringToJson(bogx_surcharges);me.opts.parentgroupsJSON=me.StringToJson(bogx_parent_groups);me.opts.quantityLimits=me.StringToJson(bogx_quantity_limits);me.detachInitHandler();me.updateConfigurator();if($("#bogx_canvas")&&$("#bogx_canvas").length>0){$("#bogx_canvas").attr("data-config-init","true");var bogxCanvas=$("#bogx_canvas");var canvas_export="png";var canvas_basket="1";var cstyle=bogxCanvas.attr('data-canvasjson');var cstyleJSON=(cstyle!=='')?me.StringToJson(cstyle):'undefined';if(typeof cstyleJSON!=='undefined'&&Object.keys(cstyleJSON).length>0){if(cstyleJSON['export'])canvas_export=cstyleJSON['export'].toLowerCase();me.opts.exportdesigner=canvas_export;if(typeof cstyleJSON['basket']!=='undefined'&&!cstyleJSON['basket']){canvas_basket="0";}
me.opts.basketdesigner=canvas_basket;}}
me.registerEvents();console.log("Bogx Produkt Konfigurator initialisiert");},blockPricesInit:function(){var me=this;var quantityObject=$('.bogx--config-quantity-wrap');if(quantityObject.length>0){me.opts.blockpricesJSON=me.StringToJson(quantityObject.attr('data-blockprices'));}},getBlockPrice:function(blockprices){var blockprice=0;if(!$.isEmptyObject(blockprices)){let $selector=$('.bogx--config-quantity-wrap input');if($selector.length>0){if($selector.val()!==""){let inputQuantity=parseInt($selector.val(),10);for(var key in blockprices){if(!blockprices.hasOwnProperty(key))continue;var priceBlock=blockprices[key];if(inputQuantity>=priceBlock.from&&priceBlock.to===null){blockprice=priceBlock.price;}else if(inputQuantity>=priceBlock.from&&inputQuantity<=priceBlock.to){blockprice=priceBlock.price;}}}}}
return blockprice;},formulaInitReader:function(key){var me=this;var selector=$('#'+key);var formelStr=selector.attr('data-formula');if(formelStr===undefined){formelStr="";}
if(bogx_formula_show==='0'){selector.attr('data-formula','');}
me.opts.formelJSON[key]=formelStr;},quantityControlDefaultValues:function(key){var me=this;var data_type=me.opts.defaultsJSON[key][0];var value_id=me.opts.defaultsJSON[key][2];if(data_type==='quantity-total'||data_type==='quantity-graduated'){var selector="#bogx_quantity_"+value_id;me.opts.defaultsJSON[key][1]=parseInt($(selector).val(),10);}},parametrixDefaultValues:function(key){var me=this;var value_1='',value_2='';var selector,selector1,selector2;var data_type=me.opts.defaultsJSON[key][0];if(data_type==="axb_parameter"||data_type==="axb_free_parameter"){var value_Id1=me.opts.defaultsJSON[key][2][0];var value_Id2=me.opts.defaultsJSON[key][2][1];}else{var value_Id=me.opts.defaultsJSON[key][2];}
if(data_type==='axb_parameter'){selector1="#bogx-parameter-axb_"+value_Id1;selector2="#bogx-parameter-axb_"+value_Id2;if($(selector1).val()!=="")value_1=parseFloat($(selector1).val());if($(selector2).val()!=="")value_2=parseFloat($(selector2).val());me.opts.defaultsJSON[key][1][0]=value_1;me.opts.defaultsJSON[key][1][1]=value_2;}else if(data_type==='a_parameter'){selector="#bogx-parameter-a_"+value_Id;me.opts.defaultsJSON[key][1]=parseFloat($(selector).val());}else if(data_type==='b_parameter'){selector="#bogx-parameter-b_"+value_Id;me.opts.defaultsJSON[key][1]=parseFloat($(selector).val());}else if(data_type==="axb_free_parameter"){selector1="#axb_free_"+value_Id1;selector2="#axb_free_"+value_Id2;if($(selector1).val()!=="")value_1=parseFloat($(selector1).val());if($(selector2).val()!=="")value_2=parseFloat($(selector2).val());me.opts.defaultsJSON[key][1][0]=value_1;me.opts.defaultsJSON[key][1][1]=value_2;}else if(data_type==='free_parameter'){selector="#bogx-parameter-free_"+value_Id;me.opts.defaultsJSON[key][1]=parseFloat($(selector).val());}},multiSelectInitValues:function(key){var me=this;var data_type=me.opts.defaultsJSON[key][0];var value=me.opts.defaultsJSON[key][1];var value_id,value_id_arr=[];var val,val_arr,val_json={};var $selector_w,$selector_q;var quantity,unit,dispatch,delivery,ocb;var unit_json={},dispatch_json={},delivery_json={},ocb_json={};if(value!==null&&typeof value==='object'){for(value_id in value){if(value.hasOwnProperty(value_id)){if(data_type==='check_set'){$selector_q=$('#'+value_id+"_checkbox");}else{$selector_q=$('#bogx_quantity_'+value_id);}
quantity=value[value_id];unit=$selector_q.attr('data-unit');if(typeof unit==='undefined')unit="";dispatch=$selector_q.attr('data-dispatch');delivery=$selector_q.attr('data-delivery');if(typeof delivery==='undefined')delivery="";ocb=$selector_q.attr('data-ocb');if(typeof ocb==='undefined')ocb="";value_id_arr.push(value_id);val_json[value_id]=quantity;unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;}}}else if(typeof value==='string'&&value!==""){val_arr=value.split(';');var len=val_arr.length;if(len>=1){for(var i=0;i<len;i++){val=val_arr[i];if(data_type==='quantity_check'){$selector_w=$('div.bogx--config.check[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');value_id=$selector_w.attr('data-valueid');$selector_q=$('#bogx_quantity_'+value_id);quantity=$selector_q.val();}else if(data_type==='article_virtual_multi'||data_type==='article_virtual_single'||data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'){$selector_w=$('div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');value_id=$selector_w.attr('data-valueid');$selector_q=$('#bogx_quantity_'+value_id);quantity=$selector_q.val();}else if(data_type==='check_set'){$selector_w=$('div.bogx--config.check[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');value_id=$selector_w.attr('data-valueid');$selector_q=$('#'+value_id+"_checkbox");quantity=parseInt($selector_q.attr('data-quantity'));if(isNaN(quantity)||quantity===0)quantity=1;}
unit=$selector_q.attr('data-unit');if(typeof unit==='undefined')unit="";dispatch=$selector_q.attr('data-dispatch');delivery=$selector_q.attr('data-delivery');if(typeof delivery==='undefined')delivery="";ocb=$selector_q.attr('data-ocb');if(typeof ocb==='undefined')ocb="";value_id_arr.push(value_id);val_json[value_id]=quantity;unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;}}}
me.opts.defaultsJSON[key][1]=val_json;me.opts.defaultsJSON[key][2]=value_id_arr;me.opts.defaultsJSON[key][4]=unit_json;me.opts.defaultsJSON[key][5]=dispatch_json;me.opts.defaultsJSON[key][6]=delivery_json;me.opts.defaultsJSON[key][7]=ocb_json;},detachInitHandler:function(){var me=this,key;for(key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){var data_type=me.opts.defaultsJSON[key][0];me.gridColumnHandler(key);me.detachKeyHandler(key);if(Object.keys(me.opts.formelJSON).length===0||typeof me.opts.formelJSON[key]==='undefined'){me.formulaInitReader(key);}
me.quantityControlDefaultValues(key);me.parametrixDefaultValues(key);if(data_type==='quantity_check'||data_type==='check_set'||data_type==='article_virtual_multi'||data_type==='article_virtual_single'||data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'){me.multiSelectInitValues(key);}}}
for(key in me.opts.parentgroupsJSON){if(me.opts.parentgroupsJSON.hasOwnProperty(key)){if(me.opts.parentgroupsJSON[key]===1){var children=me.getInitChildrenOfParentGroup(key);if(children.length>0){children.forEach(function(k_child,index){me.opts.defaultsJSON[k_child][3]=1;});}}}}},gridColumnHandler:function(key){var me=this;var $selector_wrap,$selector_items;var grid_space_default=6.0;var columns,columns_phone,grid_space;var cell_width,item_width=0,wrap_width,cell_space,item_width_str,item_margin_str,item_height_str;var data_type=me.opts.defaultsJSON[key][0];if(data_type==='image'||data_type==='imagetitle'||data_type==='imagetitle_price'||data_type==='imageproduct'||data_type==='color'||data_type==='font_color'||data_type==='shape_color'||data_type==='background_color'||data_type==='article_virtual_multi'||data_type==='article_virtual_single'||data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'||data_type==='shape'||data_type==='shape_img'||data_type==='background')
{$selector_wrap=$('#'+key);if(typeof $selector_wrap!=='undefined'&&$selector_wrap.length>0){columns=parseInt($selector_wrap.attr("data-grid_columns"));columns_phone=parseInt($selector_wrap.attr("data-grid_columns_phone"));if((!isNaN(columns)&&columns>1)||(!isNaN(columns_phone)&&columns_phone>1)){grid_space=parseInt($selector_wrap.attr("data-grid_space"));if(isNaN(grid_space)||grid_space===0){grid_space=grid_space_default;}
cell_width=parseFloat($selector_wrap.attr("data-cell_width"));wrap_width=$selector_wrap.width();$selector_items=$('div.bogx--config.image[data-groupid="'+key+'"]');if(data_type==='article_virtual_multi'||data_type==='article_virtual_single'){$selector_items=$selector_wrap.find('.bogx--config.article')}else if(data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'){$selector_items=$selector_wrap.find('.bogx--config.article')}else if(data_type==='color'){$selector_items=$('div.bogx--config.color[data-groupid="'+key+'"]');}
if($selector_items.length>0){if($(window).width()<=500&&!isNaN(columns_phone)&&columns_phone>1){if(data_type==='color'||data_type==='font_color'||data_type==='shape_color'||data_type==='background_color'){columns_phone=8;grid_space=4;cell_width=100.0/columns_phone;}else{grid_space=4;cell_width=100.0/columns_phone;}
item_width=(wrap_width-columns_phone*grid_space)*cell_width*0.01;}else if($(window).width()<=500){if(data_type==='color'||data_type==='font_color'||data_type==='shape_color'||data_type==='background_color'){grid_space=4;columns_phone=8;cell_width=100.0/columns_phone;}else{grid_space=4;columns_phone=2;cell_width=100.0/columns_phone;}
item_width=(wrap_width-columns_phone*grid_space)*cell_width*0.01;}else if($(window).width()>500&&!isNaN(columns)&&columns>1){item_width=(wrap_width-columns*grid_space)*cell_width*0.01;}
if(item_width>0){cell_space=grid_space*0.5;item_width_str=item_width+"px";item_margin_str=cell_space+"px";item_height_str=item_width+"px";if(data_type==='color'||data_type==='font_color'||data_type==='shape_color'||data_type==='background_color'){$selector_items.css({'margin':item_margin_str});if(typeof $selector_items.find('span')!=='undefined'&&$selector_items.find('span').length>0){$selector_items.find('span').css({'width':item_width_str,'height':item_width_str});}else{$selector_items.css({'width':item_width_str});}}else{$selector_items.css({'width':item_width_str,'margin':item_margin_str});if(data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'){$selector_items.find("img").css({'height':item_width_str});}}}}}}}},detachKeyHandler:function(key){var me=this;var $selector,blacklist,whitelist,children,k_child;if(me.opts.defaultsJSON[key]!==undefined&&me.opts.defaultsJSON[key][3]===0){var data_type=me.opts.defaultsJSON[key][0];var val=me.opts.defaultsJSON[key][1];var value_id=me.opts.defaultsJSON[key][2];if(data_type==='radiobutton'){$selector=$('div.bogx--config.radiobutton[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');}else if(data_type==='select'||data_type==='quantity-select'){$selector=$('#select_'+key).find('option[data-valueid="'+value_id+'"]');}else if(data_type==='image'||data_type==='imagetitle'||data_type==='imagetitle_price'||data_type==='imageproduct'||data_type==='article_virtual_multi'||data_type==='article_virtual_single'||data_type==='article_multi_select'||data_type==='article_single_select'||data_type==='acc_multi_select'||data_type==='acc_single_select'||data_type==='shape'||data_type==='shape_img'||data_type==='background'){$selector=$('div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');}else if(data_type==='color'){$selector=$('div.bogx--config.color[data-groupid="'+key+'"]'+'[data-value="'+val+'"]');}else if(data_type==='check'){$selector=$('#'+key);if(!$selector.prop("checked")&&val==="0"){$selector=$('div[data-groupid="'+key+'"]');}}
var k;if($selector&&$selector.length>0&&typeof $selector.attr('data-blacklist')!=='undefined'&&$selector.attr('data-blacklist')!==''){blacklist=JSON.parse($selector.attr("data-blacklist"));for(var b in blacklist){if(blacklist.hasOwnProperty(b)){k=blacklist[b];if(me.opts.parentgroupsJSON[k]!==undefined){me.opts.parentgroupsJSON[k]=1;}else if(me.opts.defaultsJSON[k]!==undefined){me.opts.defaultsJSON[k][3]=1;}}}}
if($selector&&$selector.length>0&&typeof $selector.attr('data-whitelist')!=='undefined'&&$selector.attr("data-whitelist")!==''){whitelist=JSON.parse($selector.attr("data-whitelist"));for(var w in whitelist){if(whitelist.hasOwnProperty(w)){k=whitelist[w];if(me.opts.parentgroupsJSON[k]!==undefined){me.opts.parentgroupsJSON[k]=0;}else if(me.opts.defaultsJSON[k]!==undefined){me.opts.defaultsJSON[k][3]=0;}}}}}},detachSelectorHandler:function(selector){var me=this;var blacklist,whitelist,children,k_child;var k;var current_detach_flags={},temp_black_flags={};if(typeof $(selector).attr('data-blacklist')!=='undefined'&&$(selector).attr('data-blacklist')!==''){blacklist=JSON.parse($(selector).attr("data-blacklist"));for(var b in blacklist){if(blacklist.hasOwnProperty(b)){k=blacklist[b];if(me.opts.parentgroupsJSON[k]!==undefined){if(me.opts.parentgroupsJSON[k]===0){me.opts.parentgroupsJSON[k]=1;children=me.getChildrenOfParentGroup(k);if(children.length>0){children.forEach(function(k_child,index){current_detach_flags[k_child]=1;me.opts.defaultsJSON[k_child][3]=current_detach_flags[k_child];});me.opts.childrenOfParentCurrentDetach[k]=current_detach_flags;}}}else if(me.opts.defaultsJSON[k]!==undefined){me.opts.defaultsJSON[k][3]=1;temp_black_flags[k]=1;if(!jQuery.isEmptyObject(me.opts.childrenOfParentCurrentDetach)){for(var g in me.opts.childrenOfParentCurrentDetach){for(var o in me.opts.childrenOfParentCurrentDetach[g]){if(o===k){me.opts.childrenOfParentCurrentDetach[g][o]=1;break;}}}}
me.detachKeyHandler(k);}}}}
if(typeof $(selector).attr('data-whitelist')!=='undefined'&&$(selector).attr('data-whitelist')!==''){whitelist=JSON.parse($(selector).attr("data-whitelist"));for(var w in whitelist){if(whitelist.hasOwnProperty(w)){k=whitelist[w];if(me.opts.parentgroupsJSON[k]!==undefined){me.opts.parentgroupsJSON[k]=0;children=me.getChildrenOfParentGroup(k);if(children.length>0){children.forEach(function(k_child,index){if(!jQuery.isEmptyObject(temp_black_flags)&&temp_black_flags[k_child]!==undefined){current_detach_flags[k_child]=1;}else{current_detach_flags[k_child]=0;}
me.opts.defaultsJSON[k_child][3]=current_detach_flags[k_child];});me.opts.childrenOfParentCurrentDetach[k]=current_detach_flags;}
me.reattachParentgroup(k,me.opts.detachedStore[k]);}else if(me.opts.defaultsJSON[k]!==undefined){me.opts.defaultsJSON[k][3]=0;me.reattach(k,me.opts.detachedStore[k]);if(!jQuery.isEmptyObject(me.opts.childrenOfParentCurrentDetach)){for(var g in me.opts.childrenOfParentCurrentDetach){for(var o in me.opts.childrenOfParentCurrentDetach[g]){if(o===k){me.opts.childrenOfParentCurrentDetach[g][o]=0;break;}}}}
me.detachKeyHandler(k);}}}}},detachExecute:function(){var me=this;var selector,detach_flag;for(var grp_key in me.opts.parentgroupsJSON){if(me.opts.parentgroupsJSON.hasOwnProperty(grp_key)){selector=grp_key;detach_flag=me.opts.parentgroupsJSON[grp_key];if(detach_flag===1&&!me.opts.detachedStore[selector]){me.opts.detachedStore[selector]=me.detachTempParentgroup(selector);}else if(detach_flag===0&&me.opts.detachedStore[selector]){if(me.opts.detachedStore[selector]){me.reattachParentgroup(selector,me.opts.detachedStore[selector]);delete me.opts.detachedStore[selector];}}}}
for(var key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){selector=key;detach_flag=me.opts.defaultsJSON[key][3];if(detach_flag===1&&!me.opts.detachedStore[selector]){me.opts.detachedStore[selector]=me.detachTemp(selector);me.cleanWarningGroup(key);}else if(detach_flag===0&&me.opts.detachedStore[selector]){if(me.opts.detachedStore[selector]){me.reattach(selector,me.opts.detachedStore[selector]);delete me.opts.detachedStore[selector];me.gridColumnHandler(selector);}}}}},detachTempParentgroup:function(parent_selector){var me,children,obj,selector;me=this;obj={};var $todetach=$('#'+parent_selector);var detach_placeholder=$('<span style="display:none;" id="'+parent_selector+'-placeholder" />');if($todetach.hasClass('bogx--main-step')){var step=$todetach.attr('data-step');var step_selector="#steps_count_"+step;if($(step_selector).length>0){$(step_selector).addClass('bogx--hidden');}}
detach_placeholder.insertAfter($todetach);obj.detached=$todetach.detach();children=me.getChildrenOfParentGroup(parent_selector);obj.detached_surcharge=[];if(children.length>0){children.forEach(function(selector,index){me.opts.defaultsJSON[selector][3]=1;});}
return obj;},reattachParentgroup:function(parent_key,detached){var me=this;var children,k,current_detach_flags,detach_flag;var $detach_placeholder=$('#'+parent_key+'-placeholder');var toreattach='#'+parent_key;if($detach_placeholder.length>0){if(typeof detached.detached!=="undefined"){$(detached.detached).insertBefore($detach_placeholder);$detach_placeholder.remove();if(detached.detached.hasClass('bogx--main-step')){var step=detached.detached.attr('data-step');var step_selector="#steps_count_"+step;if($(step_selector).length>0&&$(step_selector).hasClass('bogx--hidden')){$(step_selector).removeClass('bogx--hidden');}}}}
children=me.getChildrenOfParentGroup(parent_key);if(children.length>0){current_detach_flags=me.opts.childrenOfParentCurrentDetach[parent_key];children.forEach(function(k,index){if(typeof current_detach_flags!=='undefined'){if(current_detach_flags[k]){detach_flag=current_detach_flags[k];}else{detach_flag=0;}}else{detach_flag=0;}
if(me.opts.detachedStore[k]){if(me.opts.detachedStore[k]){me.reattach(k,me.opts.detachedStore[k]);delete me.opts.detachedStore[k];}}
me.opts.defaultsJSON[k][3]=detach_flag;});}
StateManager.addPlugin('#'+parent_key+'_header','swCollapsePanel',{contentSiblingSelector:'.bogx--config-content'},['xs','s','m','l','xl']);if($('input.bogx--input-file').length>0){StateManager.addPlugin('.bogx--input-file','bogxMultiupload',{});}},detachTemp:function(selector){var key=selector;var selector_surcharge=key+'_surcharge_wrap';var detach_placeholder;var obj={};var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0){$selector_surcharge_grouptitle.addClass('bogx--hidden');}
var $todetach=$('#'+key);var selector_wraps='[id='+key+']';if($(selector_wraps).length>1){var $todetaches=$(selector_wraps);}
if(typeof $todetaches!=='undefined'){var i=1;obj.detached={};$todetaches.each(function(){$todetach=$(this);detach_placeholder=$('<span style="display:none;" id="'+key+'-placeholder_'+i+'" />');detach_placeholder.insertAfter($todetach);obj.detached[i]=$todetach.detach();++i;});}else{detach_placeholder=$('<span style="display:none;" id="'+key+'-placeholder" />');detach_placeholder.insertAfter($todetach);obj.detached=$todetach.detach();}
var $todetach_surcharge=$('#'+selector_surcharge);var detach_placeholder_surcharge=$('<span style="display:none;" id="'+selector_surcharge+'-placeholder" />');detach_placeholder_surcharge.insertAfter($todetach_surcharge);obj.detached_surcharge=$todetach_surcharge.detach();return obj;},reattach:function(selector,detached){var key=selector;var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0){$selector_surcharge_grouptitle.removeClass('bogx--hidden');}
var detach_placeholder=$('#'+key+'-placeholder');var detach_placeholders='[id^='+key+'-placeholder_]';if($(detach_placeholders).length>1){var $detach_placeholders=$(detach_placeholders);}
if(detach_placeholder&&detach_placeholder.length>0){if(detached){$(detached.detached).insertBefore(detach_placeholder);}
detach_placeholder.remove();}else if(typeof $detach_placeholders!=='undefined'){if(typeof detached!=='undefined'&&typeof detached.detached!=='undefined'){for(var k in detached.detached){detach_placeholder=$('[id='+key+'-placeholder_'+k+']');$(detached.detached[k]).insertBefore(detach_placeholder);detach_placeholder.remove();}}}
var selector_surcharge=key+'_surcharge_wrap';var detach_placeholder_surcharge=$('#'+selector_surcharge+'-placeholder');if(detach_placeholder_surcharge&&detach_placeholder_surcharge.length>0){if(detached){$(detached.detached_surcharge).insertBefore(detach_placeholder_surcharge);}
detach_placeholder_surcharge.remove();}
if($('#'+key).hasClass('bogx--config-multiupload-wrap')){console.log("Multiupload reaktivieren");window['start_'+key]();if($('input.bogx--input-file').length>0){StateManager.addPlugin('.bogx--input-file','bogxMultiupload',{});}}
StateManager.updatePlugin('select','swSelectboxReplacement');StateManager.updatePlugin('.bogx--tooltip','bogxTooltip',{});},getInitChildrenOfParentGroup:function(key){var me,detach_flag;me=this;var current_detach_flags={};var children=[];for(var child in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(child)){if(me.opts.defaultsJSON[child][8]===key){children.push(child);if(typeof me.opts.childrenOfParentCurrentDetach[key]==='undefined'){detach_flag=me.opts.defaultsJSON[child][3];current_detach_flags[child]=detach_flag;}}}}
if(typeof me.opts.childrenOfParentCurrentDetach[key]==='undefined'){me.opts.childrenOfParentCurrentDetach[key]=current_detach_flags;}
return children;},getChildrenOfParentGroup:function(key){var me,children;me=this;children=[];for(var child in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(child)){if(me.opts.defaultsJSON[child][8]===key){children.push(child);}}}
return children;},setDispatch:function(selector,key,value){var me=this;var quantity,dispatch_str,dispatch_value,dispatch_arr;var dispatch_weight=0,dispatch_maxlength=0,dispatch_minlength=0;var data_type=me.opts.defaultsJSON[key][0];if(selector!==""&&typeof $(selector)!=='undefined'&&$(selector).length>0){if(value===null||value===undefined){if(isNaN(parseInt($(selector).attr("data-quantity"),10))){quantity=1;}else{quantity=parseInt($(selector).attr("data-quantity"),10);}}else{quantity=value;}
dispatch_str=$(selector).attr("data-dispatch");}else{quantity=1;dispatch_str=0;}
if(me.opts.dispatchrule==="sum"||me.opts.dispatchrule==="maxweight"){if(isNaN(parseFloat(dispatch_str))&&dispatch_str!=='$'){dispatch_value=0;}else if(dispatch_str==='$'){dispatch_value=me.opts.defaultsJSON[key][5][0];}else{dispatch_value=parseFloat(dispatch_str);}
me.opts.defaultsJSON[key][5]=dispatch_value*quantity;}else if(me.opts.dispatchrule==="maxlength"){if(isNaN(parseFloat(dispatch_str))&&dispatch_str!=='$'){dispatch_value=0;}else if(dispatch_str==='$'){if(me.opts.defaultsJSON[key][5].length>1){dispatch_value=me.opts.defaultsJSON[key][5][1];}else{dispatch_value=me.opts.defaultsJSON[key][5][0];}}else{dispatch_value=parseFloat(dispatch_str);}
me.opts.defaultsJSON[key][5]=dispatch_value;}else if(me.opts.dispatchrule==="sum_and_maxlength"){if(typeof dispatch_str==='undefined'||dispatch_str===''||dispatch_str==='0'||dispatch_str==='#'){dispatch_weight=0;dispatch_maxlength=0;}else if(!isNaN(parseFloat(dispatch_str))&&dispatch_str!=='$'){dispatch_weight=parseFloat(dispatch_str)*quantity;dispatch_maxlength=0;}else if(dispatch_str==='$'){if(me.opts.defaultsJSON[key][5].length>1){dispatch_weight=me.opts.defaultsJSON[key][5][0];dispatch_maxlength=me.opts.defaultsJSON[key][5][1];}else{dispatch_weight=me.opts.defaultsJSON[key][5][0];dispatch_maxlength=0;}}else if(typeof dispatch_str==='string'){dispatch_arr=dispatch_str.split(',');if(dispatch_arr.length>1){dispatch_weight=parseFloat(dispatch_arr[0])*quantity;dispatch_maxlength=parseFloat(dispatch_arr[1]);}else{dispatch_weight=parseFloat(dispatch_arr[0])*quantity;dispatch_maxlength=0;}}
me.opts.defaultsJSON[key][5]=[dispatch_weight,dispatch_maxlength];}else if(me.opts.dispatchrule==="sum_and_maxlength_and_minlength"){if(typeof dispatch_str==='undefined'||dispatch_str===''||dispatch_str==='0'||dispatch_str==='#'){dispatch_weight=0;dispatch_maxlength=0;dispatch_minlength=0;}else if(!isNaN(parseFloat(dispatch_str))&&dispatch_str!=='$'){dispatch_weight=parseFloat(dispatch_str)*quantity;dispatch_maxlength=0;}else if(dispatch_str==='$'){if(me.opts.defaultsJSON[key][5].length>2){dispatch_weight=me.opts.defaultsJSON[key][5][0];dispatch_maxlength=me.opts.defaultsJSON[key][5][1];dispatch_minlength=me.opts.defaultsJSON[key][5][2];}else if(me.opts.defaultsJSON[key][5].length>1){dispatch_weight=me.opts.defaultsJSON[key][5][0];dispatch_maxlength=me.opts.defaultsJSON[key][5][1];dispatch_minlength=0;}else{dispatch_weight=me.opts.defaultsJSON[key][5][0];dispatch_maxlength=0;dispatch_minlength=0;}}else if(typeof dispatch_str==='string'){dispatch_arr=dispatch_str.split(',');if(dispatch_arr.length>2){dispatch_weight=parseFloat(dispatch_arr[0])*quantity;dispatch_maxlength=parseFloat(dispatch_arr[1]);dispatch_minlength=parseFloat(dispatch_arr[2]);}else if(dispatch_arr.length===2){dispatch_weight=parseFloat(dispatch_arr[0])*quantity;dispatch_maxlength=parseFloat(dispatch_arr[1]);dispatch_minlength=0;}else{dispatch_weight=parseFloat(dispatch_arr[0])*quantity;dispatch_maxlength=0;dispatch_minlength=0;}}
me.opts.defaultsJSON[key][5]=[dispatch_weight,dispatch_maxlength,dispatch_minlength];}else{me.opts.defaultsJSON[key][5]=0;}},setDispatchParametrix:function(selector,key,value,value1,value2){var me=this;var dispatch_str,dispatch_value;var dispatch_weight=0,dispatch_maxlength=0,dispatch_minlength=0;var max_length,min_length;if(typeof selector==='string'){dispatch_str=$(selector).attr("data-dispatch");}else{dispatch_str=$(selector[0]).attr("data-dispatch");}
if(value1!==null&&value2!==null){if(dispatch_str!=='#'){max_length=Math.max(parseFloat(value1),parseFloat(value2));min_length=Math.min(parseFloat(value1),parseFloat(value2));}else{max_length=0;min_length=0;}}else{if(dispatch_str!=='#'){max_length=value;min_length=value;}else{max_length=0;min_length=0;}}
if(me.opts.dispatchrule==="sum"||me.opts.dispatchrule==="maxweight"){if(isNaN(parseFloat(dispatch_str))){dispatch_value=0;}else{dispatch_value=parseFloat(dispatch_str);}
if(dispatch_value===0&&dispatch_str!=='#'){if(bogx_parametrix_weight===0)console.log("Warning: article weight is not specified.");dispatch_value=bogx_parametrix_weight;}
me.opts.defaultsJSON[key][5]=dispatch_value*value;}else if(me.opts.dispatchrule==="maxlength"){me.opts.defaultsJSON[key][5]=max_length;if(dispatch_str!=='#'){me.opts.defaultsJSON[key][5]=max_length;}else{me.opts.defaultsJSON[key][5]=0;}}else if(me.opts.dispatchrule==="sum_and_maxlength"){if(bogx_parametrix_weight!==0&&dispatch_str!=='#'){dispatch_weight=bogx_parametrix_weight*value;dispatch_maxlength=max_length;}else if(!isNaN(parseFloat(dispatch_str))){dispatch_weight=parseFloat(dispatch_str)*value;dispatch_maxlength=max_length;}else if(dispatch_str==='#'){dispatch_weight=0;dispatch_maxlength=0;}else{dispatch_arr=dispatch_str.split(',');if(dispatch_arr.length>1){dispatch_weight=parseFloat(dispatch_arr[0])*value;dispatch_maxlength=parseFloat(dispatch_arr[1])*max_length;}else{dispatch_weight=parseFloat(dispatch_arr[0])*value;dispatch_maxlength=max_length;}}
me.opts.defaultsJSON[key][5]=[dispatch_weight,dispatch_maxlength];}else if(me.opts.dispatchrule==="sum_and_maxlength_and_minlength"){if(bogx_parametrix_weight!==0&&dispatch_str!=='#'){dispatch_weight=bogx_parametrix_weight*value;dispatch_maxlength=max_length;dispatch_minlength=min_length;}else if(!isNaN(parseFloat(dispatch_str))){dispatch_weight=parseFloat(dispatch_str)*value;dispatch_maxlength=max_length;dispatch_minlength=min_length;}else if(dispatch_str==='#'){dispatch_weight=0;dispatch_maxlength=0;dispatch_minlength=0;}else{var dispatch_arr=dispatch_str.split(',');if(dispatch_arr.length>2){dispatch_weight=parseFloat(dispatch_arr[0])*value;dispatch_maxlength=parseFloat(dispatch_arr[1])*max_length;dispatch_minlength=parseFloat(dispatch_arr[2])*min_length;}else if(dispatch_arr.length===2){dispatch_weight=parseFloat(dispatch_arr[0])*value;dispatch_maxlength=parseFloat(dispatch_arr[1])*max_length;dispatch_minlength=min_length;}else{dispatch_weight=parseFloat(dispatch_arr[0])*value;dispatch_maxlength=max_length;dispatch_minlength=min_length;}}
me.opts.defaultsJSON[key][5]=[dispatch_weight,dispatch_maxlength,dispatch_minlength];}else{me.opts.defaultsJSON[key][5]=0;}},dispatchUpdate:function(){var me=this;var dispatchNumberArray=[];var dispatchRule=me.opts.dispatchrule;var dispatchValue,dispatchSum=0;var dispatch_arr,maxArray,max,min;var i,n;var dispatch_str='',dispatch_weight=0,dispatch_maxlength=0,dispatch_minlength=0;var dispatchNumberArrayWeight=[];var dispatchNumberArrayMaxLength=[];var dispatchNumberArrayMinLength=[];for(var key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){if(me.opts.defaultsJSON[key][3]===0){if(dispatchRule==="sum_and_maxlength"){dispatch_arr=me.opts.defaultsJSON[key][5];dispatch_weight=parseFloat(dispatch_arr[0]);dispatch_maxlength=parseFloat(dispatch_arr[1]);dispatchNumberArrayWeight.push(dispatch_weight);dispatchNumberArrayMaxLength.push(dispatch_maxlength);}else if(dispatchRule==="sum_and_maxlength_and_minlength"){dispatch_arr=me.opts.defaultsJSON[key][5];dispatch_weight=parseFloat(dispatch_arr[0]);dispatch_maxlength=parseFloat(dispatch_arr[1]);dispatch_minlength=parseFloat(dispatch_arr[2]);dispatchNumberArrayWeight.push(dispatch_weight);dispatchNumberArrayMaxLength.push(dispatch_maxlength);if(dispatch_minlength!==0)dispatchNumberArrayMinLength.push(dispatch_minlength);}else{dispatchValue=parseFloat(me.opts.defaultsJSON[key][5]);dispatchNumberArray.push(dispatchValue);}}}}
if(dispatchRule==="sum"){for(i=0,n=dispatchNumberArray.length;i<n;i++){dispatchSum+=dispatchNumberArray[i];}
me.opts.additionalsJSON['dispatch_weight']=dispatchSum;me.opts.additionalsJSON['dispatch_maxlength']=0;me.opts.additionalsJSON['dispatch_minlength']=0;}else if(dispatchRule==="maxweight"){maxArray=me.maxValueAndIndexOfMax(dispatchNumberArray);me.opts.additionalsJSON['dispatch_weight']=maxArray[1];me.opts.additionalsJSON['dispatch_maxlength']=0;me.opts.additionalsJSON['dispatch_minlength']=0;}else if(dispatchRule==="maxlength"){maxArray=me.maxValueAndIndexOfMax(dispatchNumberArray);me.opts.additionalsJSON['dispatch_maxlength']=maxArray[1];me.opts.additionalsJSON['dispatch_weight']=0;me.opts.additionalsJSON['dispatch_minlength']=0;}else if(dispatchRule==="sum_and_maxlength"){for(i=0,n=dispatchNumberArrayWeight.length;i<n;i++){dispatchSum+=dispatchNumberArrayWeight[i];}
me.opts.additionalsJSON['dispatch_weight']=dispatchSum;maxArray=me.maxValueAndIndexOfMax(dispatchNumberArrayMaxLength);me.opts.additionalsJSON['dispatch_maxlength']=maxArray[1];me.opts.additionalsJSON['dispatch_minlength']=0;}else if(dispatchRule==="sum_and_maxlength_and_minlength"){for(i=0,n=dispatchNumberArrayWeight.length;i<n;i++){dispatchSum+=dispatchNumberArrayWeight[i];}
me.opts.additionalsJSON['dispatch_weight']=dispatchSum;max=Math.max.apply(null,dispatchNumberArrayMaxLength);me.opts.additionalsJSON['dispatch_maxlength']=max;min=Math.max.apply(null,dispatchNumberArrayMinLength);if(min>=max)min=Math.min.apply(null,dispatchNumberArrayMinLength);me.opts.additionalsJSON['dispatch_minlength']=min;}else{me.opts.additionalsJSON['dispatch_weight']=0;me.opts.additionalsJSON['dispatch_maxlength']=0;me.opts.additionalsJSON['dispatch_minlength']=0;}},checkDelivery:function(selector,key){var me=this;var delivery;if(selector!==""&&typeof $(selector)!=='undefined'&&$(selector).length>0){if(!$(selector).attr("data-delivery")||$(selector).attr("data-delivery")===''){delivery='0'}else{delivery=$(selector).attr("data-delivery");}
if(me.opts.defaultsJSON[key][6]!==delivery){me.opts.defaultsJSON[key][6]=delivery;}}},deliveryUpdate:function(){var me=this;var deliveryNumberArray=[],deliveryStringArray=[];var deliveryUnit=me.opts.deliveryunit,deliveryRule=me.opts.deliveryrule;var deliverySum=0,deliveryMaxNumber=0,deliveryResultNumber=0,deliveryResultString='',detailDataInfoInstock='';var i,n;var valueid_arr,delivery,delivery_json;for(var key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){if(me.opts.defaultsJSON[key][3]===0){if(me.opts.defaultsJSON[key][6]===""){deliveryNumberArray.push(0);deliveryStringArray.push("0");}else if(typeof me.opts.defaultsJSON[key][6]==='object'){delivery_json=me.opts.defaultsJSON[key][6];valueid_arr=me.opts.defaultsJSON[key][2];valueid_arr.forEach(function(value_id){delivery=delivery_json[value_id];if(delivery===""){deliveryNumberArray.push(0);deliveryStringArray.push("0");}else{deliveryNumberArray.push(parseInt(delivery,10));deliveryStringArray.push(delivery);}});}else{deliveryNumberArray.push(parseInt(me.opts.defaultsJSON[key][6],10));deliveryStringArray.push(me.opts.defaultsJSON[key][6]);}}}}
if(deliveryRule==="sum"){for(i=0,n=deliveryNumberArray.length;i<n;i++){deliverySum+=deliveryNumberArray[i];}
deliveryResultNumber=deliverySum;deliveryResultString=deliveryResultNumber.toString(10);}else if(deliveryRule==="max"){var maxArray=me.maxValueAndIndexOfMax(deliveryNumberArray);deliveryResultString=deliveryStringArray[maxArray[0]];deliveryMaxNumber=maxArray[1];deliveryResultNumber=deliveryMaxNumber;}else if(deliveryRule==="custom"){for(i=0,n=deliveryStringArray.length;i<n;i++){if(deliveryStringArray[i]!=="0"&&deliveryStringArray[i]!==""){deliveryResultString=deliveryStringArray[i];deliveryResultNumber=deliveryNumberArray[i];break;}}}else{me.opts.additionalsJSON['shippingtime']=me.removeHTML(me.opts.default_shippingtime);}
me.opts.additionalsJSON['deliveryvalue']=deliveryResultNumber;if(deliveryResultNumber>0&&deliveryUnit!==""){if(deliveryRule==="custom"){detailDataInfoInstock=delivery_info+" "+deliveryResultString;}else{detailDataInfoInstock=delivery_info+" "+deliveryResultString+" "+deliveryUnit;}}else{detailDataInfoInstock=me.removeHTML(me.opts.default_shippingtime);}
me.opts.additionalsJSON['shippingtime']=detailDataInfoInstock;me.deliveryHandler(detailDataInfoInstock);},deliveryHandler:function(detailDataInfoInstock){var selector=$('span.delivery--text').last();if(selector.length>0){var current_HTML=selector.html();var old_text=selector.text().trim();var new_HTML=current_HTML.replace(old_text,detailDataInfoInstock);selector.html(new_HTML);}},orderCodeUpdate:function(){var me=this;var prefix="",delimiter="",view="standard";var ordercode="",ocbStringArray=[];var selector;var valueid_arr,ocb,ocb_json;var i,n;var ocbDefaults=JSON.parse(bogx_ocb_defaults);if(ocbDefaults.active==="1"){if(typeof ocbDefaults.prefix!=='undefined'&&ocbDefaults.prefix!==null&&ocbDefaults.prefix!==""){prefix=ocbDefaults.prefix;}
if(typeof ocbDefaults.delimiter!=='undefined'&&ocbDefaults.delimiter!==null&&ocbDefaults.delimiter!==""){delimiter=ocbDefaults.delimiter;}
view=ocbDefaults.view;for(var key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){if(me.opts.defaultsJSON[key][3]===0){if(typeof me.opts.defaultsJSON[key][7]!=="undefined"&&me.opts.defaultsJSON[key][7]!==""&&me.opts.defaultsJSON[key][7]!==null){if(me.opts.defaultsJSON[key][7]==="$"){ocbStringArray.push(me.opts.defaultsJSON[key][1]);}else if(me.opts.defaultsJSON[key][7]!==null&&typeof me.opts.defaultsJSON[key][7]==='object'){ocb_json=me.opts.defaultsJSON[key][7];valueid_arr=me.opts.defaultsJSON[key][2];valueid_arr.forEach(function(value_id){ocb=ocb_json[value_id];ocbStringArray.push(ocb);});}else{ocbStringArray.push(me.opts.defaultsJSON[key][7]);}}}}}
for(i=0,n=ocbStringArray.length;i<n;i++){if(ocbStringArray[i]!==""&&ocbStringArray[i]!==null){if(i!==n-1){ordercode+=ocbStringArray[i]+delimiter;}else{ordercode+=ocbStringArray[i];}}}
if(prefix!==""&&prefix!==null)ordercode=prefix+delimiter+ordercode;me.opts.additionalsJSON['ordercode']=ordercode;if(view==="update"){selector=".entry--content[itemprop|='sku']";if($(selector).length>0){$(selector).text(ordercode);}}else if(view==="hidden"){selector=".base-info--entry entry--sku";if($(selector).length>0&&!$(selector).hasClass('bogx--hidden')){$(selector).addClass('bogx--hidden');}}}},surchargeUpdate:function(gesamtpreis){var me=this;var key,parametrixBasePrice=0,charge=0,addsCharge=0,attributeArray=[],surchargeJSON={},itemSurchargeRaw='',itemSurcharge=0,itemSurcharge1=0,itemSurcharge2=0,itemSurchargeOutput=0,itemSurchargeQuantity=1,itemSurchargeQuantity1=1,itemSurchargeQuantity2=1,parametrixSurcharge=0,unitFactor,selector,selector1,selector2,area_raw,area,result,result_raw,value1,value2,val,val1,val2,val_Id,val_Id1,val_Id2,quantity,vMin,vMin1,vMin2,qMin=1,vMax,vMax1,vMax2,qMax=0,bogx_a_min,bogx_b_min;var bogx_a_basepriceadd_array=[],bogx_b_basepriceadd_array=[],bogx_axb_basepriceadd_array=[],bogx_a_charging_json={},bogx_b_charging_json={},bogx_axb_charging_json={},bogx_axb_charging_matrix_json={};if(checkParametrix==='1'){if(bogx_a_basepriceadd!=='')bogx_a_basepriceadd_array=bogx_a_basepriceadd.split(",");if(bogx_b_basepriceadd!=='')bogx_b_basepriceadd_array=bogx_b_basepriceadd.split(",");if(bogx_a_charging!=='')bogx_a_charging_json=JSON.parse(bogx_a_charging);if(bogx_b_charging!=='')bogx_b_charging_json=JSON.parse(bogx_b_charging);if(bogx_axb_basepriceadd!=='')bogx_axb_basepriceadd_array=bogx_axb_basepriceadd.split(",");if(bogx_axb_charging!=='')bogx_axb_charging_json=JSON.parse(bogx_axb_charging);if(bogx_axb_charging_matrix!=='')bogx_axb_charging_matrix_json=JSON.parse(bogx_axb_charging_matrix);}
for(key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){var data_type=me.opts.defaultsJSON[key][0];val=me.opts.defaultsJSON[key][1];val_Id=me.opts.defaultsJSON[key][2];var detach_flag=me.opts.defaultsJSON[key][3];var ats={};var hidden=0;if(data_type==='radiobutton'&&detach_flag===0){if(val!==""){selector='input[data-groupid="'+key+'"]'+'[value="'+val+'"]';if(val_Id!==me.opts.defaultsJSON[key][2]){me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");}
surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0;me.opts.defaultsJSON[key][2]='';me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]='0';me.opts.defaultsJSON[key][7]='';selector="";}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='select'&&detach_flag===0||data_type==='quantity-select'&&detach_flag===0){selector="#select_"+key;if(val!==""){$(selector).find('option').removeClass('selected');$(selector).find('option[value="'+val+'"]').addClass('selected').prop('selected',true);if(val_Id!==me.opts.defaultsJSON[key][2]){me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");}
selector="#select_"+key+" option:selected";surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{selector="#select_"+key+" option:selected";if($(selector).length>0){$(selector).removeClass('selected').prop('selected',false);}
selector="#select_"+key;var $selector_placeholder=$(selector).find('option[data-id="#"]');if($selector_placeholder.length>0){$selector_placeholder.prop('selected',true).prop('disabled',true);}else{var placeholder_option='<option disabled selected value="" data-id="#">'+globalNotes['please_select']+'</option>';$(selector).prepend(placeholder_option);}
surchargeJSON[key]=0;me.opts.defaultsJSON[key][2]='';me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]='0';me.opts.defaultsJSON[key][7]='';selector="";}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='quantity-total'&&detach_flag===0){selector="#bogx_quantity_"+val_Id;surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);me.setDispatch(selector,key,null);}else if(data_type==='quantity-graduated'&&detach_flag===0){selector="#bogx_quantity_"+val_Id;val=$(selector).val();qMin=$(selector).attr("min");qMax=$(selector).attr("max");qMin=typeof qMin==='undefined'||qMin===""?1:parseInt(qMin,10);qMax=typeof qMax==='undefined'||qMax===""||qMax==="0"?0:parseInt(qMax,10);surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);itemSurchargeRaw=surchargeJSON[key];if(isNaN(parseFloat(itemSurchargeRaw))){var quantity_json=itemSurchargeRaw;itemSurcharge=me.chargingQuantityGraduated(quantity_json,val);}else{itemSurcharge=parseFloat(itemSurchargeRaw);}
if(val===""||val<qMin||(qMax!==0&&val>qMax)){itemSurcharge=0.0;quantity=0;}else{quantity=val;var quantitySurcharge=itemSurcharge*quantity;itemSurcharge=quantitySurcharge;}
surchargeJSON[key]=itemSurcharge;me.setDispatch(selector,key,quantity);me.checkDelivery(selector,key);}else if(data_type==='quantity-onetime-surcharge'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='quantity'&&detach_flag===0){selector="#select_"+key;$(selector).find('option[value="'+val+'"]').prop('selected',true);selector="#select_"+key+" option:selected";var group_id=$(selector).attr("data-surcharge");$("*[data-groupid='"+group_id+"']").attr('data-quantity',val);me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='text'&&detach_flag===0||data_type==='text-area'&&detach_flag===0||data_type==='text_date'&&detach_flag===0||data_type==='text_time'&&detach_flag===0){if(data_type==='text'){selector="#text_"+key;}else if(data_type==='text-area'){selector="#textarea_"+key;}else if(data_type==='text_date'){selector="#text_date_"+key;}else if(data_type==='text_time'){selector="#text_time_"+key;}
if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='image'&&detach_flag===0||data_type==='imagetitle'&&detach_flag===0||data_type==='imagetitle_price'&&detach_flag===0||data_type==='imageproduct'&&detach_flag===0){if(val!==""){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]="0";selector="";}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='image_multiselect'&&detach_flag===0){}else if(data_type==='color'&&detach_flag===0){selector='div.bogx--config.color[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='check'&&detach_flag===0){selector='input[data-groupid="'+key+'"]';if(val==="1"){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]="0";selector="";}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='free_item'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else if((data_type==='free_item_value'||data_type==='free_item_text')&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='free_item_gurtmass'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if((data_type==='multiupload'||data_type==='multiupload-designer')&&detach_flag===0){selector="#bogx_multiupload_data_"+key;var need=parseInt($(selector).attr("data-need"),10);var count=parseInt($(selector).attr("data-count"),10);if(need<1&&count>0){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='free_parameter'&&detach_flag===0){selector="#bogx-parameter-free_"+val_Id;if($(selector).val()!=="")val=parseFloat($(selector).val());vMin=$(selector).attr("min");vMax=$(selector).attr("max");vMin=typeof vMin==='undefined'||vMin===""||vMin==="0"?1:parseFloat(vMin);vMax=typeof vMax==='undefined'||vMax===""||vMax==="0"?0:parseFloat(vMax);surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);itemSurchargeRaw=surchargeJSON[key];if(isNaN(parseFloat(itemSurchargeRaw))){itemSurcharge=me.chargingQuantityGraduated(itemSurchargeRaw,val);}else{itemSurcharge=parseFloat(itemSurchargeRaw);}
if(val===""||val<vMin||(vMax!==0&&val>vMax)){itemSurcharge=0;result=0;me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]="0";}else{itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity;result_raw=parseFloat(val);result=parseFloat(val)*unitFactor;}
surchargeJSON[key]={"surcharge":itemSurcharge,"value":result};me.setDispatchParametrix(selector,key,result,null,null);me.checkDelivery(selector,key);}else if(data_type==='font'&&detach_flag===0){selector="ul#font_"+key+"_list li[data-value='"+val+"']";surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='font_size'&&detach_flag===0){selector="#select_"+key;$(selector).find('option[value="'+val+'"]').prop('selected',true);selector="#select_"+key+" option:selected";surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='font_color'&&detach_flag===0){if(val!==""){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]="0";}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='font_text'&&detach_flag===0){selector="#text_"+key;if(val&&val!==$(selector).val())$(selector).val(val);if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='curved_text'&&detach_flag===0){selector="#curved_text_"+key;if(val&&val!==$(selector).val())$(selector).val(val);if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='text_boxsvg'&&detach_flag===0){selector="#textboxsvg_"+key;if(val&&val!==$(selector).val())$(selector).val(val);if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='text_box'&&detach_flag===0){selector="#textbox_"+key;if(val&&val!==$(selector).val())$(selector).val(val);if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='shape_img'&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='shape'&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if((data_type==='shape_color'||data_type==='background_color')&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if((data_type==='shape_flipx'||data_type==='shape_flipy')&&detach_flag===0){selector='input[data-groupid="'+key+'"]'+'[value="'+val+'"]';if(val>0){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}else if(data_type==='background'&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';if(val!==""){surchargeJSON=me.getSurcharge(selector,surchargeJSON,key);}else{surchargeJSON[key]=0.0;}
itemSurcharge=surchargeJSON[key];me.setDispatch(selector,key,null);me.checkDelivery(selector,key);}
if(detach_flag===0&&hidden===0){ats.group_id=key;ats.surcharge=itemSurcharge;attributeArray.push(ats);}}}
for(key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){data_type=me.opts.defaultsJSON[key][0];if(data_type==='axb_parameter'||data_type==='axb_free_parameter'){val1=me.opts.defaultsJSON[key][1][0];val2=me.opts.defaultsJSON[key][1][1];val_Id1=me.opts.defaultsJSON[key][2][0];val_Id2=me.opts.defaultsJSON[key][2][1];}else{val=me.opts.defaultsJSON[key][1];val_Id=me.opts.defaultsJSON[key][2];}
detach_flag=me.opts.defaultsJSON[key][3];hidden=0;if(data_type==='axb_parameter'&&detach_flag===0){selector1="#bogx-parameter-axb_"+val_Id1;selector2="#bogx-parameter-axb_"+val_Id2;bogx_a_min=parseInt($(selector1).attr("min"),10);bogx_b_min=parseInt($(selector2).attr("min"),10);selector=[selector1,selector2];itemSurchargeRaw=$(selector1).attr("data-surcharge");if(itemSurchargeRaw!=="s"&&itemSurchargeRaw!=="$"){if(itemSurchargeRaw.indexOf(',')!==-1){itemSurcharge=parseFloat(itemSurchargeRaw.replace(",","."));}else{itemSurcharge=parseFloat(itemSurchargeRaw);}}else{itemSurcharge=0;}
if(val1===""||val2===""||val1<bogx_a_min||val2<bogx_b_min){itemSurcharge=0;parametrixSurcharge=0;area=0;value1=0;value2=0;}else{itemSurchargeQuantity1=parseFloat($(selector1).attr("data-quantity").replace(",","."));itemSurchargeQuantity2=parseFloat($(selector2).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity1*itemSurchargeQuantity2;area_raw=parseInt(val1,10)*parseInt(val2,10);area=parseFloat(val1)*parseFloat(val2)*unitFactor;value1=parseFloat(val1)*itemSurchargeQuantity1;value2=parseFloat(val2)*itemSurchargeQuantity2;if(itemSurchargeRaw==='s'||itemSurchargeRaw==='$'){parametrixBasePrice=0;if(bogx_axb_charging_matrix!==''){if(jQuery.isEmptyObject(bogx_axb_charging_matrix_json[key])){charge=me.chargingMatrixParametrix(val1,val2,bogx_axb_charging_matrix_json);}else{charge=me.chargingMatrixParametrix(val1,val2,bogx_axb_charging_matrix_json[key]);}
parametrixBasePrice+=charge;if(bogx_axb_charging!==''){if(jQuery.isEmptyObject(bogx_axb_charging_json[key])){charge=me.chargingParametrix(bogx_axb_charging_json,area_raw);}else{charge=me.chargingParametrix(bogx_axb_charging_json[key],area_raw);}
parametrixBasePrice+=charge;}}else{if(bogx_axb_charging!==''){if(jQuery.isEmptyObject(bogx_axb_charging_json[key])){charge=me.chargingParametrix(bogx_axb_charging_json,area_raw);}else{charge=me.chargingParametrix(bogx_axb_charging_json[key],area_raw);}
parametrixBasePrice+=charge;}
if(bogx_axb_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_axb_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}}
parametrixSurcharge=parametrixBasePrice;itemSurcharge=parametrixSurcharge;}else if(itemSurchargeRaw!=='s'&&itemSurchargeRaw!=='$'&&itemSurcharge===0){parametrixBasePrice=parseFloat(me.opts.baseprice);if(bogx_axb_charging!==''){if(jQuery.isEmptyObject(bogx_axb_charging_json[key])){charge=me.chargingParametrix(bogx_axb_charging_json,area_raw);}else{charge=me.chargingParametrix(bogx_axb_charging_json[key],area_raw);}
parametrixBasePrice+=charge;}
if(bogx_axb_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_axb_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*area;itemSurcharge=parametrixSurcharge;}else{parametrixBasePrice=itemSurcharge;if(bogx_axb_charging!==''){if(jQuery.isEmptyObject(bogx_axb_charging_json[key])){charge=me.chargingParametrix(bogx_axb_charging_json,area_raw);}else{charge=me.chargingParametrix(bogx_axb_charging_json[key],area_raw);}
parametrixBasePrice+=charge;}
if(bogx_axb_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_axb_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*area;itemSurcharge=parametrixSurcharge;}}
surchargeJSON[key]=itemSurcharge;surchargeJSON["parametrixSurcharge"]=parametrixSurcharge;surchargeJSON["parametrixBasePrice"]=parametrixBasePrice;surchargeJSON["parametrixMultiplier"]=area;surchargeJSON["parametrixValue1"]=value1;surchargeJSON["parametrixValue2"]=value2;me.setDispatchParametrix(selector,key,area,value1,value2);me.checkDelivery(selector,key);}else if(data_type==='a_parameter'&&detach_flag===0){selector="#bogx-parameter-a_"+val_Id;bogx_a_min=parseInt($(selector).attr("min"),10);if($(selector).val()!=="")val=parseFloat($(selector).val());itemSurchargeRaw=$(selector).attr("data-surcharge");if(itemSurchargeRaw!=='s'&&itemSurchargeRaw!=='$'){if(itemSurchargeRaw.indexOf(',')!==-1){itemSurcharge=parseFloat(itemSurchargeRaw.replace(",","."));}else{itemSurcharge=parseFloat(itemSurchargeRaw);}}else{itemSurcharge=0.0;}
if(val===""||val<bogx_a_min){itemSurcharge=0.0;parametrixSurcharge=0.0;result=0;me.opts.defaultsJSON[key][5]=0;}else{itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity;result_raw=parseFloat(val);result=parseFloat(val)*unitFactor;if(itemSurchargeRaw==='s'||itemSurchargeRaw==='$'){parametrixBasePrice=0;if(bogx_a_charging!==''){charge=me.chargingParametrix(bogx_a_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_a_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_a_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}else if(itemSurchargeRaw!=='s'&&itemSurchargeRaw!=='$'&&itemSurcharge===0){parametrixBasePrice=parseFloat(me.opts.baseprice);if(bogx_a_charging!==''){charge=me.chargingParametrix(bogx_a_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_a_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_a_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}else{parametrixBasePrice=itemSurcharge;if(bogx_a_charging!==''){charge=me.chargingParametrix(bogx_a_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_a_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_a_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}}
surchargeJSON[key]=itemSurcharge;surchargeJSON["parametrixSurcharge"]=parametrixSurcharge;surchargeJSON["a_parametrixBasePrice"]=parametrixBasePrice;surchargeJSON["a_parametrixMultiplier"]=result;me.setDispatchParametrix(selector,key,result,null,null);me.checkDelivery(selector,key);}else if(data_type==='b_parameter'&&detach_flag===0){selector="#bogx-parameter-b_"+val_Id;bogx_b_min=parseInt($(selector).attr("min"),10);if($(selector).val()!=="")val=parseFloat($(selector).val());itemSurchargeRaw=$(selector).attr("data-surcharge");if(itemSurchargeRaw!=='s'&&itemSurchargeRaw!=='$'){if(itemSurchargeRaw.indexOf(',')!==-1){itemSurcharge=parseFloat(itemSurchargeRaw.replace(",","."));}else{itemSurcharge=parseFloat(itemSurchargeRaw);}}else{itemSurcharge=0.0;}
if(val===""||val<bogx_b_min){itemSurcharge=0.0;parametrixSurcharge=0.0;result=0;me.opts.defaultsJSON[key][5]=0;}else{itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity;result_raw=parseFloat(val);result=parseFloat(val)*unitFactor;if(itemSurchargeRaw==='s'||itemSurchargeRaw==='$'){parametrixBasePrice=0;if(bogx_b_charging!==''){charge=me.chargingParametrix(bogx_b_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_b_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_b_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}else if(itemSurchargeRaw!=='s'&&itemSurchargeRaw!=='$'&&itemSurcharge===0){parametrixBasePrice=parseFloat(me.opts.baseprice);if(bogx_b_charging!==''){charge=me.chargingParametrix(bogx_b_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_b_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_b_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}else{parametrixBasePrice=itemSurcharge;if(bogx_b_charging!==''){charge=me.chargingParametrix(bogx_b_charging_json,result_raw);parametrixBasePrice+=charge;}
if(bogx_b_basepriceadd!==''){addsCharge=me.addsChargeParametrix(bogx_b_basepriceadd_array,attributeArray);parametrixBasePrice+=addsCharge;}
parametrixSurcharge=parametrixBasePrice*result;itemSurcharge=parametrixSurcharge;}}
surchargeJSON[key]=itemSurcharge;surchargeJSON["parametrixSurcharge"]=parametrixSurcharge;surchargeJSON["b_parametrixBasePrice"]=parametrixBasePrice;surchargeJSON["b_parametrixMultiplier"]=result;me.setDispatchParametrix(selector,key,result,null,null);me.checkDelivery(selector,key);}else if(data_type==='axb_free_parameter'&&detach_flag===0){itemSurcharge=0;var graduated_free_flag=false;area=0;selector1="#axb_free_"+val_Id1;selector2="#axb_free_"+val_Id2;selector=[selector1,selector2];var key1=$(selector1).attr("data-key");var key2=$(selector2).attr("data-key");vMin1=$(selector1).attr("min");vMin2=$(selector2).attr("min");vMin1=typeof vMin1==='undefined'||vMin1===""||vMin1==="0"?1:parseFloat(vMin1);vMin2=typeof vMin2==='undefined'||vMin2===""||vMin2==="0"?1:parseFloat(vMin2);vMax1=$(selector1).attr("max");vMax2=$(selector2).attr("max");vMax1=typeof vMax1==='undefined'||vMax1===""||vMax1==="0"?0:parseFloat(vMax1);vMax2=typeof vMax2==='undefined'||vMax2===""||vMax2==="0"?0:parseFloat(vMax2);if($(selector1).val()!=="")val1=parseFloat($(selector1).val());if($(selector2).val()!=="")val2=parseFloat($(selector2).val());if(val1===""||val2===""||val1<vMin1||val2<vMin2){itemSurcharge=0;itemSurcharge1=0;itemSurcharge2=0;value1=0;value2=0;}else{surchargeJSON=me.getSurcharge(selector1,surchargeJSON,key1);var itemSurchargeRaw1=surchargeJSON[key1];surchargeJSON=me.getSurcharge(selector2,surchargeJSON,key2);var itemSurchargeRaw2=surchargeJSON[key2];if(itemSurchargeRaw1!==0&&!jQuery.isEmptyObject(itemSurchargeRaw1)){itemSurcharge1=me.chargingQuantityGraduated(itemSurchargeRaw1,val1);graduated_free_flag=true;}
if(itemSurchargeRaw2!==0&&!jQuery.isEmptyObject(itemSurchargeRaw2)){itemSurcharge2=me.chargingQuantityGraduated(itemSurchargeRaw2,val2);graduated_free_flag=true;}
itemSurchargeQuantity1=parseFloat($(selector1).attr("data-quantity"));itemSurchargeQuantity2=parseFloat($(selector2).attr("data-quantity"));value1=val1*itemSurchargeQuantity1;value2=val2*itemSurchargeQuantity2;if(!graduated_free_flag){area=value1*value2;itemSurcharge=parseFloat(me.opts.baseprice);surchargeJSON[key]={"surcharge":itemSurcharge,"value":area,"value1":value1,"value2":value2};}else{surchargeJSON[key1]={"surcharge":itemSurcharge1,"value":value1};surchargeJSON[key2]={"surcharge":itemSurcharge2,"value":value2};area=0;itemSurcharge=0;}
if($(selector1).attr("data-surcharge")==='$'||$(selector2).attr("data-surcharge")==='$'){area=value1*value2;if(bogx_axb_charging_matrix!==''){itemSurcharge=me.chargingMatrixParametrix(val1,val2,bogx_axb_charging_matrix_json[key]);}else if(bogx_axb_charging!==''){area_raw=val1*val2;charge=me.chargingParametrix(bogx_axb_charging_json[key],area_raw);itemSurcharge=charge;}
surchargeJSON[key]={"surcharge":itemSurcharge,"value":area,"value1":value1,"value2":value2};}}
me.setDispatchParametrix(selector,key,area,value1,value2);me.checkDelivery(selector,key);}}}
$.publish('plugin/bogxProductConfigurator/afterSurchargeUpdate',[me,surchargeJSON]);return surchargeJSON;},updateConfigurator:function(){var me=this;var basketJSON={};var minprice_flag=0;me.detachExecute();if(me.opts.blackoptions_active==='1'&&!jQuery.isEmptyObject(me.opts.blackoptions)){$('div.bogx--config').removeClass('is--disabled');$('option.bogx--config').removeClass('is--disabled');$('option.bogx--config').prop('disabled',false);}
me.opts.formelJSON['bogx_config_load']=false;me.updateConfig();if(me.opts.blackoptions_active==='1'&&!jQuery.isEmptyObject(me.opts.blackoptions)){me.updateBlackoptions();}
waitForDataLoadTotal();function waitForDataLoadTotal(){if(!me.opts.formelJSON['bogx_config_load']){console.log('Total wait for config load ...');setTimeout(function(){waitForDataLoadTotal();},500);return;}
me.dispatchUpdate();me.deliveryUpdate();me.orderCodeUpdate();if(!me.opts.basicPriceFlag){me.opts.gesamtpreis=me.opts.gesamtpreis-parseFloat(me.opts.baseprice);}
var tax_factor=me.getTaxFactor();var currency_factor=me.getCurrencyFactor();var mindestpreis=parseFloat(me.opts.minprice);if(isNaN(mindestpreis))mindestpreis=0;if(mindestpreis!==0){if(bogx_usergroup_discount!==undefined&&bogx_usergroup_discount!=='0'&&bogx_usergroup_discount!==''){mindestpreis=mindestpreis-mindestpreis*0.01*parseFloat(bogx_usergroup_discount);}
if(me.opts.gesamtpreis<mindestpreis*tax_factor*currency_factor){me.opts.gesamtpreis=mindestpreis*tax_factor*currency_factor;me.opts.totalsurchage=me.opts.gesamtpreis;me.opts.basicPriceFlag=false;minprice_flag=1;}}
var arr_price=me.totalPriceUpdate(me.opts.gesamtpreis,me.opts.totalQuantity,me.opts.totalQuantityUnit,me.opts.basketSurchargeJSON,minprice_flag);var oncePrice=arr_price[0];var unitPrice=arr_price[1];var unitPriceText=arr_price[2];var unitPricePrecision=parseInt(me.opts.unitprice_precision);me.basepriceHandler(me.opts.gesamtpreis,me.opts.basicPriceFlag);me.switchBasketButton(me.opts.basketButtonActiveJSON);basketJSON.configurator=me.opts.configurator;basketJSON.productImage=me.opts.product_image;basketJSON.orderRepeat='false';if(me.opts.basicPriceFlag){basketJSON.basicArticlePrice=me.opts.baseprice;basketJSON.basicArticleSurcharge=me.opts.baseprice;}else{basketJSON.basicArticlePrice=me.opts.baseprice;basketJSON.basicArticleSurcharge=0;}
basketJSON.pricesGross=parseInt(me.opts.prices_gross,10);basketJSON.currency=me.opts.currency;basketJSON.usergroup=me.opts.user_group;basketJSON.usergroupDiscount=parseFloat(bogx_usergroup_discount);if(sessionStorage.getItem('bogx_calc')!==null){basketJSON.basicCalc=parseFloat(sessionStorage.getItem('bogx_calc'));}
if(me.opts.totalQuantity>=1){basketJSON.totalAmount=me.opts.totalQuantity;basketJSON.unitySurcharge=unitPrice;basketJSON.unitySurchargeText=unitPriceText;basketJSON.unitySurchargePrecision=unitPricePrecision;}else{basketJSON.totalAmount=1;}
if(!jQuery.isEmptyObject(me.opts.customUnitPrice)){basketJSON.customUnitPrice=me.opts.customUnitPrice;}
basketJSON.totalSurcharge=me.opts.totalsurchage;basketJSON.onceSurcharge=oncePrice;basketJSON.currencyFactor=me.getCurrencyFactor();basketJSON.tax=me.getTax();basketJSON.basketDataview=bogxBasketDataview;basketJSON.minPriceFlag=minprice_flag;basketJSON.minPrice=mindestpreis;basketJSON.articleid=me.opts.articleid;basketJSON.articleordernumber=me.opts.articleordernumber;basketJSON.detail_link=me.opts.detail_link;basketJSON.ordercode=me.opts.additionalsJSON['ordercode'];basketJSON.exportdesigner=me.opts.exportdesigner;basketJSON.basketdesigner=me.opts.basketdesigner;basketJSON.dispatchrule=me.opts.dispatchrule;basketJSON.gurtmass=me.opts.additionalsJSON['gurtmass'];basketJSON.dispatch_weight=me.opts.additionalsJSON['dispatch_weight'];basketJSON.dispatch_maxlength=me.opts.additionalsJSON['dispatch_maxlength'];basketJSON.dispatch_minlength=me.opts.additionalsJSON['dispatch_minlength'];basketJSON.deliveryrule=me.opts.deliveryrule;basketJSON.deliveryvalue=me.opts.additionalsJSON['deliveryvalue'];basketJSON.shippingtime=me.opts.additionalsJSON['shippingtime'];if(!jQuery.isEmptyObject(me.opts.basketPartsList)){var parts_list=me.partsListBuilder();if(!jQuery.isEmptyObject(parts_list)){basketJSON.partsList=parts_list;}}
if(me.opts.additional_text_active==="1"||me.opts.additional_text_active===1){basketJSON.additionaltext=me.opts.additionalText;}
basketJSON.attributes=me.opts.basketAttributes;$.publish('plugin/bogxProductConfigurator/beforeSaveConfiguratorSelection',[me,basketJSON]);setTimeout(function(){var basketInputContent=JSON.stringify(basketJSON);$('input[name="bogxProductConfiguratorSelection"]').val(basketInputContent);sessionStorage.removeItem("bogxProductConfiguratorSelection");sessionStorage.setItem("bogxProductConfiguratorSelection",basketInputContent);},50);window.bogxDefaultsJSON=me.opts.defaultsJSON;$.publish('plugin/bogxProductConfigurator/afterUpdateConfigurator',[me,me.opts.defaultsJSON]);}},updateConfig:function(){var me=this;var gesamtpreis=parseFloat(me.opts.baseprice),blockPrices=me.opts.blockpricesJSON,parametrixBasePrice=0,totalsurcharge=0,basicPriceFlag=true,quantity,itemSurchargeRaw='',itemSurcharge=0,surchargeObj,itemSurchargeOutput=0,itemSurchargeQuantity=1,itemSurchargeQuantity1=1,itemSurchargeQuantity2=1,unitFactor,aufpreisHTML="";var qTotalUnit="",totalQuantity=1,qUnit="",totalflag=0,unitPrice,oncePrice;var formelResult;var free_item_value,free_item_text,free_item_gurtmass;var multiupload_files_json={};var selector,selector1,selector2,selector3,noselector,selector_wrap;var key_title,titleHTML,area,area_round,parameter,axb_unit,a_unit,b_unit,free_unit,result,result_round,text_content,error="",value,value1,value2,val,val1,val2,value_arr,val_Id,val_Id1,val_Id2,required=0;var additionalText='';var bogx_a_multiply_array=[],bogx_b_multiply_array=[],bogx_axb_multiply_array=[],bogx_a_basepriceadd_array=[],bogx_b_basepriceadd_array=[],bogx_axb_basepriceadd_array=[],bogx_a_charging_json,bogx_b_charging_json,bogx_axb_charging_json,bogx_axb_charging_matrix_json;if(checkParametrix==='1'){if(bogx_a_multiply!=='')bogx_a_multiply_array=bogx_a_multiply.split(",");if(bogx_a_basepriceadd!=='')bogx_a_basepriceadd_array=bogx_a_basepriceadd.split(",");if(bogx_b_multiply!=='')bogx_b_multiply_array=bogx_b_multiply.split(",");if(bogx_b_basepriceadd!=='')bogx_b_basepriceadd_array=bogx_b_basepriceadd.split(",");if(bogx_a_charging!=='')bogx_a_charging_json=JSON.parse(bogx_a_charging);if(bogx_b_charging!=='')bogx_b_charging_json=JSON.parse(bogx_b_charging);if(bogx_axb_multiply!=='')bogx_axb_multiply_array=bogx_axb_multiply.split(",");if(bogx_axb_basepriceadd!=='')bogx_axb_basepriceadd_array=bogx_axb_basepriceadd.split(",");if(bogx_axb_charging!=='')bogx_axb_charging_json=JSON.parse(bogx_axb_charging);if(bogx_axb_charging_matrix!=='')bogx_axb_charging_matrix_json=JSON.parse(bogx_axb_charging_matrix);}
var tstyleJSON,fontname,colorname,fontsize,multiline_flag;var blockPrice=me.getBlockPrice(blockPrices);if(blockPrice>0&&bogx_show_prices==='1'){me.opts.baseprice=blockPrice;gesamtpreis=blockPrice;}
var surchargeJSON=me.surchargeUpdate(gesamtpreis);me.opts.basketSurchargeJSON={};var attributeArray=[];me.opts.formelJSON['bogx_data_load']=true;surchargeJSON['once']=0;var tax_factor=me.getTaxFactor();var currency_factor=me.getCurrencyFactor();var pricesJSON={"gesamtpreis":gesamtpreis,"totalsurcharge":totalsurcharge};$.publish('plugin/bogxProductConfigurator/beforeUpdateConfigurator',[me,me.opts.defaultsJSON,pricesJSON]);gesamtpreis=pricesJSON.gesamtpreis;totalsurcharge=pricesJSON.totalsurcharge;var key;for(key in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(key)){waitForDataLoad(key);function waitForDataLoad(key){if(!me.opts.formelJSON['bogx_data_load']){setTimeout(function(){waitForDataLoad(key);},250);return;}
me.opts.formelJSON['bogx_config_load']=false;var data_type=me.opts.defaultsJSON[key][0];if(data_type==="axb_parameter"||data_type==="axb_free_parameter"){val1=me.opts.defaultsJSON[key][1][0];val2=me.opts.defaultsJSON[key][1][1];val_Id1=me.opts.defaultsJSON[key][2][0];val_Id2=me.opts.defaultsJSON[key][2][1];}else{val=me.opts.defaultsJSON[key][1];val_Id=me.opts.defaultsJSON[key][2];}
var detach_flag=me.opts.defaultsJSON[key][3];var hidden=0;var formel=me.opts.formelJSON[key];group_name='';if(data_type==='radiobutton'&&detach_flag===0){selector='input[data-groupid="'+key+'"]';group_name=$(selector).attr("data-groupname");hidden=0;selector1='#'+key;if($(selector1).attr("data-required")==="1"){required=1;me.selectErrorHandler(val,data_type,selector,key);}else{required=0;}
if(val!==''){selector_wrap='div[data-groupid="'+key+'"]';$(selector_wrap).removeClass('selected');$(selector).prop("checked",false);selector_wrap='#'+val_Id+"_wrap";$(selector_wrap).addClass('selected');selector='#'+val_Id;$(selector).prop("checked",true);title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;itemSurcharge=me.parametrixMultiplier(key,bogx_axb_multiply_array,bogx_a_multiply_array,bogx_b_multiply_array,itemSurcharge,surchargeJSON);if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}}else{itemSurcharge=0;itemSurchargeOutput=0;if(required===0){hidden=1;formel="#";}else{title=globalErrors.noselected;hidden=1;formel="#";}}
if(!isNaN(parseInt($(selector).attr("data-quantity"),10))){quantity=parseInt($(selector).attr("data-quantity"),10);if(!isNaN(quantity)&&quantity>1){title=quantity.toString()+"x "+title;}}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='select'&&detach_flag===0||data_type==='quantity-select'&&detach_flag===0){selector="#select_"+key;group_name=$(selector).attr("data-groupname");hidden=0;selector1='#'+key;if($(selector1).attr("data-required")==="1"){required=1;me.selectErrorHandler(val,data_type,selector1,key);}else{required=0;}
if(val!==''){selector="#select_"+key+" option:selected";title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;itemSurcharge=me.parametrixMultiplier(key,bogx_axb_multiply_array,bogx_a_multiply_array,bogx_b_multiply_array,itemSurcharge,surchargeJSON);}else{itemSurcharge=0;itemSurchargeOutput=0;if(required===0){hidden=1;formel="#";}else{title=globalErrors.noselected;formel="0";}}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
quantity=parseInt($(selector).attr("data-quantity"),10);if(!isNaN(quantity)&&quantity>1&&data_type!=='quantity-select'){title=quantity.toString()+"x "+title;}
if(data_type==='quantity-select'){qTotalUnit=$('#'+key).attr("data-total_unit");if(val!==''&&!isNaN(parseInt(val,10))){totalQuantity=parseInt(val,10);}
me.quantityHandler(1);}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){if(data_type==='quantity-select'){basicPriceFlag=false;}
gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='image'&&detach_flag===0||data_type==='image_multiselect'&&detach_flag===0||data_type==='imagetitle'&&detach_flag===0||data_type==='imagetitle_price'&&detach_flag===0||data_type==='imageproduct'&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]';group_name=$(selector).attr("data-groupname");hidden=0;selector1='#'+key;if($(selector1).attr("data-required")==="1"){required=1;me.selectErrorHandler(val,data_type,selector,key);}else{required=0;}
if(val!==''){$(selector).removeClass("selected");selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';$(selector).addClass('selected');title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');title=title.replace(/(<([^>]+)>)/ig,' ');surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;itemSurcharge=me.parametrixMultiplier(key,bogx_axb_multiply_array,bogx_a_multiply_array,bogx_b_multiply_array,itemSurcharge,surchargeJSON);if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(data_type==='imageproduct'){me.changeProductImage(selector);}}else{itemSurcharge=0;itemSurchargeOutput=0;if(required===0){hidden=1;formel="#";}else{title=globalErrors.noselected;hidden=1;formel="#";}}
quantity=parseInt($(selector).attr("data-quantity"),10);if(!isNaN(quantity)&&quantity>1){title=quantity.toString()+"x "+title;}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='color'&&detach_flag===0){selector='div.bogx--config.color[data-groupid="'+key+'"]';group_name=$(selector).attr("data-groupname");hidden=0;selector1='#'+key;if($(selector1).attr("data-required")==="1"){required=1;me.selectErrorHandler(val,data_type,selector,key);}else{required=0;}
if(val!==''){$(selector).removeClass("selected");selector='div.bogx--config.color[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';$(selector).addClass('selected');me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}}else{itemSurcharge=0;itemSurchargeOutput=0.0;if(required===0){hidden=1;formel="#";}else{title=globalErrors.noselected;hidden=1;formel="#";}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='quantity-total'&&detach_flag===0){itemSurchargeOutput=0;if(formel==="#")formel="0";if(me.opts.defaultsJSON[key][4]!==""){qTotalUnit=me.opts.defaultsJSON[key][4];}
selector="#bogx_quantity_"+val_Id;group_name=$(selector).attr("data-groupname");var error_flag=false;totalQuantity=me.quantityErrorHandler(selector,key,null);if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(!isNaN(parseInt($(selector).val(),10))&&totalQuantity!==parseInt($(selector).val(),10)){totalQuantity=parseInt($(selector).val(),10);}else{error_flag=true;}
if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}else{formel="0";itemSurchargeOutput=0;}
totalflag=parseInt($(selector).attr("data-total_flag"),10);me.quantityHandler(totalflag);if(itemSurchargeOutput!==0){basicPriceFlag=false;gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
if(!error_flag){title=qTotalUnit===""?totalQuantity:totalQuantity+" "+qTotalUnit;}else{title=quantityErrors.empty;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='quantity-graduated'&&detach_flag===0){if(formel==="#")formel="0";if(me.opts.defaultsJSON[key][4]!==""){qUnit=me.opts.defaultsJSON[key][4];}
selector="#bogx_quantity_"+val_Id;group_name=$(selector).attr("data-groupname");quantity=me.quantityErrorHandler(selector,key,null);totalflag=parseInt($(selector).attr("data-total_flag"),10);me.quantityHandler(totalflag);if(quantity===0){itemSurchargeOutput=0;}else{surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurchargeOutput=surchargeObj.surcharge;if(totalflag===1){totalQuantity=quantity;qTotalUnit=qUnit;basicPriceFlag=false;}}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}else if(formel==="0"){itemSurchargeOutput=0;}
if(itemSurchargeOutput!==0){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
title=qUnit===""?quantity:quantity+" "+qUnit;me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='quantity-onetime-surcharge'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurchargeOutput=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}else if(formel==="0"){itemSurchargeOutput=0;}
if(itemSurchargeOutput!==0){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;surchargeJSON['once']+=itemSurchargeOutput;selector="#"+key+"_surcharge_wrap";$(selector).removeClass('bogx--hidden');if(!$(selector).hasClass('bogx--once')){$(selector).addClass('bogx--once');}
selector="#"+key+"_title";$(selector).text(title);aufpreisHTML=me.numberToPrice(itemSurchargeOutput,1);selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else{selector="#"+key+"_surcharge_wrap";$(selector).addClass('bogx--hidden');}}else if(data_type==='quantity'&&detach_flag===0){hidden=1;}else if(data_type==='text'&&detach_flag===0||data_type==='text_date'&&detach_flag===0||data_type==='text_time'&&detach_flag===0){titleHTML="";if(data_type==='text'){selector="#text_"+key;}else if(data_type==='text_date'){selector="#text_date_"+key;}else if(data_type==='text_time'){selector="#text_time_"+key;}
hidden=0;var checkout_view='all',checkout_view_font='1',checkout_view_fontcolor='1',checkout_view_fontsize='1';multiline_flag=false;if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textlines!=='undefined'){if(data_type==='text_date'||data_type==='text_time'){multiline_flag=true;}}}
if(val===""&&me.opts.initializeUpdate&&(data_type==='text_date'||data_type==='text_time'))
{if(multiline_flag){val=me.getDefaultValue(data_type,key,'content',"");$(selector).val(val);}}
if(val&&val!==$(selector).val())$(selector).val(val);group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);required=1;}else{value=val;title=val;required=0;}
if(value===""){itemSurcharge=0.0;title=value;if(required===0){formel="#";hidden=1;}else{title=quantityErrors.empty;formel="0";}}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
key_title=key+"_title";if(typeof me.opts.formelJSON[key_title]!=='undefined'&&me.opts.formelJSON[key_title]!==''){titleHTML=me.opts.formelJSON[key_title];title=me.escapeText(me.opts.formelJSON[key_title]);}else if(title!==""){title=me.escapeText(title);}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
if(data_type==='text_date'&&title!==quantityErrors.empty){title=me.changeFormatDateUsToEur(title);}
if(multiline_flag){if($(selector).attr("data-fontname")===""&&$(selector).attr("data-checkoutview")===""){tstyleJSON=me.StringToJson(bogx_canvas_text_defaults);if(tstyleJSON!=='undefined'&&Object.keys(tstyleJSON).length>0){if(typeof tstyleJSON[key]!=='undefined'){if(typeof tstyleJSON[key]['fontFamilyName']!=='undefined'){fontname=tstyleJSON[key]['fontFamilyName'];$(selector).attr("data-fontname",fontname);}
if(typeof tstyleJSON[key]['fontColorName']!=='undefined'){colorname=tstyleJSON[key]['fontColorName'];$(selector).attr("data-colorname",colorname);}
if(typeof tstyleJSON[key]['fontSize']!=='undefined'){fontsize=tstyleJSON[key]['fontSize'];$(selector).attr("data-fontsize",fontsize);}
if(typeof tstyleJSON[key]['checkoutView']!=='undefined'){checkout_view=tstyleJSON[key]['checkoutView'];$(selector).attr("data-checkoutview",checkout_view);}
if(typeof tstyleJSON[key]['checkoutView_font']!=='undefined'){checkout_view_font=tstyleJSON[key]['checkoutView_font'];$(selector).attr("data-checkoutview_font",checkout_view_font);}
if(typeof tstyleJSON[key]['checkoutView_fontcolor']!=='undefined'){checkout_view_fontcolor=tstyleJSON[key]['checkoutView_fontcolor'];$(selector).attr("data-checkoutview_fontcolor",checkout_view_fontcolor);}
if(typeof tstyleJSON[key]['checkoutView_fontsize']!=='undefined'){checkout_view_fontsize=tstyleJSON[key]['checkoutView_fontsize'];$(selector).attr("data-checkoutview_fontsize",checkout_view_fontsize);}}}}else{checkout_view=$(selector).attr("data-checkoutview");checkout_view_font=$(selector).attr("data-checkoutview_font");checkout_view_fontcolor=$(selector).attr("data-checkoutview_fontcolor");checkout_view_fontsize=$(selector).attr("data-checkoutview_fontsize");}
if(title!==""&&(checkout_view===''||checkout_view==='all')){if(checkout_view_font===''||checkout_view_font==='1')title+="\n"+$(selector).attr("data-fontname");if(checkout_view_fontcolor===''||checkout_view_fontcolor==='1')title+="\n"+$(selector).attr("data-colorname");if(checkout_view_fontsize===''||checkout_view_fontsize==='1')title+="\n"+$(selector).attr("data-fontsize")+"px";}}
if(title!==""&&titleHTML===""){titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');}else if(title===""&&titleHTML===""){if(required===0){formel="#";titleHTML="";}else{titleHTML=null;}}
var selector_text_rest="#bogx_text_"+key+"_rest";var rest_chars=0;if($(selector_text_rest).length>0){var max_chars=$(selector).attr("maxlength");if(typeof max_chars!=='undefined'){rest_chars=parseInt(max_chars,10)-$(selector).val().length;$(selector_text_rest).text(rest_chars);}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='text-area'&&detach_flag===0){selector="#textarea_"+key;hidden=0;if(val&&val!==$(selector).val())$(selector).val(val);group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);required=1;}else{value=val;title=val;required=0;}
if(value===""){itemSurcharge=0.0;title=value;if(required===0){formel="#";hidden=1;}else{title=quantityErrors.empty;formel="0";}}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
title=me.escapeText(title);titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');var selector_text_rest="#bogx_textarea_"+key+"_rest";var rest_chars=0;if($(selector_text_rest).length>0){var max_chars=$(selector).attr("maxlength");if(typeof max_chars!=='undefined'){rest_chars=parseInt(max_chars,10)-$(selector).val().length;$(selector_text_rest).text(rest_chars);}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='check'&&detach_flag===0){selector='input[data-groupid="'+key+'"]';hidden=0;if($(selector).attr("data-required")==="1"){me.checkboxErrorHandler(val,selector,key);}
if(val==="1"){selector_wrap='#'+val_Id+"_wrap";$(selector_wrap).addClass('selected');$(selector).prop("checked",true);group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");}else{selector_wrap='#'+val_Id+"_wrap";$(selector_wrap).removeClass('selected');selector='#'+key+'_hidden';group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");formel="#";hidden=1;}
me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=me.cutStringByChar(title,'+');title=title.replace(/<a.*>.*?<\/a>/ig,'');itemSurcharge=me.parametrixMultiplier(key,bogx_axb_multiply_array,bogx_a_multiply_array,bogx_b_multiply_array,itemSurcharge,surchargeJSON);if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
var formelError="";if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='check_set'&&detach_flag===0){selector='#'+key;group_name=$(selector).attr("data-groupname");hidden=0;var title_temp={},label={},itemSurchargeOutput_json={};var title_item_qtext="";var formelError="";if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}}
var valueid_arr=me.opts.defaultsJSON[key][2];var quantity_item,unity_item,title_item;$(selector).find('div.check').removeClass('selected');$(selector).find('input[type=checkbox]').prop('checked',false);if(valueid_arr.length>0){if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(1,selector,key);}
var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0&&$selector_surcharge_grouptitle.hasClass('bogx--hidden')){$selector_surcharge_grouptitle.removeClass('bogx--hidden');}
valueid_arr.forEach(function(value_id){selector='#'+value_id;$(selector+'_wrap').addClass('selected');$(selector).prop("checked",true);quantity_item=me.opts.defaultsJSON[key][1][value_id];if(quantity_item===undefined||quantity_item===""||quantity_item===0){quantity_item=1;me.opts.defaultsJSON[key][1][value_id]=1;}
itemSurcharge=parseFloat(me.opts.surchargeJSON[value_id]);itemSurchargeOutput=me.getOutputSurcharge(itemSurcharge);itemSurchargeOutput=quantity_item*itemSurchargeOutput;itemSurchargeOutput_json[value_id]=itemSurchargeOutput;title_item=$(selector).attr('data-title');title_item_qtext+="\n"+title_item+",";if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
title_temp[value_id]=title_item;me.viewInCalculator(value_id,formel,itemSurchargeOutput,title_item,group_name);title=title_temp;});}else{selector='#'+key;hidden=1;if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(0,selector,key);hidden=0;}else{var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0){$selector_surcharge_grouptitle.addClass('bogx--hidden');}}
title="";}}else if(data_type==='quantity_check'&&detach_flag===0){selector='#'+key;group_name=$(selector).attr("data-groupname");hidden=0;var title_temp={},label={},itemSurchargeOutput_json={};var title_item_qtext="";var formelError="";if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}}
var valueid_arr=me.opts.defaultsJSON[key][2];var quantity_item,unity_item,title_item;$(selector).find('div.check').removeClass('selected');$(selector).find('input[type=checkbox]').prop('checked',false);$(selector).find('input[type=number]').addClass('bogx--hidden');$(selector).find('div.bogx--unit').addClass('bogx--hidden');$(selector).find('div.bogx--quantity-minmax-wrap').addClass('bogx--hidden');if(valueid_arr.length>0){if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(1,selector,key);}
var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0&&$selector_surcharge_grouptitle.hasClass('bogx--hidden')){$selector_surcharge_grouptitle.removeClass('bogx--hidden');}
var quantity_check=1;var basketButtonActive=true;valueid_arr.forEach(function(value_id){selector='#'+value_id;var selector_q='#bogx_quantity_'+value_id;var $selector_q=$(selector_q)
var $selector_u=$('#bogx_quantity_unit_'+value_id)
var $selector_w=$('#bogx_quantity_minmax_'+value_id+"_wrap");var $selector_nav=$selector_q.next();$(selector+'_wrap').addClass('selected');$(selector).prop("checked",true);$selector_q.removeClass('bogx--hidden').show("slow");$selector_u.removeClass('bogx--hidden').show("slow");$selector_w.removeClass('bogx--hidden').show("slow");$selector_nav.removeClass('bogx--hidden').show("slow");totalflag=parseInt($selector_q.attr("data-total_flag"),10);if(totalflag===1){if($('div.buybox--quantity').length>0){me.quantityHandler(totalflag);}}
quantity_item=me.opts.defaultsJSON[key][1][value_id];if($selector_q.val()!==quantity_item)$selector_q.val(quantity_item);quantity_item=me.quantityErrorHandler(selector_q,key,value_id);quantity_check*=quantity_item;unity_item=me.opts.defaultsJSON[key][4][value_id];itemSurcharge=parseFloat(me.opts.surchargeJSON[value_id]);itemSurchargeOutput=me.getOutputSurcharge(itemSurcharge);itemSurchargeOutput=quantity_item*itemSurchargeOutput;itemSurchargeOutput_json[value_id]=itemSurchargeOutput;title_item=quantity_item+" "+unity_item;title_item_qtext+="\n"+quantity_item+" "+unity_item+",";if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
var label_item=$(selector).attr('data-label');label[value_id]=label_item;title_temp[value_id]=title_item;me.viewInCalculator(value_id,formel,itemSurchargeOutput,title_item,group_name);title=title_temp;});if(quantity_check===0){basketButtonActive=false;}
me.opts.basketButtonActiveJSON[key]=basketButtonActive;}else{selector='#'+key;hidden=1;if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(0,selector,key);hidden=0;}else{var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0){$selector_surcharge_grouptitle.addClass('bogx--hidden');}}
title="";}}else if(data_type==='article_virtual_multi'&&detach_flag===0){selector='#'+key;group_name=$(selector).attr("data-groupname");hidden=0;var title_temp={},title_temp_q={},image={},itemSurchargeOutput_json={};var formelError="";if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}}
var valueid_arr=me.opts.defaultsJSON[key][2];var precision_item,quantity_item,unity_item,price_item,title_item;var title_item_pure,title_item_q,title_item_qtext="",title_q=[];var image_item;var bogx_active_quantity;$(selector).find('div.article').removeClass('selected');$(selector).find('div.image').removeClass('is--selected');var $selector_qall=$('input[data-groupid="'+key+'"]');$selector_qall.addClass('is--disabled');$selector_qall.prop('disabled',true);if(valueid_arr.length>0){if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(1,selector,key);}
var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0&&$selector_surcharge_grouptitle.hasClass('bogx--hidden')){$selector_surcharge_grouptitle.removeClass('bogx--hidden');}
var quantity_check=1;var basketButtonActive=true;valueid_arr.forEach(function(value_id){selector='#'+value_id+'_wrap';$(selector).addClass('selected')
selector='#'+value_id+'_div';$(selector).addClass('is--selected')
var selector_q='#bogx_quantity_'+value_id;var $selector_q=$(selector_q)
$selector_q.removeClass('is--disabled');$selector_q.prop('disabled',false);quantity_item=me.opts.defaultsJSON[key][1][value_id];if($selector_q.val()!==quantity_item)$selector_q.val(quantity_item);quantity_item=me.quantityErrorHandler(selector_q,key,value_id);quantity_check*=quantity_item;precision_item=parseInt($selector_q.attr('data-precision'),10);bogx_active_quantity=parseInt($selector_q.attr('data-active_quantity'),10);if(isNaN(precision_item))precision_item=2;unity_item=me.opts.defaultsJSON[key][4][value_id];itemSurcharge=parseFloat(me.opts.surchargeJSON[value_id]);itemSurchargeOutput=me.getOutputSurcharge(itemSurcharge);itemSurchargeOutput=me.round(quantity_item*itemSurchargeOutput,precision_item);itemSurchargeOutput_json[value_id]=itemSurchargeOutput;price_item=me.numberToPriceDigits(itemSurcharge,precision_item);selector='#'+value_id;title_item_pure=$(selector).attr('data-title');if(bogx_active_quantity===1){title_item=title_item_pure;title_item_q=title_item_pure+'\n'+'<b>'+quantity_item+' '+unity_item+'</b>';title_item_qtext+='\n'+title_item_pure+' '+quantity_item+' '+unity_item+",";}else{title_item=title_item_pure;title_item_q=title_item_pure;title_item_qtext+='\n'+title_item_pure;}
titleHTML=title_item.replace(/\n|\r\n|\r/g,'<br/>');title_item_q=me.escapeText(title_item_q);title_item=me.escapeText(title_item);if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
selector='#'+value_id+'_div';image_item=$(selector).attr('data-source');image[value_id]=image_item;title_temp_q[value_id]=title_item_q;title_temp[value_id]=title_item;me.viewInCalculator(value_id,formel,itemSurchargeOutput,titleHTML,group_name);title=title_temp;title_q=title_temp_q;});if(quantity_check===0){basketButtonActive=false;}
me.opts.basketButtonActiveJSON[key]=basketButtonActive;}else{selector='#'+key;hidden=1;if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(0,selector,key);hidden=0;}else{var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');if($selector_surcharge_grouptitle.length>0){$selector_surcharge_grouptitle.addClass('bogx--hidden');}}
title="";}}else if(data_type==='article_virtual_single'&&detach_flag===0){selector='#'+key;group_name=$(selector).attr("data-groupname");hidden=0;var title_temp={},title_temp_q={},image={},itemSurchargeOutput_json={};var formelError="";if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}}
var valueid_arr=me.opts.defaultsJSON[key][2];var precision_item,quantity_item,unity_item,price_item,title_item;var image_item;var title_item_pure,title_item_q,title_item_qtext="",title_q=[];var bogx_active_quantity;$(selector).find('div.article').removeClass('selected');$(selector).find('div.image').removeClass('is--selected');var $selector_qall=$('input[data-groupid="'+key+'"]');$selector_qall.addClass('is--disabled');$selector_qall.prop('disabled',true);var $selector_surcharge_grouptitle=$('#'+key+'_grouptitle_wrap');var selector_surcharge_grouptitles='[id='+key+'_grouptitle_wrap]';if($(selector_surcharge_grouptitles).length>1){$(selector_surcharge_grouptitles).addClass('bogx--hidden');$selector_surcharge_grouptitle=$($(selector_surcharge_grouptitles)[0]);}
if($selector_surcharge_grouptitle.length>0&&$selector_surcharge_grouptitle.hasClass('bogx--hidden')){$selector_surcharge_grouptitle.removeClass('bogx--hidden');}
if($selector_surcharge_grouptitle.find('.groupname').text()!==group_name){$selector_surcharge_grouptitle.find('.groupname').text(group_name);}
if(valueid_arr.length>0){if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(1,selector,key);}
var quantity_check=1;var basketButtonActive=true;valueid_arr.forEach(function(value_id){selector='#'+value_id+'_wrap';$(selector).addClass('selected')
selector='#'+value_id+'_div';$(selector).addClass('is--selected')
var selector_q='#bogx_quantity_'+value_id;var $selector_q=$(selector_q)
$selector_q.removeClass('is--disabled');$selector_q.prop('disabled',false);quantity_item=me.opts.defaultsJSON[key][1][value_id];if($selector_q.val()!==quantity_item)$selector_q.val(quantity_item);quantity_item=me.quantityErrorHandler(selector_q,key,value_id);quantity_check*=quantity_item;precision_item=parseInt($selector_q.attr('data-precision'),10);bogx_active_quantity=parseInt($selector_q.attr('data-active_quantity'),10);unity_item=me.opts.defaultsJSON[key][4][value_id];itemSurcharge=parseFloat(me.opts.surchargeJSON[value_id]);itemSurchargeOutput=me.getOutputSurcharge(itemSurcharge);itemSurchargeOutput=me.round(quantity_item*itemSurchargeOutput,precision_item);itemSurchargeOutput_json[value_id]=itemSurchargeOutput;price_item=me.numberToPriceDigits(itemSurcharge,precision_item);selector='#'+value_id;title_item_pure=$(selector).attr('data-title');if(bogx_active_quantity===1){title_item=title_item_pure+'\n'+'<b>'+quantity_item+"x "+price_item+'/'+unity_item+'</b>';title_item_q=title_item_pure+'\n'+'<b>'+quantity_item+' '+unity_item+'</b>';title_item_qtext+='\n'+title_item_pure+' '+quantity_item+' '+unity_item+",";}else{title_item=title_item_pure;title_item_q=title_item_pure;title_item_qtext+='\n'+title_item_pure;}
titleHTML=title_item.replace(/\n|\r\n|\r/g,'<br>');title_item_q=me.escapeText(title_item_q);title_item=me.escapeText(title_item);if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
selector='#'+value_id+'_div';image_item=$(selector).attr('data-source');image[value_id]=image_item;title_temp_q[value_id]=title_item_q;title_temp[value_id]=title_item;me.viewInCalculator(value_id,formel,itemSurchargeOutput,titleHTML,group_name);title=title_temp;title_q=title_temp_q;});if(quantity_check===0){basketButtonActive=false;}
me.opts.basketButtonActiveJSON[key]=basketButtonActive;}else{selector='#'+key;hidden=1;if($(selector).attr("data-required")==="1"){me.multiSelectErrorHandler(0,selector,key);}else{$selector_surcharge_grouptitle.addClass('bogx--hidden');}
title="";}}else if(data_type==='free_item'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');surchargeObj=me.getItemSurcharge(selector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;itemSurcharge=me.parametrixMultiplier(key,bogx_axb_multiply_array,bogx_a_multiply_array,bogx_b_multiply_array,itemSurcharge,surchargeJSON);if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);$(selector).attr("data-value",formelResult);me.opts.defaultsJSON[key][1]=formelResult;if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
me.setDispatch(selector,key,null);if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;title=$(selector).attr("data-title");}else{hidden=1;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='free_item_value'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';itemSurchargeOutput=0;free_unit=me.opts.defaultsJSON[key][4];me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);$(selector).attr("data-value",formelResult);me.opts.defaultsJSON[key][1]=formelResult;if(formelResult===0){free_item_value=0;}else if(formelResult==="#"){formel="#";}else{free_item_value=formelResult;}}
selector1="#"+key+"_surcharge_wrap";selector2="#"+key+"_surcharge";selector3="#"+key+"_title";if(free_item_value===0||formel==='#'){$(selector1).addClass('bogx--hidden');hidden=1;}else{$(selector1).removeClass('bogx--hidden');$(selector2).addClass('bogx--hidden');title=free_unit===""?free_item_value:free_item_value+" "+free_unit;$(selector3).text(title);}}else if(data_type==='free_item_text'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';itemSurchargeOutput=0;me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);$(selector).attr("data-value",formelResult);$(selector).attr("data-title",formelResult);me.opts.defaultsJSON[key][1]=formelResult;if(formelResult===""){free_item_text="";}else if(formelResult==="#"){formel="#";}else{free_item_text=formelResult;}}else{free_item_text=title;}
selector1="#"+key+"_surcharge_wrap";selector2="#"+key+"_surcharge";selector3="#"+key+"_title";if(free_item_text===""||formel==='#'){$(selector1).addClass('bogx--hidden');hidden=1;}else{$(selector1).removeClass('bogx--hidden');$(selector2).addClass('bogx--hidden');title=free_item_text;$(selector3).text(title);}}else if(data_type==='free_item_handler'){itemSurchargeOutput=0;hidden=1;if(formel!==""&&formel!=="0"&&formel!=="#"){me.formelEval(key,surchargeJSON,gesamtpreis);}
me.setDispatch(selector,key,null);}else if(data_type==='free_item_gurtmass'&&detach_flag===0){selector='div.bogx--config.freeitem[data-groupid="'+key+'"]';me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");free_item_gurtmass=0;if(formel!==""){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);$(selector).attr("data-value",formelResult);me.opts.defaultsJSON[key][1]=formelResult;if(formelResult===0){free_item_gurtmass=0;}else if(formelResult==="#"){free_item_gurtmass=0;}else{free_item_gurtmass=formelResult;}}
selector1="#"+key+"_surcharge_wrap";$(selector1).addClass('bogx--hidden');me.opts.additionalsJSON['gurtmass']=free_item_gurtmass;hidden=1;}else if((data_type==='multiupload'||data_type==='multiupload-designer')&&detach_flag===0){selector="#bogx_multiupload_data_"+key;var need=parseInt($(selector).attr("data-need"),10);group_name=$(selector).attr("data-groupname");value=me.multiuploadErrorHandler(selector,need,key);if(need>=1){itemSurcharge=0.0;title=value;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult!==0){itemSurchargeOutput=formelResult;}else{itemSurchargeOutput=0;}}
if($(selector).attr('data-datatype')==='multiupload-designer'){if(me.getSelectedUploadFile(key)===""){itemSurchargeOutput=0;}}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
aufpreisHTML=me.numberToPrice(itemSurchargeOutput,1);selector="#"+key+"_surcharge";if(formel==="0"){$(selector).text("");}else if(formel!=="#"){$(selector).text(aufpreisHTML);}
if(data_type==='multiupload'){multiupload_files_json[key]=me.getUploadFiles(key);}}else if(data_type==='axb_parameter'&&detach_flag===0){if(formel==="#")formel="0";axb_unit=me.opts.defaultsJSON[key][4];selector1="#bogx-parameter-axb_"+val_Id1;bogx_a_min=parseInt($(selector1).attr("min"),10);group_name=$(selector1).attr("data-groupname");selector2="#bogx-parameter-axb_"+val_Id2;var bogx_b_min=parseInt($(selector2).attr("min"),10);value_arr=me.valueErrorHandler([selector1,selector2],"axb",key);value1=value_arr[0];value2=value_arr[1];if(val1===""){error="result";}else if(val1<bogx_a_min){error="a_min";}
if(val2===""){error="result";}else if(val2<bogx_b_min){error="b_min";}
itemSurchargeRaw=$(selector1).attr("data-surcharge");itemSurcharge=surchargeJSON[key];itemSurchargeOutput=itemSurcharge;parametrixBasePrice=surchargeJSON["parametrixBasePrice"];if(formel!==""&&formel!=="0"){console.log("WARNUNG: Formel-Operationen in axb_parameter werden ignoriert, nur eine '0' oder '#' sind zulssig");}
if(value1===0||value2===0){area=0;itemSurchargeOutput=0;}else{itemSurchargeQuantity1=parseFloat($(selector1).attr("data-quantity").replace(",","."));itemSurchargeQuantity2=parseFloat($(selector2).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity1*itemSurchargeQuantity2;area=value1*value2*unitFactor;basicPriceFlag='0'!==itemSurchargeRaw;}
returnArray=me.parametrixResultsAndSurchargesAxb(key,itemSurchargeRaw,itemSurcharge,itemSurchargeOutput,gesamtpreis,totalsurcharge,parametrixBasePrice,bogx_axb_calcactive,value1,value2,axb_unit,unit,area,formel,error,unitFactor);totalsurcharge=returnArray[0];gesamtpreis=returnArray[1];itemSurchargeOutput=returnArray[2];itemSurcharge=returnArray[3];title=returnArray[4];}else if(data_type==='a_parameter'&&detach_flag===0){if(formel==="#")formel="0";a_unit=me.opts.defaultsJSON[key][4];selector="#bogx-parameter-a_"+val_Id;group_name=$(selector).attr("data-groupname");var bogx_a_min=parseInt($(selector).attr("min"),10);if(val===""){error="result";}else if(val<bogx_a_min){error="a_min";}
value=me.valueErrorHandler(selector,"a",key);itemSurchargeRaw=$(selector).attr("data-surcharge");itemSurcharge=surchargeJSON[key];itemSurchargeOutput=itemSurcharge;parametrixBasePrice=surchargeJSON["a_parametrixBasePrice"];if(formel!==""&&formel!=="0"){console.log("WARNUNG: Formel-Operationen in a_parameter werden ignoriert, nur eine '0' zulssig");}
if(value===0){itemSurchargeOutput=0;result=0;}else{itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity;result=value*unitFactor;basicPriceFlag=itemSurchargeRaw!=='0';}
parameter="a";returnArray=me.parametrixResultsAndSurcharges(key,parameter,itemSurchargeRaw,itemSurcharge,itemSurchargeOutput,gesamtpreis,totalsurcharge,parametrixBasePrice,bogx_a_calcactive,value,a_unit,unit,result,formel,error);totalsurcharge=returnArray[0];gesamtpreis=returnArray[1];itemSurchargeOutput=returnArray[2];itemSurcharge=returnArray[3];title=returnArray[4];}else if(data_type==='b_parameter'&&detach_flag===0){if(formel==="#")formel="0";b_unit=me.opts.defaultsJSON[key][4];selector="#bogx-parameter-b_"+val_Id;group_name=$(selector).attr("data-groupname");if(val===""){error="result";}else if(val<bogx_b_min){error="b_min";}
value=me.valueErrorHandler(selector,"b",key);itemSurchargeRaw=$(selector).attr("data-surcharge");itemSurcharge=surchargeJSON[key];itemSurchargeOutput=itemSurcharge;parametrixBasePrice=surchargeJSON["b_parametrixBasePrice"];if(formel!==""&&formel!=="0"){console.log("WARNUNG: Formel-Operationen in b_parameter werden ignoriert, nur eine '0' zulssig");}
if(value===0){itemSurchargeOutput=0;result=0;}else{itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity").replace(",","."));unitFactor=itemSurchargeQuantity;result=value*unitFactor;basicPriceFlag=itemSurchargeRaw!=='0';if(formel===""){totalsurcharge+=itemSurchargeOutput;gesamtpreis+=itemSurchargeOutput;}}
parameter="b";var returnArray=me.parametrixResultsAndSurcharges(key,parameter,itemSurchargeRaw,itemSurcharge,itemSurchargeOutput,gesamtpreis,totalsurcharge,parametrixBasePrice,bogx_b_calcactive,value,b_unit,unit,result,formel,error);totalsurcharge=returnArray[0];gesamtpreis=returnArray[1];itemSurchargeOutput=returnArray[2];itemSurcharge=returnArray[3];title=returnArray[4];}else if(data_type==='axb_free_parameter'&&detach_flag===0){free_unit=me.opts.defaultsJSON[key][4];hidden=0;selector1="#axb_free_"+val_Id1;selector2="#axb_free_"+val_Id2;var key1=$(selector1).attr("data-key");var key2=$(selector2).attr("data-key");group_name=$(selector1).attr("data-groupname");if($(selector1).attr("data-required")==="1"){value_arr=me.valueErrorHandler([selector1,selector2],"axb",key);value1=value_arr[0];value2=value_arr[1];required=1;}else{value1=val1;value2=val2;required=0;}
if(value1===0||value2===0||isNaN(value1)||isNaN(value2)){area=0;itemSurchargeOutput=0;if(required===0){formel="#";hidden=1;}else{title=quantityErrors.empty;formel="0";}}else{itemSurchargeQuantity1=parseFloat($(selector1).attr("data-quantity"));itemSurchargeQuantity2=parseFloat($(selector2).attr("data-quantity"));unitFactor=itemSurchargeQuantity1*itemSurchargeQuantity2;var free_baseprice1=$(selector1).attr("data-baseprice");var free_baseprice2=$(selector2).attr("data-baseprice");basicPriceFlag=(free_baseprice1==='true'&&free_baseprice2==='true');if(typeof surchargeJSON[key]!=='undefined'){noselector=false;itemSurchargeOutput=me.getOutputSurcharge(surchargeJSON[key].surcharge);area=surchargeJSON[key].value;itemSurchargeOutput*=area;if(unitFactor!==1){area_round=me.roundWithUnitFactor(area,unitFactor);}else{area_round=area;}
title=value1+" x "+value2;title=free_unit===""?title:title+" = "+area_round+" "+free_unit;}else if(typeof surchargeJSON[key1]!=='undefined'||typeof surchargeJSON[key2]!=='undefined'){itemSurchargeOutput=0;title=value1+" x "+value2;}
key_title=key+"_title";if(typeof me.opts.formelJSON[key_title]!=='undefined'&&me.opts.formelJSON[key_title]!==''){titleHTML=me.opts.formelJSON[key_title];title=me.escapeText(me.opts.formelJSON[key_title]);}}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}else if(formel==="0"||formel==="#"){itemSurchargeOutput=0;}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='free_parameter'&&detach_flag===0){hidden=0;free_unit=me.opts.defaultsJSON[key][4];selector="#bogx-parameter-free_"+val_Id;group_name=$(selector).attr("data-groupname");var free_baseprice=$(selector).attr("data-baseprice");basicPriceFlag=free_baseprice!=="false";if($(selector).attr("data-required")==="1"){value=me.valueErrorHandler(selector,'free',key);required=1;}else{value=$(selector).val();if(me.opts.defaultsJSON[key][1]!==value)me.opts.defaultsJSON[key][1]=value;required=0;}
if(value===""||isNaN(value)){itemSurchargeOutput=0;result=0;result_round=0;if(required===0){formel='#';hidden=1;}else{title=quantityErrors.empty;formel="0";}}else if(value===0||value==='0'){itemSurchargeOutput=0;result=0;formel='#';hidden=1;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurchargeOutput=surchargeObj.surcharge;itemSurchargeQuantity=parseFloat($(selector).attr("data-quantity"));unitFactor=itemSurchargeQuantity;result=value*unitFactor;if(unitFactor!==1.0){result_round=me.roundWithUnitFactor(result,unitFactor);}else{result_round=result;}
title=free_unit===""?result_round:result_round+" "+free_unit;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}else if(formel==="0"||formel==="#"){itemSurchargeOutput=0;}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='font'&&detach_flag===0){selector="ul#font_"+key+"_list li[data-value='"+val+"']";title=$(selector).attr('data-title');title=me.cutStringByChar(title,'+');selector1="#font_"+key+"_selected";$(selector1).css("font-family",val).text(title);selector2="ul#font_"+key+"_list li";$(selector2).removeClass('selected');$(selector).addClass('selected');me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");var fontpath=$("#bogx_canvas").attr("data-fontpath");var fontfile=$(selector).attr("data-src").split("/").pop();$("#bogx_canvas").attr("data-fontfamily",val).attr("data-fontfile",fontfile);noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
if(typeof me.opts.designerFABRIC!=='undefined'){me.opts.designerFABRIC["fontFamily"]=val;me.opts.designerFABRIC["fontPath"]=fontpath+fontfile;me.opts.designerFABRIC["fontFamilyName"]=title;me.opts.designerFABRIC["fontFile"]=fontfile;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='font_size'&&detach_flag===0){selector="#select_"+key;$(selector).find('option[value="'+val+'"]').prop('selected',true);selector="#select_"+key+" option:selected";me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=='#'){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if(data_type==='font_text'&&detach_flag===0){selector="#text_"+key;var checkout_view='all',checkout_view_font='1',checkout_view_fontcolor='1',checkout_view_fontsize='1';if(val===""&&me.opts.initializeUpdate){val=me.getDefaultValue(data_type,key,'content',"");$(selector).val(val);}
me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);required=1;}else{value=val;required=0;}
if(value===""){itemSurcharge=0.0;title=value;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
multiline_flag=false;if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textlines!=='undefined'){multiline_flag=true;}}
if(multiline_flag){if($(selector).attr("data-fontname")===""&&$(selector).attr("data-checkoutview")===""){tstyleJSON=me.StringToJson(bogx_canvas_text_defaults);if(tstyleJSON!=='undefined'&&Object.keys(tstyleJSON).length>0){if(typeof tstyleJSON[key]!=='undefined'){if(typeof tstyleJSON[key]['fontFamilyName']!=='undefined'){fontname=tstyleJSON[key]['fontFamilyName'];$(selector).attr("data-fontname",fontname);}
if(typeof tstyleJSON[key]['fontColorName']!=='undefined'){colorname=tstyleJSON[key]['fontColorName'];$(selector).attr("data-colorname",colorname);}
if(typeof tstyleJSON[key]['fontSize']!=='undefined'){fontsize=tstyleJSON[key]['fontSize'];$(selector).attr("data-fontsize",fontsize);}
if(typeof tstyleJSON[key]['checkoutView']!=='undefined'){checkout_view=tstyleJSON[key]['checkoutView'];$(selector).attr("data-checkoutview",checkout_view);}
if(typeof tstyleJSON[key]['checkoutView_font']!=='undefined'){checkout_view_font=tstyleJSON[key]['checkoutView_font'];$(selector).attr("data-checkoutview_font",checkout_view_font);}
if(typeof tstyleJSON[key]['checkoutView_fontcolor']!=='undefined'){checkout_view_fontcolor=tstyleJSON[key]['checkoutView_fontcolor'];$(selector).attr("data-checkoutview_fontcolor",checkout_view_fontcolor);}
if(typeof tstyleJSON[key]['checkoutView_fontsize']!=='undefined'){checkout_view_fontsize=tstyleJSON[key]['checkoutView_fontsize'];$(selector).attr("data-checkoutview_fontsize",checkout_view_fontsize);}}}}else{checkout_view=$(selector).attr("data-checkoutview");checkout_view_font=$(selector).attr("data-checkoutview_font");checkout_view_fontcolor=$(selector).attr("data-checkoutview_fontcolor");checkout_view_fontsize=$(selector).attr("data-checkoutview_fontsize");}
if(title!==""&&(checkout_view===''||checkout_view==='all')){if(checkout_view_font===''||checkout_view_font==='1')title+="\n"+$(selector).attr("data-fontname");if(checkout_view_fontcolor===''||checkout_view_fontcolor==='1')title+="\n"+$(selector).attr("data-colorname");if(checkout_view_fontsize===''||checkout_view_fontsize==='1')title+="\n"+$(selector).attr("data-fontsize")+"px";}}
if(title!==""){title=me.escapeText(title);titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');}else{if(required===0){formel="#";titleHTML="";}else{titleHTML=null;}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='curved_text'&&detach_flag===0){selector="#curved_text_"+key;var checkout_view='all',checkout_view_font='1',checkout_view_fontcolor='1',checkout_view_fontsize='1';if(val===""&&me.opts.initializeUpdate){val=me.getDefaultValue(data_type,key,'content',"");$(selector).val(val);}
me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);required=1;}else{value=val;required=0;}
if(value===""){itemSurcharge=0.0;title=value;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
multiline_flag=false;if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.curvedtextlines!=='undefined'){multiline_flag=true;}}
if(multiline_flag){if($(selector).attr("data-fontname")===""&&$(selector).attr("data-checkoutview")===""){tstyleJSON=me.StringToJson(bogx_canvas_text_defaults);if(tstyleJSON!=='undefined'&&Object.keys(tstyleJSON).length>0){if(typeof tstyleJSON[key]!=='undefined'){if(typeof tstyleJSON[key]['fontFamilyName']!=='undefined'){fontname=tstyleJSON[key]['fontFamilyName'];$(selector).attr("data-fontname",fontname);}
if(typeof tstyleJSON[key]['fontColorName']!=='undefined'){colorname=tstyleJSON[key]['fontColorName'];$(selector).attr("data-colorname",colorname);}
if(typeof tstyleJSON[key]['fontSize']!=='undefined'){fontsize=tstyleJSON[key]['fontSize'];$(selector).attr("data-fontsize",fontsize);}
if(typeof tstyleJSON[key]['checkoutView']!=='undefined'){checkout_view=tstyleJSON[key]['checkoutView'];$(selector).attr("data-checkoutview",checkout_view);}
if(typeof tstyleJSON[key]['checkoutView_font']!=='undefined'){checkout_view_font=tstyleJSON[key]['checkoutView_font'];$(selector).attr("data-checkoutview_font",checkout_view_font);}
if(typeof tstyleJSON[key]['checkoutView_fontcolor']!=='undefined'){checkout_view_fontcolor=tstyleJSON[key]['checkoutView_fontcolor'];$(selector).attr("data-checkoutview_fontcolor",checkout_view_fontcolor);}
if(typeof tstyleJSON[key]['checkoutView_fontsize']!=='undefined'){checkout_view_fontsize=tstyleJSON[key]['checkoutView_fontsize'];$(selector).attr("data-checkoutview_fontsize",checkout_view_fontsize);}}}}else{checkout_view=$(selector).attr("data-checkoutview");checkout_view_font=$(selector).attr("data-checkoutview_font");checkout_view_fontcolor=$(selector).attr("data-checkoutview_fontcolor");checkout_view_fontsize=$(selector).attr("data-checkoutview_fontsize");}
if(title!==""&&(checkout_view===''||checkout_view==='all')){if(checkout_view_font===''||checkout_view_font==='1')title+="\n"+$(selector).attr("data-fontname");if(checkout_view_fontcolor===''||checkout_view_fontcolor==='1')title+="\n"+$(selector).attr("data-colorname");if(checkout_view_fontsize===''||checkout_view_fontsize==='1')title+="\n"+$(selector).attr("data-fontsize")+"px";}}
if(title!==""){title=me.escapeText(title);titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');}else{if(required===0){formel="#";titleHTML="";}else{titleHTML=null;}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='text_boxsvg'&&detach_flag===0){selector="#textboxsvg_"+key;if(val===""&&me.opts.initializeUpdate){val=me.getDefaultValue(data_type,key,'content',"");$(selector).val(val);}
me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);}else{value=val;}
if(value===""){itemSurcharge=0.0;title=value;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
if(title!==""){title=me.escapeText(title);titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');}else{if(required===0){formel="#";titleHTML="";}else{titleHTML=null;}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='text_box'&&detach_flag===0){selector="#textbox_"+key;var checkout_view='all',checkout_view_font='1',checkout_view_fontcolor='1',checkout_view_fontsize='1';if(val===""&&me.opts.initializeUpdate){val=me.getDefaultValue(data_type,key,'content',"");$(selector).val(val);}
me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");if($(selector).attr("data-required")==="1"){value=me.textErrorHandler(data_type,selector,key);required=1;}else{value=val;required=0;}
if(value===""){itemSurcharge=0.0;title=value;}else{noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;title=value;}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
multiline_flag=false;if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textboxes!=='undefined'){multiline_flag=true;}}
if(multiline_flag){if($(selector).attr("data-fontname")===""&&$(selector).attr("data-checkoutview")===""){tstyleJSON=me.StringToJson(bogx_canvas_textbox_defaults);if(tstyleJSON!=='undefined'&&Object.keys(tstyleJSON).length>0){if(typeof tstyleJSON[key]!=='undefined'){if(typeof tstyleJSON[key]['fontFamilyName']!=='undefined'){fontname=tstyleJSON[key]['fontFamilyName'];$(selector).attr("data-fontname",fontname);}
if(typeof tstyleJSON[key]['fontColorName']!=='undefined'){colorname=tstyleJSON[key]['fontColorName'];$(selector).attr("data-colorname",colorname);}
if(typeof tstyleJSON[key]['fontSize']!=='undefined'){fontsize=tstyleJSON[key]['fontSize'];$(selector).attr("data-fontsize",fontsize);}
if(typeof tstyleJSON[key]['checkoutView']!=='undefined'){checkout_view=tstyleJSON[key]['checkoutView'];$(selector).attr("data-checkoutview",checkout_view);}
if(typeof tstyleJSON[key]['checkoutView_font']!=='undefined'){checkout_view_font=tstyleJSON[key]['checkoutView_font'];$(selector).attr("data-checkoutview_font",checkout_view_font);}
if(typeof tstyleJSON[key]['checkoutView_fontcolor']!=='undefined'){checkout_view_fontcolor=tstyleJSON[key]['checkoutView_fontcolor'];$(selector).attr("data-checkoutview_fontcolor",checkout_view_fontcolor);}
if(typeof tstyleJSON[key]['checkoutView_fontsize']!=='undefined'){checkout_view_fontsize=tstyleJSON[key]['checkoutView_fontsize'];$(selector).attr("data-checkoutview_fontsize",checkout_view_fontsize);}}}}else{checkout_view=$(selector).attr("data-checkoutview");checkout_view_font=$(selector).attr("data-checkoutview_font");checkout_view_fontcolor=$(selector).attr("data-checkoutview_fontcolor");checkout_view_fontsize=$(selector).attr("data-checkoutview_fontsize");}
if(title!==""&&(checkout_view===''||checkout_view==='all')){if(checkout_view_font===''||checkout_view_font==='1')title+="\n"+$(selector).attr("data-fontname");if(checkout_view_fontcolor===''||checkout_view_fontcolor==='1')title+="\n"+$(selector).attr("data-colorname");if(checkout_view_fontsize===''||checkout_view_fontsize==='1')title+="\n"+$(selector).attr("data-fontsize")+"px";}}
if(title!==""){title=me.escapeText(title);titleHTML=title.replace(/\n|\r\n|\r/g,'<br/>');}else{if(required===0){formel="#";titleHTML="";}else{titleHTML=null;}}
me.viewInCalculator(key,formel,itemSurchargeOutput,titleHTML,group_name);}else if(data_type==='shape'&&detach_flag===0||data_type==='shape_img'&&detach_flag===0||data_type==='background'&&detach_flag===0||data_type==='shape_color'&&detach_flag===0||data_type==='background_color'&&detach_flag===0||data_type==='font_color'&&detach_flag===0){selector='div.bogx--config.image[data-groupid="'+key+'"]';group_name=$(selector).attr("data-groupname");hidden=0;selector1='#'+key;if($(selector1).attr("data-required")==="1"){required=1;me.selectErrorHandler(val,data_type,selector,key);}else{required=0;}
if(val!==''){$(selector).removeClass("selected");selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';$(selector).addClass('selected');me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');noselector=selector;if(data_type==='font_color'||data_type==='shape_color'||data_type==='background_color'){noselector=false;}
surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;}else{itemSurcharge=0;itemSurchargeOutput=0;if(required===0){hidden=1;formel="#";}else{title=globalErrors.noselected;formel="0";}}
if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"&&formel!=="#"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
if(typeof me.opts.designerFABRIC!=='undefined'&&data_type==='font_color'){me.opts.designerFABRIC["font_color"]=val;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}else if((data_type==='shape_flipx'||data_type==='shape_flipy')&&detach_flag===0){selector='input[data-groupid="'+key+'"]';$(selector).prop("checked",false);if(val>0){selector='input[data-groupid="'+key+'"]'+'[value="'+val+'"]';$(selector).prop("checked",true);me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");group_name=$(selector).attr("data-groupname");title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');noselector=false;surchargeObj=me.getItemSurcharge(noselector,surchargeJSON,key,gesamtpreis);itemSurcharge=surchargeObj.surcharge;surchargeJSON=surchargeObj.json;if($.inArray(key,bogx_axb_basepriceadd_array)<0&&$.inArray(key,bogx_a_basepriceadd_array)<0&&$.inArray(key,bogx_b_basepriceadd_array)<0){itemSurchargeOutput=itemSurcharge;}else{itemSurchargeOutput=0.0;}
if(formel!==""&&formel!=="0"&&formel!=="#"){formelResult=me.formelEval(key,surchargeJSON,gesamtpreis);if(formelResult===0){itemSurchargeOutput=0;}else if(formelResult==="0"){formel="0";}else if(formelResult==="#"){formel="#";}else{itemSurchargeOutput=formelResult;}}
if(itemSurchargeOutput!==0.0&&formel!=="0"){gesamtpreis+=itemSurchargeOutput;totalsurcharge+=itemSurchargeOutput;}
me.viewInCalculator(key,formel,itemSurchargeOutput,title,group_name);}}else{var apiJSON={"group_name":"","gesamtpreis":gesamtpreis,"totalsurcharge":totalsurcharge,"itemSurchargeOutput":0,"itemSurchargeOutput_json":{},"hidden":0,"image":{},"title":{},"title_q":{},"title_item_qtext":"","formel":"",};$.publish('plugin/bogxProductConfigurator/injectionUpdateConfigurator',[me,key,apiJSON]);group_name=apiJSON.group_name;gesamtpreis=apiJSON.gesamtpreis;totalsurcharge=apiJSON.totalsurcharge;itemSurchargeOutput=apiJSON.itemSurchargeOutput;itemSurchargeOutput_json=apiJSON.itemSurchargeOutput_json;hidden=apiJSON.hidden;image=apiJSON.image;title=apiJSON.title;title_q=apiJSON.title_q;title_item_qtext=apiJSON.title_item_qtext;formel=apiJSON.formel;}
var attribute_builder_array=me.attributeBuilder(key,group_name,formel,hidden,multiupload_files_json,itemSurchargeOutput,itemSurchargeOutput_json,attributeArray,additionalText,label,image,title,title_q,title_item_qtext);attributeArray=attribute_builder_array[0];additionalText=attribute_builder_array[1];}}}
waitForConfigLoad(key);function waitForConfigLoad(key){if(!me.opts.formelJSON['bogx_data_load']){setTimeout(function(){waitForConfigLoad(key);},250);return;}
me.opts.formelJSON['bogx_config_load']=true;me.opts.totalQuantity=totalQuantity;me.opts.totalQuantityUnit=qTotalUnit;me.opts.gesamtpreis=gesamtpreis;me.opts.totalsurchage=totalsurcharge;me.opts.basketSurchargeJSON=surchargeJSON;me.opts.basicPriceFlag=basicPriceFlag;me.opts.basketAttributes=attributeArray;me.opts.additionalText=additionalText;}},partsListBuilder:function(){var me=this;var parts_json={};var key_parts_json=me.opts.basketPartsList;for(var key in key_parts_json){if(key_parts_json.hasOwnProperty(key)){var parts=key_parts_json[key];for(var k in parts){if(parts.hasOwnProperty(k)){parts_json[k]=parts[k];}}}}
return parts_json;},attributeBuilder:function(key,group_name,formel,hidden,multiupload_files_json,itemSurchargeOutput,itemSurchargeOutput_json,attributeArray,additionalText,label,image,title,title_q,title_item_qtext){var me=this;var attribute={};var detach_flag=me.opts.defaultsJSON[key][3];var data_type=me.opts.defaultsJSON[key][0];if(detach_flag===0&&hidden===0&&formel!=="#"){attribute.group_id=key;if(data_type==='text-area'){attribute.value=me.escapeText(me.opts.defaultsJSON[key][1]);}else{attribute.value=me.opts.defaultsJSON[key][1];}
attribute.data_type=data_type;attribute.valueID=me.opts.defaultsJSON[key][2];attribute.groupname=group_name;if(typeof label!=='undefined'&&!$.isEmptyObject(label)){attribute.label=label;}
if(typeof image!=='undefinded'&&!$.isEmptyObject(image)){attribute.image=image;}
if(typeof title_q!=='undefined'&&!$.isEmptyObject(title_q)){attribute.title_q=title_q;}
attribute.title=title;if(data_type==='multiupload'&&typeof multiupload_files_json!=='undefined'&&multiupload_files_json[key].length>0){attribute.upload_id=multiupload_files_json[key][0];attribute.upload_name=multiupload_files_json[key][1];attribute.upload_src=multiupload_files_json[key][2];}
if(formel==="0"){attribute.surcharge="";}else if(typeof itemSurchargeOutput_json!=='undefined'&&!$.isEmptyObject(itemSurchargeOutput_json)){attribute.surcharge=itemSurchargeOutput_json;}else{attribute.surcharge=itemSurchargeOutput;}
attribute.ocb=me.opts.defaultsJSON[key][7];attributeArray.push(attribute);if(typeof title_item_qtext!=='undefined'&&title_item_qtext!==""){additionalText+="\n"+group_name+": "+title_item_qtext;}else if(typeof title==='string'){additionalText+="\n"+group_name+": "+title;}}
return[attributeArray,additionalText];},updateBlackoptions:function(){var me=this;var need_config_update_array=[],need_config_update_arr=[],need_config_update=0;for(var value_id in me.opts.blackoptions){if(me.opts.blackoptions.hasOwnProperty(value_id)){var selector1,selector2,val_id_arr;selector1='#'+value_id+'_wrap';selector2='#'+value_id;if($(selector1)!==undefined&&$(selector1).length>0&&$(selector1).hasClass('selected')){val_id_arr=me.opts.blackoptions[value_id];}else if($(selector2)!==undefined&&$(selector2).length>0&&$(selector2).hasClass('selected')){val_id_arr=me.opts.blackoptions[value_id];}
if(val_id_arr!==undefined){need_config_update_array.push(me.setBlackoptions(val_id_arr));}}}
for(var i=0;i<need_config_update_array.length;i++){need_config_update_arr=need_config_update_array[i];for(var j=0;j<need_config_update_arr.length;j++){need_config_update=need_config_update_arr[j];if(need_config_update===1){i=need_config_update_array.length;break;}}}
if(need_config_update===1){me.updateConfig();}},setBlackoptions:function(id_array){var me=this;var need_config_update_arr=[];for(var i=0;i<id_array.length;i++){var value_id=id_array[i];var need_config_update=0;var selector1='#'+value_id+'_wrap';var selector2='#'+value_id;if($(selector1)!==undefined&&$(selector1).length>0){$(selector1).addClass('is--disabled');if($(selector1).hasClass('selected')){need_config_update=1;var data_type=$(selector1).attr('data-datatype');var key=$(selector1).attr('data-groupid');me.initBlackoptionsDefaults(data_type,key,value_id);}}else if($(selector2)!==undefined&&$(selector2).length>0){$(selector2).addClass('is--disabled');$(selector2).prop('disabled',true);if($(selector2).hasClass('selected')){need_config_update=1;var data_type='select';var key=$(selector2).attr('data-groupid');me.initBlackoptionsDefaults(data_type,key,null);}}
need_config_update_arr.push(need_config_update);}
return need_config_update_arr;},initBlackoptionsDefaults:function(data_type,key,value_id){var me=this;var data_type_arr1=['select','quantity-select','radiobutton','image','imagetitle','imagetitle_price','imageproduct','color','check','shape_img','shape','font_size','font_color','shape_color','background','background_color'];var data_type_arr2=['check_set','quantity_check','article_virtual_single','article_virtual_multi','article_multi_select','article_single_select','acc_multi_select','acc_single_select'];if(data_type_arr1.indexOf(data_type)>-1){me.opts.defaultsJSON[key][1]='';me.opts.defaultsJSON[key][2]='';me.opts.defaultsJSON[key][5]=0;me.opts.defaultsJSON[key][6]='0';me.opts.defaultsJSON[key][7]='';}else if(data_type_arr2.indexOf(data_type)>-1){delete me.opts.defaultsJSON[key][1][value_id];me.removeArrayItem(me.opts.defaultsJSON[key][2],value_id);delete me.opts.defaultsJSON[key][4][value_id];delete me.opts.defaultsJSON[key][5][value_id];delete me.opts.defaultsJSON[key][6][value_id];delete me.opts.defaultsJSON[key][7][value_id];me.viewInCalculator(value_id,'#',0,"","");}},switchBasketButton:function(basketButtonActiveJSON){var me=this;var basketActiveJSON;var basketButtonActive=true;var basketButton=$(me.opts.basketButton);var sw_buyboxbutton_active;var detach_flag=1;if(jQuery.isEmptyObject(basketButtonActiveJSON)){basketActiveJSON=me.opts.basketButtonActiveJSON;}else{basketActiveJSON=Object.assign(me.opts.basketButtonActiveJSON,basketButtonActiveJSON);}
for(var k in basketActiveJSON){if(basketActiveJSON.hasOwnProperty(k)){detach_flag=me.opts.defaultsJSON[k][3];if(!basketActiveJSON[k]&&detach_flag===0){basketButtonActive=false;break;}}}
if(me.opts.buyboxbutton_active===""){sw_buyboxbutton_active=0;}else{sw_buyboxbutton_active=parseInt(me.opts.buyboxbutton_active,10);}
if(basketButtonActive&&sw_buyboxbutton_active===1){basketButton.removeClass('is--disabled');basketButton.prop('disabled',false);basketButton.removeAttr('aria-disabled');$(me.opts.basketButtonHint).addClass('bogx--hidden');}else if(!basketButtonActive||sw_buyboxbutton_active===0){basketButton.addClass('is--disabled');basketButton.attr('aria-disabled','true');basketButton.attr('disabled','disabled');$(me.opts.basketButtonHint).removeClass('bogx--hidden');}},totalPriceUpdate:function(gesamtpreis,totalQuantity,qTotalUnit,surchargeJSON,minprice_flag){var me=this;var gesamtpreisHTML,modal;var tax,total_dual_tax_factor;var oncePrice,unitPrice;var precision=parseInt(me.opts.unitprice_precision);if(me.opts.tax===""){tax=19;}else{tax=parseFloat(me.opts.tax);}
if(parseInt(me.opts.total_dual,10)===1){if(parseInt(me.opts.prices_gross,10)===1){total_dual_tax_factor=1.0/(1.0+tax/100.0);}else{total_dual_tax_factor=1.0+tax/100.0;}}
if(gesamtpreis===0){gesamtpreisHTML=me.numberToPrice(gesamtpreis,0);}else{gesamtpreisHTML=me.numberToPrice(gesamtpreis,0)+" "+star_for_total;}
if($('#bogx_config_basicprice').length>0){var baseprice=parseFloat(me.opts.baseprice);var basePreisHTML=me.numberToPrice(baseprice,1)
$('#bogx_config_basicprice').text(basePreisHTML);}
var $modal_total=$('#bogx_modal_total_wrap');modal=$modal_total.length>0;$('#bogx_config_total').text(gesamtpreisHTML);if(modal){$('#bogx_modal_total').text(gesamtpreisHTML);}
if(parseInt(me.opts.total_dual,10)===1){var dualGesamtpreisHTML=me.numberToPrice(gesamtpreis*total_dual_tax_factor,1);$('#bogx_config_total_dual').text(dualGesamtpreisHTML);if(modal){$('#bogx_modal_total_dual').text(dualGesamtpreisHTML);}}
if(surchargeJSON['once']===undefined||surchargeJSON['once']===""){oncePrice=0;}else{oncePrice=surchargeJSON['once'];}
if($('*[data-total_flag="1"]').length>0){if($('#bogx_config_unit_price').hasClass('bogx--hidden')){$('#bogx_config_unit_price').removeClass('bogx--hidden')}
if(modal){if($('#bogx_config_unit_total').hasClass('bogx--hidden')){$('#bogx_config_unit_total').removeClass('bogx--hidden')}
if($('#bogx_modal_unit_total').hasClass('bogx--hidden')){$('#bogx_modal_unit_total').removeClass('bogx--hidden')}
if($('#bogx_modal_unit_price').hasClass('bogx--hidden')){$('#bogx_modal_unit_price').removeClass('bogx--hidden')}}
if(oncePrice!==0){unitPrice=(gesamtpreis-oncePrice)/totalQuantity;}else{unitPrice=gesamtpreis/totalQuantity;}
var unitPriceText=me.numberToPriceDigits(unitPrice,precision)+"/"+qTotalUnit;if(bogx_show_prices==='1'){$('#bogx_config_unit_price').text(unitPriceText);if(modal){$('#bogx_modal_unit_price').text(unitPriceText);}
if(parseInt(me.opts.total_dual,10)===1){if($('.bogx--unit-price-dual').hasClass('bogx--hidden'))$('.bogx--unit-price-dual').removeClass('bogx--hidden');var dualunitPriceText=me.numberToPriceDigits(unitPrice*total_dual_tax_factor,precision)+"/"+qTotalUnit;$('#bogx_config_unit_price_dual').text(dualunitPriceText);if(modal){$('#bogx_modal_unit_price_dual').text(dualunitPriceText);}}}}else{unitPrice=me.opts.totalsurchage;}
var selector_grundpreis='#bogx_config_unit_grundprice';if(!jQuery.isEmptyObject(me.opts.customUnitPrice)){var customUnitPrice=me.opts.customUnitPrice["unitPrice"];var customUnit=me.opts.customUnitPrice["unit"];var grundpreis_str=me.numberToPriceDigits(customUnitPrice,precision)+"/"+customUnit;if($(selector_grundpreis).length>0){$(selector_grundpreis).removeClass('bogx--hidden');if(!$('#bogx_config_unit_price').hasClass('bogx--hidden')){var grundpreis_str=' | '+grundpreis_str;}
$(selector_grundpreis).html(grundpreis_str);}}else{if($(selector_grundpreis).length>0)$(selector_grundpreis).addClass('bogx--hidden');}
if(minprice_flag===1&&bogx_show_prices==='1'){$('#bogx_config_minprice').removeClass('bogx--hidden');if(modal){$('#bogx_modal_minprice').removeClass('bogx--hidden');}}else{$('#bogx_config_minprice').addClass('bogx--hidden');if(modal){$('#bogx_modal_minprice').addClass('bogx--hidden');}}
return[oncePrice,unitPrice,unitPriceText];},parametrixResultsAndSurchargesAxb:function(key,itemSurchargeRaw,itemSurcharge,itemSurchargeOutput,gesamtpreis,totalsurcharge,parametrixBasePrice,bogx_axb_calcactive,val1,val2,parameter_unit,article_unit,area,formel,error,unitFactor){var me=this;var unit,unit_text,selector,area_round,parametrixBasePriceHTML,aufpreisHTML,total=gesamtpreis,totalsurch=totalsurcharge,itemSurch=itemSurcharge,itemSurchargeOut=itemSurchargeOutput,title;var currency_factor=me.getCurrencyFactor();var tax_factor=me.getTaxFactor();if(val1!==0&&val2!==0&&formel===""){total+=itemSurchargeOut*currency_factor*tax_factor;totalsurch+=itemSurchargeOut*currency_factor*tax_factor;}
if(parameter_unit===""){unit=article_unit;unit="";selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");}else{unit=parameter_unit;}
if((itemSurchargeRaw==='s'||itemSurchargeRaw==='$')&&bogx_axb_calcactive==='1'&&area!==0){area_round=me.numberToStringDigits(area,1.0/unitFactor);selector="#bogx-parameter-axb_"+key+"_result";$(selector).removeClass("bogx--warning").text(area_round+unit);if(formel===""){selector="#bogx-parameter-axb_"+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurchargeOut*currency_factor*tax_factor,1);selector="#bogx-parameter-axb_"+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);unit_text=parameter_unit===""?"":"="+area_round+unit+parametrixBasePriceHTML;title=val1+"x"+val2+unit_text;}else if(formel==="0"){selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");unit_text=parameter_unit===""?"":"="+area_round+unit;title=val1+"x"+val2+unit_text;}
selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);}else if(area===0&&bogx_axb_calcactive==='1'){selector="#bogx-parameter-axb_"+key+"_result";if(error==="result"){$(selector).addClass("bogx--warning").text(configErrors.result);}else if(error==="a_min"){$(selector).addClass("bogx--warning").text("a "+configErrors.min);}else if(error==="b_min"){$(selector).addClass("bogx--warning").text("b "+configErrors.min);}
if(formel===""){selector="#bogx-parameter-axb_"+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);selector="#bogx-parameter-axb_"+key+"_surcharge";$(selector).addClass("bogx--warning").text(configErrors.surcharge);unit_text=parameter_unit===""?"":parametrixBasePriceHTML;title=configErrors.result+unit_text;aufpreisHTML=me.opts.currency;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");title=configErrors.result;}
selector="#"+key+"_title";$(selector).addClass("bogx--warning").text(title);}else if(itemSurchargeOut!==0&&bogx_axb_calcactive==='1'){area_round=me.numberToStringDigits(area,1.0/unitFactor);selector="#bogx-parameter-axb_"+key+"_result";$(selector).removeClass("bogx--warning").text(area_round+unit);if(formel===""){selector="#bogx-parameter-axb_"+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurchargeOut*currency_factor*tax_factor,1);selector="#bogx-parameter-axb_"+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);unit_text=parameter_unit===""?"":"="+area_round+unit+parametrixBasePriceHTML;title=val1+"x"+val2+unit_text;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");unit_text=parameter_unit===""?"":"="+area_round+unit;title=val1+"x"+val2+unit_text;}
selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);}else if(itemSurchargeOut===0&&bogx_axb_calcactive==='0'){selector="#bogx-parameter-axb_"+key+"_result";if(error==="result"){$(selector).addClass("bogx--warning").text(configErrors.result);}else if(error==="a_min"){$(selector).addClass("bogx--warning").text("a "+configErrors.min);}else if(error==="b_min"){$(selector).addClass("bogx--warning").text("b "+configErrors.min);}
if(formel===""){selector="#bogx-parameter-axb_"+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurchargeOut*currency_factor*tax_factor,1);selector="#bogx-parameter-axb_"+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);unit_text=parameter_unit===""?"":parametrixBasePriceHTML;title=configErrors.result+unit_text;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");title=configErrors.result;}
selector="#"+key+"_title";$(selector).addClass("bogx--warning").text(title);}else if(itemSurchargeOut!==0&&bogx_axb_calcactive==='0'){area_round=me.numberToStringDigits(area,1.0/unitFactor);selector="#bogx-parameter-axb_"+key+"_result";$(selector).removeClass("bogx--warning").text(area_round+unit);totalsurch-=itemSurchargeOut*currency_factor*tax_factor;total=parseFloat(me.opts.baseprice)+totalsurch;itemSurch=0;itemSurchargeOut=0;unit_text=parameter_unit===""?"":"="+area_round+unit;title=val1+"x"+val2+unit_text;selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);if(formel===""){aufpreisHTML=me.numberToPrice(itemSurchargeOut*currency_factor*tax_factor,1);selector="#bogx-parameter-axb_"+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector="#bogx-parameter-axb_"+key+"_results_wrap";$(selector).addClass("bogx--hidden");}}
return[totalsurch,total,itemSurchargeOut*currency_factor*tax_factor,itemSurch,title];},parametrixResultsAndSurcharges:function(key,parameter,itemSurchargeRaw,itemSurcharge,itemSurchargeOutput,gesamtpreis,totalsurcharge,parametrixBasePrice,bogx_calcactive,val,parameter_unit,article_unit,result,formel,error){var me=this;var unit,unit_text,selector,selector_prefix,result_round,parametrixBasePriceHTML,aufpreisHTML,total=gesamtpreis,totalsurch=totalsurcharge,itemSurch=itemSurcharge,title;var currency_factor=me.getCurrencyFactor();var tax_factor=me.getTaxFactor();selector_prefix=parameter==="a"?"#bogx-parameter-a_":"#bogx-parameter-b_";if(parameter_unit===""){unit=article_unit;selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");}else{unit=parameter_unit;}
if(val!==0&&formel===""){totalsurch+=itemSurchargeOutput*currency_factor*tax_factor;total+=itemSurchargeOutput*currency_factor*tax_factor;}
if((itemSurchargeRaw==='s'||itemSurchargeRaw==='$')&&bogx_calcactive==='1'&&result!==0){result_round=me.round(result,3);selector=selector_prefix+key+"_result";$(selector).removeClass("bogx--warning").text(result_round+unit);if(formel===""){selector=selector_prefix+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurcharge*currency_factor*tax_factor,1);selector=selector_prefix+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);unit_text=parameter_unit===""?"":"="+result_round+unit+parametrixBasePriceHTML;title=val+unit_text;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");unit_text=parameter_unit===""?"":"="+result_round+unit;title=val+unit_text;}
selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);}else if(result===0&&bogx_calcactive==='1'){selector=selector_prefix+key+"_result";if(error==="result"){$(selector).addClass("bogx--warning").text(configErrors.result);}else if(error==="a_min"||error==="b_min"){$(selector).addClass("bogx--warning").text("a "+configErrors.min);}
if(formel===""){selector=selector_prefix+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);selector=selector_prefix+key+"_surcharge";$(selector).addClass("bogx--warning").text(configErrors.surcharge);unit_text=parameter_unit===""?"":parametrixBasePriceHTML;title=configErrors.result+unit_text;aufpreisHTML=me.opts.currency;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");title=configErrors.result;}
selector="#"+key+"_title";$(selector).addClass("bogx--warning").text(title);}else if(itemSurchargeOutput!==0&&bogx_calcactive==='1'){result_round=me.round(result,2);selector=selector_prefix+key+"_result";$(selector).removeClass("bogx--warning").text(result_round+unit);if(formel===""){selector=selector_prefix+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor,1)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurchargeOutput*currency_factor*tax_factor,1);selector=selector_prefix+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);unit_text=parameter_unit===""?"":"="+result_round+unit+parametrixBasePriceHTML;title=val+unit_text;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");unit_text=parameter_unit===""?"":"="+result_round+unit;title=val+unit_text;}
selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);}else if(itemSurchargeOutput===0&&bogx_calcactive==='0'){selector=selector_prefix+key+"_result";if(error==="result"){$(selector).addClass("bogx--warning").text(configErrors.result);}else if(error==="a_min"){$(selector).addClass("bogx--warning").text("a "+configErrors.min);}
if(formel===""){selector=selector_prefix+key+"_baseprice";parametrixBasePriceHTML=" ["+
me.numberToPrice(parametrixBasePrice*currency_factor*tax_factor)+"/"+unit+"]";$(selector).text(parametrixBasePriceHTML);aufpreisHTML=me.numberToPrice(itemSurchargeOutput*currency_factor*tax_factor,1);selector=selector_prefix+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);unit_text=parameter_unit===""?"":parametrixBasePriceHTML;title=configErrors.result+unit_text;selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");title=configErrors.result;}
selector="#"+key+"_title";$(selector).addClass("bogx--warning").text(title);}else if(itemSurchargeOutput!==0&&bogx_calcactive==='0'){result_round=me.round(result,2);selector=selector_prefix+key+"_result";$(selector).removeClass("bogx--warning").text(result_round+unit);totalsurch-=itemSurchargeOutput*currency_factor*tax_factor;total=parseFloat(me.opts.baseprice)+totalsurcharge;itemSurch=0;unit_text=parameter_unit===""?"":"="+result_round+unit;title=val+unit_text;selector="#"+key+"_title";$(selector).removeClass("bogx--warning").text(title);if(formel===""){aufpreisHTML=me.numberToPrice(itemSurchargeOutput*currency_factor*tax_factor,1);selector=selector_prefix+key+"_surcharge";$(selector).removeClass("bogx--warning").text(aufpreisHTML);selector="#"+key+"_surcharge";$(selector).text(aufpreisHTML);}else if(formel==="0"){selector=selector_prefix+key+"_results_wrap";$(selector).addClass("bogx--hidden");}}
return[totalsurch,total,itemSurchargeOutput*currency_factor*tax_factor,itemSurch,title];},registerEvents:function(){var me=this;var selector,parent_selector,text_selector;var val,valueid,title,article_src,article_src_html;var $active_text;var selector_config='#bogx_config';window.addEventListener("unload",function(event){sessionStorage.removeItem('bogx_formel');});$.subscribe('plugin/bogxDesigner/afterInitFabric',function(plugin,obj){me.opts.designerFABRIC=obj.opts.designerFABRIC;me.updateConfigurator();});$.subscribe('plugin/swAjaxVariant/onRequestData',function(){if(sessionStorage.getItem('bogx_formel')===null){sessionStorage.setItem('bogx_formel',JSON.stringify(me.opts.formelJSON));}
me.opts.baseprice=$(selector_config).attr('data-baseprice');me.opts.baseprice_netto=$(selector_config).attr('data-baseprice_netto');if(me.opts.nullprice===1||me.opts.nullprice==="1"||me.opts.baseprice===0.01||bogx_show_prices==='0'){me.opts.baseprice="0";}else if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.baseprice_netto,10)!==0&&parseInt(me.opts.baseprice,10)!==0){me.opts.baseprice=(parseFloat(me.opts.baseprice_netto)*(1+parseFloat(me.opts.tax)*0.01)).toString();}
if(me.opts.product_image!==$(selector_config).attr('data-product_image')){me.opts.product_image=$(selector_config).attr('data-product_image');}
if($('#bogx_config').attr('data-default_shippingtime')!==me.opts.default_shippingtime){me.opts.default_shippingtime=$('#bogx_config').attr('data-default_shippingtime');}
if($('#bogx_config').attr('data-buyboxbutton_active')!==me.opts.buyboxbutton_active){me.opts.buyboxbutton_active=$('#bogx_config').attr('data-buyboxbutton_active');}
me.updateConfigurator();});$.subscribe('plugin/swCollapsePanel/onOpenPanel',function(plugin,obj){var parent_id_raw=obj.$el[0].id;var index=parent_id_raw.indexOf('_header');var parent_id=parent_id_raw.substring(0,index);var children=me.getChildrenOfParentGroup(parent_id);if(children.length>0){children.forEach(function(key,index){var detach_flag=me.opts.defaultsJSON[key][3];if(detach_flag===0){me.gridColumnHandler(key);}});}});me._on($(document),'touch click',function(event){var targetDiv=event.target;var targetDivParent=event.target.parentNode;var key;if($(targetDiv).hasClass('is--disabled')||$(targetDiv).hasClass('quantity--select')||$(targetDivParent).hasClass('quantity--select'))
{event.preventDefault();}else if($(targetDiv).hasClass('bogx--qv')||$(targetDiv).hasClass('bogx--value-icon')&&$(targetDivParent).hasClass('bogx--value-info')){var parent_obj=$(targetDivParent);if($(targetDiv).hasClass('bogx--qv')){parent_obj=$(targetDiv).closest('.bogx--value-info');}
valueid=parent_obj.attr('data-valueid');if(typeof parent_obj.attr('data-src')!=='undefined'){article_src=parent_obj.attr('data-src');article_src_html='<img src=\"'+article_src+'\" class=\"bogx--quickview-img\"/>';}
if(window.innerWidth>=1024){var box_width=bogxZoomWidth;}else{var box_width='90%';}
var data=new window.FormData();data.append("id",valueid);$.dialog({backgroundDismiss:true,closeIcon:true,type:'dark',draggable:true,boxWidth:box_width,useBootstrap:false,content:function(){var self=this;return $.ajax({url:bogx_request_values,data:data,method:'post',cache:false,contentType:false,processData:false}).done(function(response){var result=JSON.parse(response);self.setTitle(result['description']);if(typeof article_src_html!=='undefined'){self.setContent(article_src_html);self.setContentAppend(result['description_long']);}else{self.setContent(result['description_long']);}}).fail(function(){self.setContent('Sorry. Something went wrong.');});}});}else if($(targetDivParent).hasClass('group-navi')&&$(targetDiv).hasClass('next')){var group_next_index=parseInt($(targetDiv).attr('data-groupid'))+1;while($('div.bogx--config-header[data-groupid="'+group_next_index+'"]').length<=0){group_next_index+=1;}
var selector_next_group_header='div.bogx--config-header[data-groupid="'+group_next_index+'"]';$(selector_next_group_header).trigger('click');}else if($(targetDivParent).hasClass('group-navi')&&$(targetDiv).hasClass('back')){var group_back_index=parseInt($(targetDiv).attr('data-groupid'))-1;while($('div.bogx--config-header[data-groupid="'+group_back_index+'"]').length<=0){group_back_index-=1;}
var selector_back_group_header='div.bogx--config-header[data-groupid="'+group_back_index+'"]';$(selector_back_group_header).trigger('click');}else if($(targetDiv).attr('id')==='bogx_config_productimage_reset'){event.preventDefault();if($('#bogx_modal_image').length>0){$('#bogx_modal_image_element').removeClass('bogx--hidden');$('#bogx_config_productimage').addClass('bogx--hidden');}else{$('.product--image-container.image-slider').removeClass('bogx--hidden');$('#bogx_config_productimage').addClass('bogx--hidden');if($('#bogx_config_productimage').find('#bogx_sticky_panel').length>0){$('.product--image-container.image-slider').append($('#bogx_sticky_panel'));}}}else if($(targetDivParent).hasClass('bogx--config')){var datatype=$(targetDivParent).attr("data-datatype");var multiline_flag=false;if(typeof checkDesigner!=='undefined'&&checkDesigner==='1'){if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textlines!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="font_text"]';if($(text_selector).length>0){$active_text=$(text_selector);}else{text_selector='.bogx--input.is--active[data-datatype="text_date"]';if($(text_selector).length>0){$active_text=$(text_selector);}else{text_selector='.bogx--input.is--active[data-datatype="text_time"]';if($(text_selector).length>0){$active_text=$(text_selector);}}}}
if(typeof me.opts.designerFABRIC.curvedtextlines!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="curved_text"]';if($(text_selector).length>0){$active_text=$(text_selector);}}
if(typeof me.opts.designerFABRIC.textboxes!=='undefined'){multiline_flag=true;text_selector='.bogx--area.is--active[data-datatype="text_box"]';if($(text_selector).length>0){$active_text=$(text_selector);}}
if(typeof me.opts.designerFABRIC.textboxessvg!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="text_boxsvg"]';if($(text_selector).length>0){$active_text=$(text_selector);}}}}
if(datatype==='radiobutton'){if($(event.target).is("label")){event.preventDefault();}else if($(event.target).is("input")){event.stopPropagation();}
key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][6]=$(targetDivParent).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}else if(datatype==='image'||datatype==='imagetitle'||datatype==='imagetitle_price'){key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][6]=$(targetDivParent).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}else if(datatype==='imageproduct'){key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][6]=$(targetDivParent).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}else if(datatype==='color'){key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}else if(datatype==='check'){key=$(targetDivParent).attr("data-groupid");if($(targetDiv).is("input")){if($(targetDiv).prop("checked")){me.opts.defaultsJSON[key][1]="1";me.opts.defaultsJSON[key][2]=$(targetDiv).attr("data-valueid");me.opts.defaultsJSON[key][6]=$(targetDiv).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(targetDiv).attr("data-ocb");me.detachSelectorHandler(targetDiv);}else{me.opts.defaultsJSON[key][1]="0";me.opts.defaultsJSON[key][2]=$("#"+key+"_hidden").attr("data-valueid");me.opts.defaultsJSON[key][6]="0";me.opts.defaultsJSON[key][7]=$("#"+key+"_hidden").attr("data-ocb");var selector_check_0="#"+key+"_hidden";me.detachSelectorHandler(selector_check_0);}}}else if(datatype==='check_set'){key=$(targetDivParent).attr("data-groupid");if($(targetDiv).is("input")&&$(targetDiv).attr('type')==='checkbox'){var value_id=$(targetDiv).attr('data-valueid');var $selector_q=$('#'+value_id+"_checkbox")
var quantity=parseInt($selector_q.attr('data-quantity'));if(isNaN(quantity)||quantity===0)quantity=1;var unit="";var dispatch=$selector_q.attr('data-dispatch');var delivery=$selector_q.attr('data-delivery');if(typeof delivery==='undefined')delivery="";var ocb=$selector_q.attr('data-ocb');if(typeof ocb==='undefined')ocb="";var val_json=me.opts.defaultsJSON[key][1];var value_id_arr=me.opts.defaultsJSON[key][2];var unit_json=me.opts.defaultsJSON[key][4];var dispatch_json=me.opts.defaultsJSON[key][5];var delivery_json=me.opts.defaultsJSON[key][6];var ocb_json=me.opts.defaultsJSON[key][7];if($(targetDiv).prop("checked")){val_json[value_id]=quantity;value_id_arr.push(value_id);unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;}else{delete val_json[value_id];var index=value_id_arr.indexOf(value_id);if(index>-1)value_id_arr.splice(index,1);delete unit_json[value_id];delete dispatch_json[value_id];delete delivery_json[value_id];delete ocb_json[value_id];me.viewInCalculator(value_id,'#',0,"","");}
me.opts.defaultsJSON[key][1]=val_json;me.opts.defaultsJSON[key][2]=value_id_arr.sort();me.opts.defaultsJSON[key][4]=unit_json;me.opts.defaultsJSON[key][5]=dispatch_json;me.opts.defaultsJSON[key][6]=delivery_json;me.opts.defaultsJSON[key][7]=ocb_json;}}else if(datatype==='quantity_check'){key=$(targetDivParent).attr("data-groupid");if($(targetDiv).is("input")&&$(targetDiv).attr('type')==='checkbox'){var value_id=$(targetDiv).attr('data-valueid');var $selector_q=$('#bogx_quantity_'+value_id);var $selector_u=$('#bogx_quantity_unit_'+value_id);var $selector_w=$('#bogx_quantity_minmax_'+value_id+"_wrap");var $selector_nav=$selector_q.next();var quantity=$selector_q.val();var unit=$selector_q.attr('data-unit');if(typeof unit==='undefined')unit="";var dispatch=$selector_q.attr('data-dispatch');var delivery=$selector_q.attr('data-delivery');if(typeof delivery==='undefined')delivery="";var ocb=$selector_q.attr('data-ocb');if(typeof ocb==='undefined')ocb="";var val_json=me.opts.defaultsJSON[key][1];var value_id_arr=me.opts.defaultsJSON[key][2];var unit_json=me.opts.defaultsJSON[key][4];var dispatch_json=me.opts.defaultsJSON[key][5];var delivery_json=me.opts.defaultsJSON[key][6];var ocb_json=me.opts.defaultsJSON[key][7];if($(targetDiv).prop("checked")){val_json[value_id]=quantity;value_id_arr.push(value_id);unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;}else{delete val_json[value_id];var index=value_id_arr.indexOf(value_id);if(index>-1)value_id_arr.splice(index,1);delete unit_json[value_id];delete dispatch_json[value_id];delete delivery_json[value_id];delete ocb_json[value_id];$selector_q.hide(1000);$selector_u.hide(1000);$selector_w.hide(1000);$selector_nav.hide(1000);me.viewInCalculator(value_id,'#',0,"","");}
me.opts.defaultsJSON[key][1]=val_json;me.opts.defaultsJSON[key][2]=value_id_arr.sort();me.opts.defaultsJSON[key][4]=unit_json;me.opts.defaultsJSON[key][5]=dispatch_json;me.opts.defaultsJSON[key][6]=delivery_json;me.opts.defaultsJSON[key][7]=ocb_json;}}else if(datatype==='article_virtual_multi'){key=$(targetDivParent).attr("data-groupid");var value_id=$(targetDiv).attr('data-valueid');var $selector_q=$('#bogx_quantity_'+value_id)
var quantity=$selector_q.val();var unit=$selector_q.attr('data-unit');if(typeof unit==='undefined')unit="";var dispatch=$(targetDivParent).attr('data-dispatch');var delivery=$(targetDivParent).attr('data-delivery');if(typeof delivery==='undefined')delivery="";var ocb=$(targetDivParent).attr('data-ocb');if(typeof ocb==='undefined')ocb="";var val_json=me.opts.defaultsJSON[key][1];var value_id_arr=me.opts.defaultsJSON[key][2];var unit_json=me.opts.defaultsJSON[key][4];var dispatch_json=me.opts.defaultsJSON[key][5];var delivery_json=me.opts.defaultsJSON[key][6];var ocb_json=me.opts.defaultsJSON[key][7];selector='#'+value_id+'_wrap';var selector2='#'+value_id+'_div';if($(selector).hasClass('selected')){$(selector).removeClass("selected");$(selector2).removeClass("is--selected");}else{$(selector).addClass("selected");$(selector2).addClass("is--selected");}
if($(selector).hasClass("selected")){val_json[value_id]=quantity;value_id_arr.push(value_id);unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;$selector_q.removeClass('is--disabled');$selector_q.prop('disabled',false);}else{delete val_json[value_id];var index=value_id_arr.indexOf(value_id);if(index>-1)value_id_arr.splice(index,1);delete unit_json[value_id];delete dispatch_json[value_id];delete delivery_json[value_id];delete ocb_json[value_id];$selector_q.addClass('is--disabled');$selector_q.prop('disabled',true);me.viewInCalculator(value_id,'#',0,"","");}
me.opts.defaultsJSON[key][1]=val_json;me.opts.defaultsJSON[key][2]=value_id_arr.sort();me.opts.defaultsJSON[key][4]=unit_json;me.opts.defaultsJSON[key][5]=dispatch_json;me.opts.defaultsJSON[key][6]=delivery_json;me.opts.defaultsJSON[key][7]=ocb_json;me.detachSelectorHandler(targetDivParent);}else if(datatype==='article_virtual_single'){key=$(targetDivParent).attr("data-groupid");if($(targetDiv).hasClass('icon--search')){var value_id=$(targetDivParent).attr('data-valueid');}else{var value_id=$(targetDiv).attr('data-valueid');}
var $selector_q=$('#bogx_quantity_'+value_id)
var quantity=$selector_q.val();var unit=$selector_q.attr('data-unit');if(typeof unit==='undefined')unit="";var dispatch=$(targetDivParent).attr('data-dispatch');var delivery=$(targetDivParent).attr('data-delivery');if(typeof delivery==='undefined')delivery="";var ocb=$(targetDivParent).attr('data-ocb');if(typeof ocb==='undefined')ocb="";var value_id_arr_old=me.opts.defaultsJSON[key][2];if(value_id_arr_old.length>0){var value_id_old=value_id_arr_old[0];if(value_id_old!==value_id){var selector_old='#'+value_id_old+'_wrap';var selector2_old='#'+value_id_old+'_div';$(selector_old).removeClass("selected");$(selector2_old).removeClass("is--selected");me.viewInCalculator(value_id_old,'#',0,"","");}}
var val_json={};var value_id_arr=[];var unit_json={};var dispatch_json={};var delivery_json={};var ocb_json={};selector='#'+value_id+'_wrap';var selector2='#'+value_id+'_div';if($(selector).hasClass('selected')){$(selector).removeClass("selected");$(selector2).removeClass("is--selected");}else{$(selector).addClass("selected");$(selector2).addClass("is--selected");}
if($(selector).hasClass("selected")){val_json[value_id]=quantity;value_id_arr.push(value_id);unit_json[value_id]=unit;dispatch_json[value_id]=dispatch;delivery_json[value_id]=delivery;ocb_json[value_id]=ocb;$selector_q.removeClass('is--disabled');$selector_q.prop('disabled',false);}else{$selector_q.addClass('is--disabled');$selector_q.prop('disabled',true);me.viewInCalculator(value_id,'#',0,"","");}
me.opts.defaultsJSON[key][1]=val_json;me.opts.defaultsJSON[key][2]=value_id_arr;me.opts.defaultsJSON[key][4]=unit_json;me.opts.defaultsJSON[key][5]=dispatch_json;me.opts.defaultsJSON[key][6]=delivery_json;me.opts.defaultsJSON[key][7]=ocb_json;me.detachSelectorHandler(targetDivParent);}else if(datatype==='multiupload-designer'){var file_id=$(targetDiv).attr('id');parent_selector='#bogx_wrap_'+file_id;var msg1=$(parent_selector).attr('data-msg1');var msg2=$(parent_selector).attr('data-msg2');var select_arr=$("#bogx_multiupload_files_wrap_"+key+" .bogx--designer-file-wrap");if(select_arr.length>0){select_arr.each(function(){if($(this).hasClass('selected')){if($(this).find('img').attr('id')!==file_id){$(this).removeClass("selected");$(this).find('img').attr('title',msg1);}}});}
if($(parent_selector).hasClass('selected')){$(parent_selector).removeClass("selected");$(targetDiv).attr('title',msg1);}else{$(parent_selector).addClass("selected");$(targetDiv).attr('title',msg2);}}else if(datatype==='shape'||datatype==='shape_img'||datatype==='background'){key=$(targetDivParent).attr("data-groupid");valueid=$(targetDivParent).attr("data-value");if($(targetDivParent).hasClass('selected')){$(targetDivParent).removeClass("selected");me.opts.defaultsJSON[key][1]="";me.opts.defaultsJSON[key][2]="";me.opts.defaultsJSON[key][7]="";}else{var selector_wrap='#'+key;if(typeof $(selector_wrap).attr('data-grouplist')!=='undefined'&&$(selector_wrap).attr('data-grouplist')!==""){var grouplist_array=$(selector_wrap).attr('data-grouplist').split(',');for(var i=0;i<grouplist_array.length;i++){var grouplist_key=grouplist_array[i];me.opts.defaultsJSON[grouplist_key][1]="";me.opts.defaultsJSON[grouplist_key][2]="";me.opts.defaultsJSON[key][7]="";var selector_grouplist='div.bogx--config.image[data-groupid="'+grouplist_key+'"]';$(selector_grouplist).removeClass("selected");}}
me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=valueid;me.opts.defaultsJSON[key][6]=$(targetDivParent).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}}else if(datatype==='font'){key=$(targetDivParent).attr("data-groupid");val=$(targetDiv).attr("data-value");me.opts.defaultsJSON[key][1]=val;me.opts.defaultsJSON[key][2]=$(targetDiv).attr("data-valueid");selector="ul#font_"+key+"_list li[data-value='"+val+"']";title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');if(multiline_flag){if(typeof $active_text!=='undefined'){$active_text.attr("data-fontname",title);}else{console.log("*** NOTE: select/activate your Text-Field first");$.alert({title:globalErrors['note_title'],content:globalErrors['select_text_first'],useBootstrap:false,boxWidth:'300px',});}}
me.detachSelectorHandler(targetDivParent);}else if(datatype==='font_color'){key=$(targetDivParent).attr("data-groupid");val=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][1]=val;me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");selector='div.bogx--config.image[data-groupid="'+key+'"]'+'[data-value="'+val+'"]';title=$(selector).attr("data-title");title=me.cutStringByChar(title,'+');if(multiline_flag){if(typeof $active_text!=='undefined'){$active_text.attr("data-colorname",title);}else{console.log("*** NOTE: select/activate your Text-Field first");$.alert({title:globalErrors['note_title'],content:globalErrors['select_text_first'],useBootstrap:false,boxWidth:'300px',});}}
me.detachSelectorHandler(targetDivParent);}else if(datatype==='shape_color'||datatype==='background_color'){key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}else if(datatype==='shape_flipx'||datatype==='shape_flipy'){key=$(targetDivParent).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(targetDivParent).attr("data-value");me.opts.defaultsJSON[key][2]=$(targetDivParent).attr("data-valueid");me.opts.defaultsJSON[key][7]=$(targetDivParent).attr("data-ocb");me.detachSelectorHandler(targetDivParent);}
me.updateConfigurator();}});me._on($(document),'change',function(event){var target=$(event.target);var key,selector;var multiline_flag=false;if(typeof checkDesigner!=='undefined'&&checkDesigner==='1'){if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textlines!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="font_text"]';if($(text_selector).length>0){$active_text=$(text_selector);}else{text_selector='.bogx--input.is--active[data-datatype="text_date"]';if($(text_selector).length>0){$active_text=$(text_selector);}else{text_selector='.bogx--input.is--active[data-datatype="text_time"]';if($(text_selector).length>0){$active_text=$(text_selector);}}}}
if(typeof me.opts.designerFABRIC.curvedtextlines!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="curved_text"]';if($(text_selector).length>0){$active_text=$(text_selector);}}
if(typeof me.opts.designerFABRIC.textboxes!=='undefined'){multiline_flag=true;text_selector='.bogx--area.is--active[data-datatype="text_box"]';if($(text_selector).length>0){$active_text=$(text_selector);}}
if(typeof me.opts.designerFABRIC.textboxessvg!=='undefined'){multiline_flag=true;text_selector='.bogx--input.is--active[data-datatype="text_boxsvg"]';if($(text_selector).length>0){$active_text=$(text_selector);}}}}
if(target.is('select')&&target.is('.quantity--select.bogx--config')){key=target.attr('name');selector="#select_"+key+" option:selected";if(me.opts.defaultsJSON[key][1]!==$(selector).val()){me.opts.defaultsJSON[key][1]=$(selector).val();me.opts.defaultsJSON[key][2]=$(selector).attr("data-valueid");me.opts.defaultsJSON[key][6]=$(selector).attr("data-delivery");me.opts.defaultsJSON[key][7]=$(selector).attr("data-ocb");if($(target).attr("data-datatype")==="font_size"){title=$(selector).val();if(multiline_flag){if(typeof $active_text!=='undefined'){$active_text.attr("data-fontsize",title);}else{console.log("*** NOTE: select/activate your Text-Field first");$.alert({title:globalErrors['note_title'],content:globalErrors['select_text_first'],useBootstrap:false,boxWidth:'300px',});}}}
me.detachSelectorHandler(selector);}
me.updateConfigurator();}else if(target.is('input')&&target.attr('type')==='hidden'&&(target.attr("data-datatype")==="multiupload"||target.attr("data-datatype")==="multiupload-designer")){key=target.attr("data-groupid");me.opts.defaultsJSON[key][1]=target.val();me.opts.defaultsJSON[key][2]=target.attr("data-valueid");me.updateConfigurator();}});me._on($(document),'input textarea',function(event){var target=event.target;var key,index,error=false;var bogx_a_max,bogx_b_max;if($(target).attr("data-datatype")==='text'||$(target).attr("data-datatype")==='text-area'||$(target).attr("data-datatype")==='text_date'||$(target).attr("data-datatype")==='text_time'||$(target).attr("data-datatype")==='font_text'||$(target).attr("data-datatype")==='curved_text'||$(target).attr("data-datatype")==='text_box'||$(target).attr("data-datatype")==='text_boxsvg'){key=$(target).attr("data-groupid");me.opts.defaultsJSON[key][1]=$(target).val();me.opts.defaultsJSON[key][2]=$(target).attr("data-valueid");me.opts.defaultsJSON[key][7]=$(target).attr("data-ocb");me.updateConfigurator();}else if($(target).attr('type')==='number'){var val_0,val_1,selector_0,selector_1,a_ratio,b_ratio,step,qMin,qMax,vMax;if($(target).attr("data-datatype")==="quantity-total"||$(target).attr("data-datatype")==="quantity-graduated"){key=$(target).attr("data-groupid");val_0=parseInt($(target).val(),10);step=parseInt($(target).attr('step'),10);qMin=$(target).attr("min");qMax=$(target).attr("max");qMin=typeof qMin==='undefined'||qMin===""||qMin==="0"?1:parseInt(qMin,10);qMax=typeof qMax==='undefined'||qMax===""||qMax==="0"?0:parseInt(qMax,10);if(qMax>0&&val_0>qMax){val_0=qMax;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==$(target).val()){$(target).val(val_0);}
me.opts.defaultsJSON[key][1]=val_0;me.updateConfigurator();}else if($(target).attr("data-datatype")==='quantity_check'||$(target).attr("data-datatype")==='article_virtual_multi'||$(target).attr("data-datatype")==='article_virtual_single'||$(target).attr("data-datatype")==='acc_virtual_multi'||$(target).attr("data-datatype")==='acc_virtual_single'){key=$(target).attr("data-groupid");valueid=$(target).attr("data-valueid");val_0=parseInt($(target).val(),10);step=parseInt($(target).attr('step'),10);qMin=$(target).attr("min");qMax=$(target).attr("max");qMin=typeof qMin==='undefined'||qMin===""||qMin==="0"?1:parseInt(qMin,10);qMax=typeof qMax==='undefined'||qMax===""||qMax==="0"?0:parseInt(qMax,10);if(qMax>0&&val_0>qMax){val_0=qMax;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==$(target).val()){$(target).val(val_0);}
var val_json=me.opts.defaultsJSON[key][1];val_json[valueid]=val_0;me.opts.defaultsJSON[key][1]=val_json;me.updateConfigurator();}else if($(target).attr("data-datatype")==='axb_parameter'||$(target).attr("data-datatype")==='axb_free_parameter'){key=$(target).attr("data-groupid");index=parseInt($(target).attr("data-index"),10);var bogx_axb_ratio=$(target).attr("data-ratio");if(bogx_axb_ratio!=='')bogx_axb_ratio=parseFloat(bogx_axb_ratio);if(bogx_axb_ratio===0||bogx_axb_ratio===''){val_0=parseFloat($(target).val());var max=parseFloat($(target).attr('max'));step=parseFloat($(target).attr('step'));if(max>0&&val_0>max){val_0=max;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==parseFloat($(target).val())){$(target).val(val_0);}
me.opts.defaultsJSON[key][1][index]=val_0;me.updateConfigurator();}else{a_ratio=bogx_axb_ratio;b_ratio=1.0/a_ratio;if($(target).attr("data-datatype")==="axb_parameter"){selector_0="#bogx-parameter-axb_"+me.opts.defaultsJSON[key][2][0];selector_1="#bogx-parameter-axb_"+me.opts.defaultsJSON[key][2][1];}else{selector_0="#axb_free_"+me.opts.defaultsJSON[key][2][0];selector_1="#axb_free_"+me.opts.defaultsJSON[key][2][1];}
var step_0=parseFloat($(selector_0).attr('step'));bogx_a_max=($(selector_0).attr('max')==='0')?Number.MAX_SAFE_INTEGER:parseInt($(selector_0).attr('max'),10);var bogx_a_min=parseInt($(selector_0).attr("min"),10);var step_1=parseFloat($(selector_1).attr('step'));bogx_b_max=($(selector_1).attr('max')==='0')?Number.MAX_SAFE_INTEGER:parseInt($(selector_1).attr('max'),10);var bogx_b_min=parseInt($(selector_1).attr("min"),10);if(a_ratio>1){if(index===0){val_0=parseFloat($(target).val());if(bogx_a_max>0&&val_0>bogx_a_max){val_0=bogx_a_max;}else if(val_0<bogx_a_min){error=true;}
val_1=me.roundWithStep(val_0*a_ratio,step_1);}else if(index===1){val_1=parseFloat($(target).val());if(bogx_a_max>0&&val_1>bogx_a_max*a_ratio){val_1=bogx_a_max*a_ratio;}else if(val_1<bogx_b_min){error=true;}
val_0=me.roundWithStep(val_1*b_ratio,step_0);}}else{if(index===0){val_0=parseFloat($(target).val());if(bogx_b_max>0&&val_0>bogx_b_max*b_ratio){val_0=bogx_b_max*b_ratio;}else if(val_0<bogx_a_min){error=true;}
val_1=me.roundWithStep(val_0*a_ratio,step_1);}else if(index===1){val_1=parseFloat($(target).val());if(bogx_b_max>0&&val_1>bogx_b_max){val_1=bogx_b_max;}else if(val_1<bogx_b_min){error=true;}
val_0=me.roundWithStep(val_1*b_ratio,step_0);}}
if(val_0!==parseFloat($(selector_0).val())){$(selector_0).val(val_0);}
if(val_1!==parseFloat($(selector_1).val())){$(selector_1).val(val_1);}
if(!error){me.opts.defaultsJSON[key][1][0]=val_0;me.opts.defaultsJSON[key][1][1]=val_1;}}
me.updateConfigurator();}else if($(target).attr("data-datatype")==='a_parameter'){key=$(target).attr("data-groupid");val_0=parseFloat($(target).val());step=parseFloat($(target).attr('step'));bogx_a_max=($(target).attr('max')==='0')?Number.MAX_SAFE_INTEGER:parseInt($(target).attr('max'),10);if(bogx_a_max>0&&val_0>bogx_a_max){val_0=bogx_a_max;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==parseFloat($(target).val())){$(target).val(val_0);}
me.opts.defaultsJSON[key][1]=val_0;me.updateConfigurator();}else if($(target).attr("data-datatype")==='b_parameter'){key=$(target).attr("data-groupid");val_0=parseFloat($(target).val());step=parseFloat($(target).attr('step'));bogx_b_max=($(target).attr('max')==='0')?Number.MAX_SAFE_INTEGER:parseInt($(target).attr('max'),10);if(bogx_b_max>0&&val_0>bogx_b_max){val_0=bogx_b_max;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==parseFloat($(target).val())){$(target).val(val_0);}
me.opts.defaultsJSON[key][1]=val_0;me.updateConfigurator();}else if($(target).attr("data-datatype")==='free_parameter'){key=$(target).attr("data-groupid");val_0=parseFloat($(target).val());step=parseFloat($(target).attr('step'));vMax=$(target).attr("max");vMax=typeof vMax==='undefined'||vMax===""||vMax==="0"?0:parseFloat(vMax);if(vMax>0&&val_0>vMax){val_0=vMax;}else{val_0=me.rundByStep(val_0,step);}
if(val_0!==parseFloat($(target).val())){$(target).val(val_0);}
me.opts.defaultsJSON[key][1]=val_0;me.updateConfigurator();}}});me._on($(document),"blur","input",function(event){var target=event.target;var key,valueid,value,round_value="false",step_str,step,dez=0,multiplicator;var data_type=$(target).attr("data-datatype");if(data_type==='free_parameter'||data_type==='a_parameter'||data_type==='b_parameter'||data_type==='axb_parameter'||data_type==='axb_free_parameter'||data_type==='quantity-total'||data_type==='quantity-graduated'||data_type==='quantity_check'||data_type==='article_virtual_single'||data_type==='article_virtual_multi'){key=$(target).attr("data-groupid");value=$(target).val();if(data_type==="free_parameter"||data_type==="axb_free_parameter"){round_value=$(target).attr("data-round");}else{round_value="true";}
if($(target).attr("step")!==undefined){step_str=$(target).attr("step");var arr=step_str.split('.');if(arr.length>1){dez=arr[1].length;}
step=parseFloat(step_str);}else{step=0;}
if(round_value==="true"&&step!==0){multiplicator=Math.ceil(value/step);if(step*multiplicator>value){value=me.round(step*multiplicator,dez);$(target).val(value);if(data_type==='axb_parameter'||data_type==='axb_free_parameter'){var index=parseInt($(target).attr("data-index"),10);me.opts.defaultsJSON[key][1][index]=value;}else if(data_type==='quantity_check'||data_type==='article_virtual_single'||data_type==='article_virtual_multi')
{valueid=$(target).attr('data-valueid');me.opts.defaultsJSON[key][1][valueid]=value;}else{me.opts.defaultsJSON[key][1]=value;}
me.updateConfigurator();}}}});me._on($(document),"touch focus click","input, textarea",function(event){var target=event.target;if($(target).attr("data-datatype")==='text'||$(target).attr("data-datatype")==='text-area'||$(target).attr("data-datatype")==='text_date'||$(target).attr("data-datatype")==='text_time'||$(target).attr("data-datatype")==='font_text'||$(target).attr("data-datatype")==='curved_text'||$(target).attr("data-datatype")==='text_box'||$(target).attr("data-datatype")==='text_boxsvg')
{me.opts.initializeUpdate=false;var data_type=$(target).attr("data-datatype");var key=$(target).attr("data-groupid");var multiline_flag=false;var font,color,fontsize;if(typeof checkDesigner!=='undefined'&&checkDesigner==='1'){multiline_flag=false;if(typeof me.opts.designerFABRIC!=='undefined'){if(typeof me.opts.designerFABRIC.textlines!=='undefined'){if(typeof me.opts.designerFABRIC.textlines[key]!=='undefined'){multiline_flag=true;if(data_type==='font_text'){text_selector='#text_'+key;}else if(data_type==='text_date'){text_selector='#text_date_'+key;}else if(data_type==='text_time'){text_selector='#text_time_'+key;}
font=me.opts.designerFABRIC.textlines[key].fontFamily;color=me.opts.designerFABRIC.textlines[key].fill;fontsize=me.opts.designerFABRIC.textlines[key].fontSize;}}
if(typeof me.opts.designerFABRIC.curvedtextlines!=='undefined'){if(typeof me.opts.designerFABRIC.curvedtextlines[key]!=='undefined'){multiline_flag=true;text_selector='#curved_text_'+key;font=me.opts.designerFABRIC.curvedtextlines[key].fontFamily;color=me.opts.designerFABRIC.curvedtextlines[key].fill;fontsize=me.opts.designerFABRIC.curvedtextlines[key].fontSize;}}
if(typeof me.opts.designerFABRIC.textboxes!=='undefined'){if(typeof me.opts.designerFABRIC.textboxes[key]!=='undefined'){multiline_flag=true;text_selector='#textbox_'+key;font=me.opts.designerFABRIC.textboxes[key].fontFamily;color=me.opts.designerFABRIC.textboxes[key].fill;fontsize=me.opts.designerFABRIC.textboxes[key].fontSize;}}
if(typeof me.opts.designerFABRIC.textboxessvg!=='undefined'){if(typeof me.opts.designerFABRIC.textboxessvg[key]!=='undefined'){multiline_flag=true;text_selector='#textboxsvg_'+key;font=me.opts.designerFABRIC.textboxessvg[key].fontFamily;color=me.opts.designerFABRIC.textboxessvg[key].fill;}}}}
if(multiline_flag){var fontpicker_key=$('.bogx--fonts-list').attr('data-groupid');var colorpicker_key=$('.bogx--config-fontcolor-wrap').attr('id');var fontsize_key=$('.bogx--config-fontsize-wrap').attr('id');if(typeof fontpicker_key!=='undefined'){var fontpicker_value_id=$('#font_'+fontpicker_key+'_list').find('[data-value="'+font+'"]').attr('data-valueid');if(typeof fontpicker_value_id!=='undefined'){me.opts.defaultsJSON[fontpicker_key][1]=font;me.opts.defaultsJSON[fontpicker_key][2]=fontpicker_value_id;}}
if(typeof colorpicker_key!=='undefined'){var colorpicker_value_id=$('#'+colorpicker_key).find('[data-value="'+color+'"]').attr('data-valueid');if(typeof colorpicker_value_id!=='undefined'){me.opts.defaultsJSON[colorpicker_key][1]=color;me.opts.defaultsJSON[colorpicker_key][2]=colorpicker_value_id;}}
if(typeof fontsize_key!=='undefined'){var fontsize_value_id=$('#'+fontsize_key).find('[data-value="'+fontsize+'"]').attr('data-valueid');if(typeof fontsize_value_id!=='undefined'){me.opts.defaultsJSON[fontsize_key][1]=fontsize;me.opts.defaultsJSON[fontsize_key][2]=fontsize_value_id;}}
$('*[data-datatype="font_text"]').removeClass('is--active');$('*[data-datatype="text_date"]').removeClass('is--active');$('*[data-datatype="text_time"]').removeClass('is--active');$('*[data-datatype="curved_text"]').removeClass('is--active');$('*[data-datatype="text_box"]').removeClass('is--active');$('*[data-datatype="text_boxsvg"]').removeClass('is--active');$(text_selector).addClass('is--active');me.updateConfigurator();}}});$.publish('plugin/bogxProductConfigurator/afterRegisterEvents',[me]);},changeProductImage:function(selector){var me=this;var modal_image_flag=0;if($('#bogx_modal_image').length>0){modal_image_flag=1;}
var imgsrc=$(selector).attr('data-source');var imgtitle=$(selector).attr('data-title');var divHtml='<div id=\"bogx_config_productimage\" class=\"product--image-container\" >';divHtml+='</div>';var imgHtml='<div class=\"bogx--image-media\"> <img id=\"bogx_product_img\" src=\"'+imgsrc+'\"';imgHtml+='border=\"0\"';imgHtml+='alt=\"'+imgtitle+'\"';imgHtml+='title=\"'+imgtitle+'\"></div>';imgHtml+='<div class=\"bogx--image-title\">'+imgtitle+'</div>';var resetBtnHtml='<div class=\"bogx--config-productimage-reset\">';resetBtnHtml+='<a id=\"bogx_config_productimage_reset\" href=\"\" class=\"btn is--icon-right reset--button\">';resetBtnHtml+=imagesproduct_btn_title+'<i class=\"icon--cycle\"></i>';resetBtnHtml+='</a></div>';if(modal_image_flag===0){if($('#bogx_config_productimage').length>0){$('#bogx_config_productimage').find('#bogx_product_img').attr({'src':imgsrc,'alt':imgtitle,'title':imgtitle});$('#bogx_config_productimage .bogx--image-title').html(imgtitle);}else{$('.product--image-container.image-slider').before(divHtml);$('#bogx_config_productimage').html(imgHtml+resetBtnHtml);}
if($('#bogx_config_productimage').hasClass('bogx--hidden')){$('#bogx_config_productimage').removeClass('bogx--hidden');}
if(!$('.product--image-container.image-slider').hasClass('bogx--hidden')){$('.product--image-container.image-slider').addClass('bogx--hidden');}
var bogxImageLoaded=false;waitForImageLoad('#bogx_config_productimage');function waitForImageLoad(imgSelector){bogxImageLoaded=$(imgSelector).find('#bogx_product_img').prop("complete")&&$(imgSelector).find('#bogx_product_img').prop("naturalWidth")!==0;if(!bogxImageLoaded){setTimeout(function(){waitForImageLoad('#bogx_config_productimage');},100);return;}
if($('.product--image-container').find('#bogx_sticky_panel').length>0){$("#bogx_sticky_panel").trigger("sticky_kit:detach");$('#bogx_config_productimage').append($('#bogx_sticky_panel'));}
var sticky=$('.bogx--config-price-wrap').attr('data-sticky');if(sticky==="1"){if(window.innerWidth>=1024){$("#bogx_sticky_panel").stick_in_parent({parent:".product--detail-upper",recalc_every:1});}else{$("#bogx_sticky_panel").trigger("sticky_kit:detach");}}}}else{divHtml='<span id=\"bogx_config_productimage\" class=\"bogx--image-element\" >';divHtml+='</span>';imgHtml='<span class=\"image--media\"> <img id=\"bogx_product_img\" src=\"'+imgsrc+'\"';imgHtml+='border=\"0\"';imgHtml+='alt=\"'+imgtitle+'\"';imgHtml+='title=\"'+imgtitle+'\"></span>';imgHtml+='<span class=\"image--title\">'+imgtitle+'</span>';if($('#bogx_config_productimage').length>0){$('#bogx_config_productimage').find('#bogx_product_img').attr({'src':imgsrc,'alt':imgtitle,'title':imgtitle});$('#bogx_config_productimage .image--title').html(imgtitle);}else{$('#bogx_modal_image_element').before(divHtml);$('#bogx_config_productimage').html(imgHtml+resetBtnHtml);}
if($('#bogx_config_productimage').hasClass('bogx--hidden')){$('#bogx_config_productimage').removeClass('bogx--hidden');}
if(!$('#bogx_modal_image_element').hasClass('bogx--hidden')){$('#bogx_modal_image_element').addClass('bogx--hidden');}}},changeProductImageFix:function(img){var me=this;var imgsrc;var selector_config='#bogx_config';var selector_image='#bogx_config_productimage';var selector_sticky="#bogx_sticky_panel";var selector_slider='.product--image-container.image-slider';var selector_image_modal='#bogx_modal_image_element';if(img.substr(0,4)==='http'){imgsrc=img;}else{var imgpath=$(selector_config).attr('data-images_path');imgsrc=imgpath+img;}
if(imgsrc!==$(selector_config).attr('data-product_image')){$(selector_config).attr('data-product_image',imgsrc);me.opts.product_image=imgsrc;}
var modal_image_flag=0;if($('#bogx_modal_image').length>0){modal_image_flag=1;}
var divHtml='<div id=\"bogx_config_productimage\" class=\"product--image-container\" >';divHtml+='</div>';var imgHtml='<div class=\"bogx--image-media\"> <img id=\"bogx_product_img\" src=\"'+imgsrc+'\" alt=\"\"></div>';if(modal_image_flag===0){if($(selector_image).length>0){$(selector_image).find('#bogx_product_img').attr({'src':imgsrc});}else{$(selector_slider).before(divHtml);$(selector_image).html(imgHtml);}
if($(selector_image).hasClass('bogx--hidden')){$(selector_image).removeClass('bogx--hidden');}
if($('.product--image-container').find(selector_sticky).length>0){$(selector_sticky).trigger("sticky_kit:detach");$(selector_image).append($(selector_sticky));}
if(!$(selector_slider).hasClass('bogx--hidden')){$(selector_slider).addClass('bogx--hidden');}
var sticky=$('.bogx--config-price-wrap').attr('data-sticky');if(sticky==="1"){if(me.waitForElement(selector_sticky,500)){if(window.innerWidth>=1024){$(selector_sticky).stick_in_parent({parent:".product--detail-upper",recalc_every:1});}else{$(selector_sticky).trigger("sticky_kit:detach");}}}}else{divHtml='<span id=\"bogx_config_productimage\" class=\"bogx--image-element\" >';divHtml+='</span>';imgHtml='<span class=\"image--media\"> <img id=\"bogx_product_img\" src=\"'+imgsrc+'\" alt=\"\"></span>';if($(selector_image).length>0){$(selector_image).find('#bogx_product_img').attr({'src':imgsrc});}else{$(selector_image_modal).before(divHtml);$(selector_image).html(imgHtml);}
if($(selector_image).hasClass('bogx--hidden')){$(selector_image).removeClass('bogx--hidden');}
if(!$(selector_image_modal).hasClass('bogx--hidden')){$(selector_image_modal).addClass('bogx--hidden');}}},waitForElement:function(selector,time){var me=this;if(document.querySelector(selector)!=null){return true;}
else{setTimeout(function(){me.waitForElement(selector,time);},time);}},chargingQuantityGraduated:function(quantity_json,value){var me=this;if(!$.isEmptyObject(quantity_json)){for(var i=0,keys=Object.keys(quantity_json);i<keys.length;i++){if(quantity_json.hasOwnProperty(keys[i])){if(keys[i+1]){if(value>=parseInt(keys[i],10)&&value<parseInt(keys[i+1],10)){return parseFloat(quantity_json[keys[i]]);}}else{return parseFloat(quantity_json[keys[i]]);}}else{return 0;}}}else{return 0;}},quantityHandler:function(total_flag){var quantity=1;if(total_flag===1){if($('div.buybox--quantity').length>0){$('div.buybox--quantity').remove();$('button.buybox--button').addClass('bogx--fullsize');if($('#bogx_add_dcl').length>0){$('#bogx_add_dcl').addClass('bogx--fullsize');}}
if($('div.buybox--quantity-label').length>0){$('div.buybox--quantity-label').remove();}
var sQuantity=$('input[name="sQuantity"]');if(sQuantity.length>0){sQuantity.val(quantity);}else{var inputHiddenAdd=$('input[name="sAdd"]');var quantityHiddenInput=$('<input type="hidden" name="sQuantity" value="'+quantity+'">');quantityHiddenInput.insertAfter(inputHiddenAdd);}}},quantityErrorHandler:function(selector,key,value_id){var me=this;var val,quantity,qMin,basketButtonActive=true,selectorError1,selectorError2,selectorError3,errorText;if(value_id===null){selectorError1="#bogx_quantity_"+key+"_error";selectorError2="#"+key+"_title";selectorError3="#"+key+"_surcharge";}else{selectorError1="#bogx_quantity_"+value_id+"_error";selectorError2="#"+value_id+"_title";selectorError3="#"+value_id+"_surcharge";}
val=$(selector).val();qMin=$(selector).attr("min");qMin=typeof qMin==='undefined'||qMin===""?1:parseInt(qMin,10);var errorGroup=$(selector).attr("data-parentgroupid");if(val===""||val<qMin){quantity=-1;if(val===""){errorText=quantityErrors.empty+" ";}
else if(val<qMin){errorText=quantityErrors.min+" ";}}else{errorText="";quantity=val;}
if(quantity===-1){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);$(selector).addClass("bogx--warning-border");$(selectorError1).removeClass("bogx--hidden").text(errorText);$(selectorError2).addClass("bogx--warning");$(selectorError3).addClass("bogx--warning");quantity=0;}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(selector).removeClass("bogx--warning-border");$(selectorError1).addClass("bogx--hidden").text(" ");$(selectorError2).removeClass("bogx--warning");$(selectorError3).removeClass("bogx--warning");}
me.handlerGroupErrors(errorGroup);return quantity;},selectErrorHandler:function(val,data_type,selector,key){var me=this;var basketButtonActive=true,selectorLabel,selectorError,title;selectorLabel="#"+key+"_label";var label=$('#'+key).attr('data-label');var errorGroup=$(selector).attr("data-parentgroupid");if(val===""){title=globalErrors.noselected;basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);var warning_label='<i class="icon--warning" title="'+title+'"></i>'+label;$(selectorLabel).html(warning_label);selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(selectorLabel).html(label);selectorError="#"+key+"_title";$(selectorError).removeClass("bogx--warning");selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}
me.handlerGroupErrors(errorGroup);},textErrorHandler:function(data_type,selector,key){var me=this;var val,value,basketButtonActive=true,selectorError,selector_prefix,title,errorText;if(data_type==="text"||data_type==="font_text"||data_type==="curved_text"||data_type==='text_boxsvg'){selector_prefix="#bogx_text_";}else if(data_type==="text-area"||data_type==="text_box"){selector_prefix="#bogx_textarea_";}else if(data_type==="text_date"){selector_prefix="#bogx_text_date_";}else if(data_type==="text_time"){selector_prefix="#bogx_text_time_";}
val=$(selector).val();var errorGroup=$(selector).attr("data-parentgroupid");if(val===""){value="";errorText=quantityErrors.empty;}else{errorText="";value=val;}
if(value===""){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);$(selector).addClass("bogx--warning-border");selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);title=errorText;selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(selector).removeClass("bogx--warning-border");selectorError=selector_prefix+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError="#"+key+"_title";if(data_type==="text-area"||data_type==="text_box"){title=value.replace(/\n|\r\n|\r/g,'<br/>');$(selectorError).removeClass("bogx--warning").html(title);}else{title=value;$(selectorError).removeClass("bogx--warning").text(title);}
selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}
me.handlerGroupErrors(errorGroup);return value;},checkboxErrorHandler:function(val,selector,key){var me=this;var value,basketButtonActive=true,selectorError,title,errorText;var selector_prefix="#bogx_check_";var border_selector="#"+$(selector).attr('name')+"_wrap";var errorGroup=$(selector).attr("data-parentgroupid");if(val!=="1"){errorText=quantityErrors.empty;}else{errorText="";}
if(val!=="1"){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);$(border_selector).addClass("bogx--warning-check-border");selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);title=errorText;selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(border_selector).removeClass("bogx--warning-check-border");selectorError=selector_prefix+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError="#"+key+"_title";title=$(selector).attr("data-title");$(selectorError).removeClass("bogx--warning").text(title);selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}
me.handlerGroupErrors(errorGroup);},multiSelectErrorHandler:function(flag,selector,key){var me=this;var value,basketButtonActive=true,selectorError,title,errorText;var selector_prefix;var datatype=$(selector).attr('data-datatype');if(datatype==='quantity_check'){selector_prefix="#bogx_quantity_check_";}else if(datatype==='article_virtual_multi'){selector_prefix="#bogx_article_virtual_";}else if(datatype==='article_virtual_single'){selector_prefix="#bogx_article_virtual_";}else if(datatype==='article_multi_select'||datatype==='acc_multi_select'){selector_prefix="#bogx_articlepicker_";}else if(datatype==='article_single_select'||datatype==='acc_single_select'){selector_prefix="#bogx_articlepicker_";}else if(datatype==='check_set'){selector_prefix="#bogx_check_set_";}
var groupname_selector="#"+key+"_groupname";var errorGroup=$(selector).attr("data-parentgroupid");if(flag===0){errorText='*** '+quantityErrors.empty+' ***';}else{errorText="";}
if(flag===0){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);$(groupname_selector).addClass("bogx--warning");selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);title=errorText;selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);var selectorError1="#"+key+"_select_header";var selectorError2="#"+key+"_select_content";if($(selectorError1).length>0){$(selectorError1).addClass("bogx--warning-header");$(selectorError2).addClass("bogx--warning-border");}}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(groupname_selector).removeClass("bogx--warning");selectorError=selector_prefix+key+"_error";$(selectorError).addClass("bogx--hidden").text("");selectorError="#"+key+"_title";$(selectorError).removeClass("bogx--warning").text("");var selectorError1="#"+key+"_select_header";var selectorError2="#"+key+"_select_content";if($(selectorError1).length>0){$(selectorError1).removeClass("bogx--warning-header");$(selectorError2).removeClass("bogx--warning-border");}}
me.handlerGroupErrors(errorGroup);},multiuploadErrorHandler:function(selector,need,key){var me=this;var basketButtonActive=true,selectorError,title,errorText;var value=$(selector).val();var selector_prefix="#bogx_multiupload_";var selectorLabel="#"+key+"_label";var label=$(selectorLabel).attr('data-label');var errorGroup=$(selector).attr("data-parentgroupid");if(need>=1){errorText=$(selector).data("error_min");}else{errorText="";}
if(need>=1){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);title=errorText;selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);var warning_label='<i class="icon--warning" title="'+title+'"></i>'+label;$(selectorLabel).html(warning_label);$(selectorLabel).addClass('bogx--warning');selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}else{basketButtonActive=true;if($(selector).attr('data-datatype')==='multiupload-designer'){var file_name=me.getSelectedUploadFile(key);if(file_name!==""){title=file_name;value=title;}else{if($(selector).attr('data-required')==='1'){basketButtonActive=false;title=value+": 0 used";}else{title=value+": 0 used";}}}else{title=value;}
if(basketButtonActive){me.changeErrorsGroupsArray(errorGroup,key,false);$(selectorLabel).html(label);$(selectorLabel).removeClass('bogx--warning');selectorError=selector_prefix+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError="#"+key+"_title";$(selectorError).removeClass("bogx--warning").text(title);selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}else{me.changeErrorsGroupsArray(errorGroup,key,true);errorText=globalNotes['please_select'];title+=", "+errorText+'!';selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning").text(title);var warning_label='<i class="icon--warning" title="'+errorText+'"></i>'+label;$(selectorLabel).html(warning_label);$(selectorLabel).addClass('bogx--warning');selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}
me.opts.basketButtonActiveJSON[key]=basketButtonActive;}
me.handlerGroupErrors(errorGroup);return value;},getSelectedUploadFile:function(key){var file_name="";var select_arr=$(".bogx--designer-file-wrap");if(select_arr.length>0){select_arr.each(function(){if($(this).hasClass('selected')&&$(this).attr('data-groupid')===key){file_name=$(this).find('img').attr('alt');}});}
return file_name;},getUploadFiles:function(key){var id,file_name,file_src;var id_arr=[],file_name_json={},file_src_json={};var $select_wrap=$("div.bogx--file-wrap","#bogx_multiupload_files_wrap_"+key);if($select_wrap.length>0){$select_wrap.each(function(){id=$(this).attr('data-id');file_name=$(this).attr('data-userfilename');file_src=$(this).attr('data-source');id_arr.push(id);file_name_json[id]=file_name;file_src_json[id]=file_src;});if(id_arr.length>0){return[id_arr,file_name_json,file_src_json];}else{return[];}}else{return[];}},cleanWarningGroup:function(key){var me=this;var errorGroup=me.opts.defaultsJSON[key][8];me.changeErrorsGroupsArray(errorGroup,key,false);me.handlerGroupErrors(errorGroup);},valueErrorHandler:function(selector,parameter,key){var me=this;var selector_prefix,val,value,errorText,vMin,basketButtonActive=true,errorGroup,selectorError;if(parameter==='axb'){val=[$(selector[0]).val(),$(selector[1]).val()];selector_prefix=["#bogx-parameter-a_","#bogx-parameter-b_"];}else if(parameter==="a"){val=$(selector).val();selector_prefix="#bogx-parameter-a_";}else if(parameter==="b"){val=$(selector).val();selector_prefix="#bogx-parameter-b_";}else if(parameter==="free"){val=$(selector).val();selector_prefix="#bogx-parameter-free_";}else{val=[];selector_prefix="";}
if(typeof selector==='object'){vMin=[$(selector[0]).attr("min"),$(selector[1]).attr("min")];if(typeof vMin[0]==='undefined'||vMin[0]===""||vMin[0]==="0"){vMin[0]=0;}
else{vMin[0]=parseFloat(vMin[0]);}
if(typeof vMin[1]==='undefined'||vMin[1]===""||vMin[1]==="0"){vMin[1]=0;}
else{vMin[1]=parseFloat(vMin[1]);}
errorGroup=$(selector[0]).attr("data-parentgroupid");if(typeof val==='object'){value=[];errorText=[];if(val[0]===""||val[0]<vMin[0]){value[0]=0;if(val[0]===""){errorText[0]=quantityErrors.empty+" ";}
else if(val[0]<vMin[0]){errorText[0]=quantityErrors.min+" ";}}else{errorText[0]="";value[0]=parseFloat(val[0]);}
if(val[1]===""||val[1]<vMin[1]){value[1]=0;if(val[1]===""){errorText[1]=quantityErrors.empty+" ";}
else if(val[1]<vMin[1]){errorText[1]=quantityErrors.min+" ";}}else{errorText[1]="";value[1]=parseFloat(val[1]);}}}else{vMin=$(selector).attr("min");vMin=typeof vMin==='undefined'||vMin===""||vMin==="0"?0:parseFloat(vMin);errorGroup=$(selector).attr("data-parentgroupid");if(typeof val!=='undefined'){if(val===""||val<vMin){if(val===""){errorText=quantityErrors.empty+" ";value="";}else if(val<vMin){errorText=quantityErrors.min+" ";value=val;}}else{errorText="";value=parseFloat(val);}}}
if(typeof value==='object'&&typeof vMin==='object'&&typeof selector_prefix==='object'){if(value[0]===0&&vMin[0]>0||value[1]===0&&vMin[1]>0){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);if(value[0]===0&&vMin[0]>0){$(selector[0]).addClass("bogx--warning-border");selectorError=selector_prefix[0]+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText[0]);}else{$(selector[0]).removeClass("bogx--warning-border");selectorError=selector_prefix[0]+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");}
if(value[1]===0&&vMin[1]>0){$(selector[1]).addClass("bogx--warning-border");selectorError=selector_prefix[1]+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText[1]);}else{$(selector[1]).removeClass("bogx--warning-border");selectorError=selector_prefix[1]+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");}
selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning");selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(selector[0]).removeClass("bogx--warning-border");$(selector[1]).removeClass("bogx--warning-border");selectorError=selector_prefix[0]+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError=selector_prefix[1]+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError="#"+key+"_title";$(selectorError).removeClass("bogx--warning");selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}}else{if(value===""||vMin>value){basketButtonActive=false;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,true);$(selector).addClass("bogx--warning-border");selectorError=selector_prefix+key+"_error";$(selectorError).removeClass("bogx--hidden").text(errorText);selectorError="#"+key+"_title";$(selectorError).addClass("bogx--warning");selectorError="#"+key+"_surcharge";$(selectorError).addClass("bogx--warning");value="";}else{basketButtonActive=true;me.opts.basketButtonActiveJSON[key]=basketButtonActive;me.changeErrorsGroupsArray(errorGroup,key,false);$(selector).removeClass("bogx--warning-border");selectorError=selector_prefix+key+"_error";$(selectorError).addClass("bogx--hidden").text(" ");selectorError="#"+key+"_title";$(selectorError).removeClass("bogx--warning");selectorError="#"+key+"_surcharge";$(selectorError).removeClass("bogx--warning");}}
me.handlerGroupErrors(errorGroup);return value;},basepriceHandler:function(gesamtpreis,basicPriceFlag){var me=this;var modal=false;if($('#bogx_config_modal').length>0)modal=true;if(!basicPriceFlag){if($('div.bogx--config-basicprice').length>0){if(!$('div.bogx--config-basicprice').hasClass('bogx--hidden')){$('div.bogx--config-basicprice').addClass('bogx--hidden');}}}
if(me.opts.basepriceview==="hidden"){if(!$('div.product--price.price--default').hasClass('bogx--hidden')){$('div.product--price.price--default').addClass('bogx--hidden');if(!modal){$('.product--tax').insertAfter($('.bogx--configurator-wrap')).addClass('bogx--hidden');$('.product--delivery').insertAfter($('.product--tax')).addClass('bogx--right');}else{$('.product--tax').addClass('bogx--hidden');$('.product--delivery').insertAfter($('#bogx_modal_pricehint')).addClass('bogx--modal-delivery');}}else{if(modal){$('.product--tax').addClass('bogx--hidden');$('.product--delivery').insertAfter($('#bogx_modal_pricehint')).addClass('bogx--modal-delivery');}}}else if(me.opts.basepriceview==="update"){if(gesamtpreis!==0&&priceStartingFrom===""){var meta='<meta itemprop="price" content="'+gesamtpreis+'">';var gesamtpreisHTML=meta+me.numberToPrice(gesamtpreis,0)+" "+star_for_total;$("meta[property='product:price']").attr("content",gesamtpreis.toString());$('span.price--content').html(gesamtpreisHTML);}}},changeErrorsGroupsArray:function(group,key,boolean){var me=this;if(me.opts.parentgroupsErrors.length>0){var arr=$.grep(me.opts.parentgroupsErrors,function(obj,i){return obj.key===key;});if(arr.length>0){for(var i=0;i<me.opts.parentgroupsErrors.length;i++){if(me.opts.parentgroupsErrors[i].group===group&&me.opts.parentgroupsErrors[i].key===key){me.opts.parentgroupsErrors[i].error=boolean;}}}else{me.opts.parentgroupsErrors.push({group:group,key:key,error:boolean})}}else{me.opts.parentgroupsErrors.push({group:group,key:key,error:boolean})}},handlerGroupErrors:function(errorGroup){var me=this,error=false,selectorError1="#"+errorGroup+"_header",selectorError2="#"+errorGroup+"_content";for(var i=0;i<me.opts.parentgroupsErrors.length;i++){if(me.opts.parentgroupsErrors[i].group===errorGroup){error=me.opts.parentgroupsErrors[i].error;if(error){break;}}}
if(error){$(selectorError1).addClass("bogx--warning-header");$(selectorError2).addClass("bogx--warning-content");}else{$(selectorError1).removeClass("bogx--warning-header");$(selectorError2).removeClass("bogx--warning-content");}},getSurcharge:function(selector,surchargeJSON,key){var me=this,itemSurcharge_raw,arr,element_arr,id,arrJSON={};id=parseInt($(selector).attr("data-valueid"),10);itemSurcharge_raw=me.opts.surchargeJSON[id];if(itemSurcharge_raw!==0&&itemSurcharge_raw!=="0"&&typeof itemSurcharge_raw!=="undefined"){var firstChar=itemSurcharge_raw.charAt(0);if(firstChar==="{"){surchargeJSON[key]=me.StringToJson(itemSurcharge_raw);}else if(firstChar==="$"){itemSurcharge_raw=$(selector).attr("data-surcharge");if(isNaN(parseFloat(itemSurcharge_raw))){if(itemSurcharge_raw==="$"){surchargeJSON[key]=0;}else{itemSurcharge_raw=itemSurcharge_raw.replace(/`/g,'"');me.opts.surchargeJSON[id]=itemSurcharge_raw;surchargeJSON[key]=me.StringToJson(itemSurcharge_raw);}}else{surchargeJSON[key]=parseFloat(itemSurcharge_raw);}}else{arr=itemSurcharge_raw.split(",");var len=arr.length;if(len>1){for(var i=0;i<len;i++){if(isNaN(parseFloat(arr[i]))){element_arr=arr[i].split(":");arrJSON[element_arr[0]]=element_arr[1];}else{arrJSON[key]=parseFloat(arr[i]);}}
surchargeJSON[key]=JSON.stringify(arrJSON);}else if(isNaN(parseFloat(arr[0]))){element_arr=arr[0].split(":");arrJSON[element_arr[0]]=parseFloat(element_arr[1]);surchargeJSON[key]=JSON.stringify(arrJSON);}else{surchargeJSON[key]=parseFloat(arr[0]);}}}else{surchargeJSON[key]=0;}
return surchargeJSON;},getOutputSurcharge:function(surcharge){var me=this,itemJSON;var currency_factor=me.getCurrencyFactor();var tax_factor=me.getTaxFactor();return surcharge*currency_factor*tax_factor;},getNettoSurcharge:function(surcharge,precision){var me=this,itemJSON;var currency_factor=me.getCurrencyFactor();var tax_netto_factor=me.getNettoTaxFactor();return me.round(surcharge*currency_factor*tax_netto_factor,precision);},getItemSurcharge:function(selector,surchargeJSON,key,gesamtpreis){var me=this,itemJSON={};var k,v,percentage,operator,val,itemSurcharge;var array={};var paramterixSurcharge=0;var itemQuantity=1.0;if(me.opts.baseprice==="0"&&surchargeJSON["parametrixSurcharge"]!==undefined){paramterixSurcharge=me.getOutputSurcharge(surchargeJSON["parametrixSurcharge"]);}
var total=gesamtpreis+paramterixSurcharge;var baseprice=parseFloat(me.opts.baseprice)+paramterixSurcharge;if(selector){itemQuantity=parseFloat($(selector).attr("data-quantity"));}
if(typeof surchargeJSON[key]!=='undefined'){if(typeof surchargeJSON[key].surcharge!=='undefined'){itemSurcharge=surchargeJSON[key].surcharge;}else{itemSurcharge=surchargeJSON[key];}}else{var id=me.opts.defaultsJSON[key][2];itemSurcharge=parseFloat(me.opts.surchargeJSON[id]);}
if(isNaN(parseFloat(itemSurcharge))){if(typeof itemSurcharge==="string"){itemJSON=JSON.parse(itemSurcharge);}else if(typeof itemSurcharge==="object"){itemJSON=itemSurcharge;}
for(var i=0,keys=Object.keys(itemJSON);i<keys.length;i++){if(itemJSON.hasOwnProperty(keys[i])){k=keys[i];v=itemJSON[keys[i]];if(k===key){if(typeof v==='number'){itemSurcharge=me.getOutputSurcharge(v);}else{itemSurcharge=me.getOutputSurcharge(parseFloat(v));}}else if(k==="total"&&typeof v==='number'){percentage=v;itemSurcharge=total*percentage*itemQuantity;}else if(k==="baseprice"&&typeof v==='number'){percentage=v;itemSurcharge=baseprice*percentage*itemQuantity;}else if(typeof v==='number'){percentage=v;itemSurcharge=me.getOutputSurcharge(surchargeJSON[k]*percentage*itemQuantity);}else if(typeof v==='string'){operator=v.substr(0,1);val=parseFloat(v.substr(1,v.length));switch(operator){case"+":surchargeJSON[k]+=me.getOutputSurcharge(val);break;case"-":surchargeJSON[k]-=me.getOutputSurcharge(val);break;case"*":surchargeJSON[k]*=val;break;default:surchargeJSON[k]+=me.getOutputSurcharge(parseFloat(v));}}else{itemSurcharge=0;}}}}else{itemSurcharge=me.getOutputSurcharge(itemSurcharge*itemQuantity);}
array.surcharge=itemSurcharge;array.json=surchargeJSON;return array;},parametrixMultiplier:function(key,axb_multiply_array,a_multiply_array,b_multiply_array,itemSurcharge,surchargeJSON){var me=this;var itemSurch=itemSurcharge;if($.inArray(key,axb_multiply_array)>=0){itemSurch*=surchargeJSON["parametrixMultiplier"];}else if($.inArray(key,a_multiply_array)>=0){itemSurch*=surchargeJSON["a_parametrixMultiplier"];}else if($.inArray(key,b_multiply_array)>=0){itemSurch*=surchargeJSON["b_parametrixMultiplier"];}
return itemSurch;},formelEval:function(key,surchargeJSON,gesamtpreis){var me=this;var data_type,detach_flag,value=0,value1=0,value2=0;var surcharge=0,surcharge1=0,surcharge2=0;var count='';var selector=false;var usergroup_discount=parseFloat(bogx_usergroup_discount);var currency_factor=me.getCurrencyFactor();var tax_factor=me.getTaxFactor();var formel=me.opts.formelJSON[key];if(formel!==""&&formel!=="0"){var obj={};for(var k in me.opts.defaultsJSON){if(me.opts.defaultsJSON.hasOwnProperty(k)){data_type=me.opts.defaultsJSON[k][0];detach_flag=me.opts.defaultsJSON[k][3];if(data_type==="axb_parameter"&&detach_flag===0){value=surchargeJSON["parametrixMultiplier"];value1=surchargeJSON["parametrixValue1"];value2=surchargeJSON["parametrixValue2"];surcharge=me.getOutputSurcharge(surchargeJSON["parametrixBasePrice"]);}else if(data_type==="a_parameter"&&detach_flag===0){value=surchargeJSON["a_parametrixMultiplier"];surcharge=me.getOutputSurcharge(surchargeJSON["a_parametrixBasePrice"]);}else if(data_type==="b_parameter"&&detach_flag===0){value=surchargeJSON["b_parametrixMultiplier"];surcharge=me.getOutputSurcharge(surchargeJSON["b_parametrixBasePrice"]);}else if(data_type==="free_parameter"&&detach_flag===0){if(typeof surchargeJSON[k]!=='undefined'){value=surchargeJSON[k]["value"];surcharge=surchargeJSON[k]["surcharge"];}else{value=me.opts.defaultsJSON[k][1];surcharge=0;}}else if(data_type==="axb_free_parameter"&&detach_flag===0){if(typeof surchargeJSON[k]!=='undefined'){value=surchargeJSON[k]["value"];surcharge=me.getOutputSurcharge(surchargeJSON[k]["surcharge"]);value1=surchargeJSON[k]["value1"];value2=surchargeJSON[k]["value2"];}else{var val_Id1=me.opts.defaultsJSON[k][2][0];var val_Id2=me.opts.defaultsJSON[k][2][1];var selector1="#axb_free_"+val_Id1;var selector2="#axb_free_"+val_Id2;var key1=$(selector1).attr("data-key");var key2=$(selector2).attr("data-key");if(typeof surchargeJSON[key1]!=='undefined'&&typeof surchargeJSON[key2]!=='undefined'){surcharge1=surchargeJSON[key1]["surcharge"];value1=surchargeJSON[key1]["value"];surcharge2=surchargeJSON[key2]["surcharge"];value2=surchargeJSON[key2]["value"];}}}else if((data_type==="multiupload"||data_type==="multiupload-designer")&&detach_flag===0){var data_selector="#bogx_multiupload_data_"+k;count=parseInt($(data_selector).attr('data-count'),10);value=$(data_selector).val();surcharge=surchargeJSON[k];}else if(data_type==="free_item_handler"){value=me.opts.defaultsJSON[k][1];surcharge=0;}else if(detach_flag===0){value=me.opts.defaultsJSON[k][1];if(isNaN(parseFloat(surchargeJSON[k]))){var surchargeObj=me.getItemSurcharge(selector,surchargeJSON,k,gesamtpreis);surcharge=surchargeObj.surcharge;}else{surcharge=surchargeJSON[k];}}else{continue;}
obj[k]={value:value,surcharge:surcharge,surcharge1:surcharge1,surcharge2:surcharge2,value1:value1,value2:value2,count:count,};}}
var baseprice=parseFloat(me.opts.baseprice);var total=gesamtpreis;var error;var articlenumber=$('#bogx_config').attr('data-articleordernumber');var result=eval(formel);if(typeof error==="undefined"&&!isNaN(parseFloat(result))){return result;}else if(result==='#'){return'#';}else if(result==='0'){return'0';}else if(typeof error!=="undefined"){return error;}else if(typeof result==='undefined'){return 0;}else if(isNaN(parseFloat(result))){return result;}else if(result===""||typeof result==="string"){return result;}else if(isNaN(result)){return 0;}}
return 0;},getTax:function(){var me=this;var tax;if(me.opts.tax===""){tax=19;}else{tax=parseFloat(me.opts.tax);}
return tax;},getCurrencyFactor:function(){var me=this;var currency_factor;if(me.opts.currency_factor==="1"||me.opts.currency_factor==="0"){currency_factor=1;}else{currency_factor=parseFloat(me.opts.currency_factor);}
return currency_factor;},getTaxFactor:function(){var me=this;var tax_factor=1.0;var tax=me.getTax();if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.surcharges_gross,10)===0){tax_factor=1.0+tax/100.0;}else if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.surcharges_gross,10)===1){tax_factor=1.0;}else if(parseInt(me.opts.prices_gross,10)===0&&parseInt(me.opts.surcharges_gross,10)===0){tax_factor=1.0;}else if(parseInt(me.opts.prices_gross,10)===0&&parseInt(me.opts.surcharges_gross,10)===1){tax_factor=1.0/(1.0+tax/100.0);}
return tax_factor;},getNettoTaxFactor:function(){var me=this;var tax_factor=1.0;var tax=me.getTax();if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.surcharges_gross,10)===0){tax_factor=1.0/(1.0+tax/100.0);}else if(parseInt(me.opts.prices_gross,10)===1&&parseInt(me.opts.surcharges_gross,10)===1){tax_factor=1.0/(1.0+tax/100.0);}else if(parseInt(me.opts.prices_gross,10)===0&&parseInt(me.opts.surcharges_gross,10)===0){tax_factor=1.0;}else if(parseInt(me.opts.prices_gross,10)===0&&parseInt(me.opts.surcharges_gross,10)===1){tax_factor=1.0/(1.0+tax/100.0);}
return tax_factor;},viewInCalculator:function(key,formel,itemSurchargeOutput,title,groupname){var me=this;var aufpreisHTML=me.numberToPrice(itemSurchargeOutput,1);var selector_wrap="#"+key+"_surcharge_wrap";var selector_wraps='[id='+key+'_surcharge_wrap]';if($(selector_wraps).length>1){$(selector_wraps).addClass('bogx--hidden');selector_wrap=$(selector_wraps)[0];}
var selector_name="#"+key+"_name";var selector_title="#"+key+"_title";var selector_sur="#"+key+"_surcharge";if(formel==="0"||formel===0){if($(selector_wrap).hasClass('bogx--hidden')){$(selector_wrap).removeClass('bogx--hidden');}
if(typeof groupname!=='undefined'&&$(selector_name).length>0){$(selector_name).text(groupname);}
if(title||title===""){$(selector_title).html(title);}
$(selector_sur).html("");}else if(formel==="#"){$(selector_wrap).addClass('bogx--hidden');}else{if($(selector_wrap).hasClass('bogx--hidden')){$(selector_wrap).removeClass('bogx--hidden');}
if(typeof groupname!=='undefined'){$(selector_name).text(groupname);}
if(title||title===""){$(selector_title).html(title);}
$(selector_sur).html(aufpreisHTML);}},addsChargeParametrix:function(basepriceadd_array,attributeArray){var addsCharge=0.0,i,j;for(i=0;i<basepriceadd_array.length;i++){for(j=0;j<attributeArray.length;j++){if(basepriceadd_array[i]===attributeArray[j].group_id){var key=basepriceadd_array[i];var itemSurcharge=attributeArray[j].surcharge;if(isNaN(parseFloat(itemSurcharge))){var itemJSON=JSON.parse(itemSurcharge);if(!$.isEmptyObject(itemJSON)){var k=Object.keys(itemJSON)[0];var v=itemJSON[k];if(k===key){addsCharge+=v;}}}else{addsCharge+=itemSurcharge;}}}}
return addsCharge;},chargingParametrix:function(charging_json,value){var me=this;var surcharge;if(!$.isEmptyObject(charging_json)){for(var i=0,keys=Object.keys(charging_json);i<keys.length;i++){if(charging_json.hasOwnProperty(keys[i])){if(keys[i+1]){if(value>=parseFloat(keys[i])&&value<parseFloat(keys[i+1])){surcharge=me.round(parseFloat(charging_json[keys[i]]),3);if(bogx_usergroup_discount!=='0'){surcharge=surcharge-surcharge/100*parseFloat(bogx_usergroup_discount);}
return surcharge;}}else{surcharge=me.round(parseFloat(charging_json[keys[i]]),3);if(bogx_usergroup_discount!=='0'){surcharge=surcharge-surcharge/100*parseFloat(bogx_usergroup_discount);}
return surcharge;}}else{return 0;}}}else{return 0;}},chargingMatrixParametrix:function(a_value,b_value,charging_matrix_json){var me=this;var b_json,j,keys_b;var surcharge;if(!$.isEmptyObject(charging_matrix_json)){for(var i=0,keys_a=Object.keys(charging_matrix_json);i<keys_a.length;i++){if(charging_matrix_json.hasOwnProperty(keys_a[i])){if(keys_a[i+1]){if(a_value>=parseInt(keys_a[i],10)&&a_value<parseInt(keys_a[i+1],10)){b_json=charging_matrix_json[keys_a[i]];for(j=0,keys_b=Object.keys(b_json);j<keys_b.length;j++){if(b_json.hasOwnProperty(keys_b[j])){if(keys_b[j+1]){if(b_value>=parseInt(keys_b[j],10)&&b_value<parseInt(keys_b[j+1],10)){surcharge=me.round(parseFloat(b_json[keys_b[j]]),3);if(bogx_usergroup_discount!=='0'){surcharge=surcharge-surcharge/100*parseFloat(bogx_usergroup_discount);}
return surcharge;}}else{surcharge=me.round(parseFloat(b_json[keys_b[j]]),3);if(bogx_usergroup_discount!=='0'){surcharge=surcharge-surcharge/100*parseFloat(bogx_usergroup_discount);}
return surcharge;}}else{return 0;}}}}else{b_json=charging_matrix_json[keys_a[i]];for(j=0,keys_b=Object.keys(b_json);j<keys_b.length;j++){if(b_json.hasOwnProperty(keys_b[j])){if(keys_b[j+1]){if(b_value>=parseInt(keys_b[j],10)&&b_value<parseInt(keys_b[j+1],10)){surcharge=me.round(parseFloat(b_json[keys_b[j]]),3);if(bogx_usergroup_discount!=='0'){surcharge=surcharge-surcharge/100*parseFloat(bogx_usergroup_discount);}
return surcharge;}}}else{return 0;}}}}else{return 0;}}}else{return 0;}},convertDefaultJson:function(){var me=this;var obj_json={};var i,key,data_type;var bogx_defaults_escaped=bogx_defaults.replace(/\n/g,"\\n").replace(/\r/g,"\\r");obj_json=JSON.parse(bogx_defaults_escaped);for(i in obj_json){if(obj_json.hasOwnProperty(i)){for(key in obj_json[i]){if(obj_json[i].hasOwnProperty(key)){me.opts.defaultsJSON[key]=obj_json[i][key];}}}}},cutStringByChar:function(string,char){if(typeof string!=='undefined'&&string!==''){var n,str=string;n=string.indexOf(char);if(n>=0)str=string.substr(0,n);}else{str='';}
return str;},StringToJson:function(json_str){if(json_str!==undefined&&json_str!==""){return JSON.parse(json_str);}else return{};},rundByStep:function(value,step){var value_string=value.toString();var val=value;if(Number.isInteger(step)){if(value_string.indexOf(".")!==-1){val=parseInt(value_string,10);}}
return val;},round:function(x,n){var a=Math.pow(10,n);return(Math.round(x*a)/a);},roundWithStep:function(x,step){if(step<1){var a=1.0/step;}else{a=1;}
return(Math.round(x*a)/a);},roundWithUnitFactor:function(x,fac){var a=1.0/fac;return(Math.round(x*a)/a);},numberToStringDigits:function(val,factor){var me=this;var number_str;var locale="de-DE";var $selector=$('#bogx_config');if($selector.attr('data-locale')&&$selector.attr('data-locale')!==""){locale=$selector.attr('data-locale').replace("_","-");}
var max_digits=2;if(factor>=10000){max_digits=3;}else if(factor>=100000){max_digits=4;}
var number=me.round(val,max_digits);number_str=number.toLocaleString(locale,{minimumFractionDigits:2,maximumFractionDigits:max_digits});return number_str;},numberToPrice:function(value,asterisk){var me=this;var val=me.round(value,2);var DECIMAL=bogx_decimal_separator;var price_str;var currency=me.opts.currency;var locale="de-DE";var $selector=$('#bogx_config');if($selector.attr('data-locale')&&$selector.attr('data-locale')!==""){locale=$selector.attr('data-locale').replace("_","-");}
if(bogx_currency_position==='right'&&currency.toUpperCase()!=="CHF"){price_str=val.toLocaleString(locale,{minimumFractionDigits:2,maximumFractionDigits:2})+' '+currency;}else if(bogx_currency_position==='right'&&currency.toUpperCase()==="CHF"){price_str=currency+" "+val.toLocaleString(["de-CH","fr-CH","it-CH","rm-CH"],{minimumFractionDigits:2,maximumFractionDigits:2});}else if(bogx_currency_position==='left'&&currency.toUpperCase()==="CHF"){price_str=currency+" "+val.toLocaleString(["de-CH","fr-CH","it-CH","rm-CH"],{minimumFractionDigits:2,maximumFractionDigits:2});}else{price_str=currency+val.toLocaleString(locale,{minimumFractionDigits:2,maximumFractionDigits:2});}
if(asterisk===1&&$selector.attr('data-surcharges_asterisk')&&$selector.attr('data-surcharges_asterisk')==="1"){price_str+=" *";}
return price_str;},numberToPriceDigits:function(value,digits){var me=this;value=me.round(value,digits);var DECIMAL=bogx_decimal_separator;var price_str;var currency=me.opts.currency;var locale="de-DE";var $selector=$('#bogx_config');if($selector.attr('data-locale')&&$selector.attr('data-locale')!==""){locale=$selector.attr('data-locale').replace("_","-");}
if(bogx_currency_position==='right'&&currency.toUpperCase()!=="CHF"){price_str=value.toLocaleString(locale,{minimumFractionDigits:2,maximumFractionDigits:digits})+' '+currency;}else if(bogx_currency_position==='right'&&currency.toUpperCase()==="CHF"){price_str=currency+" "+value.toLocaleString(["de-CH","fr-CH","it-CH","rm-CH"],{minimumFractionDigits:2,maximumFractionDigits:digits});}else if(bogx_currency_position==='left'&&currency.toUpperCase()==="CHF"){price_str=currency+" "+value.toLocaleString(["de-CH","fr-CH","it-CH","rm-CH"],{minimumFractionDigits:2,maximumFractionDigits:digits});}else{price_str=currency+value.toLocaleString(locale,{minimumFractionDigits:2,maximumFractionDigits:digits});}
if($selector.attr('data-surcharges_asterisk')&&$selector.attr('data-surcharges_asterisk')==="1"){price_str+="*";}
return price_str;},maxValueAndIndexOfMax:function(arr){if(arr.length===0){return-1;}
var max=arr[0];var maxIndex=0;for(var i=1;i<arr.length;i++){if(arr[i]>max){maxIndex=i;max=arr[i];}}
return[maxIndex,max];},changeFormatDateUsToEur:function(date_string){var date_arr=date_string.split('-');return date_arr[2]+"."+date_arr[1]+"."+date_arr[0];},changeFormatDateEurToUs:function(date_string){var date_arr=date_string.split('.');return date_arr[2]+"-"+date_arr[1]+"-"+date_arr[0];},escapeText:function(html_string){var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}
var reUnescapedHtml=/[&<>"']/g;var reHasUnescapedHtml=RegExp(reUnescapedHtml.source);if(html_string&&reHasUnescapedHtml.test(html_string)){return html_string.replace(reUnescapedHtml,function(chr){return htmlEscapes[chr]});}else{return html_string;}},removeHTML:function(html_string){var html=$.parseHTML(html_string);var text=$(html).text();return text;},removeArrayItem:function(arr,item){var index=arr.indexOf(item);if(index>-1){arr.splice(index,1);}
return arr;},dataRequester:function(params,callback){var xhr=new XMLHttpRequest();var url=bogx_request_controller;xhr.open('POST',url,true);xhr.setRequestHeader('Content-type','application/json');xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){var data=xhr.responseText;var data_json="";if(data!==""){data_json=JSON.parse(data);}
if(typeof callback==="function"){callback(data_json);}}}
xhr.send(JSON.stringify(params));},dataRequesterPromise:function(params){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();var url=bogx_request_controller;xhr.open('POST',url,true);xhr.setRequestHeader('Content-type','application/json');xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){var data=xhr.responseText;var data_json="";if(data!==""){data_json=JSON.parse(data);resolve(data_json);}}else{reject('NO DATA FOUND')}}
xhr.send(JSON.stringify(params));});},getDefaultValue:function(data_type,key,key_value,ersatz){var me=this;var tstyle='',tboxstyle='',sstyle='',styleJSON;if(typeof bogx_canvas_text_defaults!=='undefined'){tstyle=bogx_canvas_text_defaults;}
if(typeof bogx_canvas_textbox_defaults!=='undefined'){tboxstyle=bogx_canvas_textbox_defaults;}
if(typeof bogx_canvas_shape_defaults!=='undefined'){sstyle=bogx_canvas_shape_defaults;}
if(data_type==="font_text"||data_type==="text_date"||data_type==="text_time"||data_type==="curved_text")
{styleJSON=(tstyle!=='')?me.StringToJson(tstyle):'undefined';}else if(data_type==="text_box"||data_type==="text_boxsvg"){styleJSON=(tboxstyle!=='')?me.StringToJson(tboxstyle):'undefined';}else if(data_type==="shape_img"||data_type==="shape"){styleJSON=(sstyle!=='')?me.StringToJson(sstyle):'undefined';}
var value=ersatz;if(styleJSON!=='undefined'){if(key!==null&&typeof styleJSON[key]!=='undefined'){if(typeof styleJSON[key][key_value]!=='undefined'){value=styleJSON[key][key_value];}}else{if(typeof styleJSON[key_value]!=='undefined'){value=styleJSON[key_value];}}}else{console.log("Vorgaben-JSON fr <"+data_type+"> wurde falsch oder gar nicht definiert.");}
return value;},destroy:function(){var me=this;me.$el.removeClass(me.opts.configurator);me.$el.removeClass(me.opts.currency);me.$el.removeClass(me.opts.articleid);me.$el.removeClass(me.opts.articleordernumber);me.$el.removeClass(me.opts.baseprice);me.$el.removeClass(me.opts.totalsurcharge);me.$el.removeClass(me.opts.defaultsJSON);me.$el.removeClass(me.opts.detachedStore);me._destroy();}});})(jQuery,window);StateManager.addPlugin('.bogx--config-header','swCollapsePanel',{contentSiblingSelector:'.bogx--config-content'},['xs','s','m','l','xl']);(function($,window){setTimeout(function(){$('.bogx--lazy').bogx_lazy({effect:"fadeIn",effectTime:2000,threshold:0,delay:0,});$('#bogx_config').bogxProductConfigurator();},0);if(document.getElementById('bogx_config')){function roundWithStep(x,step){if(step<1){var a=1.0/step;}else{a=1;}
return(Math.round(x*a)/a);}
function bogx_custom_input(selector_input,selector_nav){if($(selector_input).length>0){$(selector_nav).insertAfter(selector_input);$(selector_input).each(function(){var spinner=$(this).parent(),input=spinner.find('input[type="number"]'),btnUp=spinner.find('.quantity-up'),btnDown=spinner.find('.quantity-down'),min=parseFloat(input.attr('min')),max=parseFloat(input.attr('max')),step=input.attr('step');if(typeof min==='undefined'){min=0;}else{min=parseFloat(min);}
if(typeof max==='undefined'){max=0;}else{max=parseFloat(max);}
if(typeof step==='undefined'){step=1;}else{step=parseFloat(step);}
btnUp.click(function(){if(!input.hasClass('is--disabled')){if(typeof input.val()!=='undefined'&&input.val()!==''){var oldValue=parseFloat(input.val());}else{var oldValue=min;}
if(oldValue>=max&&max!==0){var newVal=oldValue;}else{var newVal=roundWithStep(oldValue+step,step);}
spinner.find("input").val(newVal);spinner.find("input").trigger("input");}});btnDown.click(function(){if(!input.hasClass('is--disabled')){if(typeof input.val()!=='undefined'&&input.val()!==''){var oldValue=parseFloat(input.val());}else{var oldValue=min;}
if(oldValue<=min&&min!==0){var newVal=oldValue;}else{var newVal=roundWithStep(oldValue-step,step);}
spinner.find("input").val(newVal);spinner.find("input").trigger("input");}});});}}
var arrow_up='&#xe610;';var arrow_down='&#xe612';var selector_nav='';var selector_input_quantity='input.bogx--quantity-input';bogx_custom_input(selector_input_quantity,selector_nav);var selector_input='input[type="number"].bogx--input';bogx_custom_input(selector_input,selector_nav);var selector_input_axb='input.bogx--parametrix-axb-input';bogx_custom_input(selector_input_axb,selector_nav);var selector_price_wrap='#bogx_config_price_wrap';var selector_image_container='.product--image-container';var selector_sticky_panel='#bogx_sticky_panel';var price_selector='bogx_config_price_wrap';var $price_wrap=$(selector_price_wrap);var price_placeholder=$('<span style="display:none;" id="'+price_selector+'-placeholder" />');var sticky=$(selector_price_wrap).attr('data-sticky');if(sticky==="1"){if(window.innerWidth>=1024){var divHtml='<div id=\"bogx_sticky_panel\" class=\"bogx--sticky-panel\"></div>';if($(selector_image_container).length>0){if($(selector_sticky_panel).length<=0){$(selector_image_container).append(divHtml);}}
if($(selector_sticky_panel).length>0){price_placeholder.insertAfter($price_wrap);$(selector_sticky_panel).append($price_wrap);window.onload=function(){$(selector_sticky_panel).stick_in_parent({parent:".product--detail-upper",recalc_every:1,offset_top:50,spacer:false,});};}}
$(window).resize(function(){if(window.innerWidth>=1024){if($(selector_sticky_panel).length>0&&$(selector_sticky_panel).children(selector_price_wrap).length<=0){$(selector_sticky_panel).append($price_wrap);}
$(selector_sticky_panel).stick_in_parent({parent:".product--detail-upper",recalc_every:1});}else{$(selector_sticky_panel).trigger("sticky_kit:detach");var price_placeholder=$('#'+price_selector+'-placeholder');if(price_placeholder.length>0){$(selector_price_wrap).insertBefore(price_placeholder);}}});}else if($(selector_sticky_panel).length>0&&$('#bogx_canvas').length>0){if(window.innerWidth>=1024){window.onload=function(){$(selector_sticky_panel).stick_in_parent({parent:".product--detail-upper",recalc_every:1});};}
$(window).resize(function(){if(window.innerWidth>=1024){$(selector_sticky_panel).stick_in_parent({parent:".product--detail-upper",recalc_every:1});}else{$(selector_sticky_panel).trigger("sticky_kit:detach");}});}}})(jQuery,window);function bogx_custom_input_text(key,content){var me=this;var new_text='';var pos=0;var textObj=$('#text_'+key);var current_text=textObj.val();var range;var browser="ALL";if(document.selection)browser="IE";if(browser==="IE"){textObj.focus();range=document.selection.createRange();range.moveStart('character',-current_text.length);pos=range.text.length;}
else{pos=textObj.get(0).selectionStart;}
if(current_text!==''){new_text=[current_text.slice(0,pos),content,current_text.slice(pos)].join('');}else{new_text=current_text+content;}
textObj.val(new_text);textObj.trigger('input');pos+=content.length;if(browser==="IE"){textObj.focus();range=document.selection.createRange();range.moveStart('character',-new_text.length);range.moveStart('character',pos);range.moveEnd('character',0);range.select();}else{textObj.selectionStart=pos;textObj.selectionEnd=pos;textObj.focus();}};(function($,window){'use strict';$.plugin('bogxTooltip',{init:function(){var me=this;me.applyDataAttributes();me.registerEvents();},registerEvents:function(){var me=this;if(document.getElementById('bogx_config')){var event;if(bogx_tooltip_show==='hover'){event='mouseenter touchstart'}else{event='click touchstart'}
$('.bogx--qtip').each(function(){$(this).qtip({prerender:true,overwrite:false,content:{text:$(this).next('div')},show:{event:event,solo:true},hide:'click unfocus',position:{viewport:$('.content--wrapper'),my:'right center',at:'center left',adjust:{method:'shift none'}},style:{classes:'qtip-bootstrap bogx-custom-qtip',}});});}},});StateManager.addPlugin('.bogx--tooltip','bogxTooltip',{});})(jQuery,window);;(function($,window){'use strict';$.plugin('bogxAccountAddArticle',{defaults:{'addArticleUrl':'',},init:function(){var opts=this.opts;this.applyDataAttributes();this._on(this.$el,'submit',$.proxy(this.sendSerializedForm,this));},sendSerializedForm:function(event){event.preventDefault();var me=this,opts=me.opts,$el=me.$el,formData=$el.serialize();$.publish('plugin/swAddArticle/onBeforeAddArticle',[me,formData]);if($el.attr("id")==="bogx_account_form"){var fd=new FormData();var otherData=$el.serializeArray();$.each(otherData,function(key,input){if(input.name==="bogxProductConfiguratorSelection"){var config_json_string=input.value;var config_json_string_encrypted=me.CryptoJSAesEncrypt("Bogx_Product_Configurator_Selection",config_json_string);fd.append(input.name,config_json_string_encrypted);}else{fd.append(input.name,input.value);}});formData=fd;$.ajax({data:formData,dataType:'html',type:'POST',enctype:'multipart/form-data',cache:false,contentType:false,processData:false,traditional:true,url:opts.addArticleUrl,success:function(result){$.publish('plugin/swAddArticle/onAddArticle',[me,result]);console.log("Artikel erfolgreich per POST an Basket gesendet");}});}else{$.ajax({data:formData,dataType:'html',method:'POST',url:opts.addArticleUrl,success:function(result){$.publish('plugin/swAddArticle/onAddArticle',[me,result]);}});}},CryptoJSAesEncrypt:function(passphrase,plain_text){var salt=CryptoJS.lib.WordArray.random(256);var iv=CryptoJS.lib.WordArray.random(16);var key=CryptoJS.PBKDF2(passphrase,salt,{hasher:CryptoJS.algo.SHA512,keySize:64/8,iterations:999});var encrypted=CryptoJS.AES.encrypt(plain_text,key,{iv:iv});var data={ciphertext:CryptoJS.enc.Base64.stringify(encrypted.ciphertext),salt:CryptoJS.enc.Hex.stringify(salt),iv:CryptoJS.enc.Hex.stringify(iv)}
return JSON.stringify(data);}});StateManager.addPlugin('*[data-bogx_account_addarticle="true"]','bogxAccountAddArticle',{});$('*[data-bogx_account_addarticle="true"]').bogxAccountAddArticle();})(jQuery,window);var CryptoJS=CryptoJS||function(a,j){var c={},b=c.lib={},f=function(){},l=b.Base={extend:function(a){f.prototype=this;var d=new f;a&&d.mixIn(a);d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)});d.init.prototype=d;d.$super=this;return d},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var d in a)a.hasOwnProperty(d)&&(this[d]=a[d]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},u=b.WordArray=l.extend({init:function(a,d){a=this.words=a||[];this.sigBytes=d!=j?d:4*a.length},toString:function(a){return(a||m).stringify(this)},concat:function(a){var d=this.words,M=a.words,e=this.sigBytes;a=a.sigBytes;this.clamp();if(e%4)for(var b=0;b<a;b++)d[e+b>>>2]|=(M[b>>>2]>>>24-8*(b%4)&255)<<24-8*((e+b)%4);else if(65535<M.length)for(b=0;b<a;b+=4)d[e+b>>>2]=M[b>>>2];else d.push.apply(d,M);this.sigBytes+=a;return this},clamp:function(){var D=this.words,d=this.sigBytes;D[d>>>2]&=4294967295<<32-8*(d%4);D.length=a.ceil(d/4)},clone:function(){var a=l.clone.call(this);a.words=this.words.slice(0);return a},random:function(D){for(var d=[],b=0;b<D;b+=4)d.push(4294967296*a.random()|0);return new u.init(d,D)}}),k=c.enc={},m=k.Hex={stringify:function(a){var d=a.words;a=a.sigBytes;for(var b=[],e=0;e<a;e++){var c=d[e>>>2]>>>24-8*(e%4)&255;b.push((c>>>4).toString(16));b.push((c&15).toString(16))}return b.join("")},parse:function(a){for(var d=a.length,b=[],e=0;e<d;e+=2)b[e>>>3]|=parseInt(a.substr(e,2),16)<<24-4*(e%8);return new u.init(b,d/2)}},y=k.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],e=0;e<a;e++)c.push(String.fromCharCode(b[e>>>2]>>>24-8*(e%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],e=0;e<b;e++)c[e>>>2]|=(a.charCodeAt(e)&255)<<24-8*(e%4);return new u.init(c,b)}},z=k.Utf8={stringify:function(a){try{return decodeURIComponent(escape(y.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return y.parse(unescape(encodeURIComponent(a)))}},x=b.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=z.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(b){var d=this._data,c=d.words,e=d.sigBytes,l=this.blockSize,k=e/(4*l),k=b?a.ceil(k):a.max((k|0)-this._minBufferSize,0);b=k*l;e=a.min(4*b,e);if(b){for(var x=0;x<b;x+=l)this._doProcessBlock(c,x);x=c.splice(0,b);d.sigBytes-=e}return new u.init(x,e)},clone:function(){var a=l.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});b.Hasher=x.extend({cfg:l.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return(new a.init(c)).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return(new ja.HMAC.init(a,c)).finalize(b)}}});var ja=c.algo={};return c}(Math);(function(a){var j=CryptoJS,c=j.lib,b=c.Base,f=c.WordArray,j=j.x64={};j.Word=b.extend({init:function(a,b){this.high=a;this.low=b}});j.WordArray=b.extend({init:function(b,c){b=this.words=b||[];this.sigBytes=c!=a?c:8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],m=0;m<b;m++){var y=a[m];c.push(y.high);c.push(y.low)}return f.create(c,this.sigBytes)},clone:function(){for(var a=b.clone.call(this),c=a.words=this.words.slice(0),k=c.length,f=0;f<k;f++)c[f]=c[f].clone();return a}})})();(function(){function a(){return f.create.apply(f,arguments)}for(var j=CryptoJS,c=j.lib.Hasher,b=j.x64,f=b.Word,l=b.WordArray,b=j.algo,u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],k=[],m=0;80>m;m++)k[m]=a();b=b.SHA512=c.extend({_doReset:function(){this._hash=new l.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,f=c[0],j=c[1],d=c[2],l=c[3],e=c[4],m=c[5],N=c[6],c=c[7],aa=f.high,O=f.low,ba=j.high,P=j.low,ca=d.high,Q=d.low,da=l.high,R=l.low,ea=e.high,S=e.low,fa=m.high,T=m.low,ga=N.high,U=N.low,ha=c.high,V=c.low,r=aa,n=O,G=ba,E=P,H=ca,F=Q,Y=da,I=R,s=ea,p=S,W=fa,J=T,X=ga,K=U,Z=ha,L=V,t=0;80>t;t++){var A=k[t];if(16>t)var q=A.high=a[b+2*t]|0,g=A.low=a[b+2*t+1]|0;else{var q=k[t-15],g=q.high,v=q.low,q=(g>>>1|v<<31)^(g>>>8|v<<24)^g>>>7,v=(v>>>1|g<<31)^(v>>>8|g<<24)^(v>>>7|g<<25),C=k[t-2],g=C.high,h=C.low,C=(g>>>19|h<<13)^(g<<3|h>>>29)^g>>>6,h=(h>>>19|g<<13)^(h<<3|g>>>29)^(h>>>6|g<<26),g=k[t-7],$=g.high,B=k[t-16],w=B.high,B=B.low,g=v+g.low,q=q+$+(g>>>0<v>>>0?1:0),g=g+h,q=q+C+(g>>>0<h>>>0?1:0),g=g+B,q=q+w+(g>>>0<B>>>0?1:0);A.high=q;A.low=g}var $=s&W^~s&X,B=p&J^~p&K,A=r&G^r&H^G&H,ka=n&E^n&F^E&F,v=(r>>>28|n<<4)^(r<<30|n>>>2)^(r<<25|n>>>7),C=(n>>>28|r<<4)^(n<<30|r>>>2)^(n<<25|r>>>7),h=u[t],la=h.high,ia=h.low,h=L+((p>>>14|s<<18)^(p>>>18|s<<14)^(p<<23|s>>>9)),w=Z+((s>>>14|p<<18)^(s>>>18|p<<14)^(s<<23|p>>>9))+(h>>>0<L>>>0?1:0),h=h+B,w=w+$+(h>>>0<B>>>0?1:0),h=h+ia,w=w+la+(h>>>0<ia>>>0?1:0),h=h+g,w=w+q+(h>>>0<g>>>0?1:0),g=C+ka,A=v+A+(g>>>0<C>>>0?1:0),Z=X,L=K,X=W,K=J,W=s,J=p,p=I+h|0,s=Y+w+(p>>>0<I>>>0?1:0)|0,Y=H,I=F,H=G,F=E,G=r,E=n,n=h+g|0,r=w+A+(n>>>0<h>>>0?1:0)|0}O=f.low=O+n;f.high=aa+r+(O>>>0<n>>>0?1:0);P=j.low=P+E;j.high=ba+G+(P>>>0<E>>>0?1:0);Q=d.low=Q+F;d.high=ca+H+(Q>>>0<F>>>0?1:0);R=l.low=R+I;l.high=da+Y+(R>>>0<I>>>0?1:0);S=e.low=S+p;e.high=ea+s+(S>>>0<p>>>0?1:0);T=m.low=T+J;m.high=fa+W+(T>>>0<J>>>0?1:0);U=N.low=U+K;N.high=ga+X+(U>>>0<K>>>0?1:0);V=c.low=V+L;c.high=ha+Z+(V>>>0<L>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,f=8*a.sigBytes;b[f>>>5]|=128<<24-f%32;b[(f+128>>>10<<5)+30]=Math.floor(c/4294967296);b[(f+128>>>10<<5)+31]=c;a.sigBytes=4*b.length;this._process();return this._hash.toX32()},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a},blockSize:32});j.SHA512=c._createHelper(b);j.HmacSHA512=c._createHmacHelper(b)})();(function(){var a=CryptoJS,j=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,b){a=this._hasher=new a.init;"string"==typeof b&&(b=j.parse(b));var f=a.blockSize,l=4*f;b.sigBytes>l&&(b=a.finalize(b));b.clamp();for(var u=this._oKey=b.clone(),k=this._iKey=b.clone(),m=u.words,y=k.words,z=0;z<f;z++)m[z]^=1549556828,y[z]^=909522486;u.sigBytes=k.sigBytes=l;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
/*!
 * jquery-confirm v3.3.4 (http://craftpip.github.io/jquery-confirm/)
 * Author: Boniface Pereira
 * Website: www.craftpip.com
 * Contact: hey@craftpip.com
 *
 * Copyright 2013-2019 jquery-confirm
 * Licensed under MIT (https://github.com/craftpip/jquery-confirm/blob/master/LICENSE)
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{if(typeof module==="object"&&module.exports){module.exports=function(root,jQuery){if(jQuery===undefined){if(typeof window!=="undefined"){jQuery=require("jquery");}else{jQuery=require("jquery")(root);}}factory(jQuery);return jQuery;};}else{factory(jQuery);}}}(function($){var w=window;$.fn.confirm=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}$(this).each(function(){var $this=$(this);if($this.attr("jc-attached")){console.warn("jConfirm has already been attached to this element ",$this[0]);return;}$this.on("click",function(e){e.preventDefault();var jcOption=$.extend({},options);if($this.attr("data-title")){jcOption.title=$this.attr("data-title");}if($this.attr("data-content")){jcOption.content=$this.attr("data-content");}if(typeof jcOption.buttons==="undefined"){jcOption.buttons={};}jcOption["$target"]=$this;if($this.attr("href")&&Object.keys(jcOption.buttons).length===0){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];jcOption.buttons=buttons;jcOption.buttons[firstBtn].action=function(){location.href=$this.attr("href");};}jcOption.closeIcon=false;var instance=$.confirm(jcOption);});$this.attr("jc-attached",true);});return $(this);};$.confirm=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object"){options.buttons={};}if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});options.buttons=buttons;}return w.jconfirm(options);};$.alert=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object"){options.buttons={};}if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];options.buttons[firstBtn]=buttons[firstBtn];}return w.jconfirm(options);};$.dialog=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false,closeIcon:function(){}};}options.buttons={};if(typeof options.closeIcon==="undefined"){options.closeIcon=function(){};}options.confirmKeys=[13];return w.jconfirm(options);};w.jconfirm=function(options){if(typeof options==="undefined"){options={};}var pluginOptions=$.extend(true,{},w.jconfirm.pluginDefaults);if(w.jconfirm.defaults){pluginOptions=$.extend(true,pluginOptions,w.jconfirm.defaults);}pluginOptions=$.extend(true,{},pluginOptions,options);var instance=new w.Jconfirm(pluginOptions);w.jconfirm.instances.push(instance);return instance;};w.Jconfirm=function(options){$.extend(this,options);this._init();};w.Jconfirm.prototype={_init:function(){var that=this;if(!w.jconfirm.instances.length){w.jconfirm.lastFocused=$("body").find(":focus");}this._id=Math.round(Math.random()*99999);this.contentParsed=$(document.createElement("div"));if(!this.lazyOpen){setTimeout(function(){that.open();},0);}},_buildHTML:function(){var that=this;this._parseAnimation(this.animation,"o");this._parseAnimation(this.closeAnimation,"c");this._parseBgDismissAnimation(this.backgroundDismissAnimation);this._parseColumnClass(this.columnClass);this._parseTheme(this.theme);this._parseType(this.type);var template=$(this.template);template.find(".jconfirm-box").addClass(this.animationParsed).addClass(this.backgroundDismissAnimationParsed).addClass(this.typeParsed);if(this.typeAnimated){template.find(".jconfirm-box").addClass("jconfirm-type-animated");}if(this.useBootstrap){template.find(".jc-bs3-row").addClass(this.bootstrapClasses.row);template.find(".jc-bs3-row").addClass("justify-content-md-center justify-content-sm-center justify-content-xs-center justify-content-lg-center");template.find(".jconfirm-box-container").addClass(this.columnClassParsed);if(this.containerFluid){template.find(".jc-bs3-container").addClass(this.bootstrapClasses.containerFluid);}else{template.find(".jc-bs3-container").addClass(this.bootstrapClasses.container);}}else{template.find(".jconfirm-box").css("width",this.boxWidth);}if(this.titleClass){template.find(".jconfirm-title-c").addClass(this.titleClass);}template.addClass(this.themeParsed);var ariaLabel="jconfirm-box"+this._id;template.find(".jconfirm-box").attr("aria-labelledby",ariaLabel).attr("tabindex",-1);template.find(".jconfirm-content").attr("id",ariaLabel);if(this.bgOpacity!==null){template.find(".jconfirm-bg").css("opacity",this.bgOpacity);}if(this.rtl){template.addClass("jconfirm-rtl");}this.$el=template.appendTo(this.container);this.$jconfirmBoxContainer=this.$el.find(".jconfirm-box-container");this.$jconfirmBox=this.$body=this.$el.find(".jconfirm-box");this.$jconfirmBg=this.$el.find(".jconfirm-bg");this.$title=this.$el.find(".jconfirm-title");this.$titleContainer=this.$el.find(".jconfirm-title-c");this.$content=this.$el.find("div.jconfirm-content");this.$contentPane=this.$el.find(".jconfirm-content-pane");this.$icon=this.$el.find(".jconfirm-icon-c");this.$closeIcon=this.$el.find(".jconfirm-closeIcon");this.$holder=this.$el.find(".jconfirm-holder");this.$btnc=this.$el.find(".jconfirm-buttons");this.$scrollPane=this.$el.find(".jconfirm-scrollpane");that.setStartingPoint();this._contentReady=$.Deferred();this._modalReady=$.Deferred();this.$holder.css({"padding-top":this.offsetTop,"padding-bottom":this.offsetBottom,});this.setTitle();this.setIcon();this._setButtons();this._parseContent();this.initDraggable();if(this.isAjax){this.showLoading(false);}$.when(this._contentReady,this._modalReady).then(function(){if(that.isAjaxLoading){setTimeout(function(){that.isAjaxLoading=false;that.setContent();that.setTitle();that.setIcon();setTimeout(function(){that.hideLoading(false);that._updateContentMaxHeight();},100);if(typeof that.onContentReady==="function"){that.onContentReady();}},50);}else{that._updateContentMaxHeight();that.setTitle();that.setIcon();if(typeof that.onContentReady==="function"){that.onContentReady();}}if(that.autoClose){that._startCountDown();}}).then(function(){that._watchContent();});if(this.animation==="none"){this.animationSpeed=1;this.animationBounce=1;}this.$body.css(this._getCSS(this.animationSpeed,this.animationBounce));this.$contentPane.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBg.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBoxContainer.css(this._getCSS(this.animationSpeed,1));},_typePrefix:"jconfirm-type-",typeParsed:"",_parseType:function(type){this.typeParsed=this._typePrefix+type;},setType:function(type){var oldClass=this.typeParsed;this._parseType(type);this.$jconfirmBox.removeClass(oldClass).addClass(this.typeParsed);},themeParsed:"",_themePrefix:"jconfirm-",setTheme:function(theme){var previous=this.theme;this.theme=theme||this.theme;this._parseTheme(this.theme);if(previous){this.$el.removeClass(previous);}this.$el.addClass(this.themeParsed);this.theme=theme;},_parseTheme:function(theme){var that=this;theme=theme.split(",");$.each(theme,function(k,a){if(a.indexOf(that._themePrefix)===-1){theme[k]=that._themePrefix+$.trim(a);}});this.themeParsed=theme.join(" ").toLowerCase();},backgroundDismissAnimationParsed:"",_bgDismissPrefix:"jconfirm-hilight-",_parseBgDismissAnimation:function(bgDismissAnimation){var animation=bgDismissAnimation.split(",");var that=this;$.each(animation,function(k,a){if(a.indexOf(that._bgDismissPrefix)===-1){animation[k]=that._bgDismissPrefix+$.trim(a);}});this.backgroundDismissAnimationParsed=animation.join(" ").toLowerCase();},animationParsed:"",closeAnimationParsed:"",_animationPrefix:"jconfirm-animation-",setAnimation:function(animation){this.animation=animation||this.animation;this._parseAnimation(this.animation,"o");},_parseAnimation:function(animation,which){which=which||"o";var animations=animation.split(",");var that=this;$.each(animations,function(k,a){if(a.indexOf(that._animationPrefix)===-1){animations[k]=that._animationPrefix+$.trim(a);}});var a_string=animations.join(" ").toLowerCase();if(which==="o"){this.animationParsed=a_string;}else{this.closeAnimationParsed=a_string;}return a_string;},setCloseAnimation:function(closeAnimation){this.closeAnimation=closeAnimation||this.closeAnimation;this._parseAnimation(this.closeAnimation,"c");},setAnimationSpeed:function(speed){this.animationSpeed=speed||this.animationSpeed;},columnClassParsed:"",setColumnClass:function(colClass){if(!this.useBootstrap){console.warn("cannot set columnClass, useBootstrap is set to false");return;}this.columnClass=colClass||this.columnClass;this._parseColumnClass(this.columnClass);this.$jconfirmBoxContainer.addClass(this.columnClassParsed);},_updateContentMaxHeight:function(){var height=$(window).height()-(this.$jconfirmBox.outerHeight()-this.$contentPane.outerHeight())-(this.offsetTop+this.offsetBottom);this.$contentPane.css({"max-height":height+"px"});},setBoxWidth:function(width){if(this.useBootstrap){console.warn("cannot set boxWidth, useBootstrap is set to true");return;}this.boxWidth=width;this.$jconfirmBox.css("width",width);},_parseColumnClass:function(colClass){colClass=colClass.toLowerCase();var p;switch(colClass){case"xl":case"xlarge":p="col-md-12";break;case"l":case"large":p="col-md-8 col-md-offset-2";break;case"m":case"medium":p="col-md-6 col-md-offset-3";break;case"s":case"small":p="col-md-4 col-md-offset-4";break;case"xs":case"xsmall":p="col-md-2 col-md-offset-5";break;default:p=colClass;}this.columnClassParsed=p;},initDraggable:function(){var that=this;var $t=this.$titleContainer;this.resetDrag();if(this.draggable){$t.on("mousedown",function(e){$t.addClass("jconfirm-hand");that.mouseX=e.clientX;that.mouseY=e.clientY;that.isDrag=true;});$(window).on("mousemove."+this._id,function(e){if(that.isDrag){that.movingX=e.clientX-that.mouseX+that.initialX;that.movingY=e.clientY-that.mouseY+that.initialY;that.setDrag();}});$(window).on("mouseup."+this._id,function(){$t.removeClass("jconfirm-hand");if(that.isDrag){that.isDrag=false;that.initialX=that.movingX;that.initialY=that.movingY;}});}},resetDrag:function(){this.isDrag=false;this.initialX=0;this.initialY=0;this.movingX=0;this.movingY=0;this.mouseX=0;this.mouseY=0;this.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");},setDrag:function(){if(!this.draggable){return;}this.alignMiddle=false;var boxWidth=this.$jconfirmBox.outerWidth();var boxHeight=this.$jconfirmBox.outerHeight();var windowWidth=$(window).width();var windowHeight=$(window).height();var that=this;var dragUpdate=1;if(that.movingX%dragUpdate===0||that.movingY%dragUpdate===0){if(that.dragWindowBorder){var leftDistance=(windowWidth/2)-boxWidth/2;var topDistance=(windowHeight/2)-boxHeight/2;topDistance-=that.dragWindowGap;leftDistance-=that.dragWindowGap;if(leftDistance+that.movingX<0){that.movingX=-leftDistance;}else{if(leftDistance-that.movingX<0){that.movingX=leftDistance;}}if(topDistance+that.movingY<0){that.movingY=-topDistance;}else{if(topDistance-that.movingY<0){that.movingY=topDistance;}}}that.$jconfirmBoxContainer.css("transform","translate("+that.movingX+"px, "+that.movingY+"px)");}},_scrollTop:function(){if(typeof pageYOffset!=="undefined"){return pageYOffset;}else{var B=document.body;var D=document.documentElement;D=(D.clientHeight)?D:B;return D.scrollTop;}},_watchContent:function(){var that=this;if(this._timer){clearInterval(this._timer);}var prevContentHeight=0;this._timer=setInterval(function(){if(that.smoothContent){var contentHeight=that.$content.outerHeight()||0;if(contentHeight!==prevContentHeight){prevContentHeight=contentHeight;}var wh=$(window).height();var total=that.offsetTop+that.offsetBottom+that.$jconfirmBox.height()-that.$contentPane.height()+that.$content.height();if(total<wh){that.$contentPane.addClass("no-scroll");}else{that.$contentPane.removeClass("no-scroll");}}},this.watchInterval);},_overflowClass:"jconfirm-overflow",_hilightAnimating:false,highlight:function(){this.hiLightModal();},hiLightModal:function(){var that=this;if(this._hilightAnimating){return;}that.$body.addClass("hilight");var duration=parseFloat(that.$body.css("animation-duration"))||2;this._hilightAnimating=true;setTimeout(function(){that._hilightAnimating=false;that.$body.removeClass("hilight");},duration*1000);},_bindEvents:function(){var that=this;this.boxClicked=false;this.$scrollPane.click(function(e){if(!that.boxClicked){var buttonName=false;var shouldClose=false;var str;if(typeof that.backgroundDismiss==="function"){str=that.backgroundDismiss();}else{str=that.backgroundDismiss;}if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else{if(typeof str==="undefined"||!!(str)===true){shouldClose=true;}else{shouldClose=false;}}if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose){that.close();}else{that.hiLightModal();}}that.boxClicked=false;});this.$jconfirmBox.click(function(e){that.boxClicked=true;});var isKeyDown=false;$(window).on("jcKeyDown."+that._id,function(e){if(!isKeyDown){isKeyDown=true;}});$(window).on("keyup."+that._id,function(e){if(isKeyDown){that.reactOnKey(e);isKeyDown=false;}});$(window).on("resize."+this._id,function(){that._updateContentMaxHeight();setTimeout(function(){that.resetDrag();},100);});},_cubic_bezier:"0.36, 0.55, 0.19",_getCSS:function(speed,bounce){return{"-webkit-transition-duration":speed/1000+"s","transition-duration":speed/1000+"s","-webkit-transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")","transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")"};},_setButtons:function(){var that=this;var total_buttons=0;if(typeof this.buttons!=="object"){this.buttons={};}$.each(this.buttons,function(key,button){total_buttons+=1;if(typeof button==="function"){that.buttons[key]=button={action:button};}that.buttons[key].text=button.text||key;that.buttons[key].btnClass=button.btnClass||"btn-default";that.buttons[key].action=button.action||function(){};that.buttons[key].keys=button.keys||[];that.buttons[key].isHidden=button.isHidden||false;that.buttons[key].isDisabled=button.isDisabled||false;$.each(that.buttons[key].keys,function(i,a){that.buttons[key].keys[i]=a.toLowerCase();});var button_element=$('<button type="button" class="btn"></button>').html(that.buttons[key].text).addClass(that.buttons[key].btnClass).prop("disabled",that.buttons[key].isDisabled).css("display",that.buttons[key].isHidden?"none":"").click(function(e){e.preventDefault();var res=that.buttons[key].action.apply(that,[that.buttons[key]]);that.onAction.apply(that,[key,that.buttons[key]]);that._stopCountDown();if(typeof res==="undefined"||res){that.close();}});that.buttons[key].el=button_element;that.buttons[key].setText=function(text){button_element.html(text);};that.buttons[key].addClass=function(className){button_element.addClass(className);};that.buttons[key].removeClass=function(className){button_element.removeClass(className);};that.buttons[key].disable=function(){that.buttons[key].isDisabled=true;button_element.prop("disabled",true);};that.buttons[key].enable=function(){that.buttons[key].isDisabled=false;button_element.prop("disabled",false);};that.buttons[key].show=function(){that.buttons[key].isHidden=false;button_element.css("display","");};that.buttons[key].hide=function(){that.buttons[key].isHidden=true;button_element.css("display","none");};that["$_"+key]=that["$$"+key]=button_element;that.$btnc.append(button_element);});if(total_buttons===0){this.$btnc.hide();}if(this.closeIcon===null&&total_buttons===0){this.closeIcon=true;}if(this.closeIcon){if(this.closeIconClass){var closeHtml='<i class="'+this.closeIconClass+'"></i>';this.$closeIcon.html(closeHtml);}this.$closeIcon.click(function(e){e.preventDefault();var buttonName=false;var shouldClose=false;var str;if(typeof that.closeIcon==="function"){str=that.closeIcon();}else{str=that.closeIcon;}if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else{if(typeof str==="undefined"||!!(str)===true){shouldClose=true;}else{shouldClose=false;}}if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose){that.close();}});this.$closeIcon.show();}else{this.$closeIcon.hide();}},setTitle:function(string,force){force=force||false;if(typeof string!=="undefined"){if(typeof string==="string"){this.title=string;}else{if(typeof string==="function"){if(typeof string.promise==="function"){console.error("Promise was returned from title function, this is not supported.");}var response=string();if(typeof response==="string"){this.title=response;}else{this.title=false;}}else{this.title=false;}}}if(this.isAjaxLoading&&!force){return;}this.$title.html(this.title||"");this.updateTitleContainer();},setIcon:function(iconClass,force){force=force||false;if(typeof iconClass!=="undefined"){if(typeof iconClass==="string"){this.icon=iconClass;}else{if(typeof iconClass==="function"){var response=iconClass();if(typeof response==="string"){this.icon=response;}else{this.icon=false;}}else{this.icon=false;}}}if(this.isAjaxLoading&&!force){return;}this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':"");this.updateTitleContainer();},updateTitleContainer:function(){if(!this.title&&!this.icon){this.$titleContainer.hide();}else{this.$titleContainer.show();}},setContentPrepend:function(content,force){if(!content){return;}this.contentParsed.prepend(content);},setContentAppend:function(content){if(!content){return;}this.contentParsed.append(content);},setContent:function(content,force){force=!!force;var that=this;if(content){this.contentParsed.html("").append(content);}if(this.isAjaxLoading&&!force){return;}this.$content.html("");this.$content.append(this.contentParsed);setTimeout(function(){that.$body.find("input[autofocus]:visible:first").focus();},100);},loadingSpinner:false,showLoading:function(disableButtons){this.loadingSpinner=true;this.$jconfirmBox.addClass("loading");if(disableButtons){this.$btnc.find("button").prop("disabled",true);}},hideLoading:function(enableButtons){this.loadingSpinner=false;this.$jconfirmBox.removeClass("loading");if(enableButtons){this.$btnc.find("button").prop("disabled",false);}},ajaxResponse:false,contentParsed:"",isAjax:false,isAjaxLoading:false,_parseContent:function(){var that=this;var e="&nbsp;";if(typeof this.content==="function"){var res=this.content.apply(this);if(typeof res==="string"){this.content=res;}else{if(typeof res==="object"&&typeof res.always==="function"){this.isAjax=true;this.isAjaxLoading=true;res.always(function(data,status,xhr){that.ajaxResponse={data:data,status:status,xhr:xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function"){that.contentLoaded(data,status,xhr);}});this.content=e;}else{this.content=e;}}}if(typeof this.content==="string"&&this.content.substr(0,4).toLowerCase()==="url:"){this.isAjax=true;this.isAjaxLoading=true;var u=this.content.substring(4,this.content.length);$.get(u).done(function(html){that.contentParsed.html(html);}).always(function(data,status,xhr){that.ajaxResponse={data:data,status:status,xhr:xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function"){that.contentLoaded(data,status,xhr);}});}if(!this.content){this.content=e;}if(!this.isAjax){this.contentParsed.html(this.content);this.setContent();that._contentReady.resolve();}},_stopCountDown:function(){clearInterval(this.autoCloseInterval);if(this.$cd){this.$cd.remove();}},_startCountDown:function(){var that=this;var opt=this.autoClose.split("|");if(opt.length!==2){console.error("Invalid option for autoClose. example 'close|10000'");return false;}var button_key=opt[0];var time=parseInt(opt[1]);if(typeof this.buttons[button_key]==="undefined"){console.error("Invalid button key '"+button_key+"' for autoClose");return false;}var seconds=Math.ceil(time/1000);this.$cd=$('<span class="countdown"> ('+seconds+")</span>").appendTo(this["$_"+button_key]);this.autoCloseInterval=setInterval(function(){that.$cd.html(" ("+(seconds-=1)+") ");if(seconds<=0){that["$$"+button_key].trigger("click");that._stopCountDown();}},1000);},_getKey:function(key){switch(key){case 192:return"tilde";case 13:return"enter";case 16:return"shift";case 9:return"tab";case 20:return"capslock";case 17:return"ctrl";case 91:return"win";case 18:return"alt";case 27:return"esc";case 32:return"space";}var initial=String.fromCharCode(key);if(/^[A-z0-9]+$/.test(initial)){return initial.toLowerCase();}else{return false;}},reactOnKey:function(e){var that=this;var a=$(".jconfirm");if(a.eq(a.length-1)[0]!==this.$el[0]){return false;}var key=e.which;if(this.$content.find(":input").is(":focus")&&/13|32/.test(key)){return false;}var keyChar=this._getKey(key);if(keyChar==="esc"&&this.escapeKey){if(this.escapeKey===true){this.$scrollPane.trigger("click");}else{if(typeof this.escapeKey==="string"||typeof this.escapeKey==="function"){var buttonKey;if(typeof this.escapeKey==="function"){buttonKey=this.escapeKey();}else{buttonKey=this.escapeKey;}if(buttonKey){if(typeof this.buttons[buttonKey]==="undefined"){console.warn("Invalid escapeKey, no buttons found with key "+buttonKey);}else{this["$_"+buttonKey].trigger("click");}}}}}$.each(this.buttons,function(key,button){if(button.keys.indexOf(keyChar)!==-1){that["$_"+key].trigger("click");}});},setDialogCenter:function(){console.info("setDialogCenter is deprecated, dialogs are centered with CSS3 tables");},_unwatchContent:function(){clearInterval(this._timer);},close:function(onClosePayload){var that=this;if(typeof this.onClose==="function"){this.onClose(onClosePayload);}this._unwatchContent();$(window).unbind("resize."+this._id);$(window).unbind("keyup."+this._id);$(window).unbind("jcKeyDown."+this._id);if(this.draggable){$(window).unbind("mousemove."+this._id);$(window).unbind("mouseup."+this._id);this.$titleContainer.unbind("mousedown");}that.$el.removeClass(that.loadedClass);$("body").removeClass("jconfirm-no-scroll-"+that._id);that.$jconfirmBoxContainer.removeClass("jconfirm-no-transition");setTimeout(function(){that.$body.addClass(that.closeAnimationParsed);that.$jconfirmBg.addClass("jconfirm-bg-h");var closeTimer=(that.closeAnimation==="none")?1:that.animationSpeed;setTimeout(function(){that.$el.remove();var l=w.jconfirm.instances;var i=w.jconfirm.instances.length-1;for(i;i>=0;i--){if(w.jconfirm.instances[i]._id===that._id){w.jconfirm.instances.splice(i,1);}}if(!w.jconfirm.instances.length){if(that.scrollToPreviousElement&&w.jconfirm.lastFocused&&w.jconfirm.lastFocused.length&&$.contains(document,w.jconfirm.lastFocused[0])){var $lf=w.jconfirm.lastFocused;if(that.scrollToPreviousElementAnimate){var st=$(window).scrollTop();var ot=w.jconfirm.lastFocused.offset().top;var wh=$(window).height();if(!(ot>st&&ot<(st+wh))){var scrollTo=(ot-Math.round((wh/3)));$("html, body").animate({scrollTop:scrollTo},that.animationSpeed,"swing",function(){$lf.focus();});}else{$lf.focus();}}else{$lf.focus();}w.jconfirm.lastFocused=false;}}if(typeof that.onDestroy==="function"){that.onDestroy();}},closeTimer*0.4);},50);return true;},open:function(){if(this.isOpen()){return false;}this._buildHTML();this._bindEvents();this._open();return true;},setStartingPoint:function(){var el=false;if(this.animateFromElement!==true&&this.animateFromElement){el=this.animateFromElement;w.jconfirm.lastClicked=false;}else{if(w.jconfirm.lastClicked&&this.animateFromElement===true){el=w.jconfirm.lastClicked;w.jconfirm.lastClicked=false;}else{return false;}}if(!el){return false;}var offset=el.offset();var iTop=el.outerHeight()/2;var iLeft=el.outerWidth()/2;iTop-=this.$jconfirmBox.outerHeight()/2;iLeft-=this.$jconfirmBox.outerWidth()/2;var sourceTop=offset.top+iTop;sourceTop=sourceTop-this._scrollTop();var sourceLeft=offset.left+iLeft;var wh=$(window).height()/2;var ww=$(window).width()/2;var targetH=wh-this.$jconfirmBox.outerHeight()/2;var targetW=ww-this.$jconfirmBox.outerWidth()/2;sourceTop-=targetH;sourceLeft-=targetW;if(Math.abs(sourceTop)>wh||Math.abs(sourceLeft)>ww){return false;}this.$jconfirmBoxContainer.css("transform","translate("+sourceLeft+"px, "+sourceTop+"px)");},_open:function(){var that=this;if(typeof that.onOpenBefore==="function"){that.onOpenBefore();}this.$body.removeClass(this.animationParsed);this.$jconfirmBg.removeClass("jconfirm-bg-h");this.$body.focus();that.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");setTimeout(function(){that.$body.css(that._getCSS(that.animationSpeed,1));that.$body.css({"transition-property":that.$body.css("transition-property")+", margin"});that.$jconfirmBoxContainer.addClass("jconfirm-no-transition");that._modalReady.resolve();if(typeof that.onOpen==="function"){that.onOpen();}that.$el.addClass(that.loadedClass);},this.animationSpeed);},loadedClass:"jconfirm-open",isClosed:function(){return!this.$el||this.$el.parent().length===0;},isOpen:function(){return!this.isClosed();},toggle:function(){if(!this.isOpen()){this.open();}else{this.close();}}};w.jconfirm.instances=[];w.jconfirm.lastFocused=false;w.jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:"Hello",titleClass:"",type:"default",typeAnimated:true,draggable:true,dragWindowGap:15,dragWindowBorder:true,animateFromElement:true,alignMiddle:true,smoothContent:true,content:"Are you sure to continue?",buttons:{},defaultButtons:{ok:{action:function(){}},close:{action:function(){}}},contentLoaded:function(){},icon:"",lazyOpen:false,bgOpacity:null,theme:"light",animation:"scale",closeAnimation:"scale",animationSpeed:400,animationBounce:1,escapeKey:true,rtl:false,container:"body",containerFluid:false,backgroundDismiss:false,backgroundDismissAnimation:"shake",autoClose:false,closeIcon:null,closeIconClass:false,watchInterval:100,columnClass:"col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1",boxWidth:"50%",scrollToPreviousElement:true,scrollToPreviousElementAnimate:true,useBootstrap:true,offsetTop:40,offsetBottom:40,bootstrapClasses:{container:"container",containerFluid:"container-fluid",row:"row"},onContentReady:function(){},onOpenBefore:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},onAction:function(){}};var keyDown=false;$(window).on("keydown",function(e){if(!keyDown){var $target=$(e.target);var pass=false;if($target.closest(".jconfirm-box").length){pass=true;}if(pass){$(window).trigger("jcKeyDown");}keyDown=true;}});$(window).on("keyup",function(){keyDown=false;});w.jconfirm.lastClicked=false;$(document).on("mousedown","button, a, [jc-source]",function(){w.jconfirm.lastClicked=$(this);});}));$.overridePlugin('swAjaxVariant',{requestData:function(values,pushState){var me=this;var configSelector=$("#bogx_config");var bogxSeoVariants=$('#bogx--seo-variants');if(configSelector.length<=0&&bogxSeoVariants.length<=0){me.superclass.requestData.apply(this,arguments);}else{var stateObj=me._createHistoryStateObject();var price_selector;var newDataBlockprices;var newhighPrice;var newofferCount;var bogx_seo_variants;var bogxBreadcrumb;var bogxVariantName;var tabnavi,related,similar,alsobought,alsoviewed;var bogxSeoUrl,bogxSeoTitle,newLocation,location;$.loadingIndicator.open({closeOnClick:false,delay:100});$.publish('plugin/swAjaxVariant/onBeforeRequestData',[me,values,stateObj.location]);values.template='ajax';if(stateObj.params.hasOwnProperty('c')){values.c=stateObj.params.c;}
$.ajax({url:stateObj.location,data:values,method:'GET',success:function(response){var $response=$($.parseHTML(response,document,true)),$productDetails,$productDescription;var ordernumber=$.trim($response.find(me.opts.orderNumberSelector).text());var config_selector=$("#bogx_config");if(config_selector.length>0){var $image_first_slide=$response.find(".image--box.image-slider--item").first();if(config_selector.attr('data-images_refresh')==='1'){var bogx_sticky_panel=$('#bogx_sticky_panel');var $image_container_neu=$response.find(".product--image-container").clone();$image_container_neu.find('div#bogx_sticky_panel').remove();var product_image_container=".product--image-container";$(product_image_container).replaceWith($image_container_neu);StateManager.addPlugin('*[data-image-slider="true"]','swImageSlider').addPlugin('.product--image-zoom','swImageZoom','xl').addPlugin('*[data-image-gallery="true"]','swImageGallery');$(product_image_container).append(bogx_sticky_panel);}
var active_modal=$('#bogx_config').attr('data-modal_active');if(active_modal){var image_media_neu=$image_first_slide.find(".image--media")[0];var image_media_alt=$("#bogx_modal_image_element").find(".bogx--image-media")[0];if(image_media_alt&&image_media_neu){$(image_media_alt).html($(image_media_neu).html());}}
var block_prices_selector=".block-prices--container";price_selector=".product--price.price--default";var $bogx_block_prices=$response.find(".block-prices--container");if(typeof $(block_prices_selector)!=='undefined'&&$(block_prices_selector).length>0){if(typeof $bogx_block_prices!=='undefined'&&$bogx_block_prices.length>0){var newlowPrice=$response.find('meta[itemprop="lowPrice"]').attr('content');if(typeof newlowPrice!=="undefined")$('meta[itemprop="lowPrice"]').attr('content',newlowPrice);newhighPrice=$response.find('meta[itemprop="highPrice"]').attr('content');if(typeof newhighPrice!=="undefined")$('meta[itemprop="highPrice"]').attr('content',newhighPrice);newofferCount=$response.find('meta[itemprop="offerCount"]').attr('content');if(typeof newofferCount!=="undefined")$('meta[itemprop="offerCount"]').attr('content',newofferCount);$(block_prices_selector).replaceWith($bogx_block_prices);}else{var $bogx_price=$response.find(".product--price.price--default");if(typeof $bogx_price!=='undefined'&&$bogx_price.length>0){$(block_prices_selector).replaceWith($bogx_price);$('meta[itemprop="lowPrice"]').remove();$('meta[itemprop="highPrice"]').remove();$('meta[itemprop="offerCount"]').remove();}}
newDataBlockprices=$response.find('.bogx--config-quantity-wrap').attr('data-blockprices');if(typeof newDataBlockprices!=="undefined")$('.bogx--config-quantity-wrap').attr('data-blockprices',newDataBlockprices);}else if(typeof $bogx_block_prices!=='undefined'&&$bogx_block_prices.length>0){if(typeof $(price_selector)!=='undefined'&&$(price_selector).length>0){var collection=$response.find('meta[itemprop="lowPrice"]');newhighPrice=$response.find('meta[itemprop="highPrice"]');collection=collection.add(newhighPrice);newofferCount=$response.find('meta[itemprop="offerCount"]');collection=collection.add(newofferCount);$('.buybox--inner').prepend(collection);$(price_selector).replaceWith($bogx_block_prices);newDataBlockprices=$response.find('.bogx--config-quantity-wrap').attr('data-blockprices');if(typeof newDataBlockprices!=="undefined")$('.bogx--config-quantity-wrap').attr('data-blockprices',newDataBlockprices);}}
var newWeight=$response.find('meta[itemprop="weight"]').attr('content');$('meta[itemprop="weight"]').attr('content',newWeight);var product_price_default=$response.find(".product--price.price--default").html();$(".product--price.price--default").html(product_price_default);var product_delivery=$response.find(".product--delivery").html();$(".product--delivery").html(product_delivery);var product_configurator=$response.find(".product--configurator").html();$(".product--configurator").html(product_configurator);var $bogx_config=$response.find("#bogx_config");if($bogx_config.length>0){config_selector.replaceWith($bogx_config);}else{console.log('FATAL ERROR in Ajax-Variant Plugin Override: configuration container #bogx_config in rendered template not found.');}
price_selector=$("#bogx_config_basicprice");if(price_selector.length>0){var $bogx_config_basicprice=$response.find("#bogx_config_basicprice");price_selector.replaceWith($bogx_config_basicprice);}
$("input[name='sAdd']").val(ordernumber);var product_base_info=$response.find(".product--base-info.list--unstyled").html();$(".product--base-info.list--unstyled").html(product_base_info);}else{$productDetails=$response.find(me.opts.productDetailsSelector).html();$(me.opts.productDetailsSelector).html($productDetails);}
bogx_seo_variants='#bogx--seo-variants';if($(bogx_seo_variants).length>0){var $bogx_seo_variants=$response.find(bogx_seo_variants);$(bogx_seo_variants).replaceWith($bogx_seo_variants);}
$productDescription=$response.find(me.opts.productDetailsDescriptionSelector);$(me.opts.productDetailsDescriptionSelector).html($productDescription.html());window.controller=window.snippets=window.themeConfig=window.lastSeenProductsConfig=window.csrfConfig=null;$(me.opts.footerJavascriptInlineSelector).replaceWith($response.filter(me.opts.footerJavascriptInlineSelector));if(config_selector.length>0){StateManager.updatePlugin('select','swSelectboxReplacement').updatePlugin('.product--image-zoom','swImageZoom','xl').updatePlugin('*[data-image-gallery="true"]','swImageGallery').updatePlugin('*[data-product-slider="true"]','swProductSlider').updatePlugin('*[data-add-article="true"]','swAddArticle').updatePlugin('*[data-modalbox="true"]','swModalbox');bogx_seo_variants='#bogx--seo-variants';if($(bogx_seo_variants).length>0){bogxBreadcrumb=$($.parseHTML(response)).find(".content--breadcrumb");if(bogxBreadcrumb[0]){$('.content--breadcrumb').html(bogxBreadcrumb[0].innerHTML);}
bogxVariantName=$(bogx_seo_variants).attr("data-variant-name");$('h1.product--title').html(bogxVariantName);tabnavi=$($.parseHTML(response)).find(".product--rating-count-wrapper .product--rating-count");if(tabnavi[0]){$('.product--rating-count-wrapper .product--rating-count').html(tabnavi[0].innerHTML);}
related=$($.parseHTML(response)).find(".related--content");if(related[0]){$('.related--content').html(related[0].innerHTML);}else{$('.related--content').html('');}
similar=$($.parseHTML(response)).find(".similar--content");if(similar[0]){$('.similar--content').html(similar[0].innerHTML);}else{$('.similar--content').html('');}
alsobought=$($.parseHTML(response)).find(".content--also-bought");if(alsobought[0]){$('.content--also-bought').html(alsobought[0].innerHTML);}else{$('.content--also-bought').html('');}
alsoviewed=$($.parseHTML(response)).find(".content--also-viewed");if(alsoviewed[0]){$('.content--also-viewed').html(alsoviewed[0].innerHTML);}else{$('.content--also-viewed').html('');}
bogxSeoUrl=$(bogx_seo_variants).attr("data-seo-url");bogxSeoTitle=$(bogx_seo_variants).attr("data-seo-title");if(bogxSeoUrl!==""){newLocation=bogxSeoUrl;window.history.replaceState(stateObj,bogxSeoTitle,newLocation);$.publish('plugin/swAjaxVariant/onHistoryChanged',[me,response,values,stateObj.location]);}}else{if(pushState&&me.hasHistorySupport){location=stateObj.location+'?number='+ordernumber;if(stateObj.params.hasOwnProperty('c')){location+='&c='+stateObj.params.c;}
window.history.pushState(stateObj.state,stateObj.title,location);$.publish('plugin/swAjaxVariant/onHistoryChanged',[me,response,values,stateObj.location]);}}}else{StateManager.addPlugin('*[data-image-slider="true"]','swImageSlider').addPlugin('.product--image-zoom','swImageZoom','xl').addPlugin('*[data-image-gallery="true"]','swImageGallery').addPlugin('*[data-add-article="true"]','swAddArticle').addPlugin('*[data-modalbox="true"]','swModalbox');if(Object.prototype.hasOwnProperty.call(window,'replaceAsyncReady')&&typeof(window.replaceAsyncReady)==='function'){window.replaceAsyncReady();}
bogx_seo_variants='#bogx--seo-variants';if($(bogx_seo_variants).length>0){bogxBreadcrumb=$($.parseHTML(response)).find(".content--breadcrumb");if(bogxBreadcrumb[0]){$('.content--breadcrumb').html(bogxBreadcrumb[0].innerHTML);}
bogxVariantName=$(bogx_seo_variants).attr("data-variant-name");$('h1.product--title').html(bogxVariantName);tabnavi=$($.parseHTML(response)).find(".product--rating-count-wrapper .product--rating-count");if(tabnavi[0]){$('.product--rating-count-wrapper .product--rating-count').html(tabnavi[0].innerHTML);}
related=$($.parseHTML(response)).find(".related--content");if(related[0]){$('.related--content').html(related[0].innerHTML);}else{$('.related--content').html('');}
similar=$($.parseHTML(response)).find(".similar--content");if(similar[0]){$('.similar--content').html(similar[0].innerHTML);}else{$('.similar--content').html('');}
alsobought=$($.parseHTML(response)).find(".content--also-bought");if(alsobought[0]){$('.content--also-bought').html(alsobought[0].innerHTML);}else{$('.content--also-bought').html('');}
alsoviewed=$($.parseHTML(response)).find(".content--also-viewed");if(alsoviewed[0]){$('.content--also-viewed').html(alsoviewed[0].innerHTML);}else{$('.content--also-viewed').html('');}
bogxSeoUrl=$(bogx_seo_variants).attr("data-seo-url");bogxSeoTitle=$(bogx_seo_variants).attr("data-seo-title");if(bogxSeoUrl!==""){newLocation=bogxSeoUrl;window.history.replaceState(stateObj,bogxSeoTitle,newLocation);$.publish('plugin/swAjaxVariant/onHistoryChanged',[me,response,values,stateObj.location]);}}else{if(pushState&&me.hasHistorySupport){location=stateObj.location+'?number='+ordernumber;if(stateObj.params.hasOwnProperty('c')){location+='&c='+stateObj.params.c;}
window.history.pushState(stateObj.state,stateObj.title,location);$.publish('plugin/swAjaxVariant/onHistoryChanged',[me,response,values,stateObj.location]);}}}
$.publish('plugin/swAjaxVariant/onRequestData',[me,response,values,stateObj.location]);},complete:function(){$.loadingIndicator.close();}});}}});
/*!
 * jQuery & Zepto Lazy - v1.7.10
 * http://jquery.eisbehr.de/lazy/
 *
 * Copyright 2012 - 2018, Daniel 'Eisbehr' Kern
 *
 * Dual licensed under the MIT and GPL-2.0 licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * $("img.lazy").lazy();
 */
;(function(window,undefined){"use strict";var $=window.jQuery||window.Zepto,lazyInstanceId=0,windowLoaded=false;$.fn.Bogx_Lazy=$.fn.bogx_lazy=function(settings){return new LazyPlugin(this,settings);};$.Bogx_Lazy=$.bogx_lazy=function(names,elements,loader){if($.isFunction(elements)){loader=elements;elements=[];}
if(!$.isFunction(loader)){return;}
names=$.isArray(names)?names:[names];elements=$.isArray(elements)?elements:[elements];var config=LazyPlugin.prototype.config,forced=config._f||(config._f={});for(var i=0,l=names.length;i<l;i++){if(config[names[i]]===undefined||$.isFunction(config[names[i]])){config[names[i]]=loader;}}
for(var c=0,a=elements.length;c<a;c++){forced[elements[c]]=names[0];}};function _executeLazy(instance,config,items,events,namespace){var _awaitingAfterLoad=0,_actualWidth=-1,_actualHeight=-1,_isRetinaDisplay=false,_afterLoad='afterLoad',_load='load',_error='error',_img='img',_src='src',_srcset='srcset',_sizes='sizes',_backgroundImage='background-image';function _initialize(){_isRetinaDisplay=window.devicePixelRatio>1;items=_prepareItems(items);if(config.delay>=0){setTimeout(function(){_lazyLoadItems(true);},config.delay);}
if(config.delay<0||config.combined){events.e=_throttle(config.throttle,function(event){if(event.type==='resize'){_actualWidth=_actualHeight=-1;}
_lazyLoadItems(event.all);});events.a=function(additionalItems){additionalItems=_prepareItems(additionalItems);items.push.apply(items,additionalItems);};events.g=function(){return(items=$(items).filter(function(){return!$(this).data(config.loadedName);}));};events.f=function(forcedItems){for(var i=0;i<forcedItems.length;i++){var item=items.filter(function(){return this===forcedItems[i];});if(item.length){_lazyLoadItems(false,item);}}};_lazyLoadItems();$(config.appendScroll).on('scroll.'+namespace+' resize.'+namespace,events.e);}}
function _prepareItems(items){var defaultImage=config.defaultImage,placeholder=config.placeholder,imageBase=config.imageBase,srcsetAttribute=config.srcsetAttribute,loaderAttribute=config.loaderAttribute,forcedTags=config._f||{};items=$(items).filter(function(){var element=$(this),tag=_getElementTagName(this);return!element.data(config.handledName)&&(element.attr(config.attribute)||element.attr(srcsetAttribute)||element.attr(loaderAttribute)||forcedTags[tag]!==undefined);}).data('plugin_'+config.name,instance);for(var i=0,l=items.length;i<l;i++){var element=$(items[i]),tag=_getElementTagName(items[i]),elementImageBase=element.attr(config.imageBaseAttribute)||imageBase;if(tag===_img&&elementImageBase&&element.attr(srcsetAttribute)){element.attr(srcsetAttribute,_getCorrectedSrcSet(element.attr(srcsetAttribute),elementImageBase));}
if(forcedTags[tag]!==undefined&&!element.attr(loaderAttribute)){element.attr(loaderAttribute,forcedTags[tag]);}
if(tag===_img&&defaultImage&&!element.attr(_src)){element.attr(_src,defaultImage);}
else if(tag!==_img&&placeholder&&(!element.css(_backgroundImage)||element.css(_backgroundImage)==='none')){element.css(_backgroundImage,"url('"+placeholder+"')");}}
return items;}
function _lazyLoadItems(allItems,forced){if(!items.length){if(config.autoDestroy){instance.destroy();}
return;}
var elements=forced||items,loadTriggered=false,imageBase=config.imageBase||'',srcsetAttribute=config.srcsetAttribute,handledName=config.handledName;for(var i=0;i<elements.length;i++){if(allItems||forced||_isInLoadableArea(elements[i])){var element=$(elements[i]),tag=_getElementTagName(elements[i]),attribute=element.attr(config.attribute),elementImageBase=element.attr(config.imageBaseAttribute)||imageBase,customLoader=element.attr(config.loaderAttribute);if(!element.data(handledName)&&(!config.visibleOnly||element.is(':visible'))&&((attribute||element.attr(srcsetAttribute))&&((tag===_img&&(elementImageBase+attribute!==element.attr(_src)||element.attr(srcsetAttribute)!==element.attr(_srcset)))||(tag!==_img&&elementImageBase+attribute!==element.css(_backgroundImage)))||customLoader))
{loadTriggered=true;element.data(handledName,true);_handleItem(element,tag,elementImageBase,customLoader);}}}
if(loadTriggered){items=$(items).filter(function(){return!$(this).data(handledName);});}}
function _handleItem(element,tag,imageBase,customLoader){++_awaitingAfterLoad;var errorCallback=function(){_triggerCallback('onError',element);_reduceAwaiting();errorCallback=$.noop;};_triggerCallback('beforeLoad',element);var srcAttribute=config.attribute,srcsetAttribute=config.srcsetAttribute,sizesAttribute=config.sizesAttribute,retinaAttribute=config.retinaAttribute,removeAttribute=config.removeAttribute,loadedName=config.loadedName,elementRetina=element.attr(retinaAttribute);if(customLoader){var loadCallback=function(){if(removeAttribute){element.removeAttr(config.loaderAttribute);}
element.data(loadedName,true);_triggerCallback(_afterLoad,element);setTimeout(_reduceAwaiting,1);loadCallback=$.noop;};element.off(_error).one(_error,errorCallback).one(_load,loadCallback);if(!_triggerCallback(customLoader,element,function(response){if(response){element.off(_load);loadCallback();}
else{element.off(_error);errorCallback();}})){element.trigger(_error);}}
else{var imageObj=$(new Image());imageObj.one(_error,errorCallback).one(_load,function(){element.hide();if(tag===_img){element.attr(_sizes,imageObj.attr(_sizes)).attr(_srcset,imageObj.attr(_srcset)).attr(_src,imageObj.attr(_src));}
else{element.css(_backgroundImage,"url('"+imageObj.attr(_src)+"')");}
element[config.effect](config.effectTime);if(removeAttribute){element.removeAttr(srcAttribute+' '+srcsetAttribute+' '+retinaAttribute+' '+config.imageBaseAttribute);if(sizesAttribute!==_sizes){element.removeAttr(sizesAttribute);}}
element.data(loadedName,true);_triggerCallback(_afterLoad,element);imageObj.remove();_reduceAwaiting();});var imageSrc=(_isRetinaDisplay&&elementRetina?elementRetina:element.attr(srcAttribute))||'';imageObj.attr(_sizes,element.attr(sizesAttribute)).attr(_srcset,element.attr(srcsetAttribute)).attr(_src,imageSrc?imageBase+imageSrc:null);imageObj.complete&&imageObj.trigger(_load);}}
function _isInLoadableArea(element){var elementBound=element.getBoundingClientRect(),direction=config.scrollDirection,threshold=config.threshold,vertical=((_getActualHeight()+threshold)>elementBound.top)&&(-threshold<elementBound.bottom),horizontal=((_getActualWidth()+threshold)>elementBound.left)&&(-threshold<elementBound.right);if(direction==='vertical'){return vertical;}
else if(direction==='horizontal'){return horizontal;}
return vertical&&horizontal;}
function _getActualWidth(){return _actualWidth>=0?_actualWidth:(_actualWidth=$(window).width());}
function _getActualHeight(){return _actualHeight>=0?_actualHeight:(_actualHeight=$(window).height());}
function _getElementTagName(element){return element.tagName.toLowerCase();}
function _getCorrectedSrcSet(srcset,imageBase){if(imageBase){var entries=srcset.split(',');srcset='';for(var i=0,l=entries.length;i<l;i++){srcset+=imageBase+entries[i].trim()+(i!==l-1?',':'');}}
return srcset;}
function _throttle(delay,callback){var timeout,lastExecute=0;return function(event,ignoreThrottle){var elapsed=+new Date()-lastExecute;function run(){lastExecute=+new Date();callback.call(instance,event);}
timeout&&clearTimeout(timeout);if(elapsed>delay||!config.enableThrottle||ignoreThrottle){run();}
else{timeout=setTimeout(run,delay-elapsed);}};}
function _reduceAwaiting(){--_awaitingAfterLoad;if(!items.length&&!_awaitingAfterLoad){_triggerCallback('onFinishedAll');}}
function _triggerCallback(callback,element,args){if((callback=config[callback])){callback.apply(instance,[].slice.call(arguments,1));return true;}
return false;}
if(config.bind==='event'||windowLoaded){_initialize();}
else{$(window).on(_load+'.'+namespace,_initialize);}}
function LazyPlugin(elements,settings){var _instance=this,_config=$.extend({},_instance.config,settings),_events={},_namespace=_config.name+'-'+(++lazyInstanceId);_instance.config=function(entryName,value){if(value===undefined){return _config[entryName];}
_config[entryName]=value;return _instance;};_instance.addItems=function(items){_events.a&&_events.a($.type(items)==='string'?$(items):items);return _instance;};_instance.getItems=function(){return _events.g?_events.g():{};};_instance.update=function(useThrottle){_events.e&&_events.e({},!useThrottle);return _instance;};_instance.force=function(items){_events.f&&_events.f($.type(items)==='string'?$(items):items);return _instance;};_instance.loadAll=function(){_events.e&&_events.e({all:true},true);return _instance;};_instance.destroy=function(){$(_config.appendScroll).off('.'+_namespace,_events.e);$(window).off('.'+_namespace);_events={};return undefined;};_executeLazy(_instance,_config,elements,_events,_namespace);return _config.chainable?elements:_instance;}
LazyPlugin.prototype.config={name:'lazy',chainable:true,autoDestroy:true,bind:'load',threshold:500,visibleOnly:false,appendScroll:window,scrollDirection:'both',imageBase:null,defaultImage:'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',placeholder:null,delay:-1,combined:false,attribute:'data-src',srcsetAttribute:'data-srcset',sizesAttribute:'data-sizes',retinaAttribute:'data-retina',loaderAttribute:'data-loader',imageBaseAttribute:'data-imagebase',removeAttribute:true,handledName:'handled',loadedName:'loaded',effect:'show',effectTime:0,enableThrottle:true,throttle:250,beforeLoad:undefined,afterLoad:undefined,onError:undefined,onFinishedAll:undefined};$(window).on('load',function(){windowLoaded=true;});})(window);(function(window,document,undefined){(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}
else if(jQuery&&!jQuery.fn.qtip){factory(jQuery);}}
(function($){"use strict";;var TRUE=true,FALSE=false,NULL=null,X='x',Y='y',WIDTH='width',HEIGHT='height',TOP='top',LEFT='left',BOTTOM='bottom',RIGHT='right',CENTER='center',FLIP='flip',FLIPINVERT='flipinvert',SHIFT='shift',QTIP,PROTOTYPE,CORNER,CHECKS,PLUGINS={},NAMESPACE='qtip',ATTR_HAS='data-hasqtip',ATTR_ID='data-qtip-id',WIDGET=['ui-widget','ui-tooltip'],SELECTOR='.'+NAMESPACE,INACTIVE_EVENTS='click dblclick mousedown mouseup mousemove mouseleave mouseenter'.split(' '),CLASS_FIXED=NAMESPACE+'-fixed',CLASS_DEFAULT=NAMESPACE+'-default',CLASS_FOCUS=NAMESPACE+'-focus',CLASS_HOVER=NAMESPACE+'-hover',CLASS_DISABLED=NAMESPACE+'-disabled',replaceSuffix='_replacedByqTip',oldtitle='oldtitle',trackingBound,BROWSER={ie:(function(){var v,i;for(v=4,i=document.createElement('div');(i.innerHTML='<!--[if gt IE '+v+']><i></i><![endif]-->')&&i.getElementsByTagName('i')[0];v+=1){}
return v>4?v:NaN;})(),iOS:parseFloat((''+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,''])[1]).replace('undefined','3_2').replace('_','.').replace('_',''))||FALSE};;function QTip(target,options,id,attr){this.id=id;this.target=target;this.tooltip=NULL;this.elements={target:target};this._id=NAMESPACE+'-'+id;this.timers={img:{}};this.options=options;this.plugins={};this.cache={event:{},target:$(),disabled:FALSE,attr:attr,onTooltip:FALSE,lastClass:''};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=FALSE;}
PROTOTYPE=QTip.prototype;PROTOTYPE._when=function(deferreds){return $.when.apply($,deferreds);};PROTOTYPE.render=function(show){if(this.rendered||this.destroyed){return this;}
var self=this,options=this.options,cache=this.cache,elements=this.elements,text=options.content.text,title=options.content.title,button=options.content.button,posOptions=options.position,deferreds=[];$.attr(this.target[0],'aria-describedby',this._id);cache.posClass=this._createPosClass((this.position={my:posOptions.my,at:posOptions.at}).my);this.tooltip=elements.tooltip=$('<div/>',{'id':this._id,'class':[NAMESPACE,CLASS_DEFAULT,options.style.classes,cache.posClass].join(' '),'width':options.style.width||'','height':options.style.height||'','tracking':posOptions.target==='mouse'&&posOptions.adjust.mouse,'role':'alert','aria-live':'polite','aria-atomic':FALSE,'aria-describedby':this._id+'-content','aria-hidden':TRUE}).toggleClass(CLASS_DISABLED,this.disabled).attr(ATTR_ID,this.id).data(NAMESPACE,this).appendTo(posOptions.container).append(elements.content=$('<div />',{'class':NAMESPACE+'-content','id':this._id+'-content','aria-atomic':TRUE}));this.rendered=-1;this.positioning=TRUE;if(title){this._createTitle();if(!$.isFunction(title)){deferreds.push(this._updateTitle(title,FALSE));}}
if(button){this._createButton();}
if(!$.isFunction(text)){deferreds.push(this._updateContent(text,FALSE));}
this.rendered=TRUE;this._setWidget();$.each(PLUGINS,function(name){var instance;if(this.initialize==='render'&&(instance=this(self))){self.plugins[name]=instance;}});this._unassignEvents();this._assignEvents();this._when(deferreds).then(function(){self._trigger('render');self.positioning=FALSE;if(!self.hiddenDuringWait&&(options.show.ready||show)){self.toggle(TRUE,cache.event,FALSE);}
self.hiddenDuringWait=FALSE;});QTIP.api[this.id]=this;return this;};PROTOTYPE.destroy=function(immediate){if(this.destroyed){return this.target;}
function process(){if(this.destroyed){return;}
this.destroyed=TRUE;var target=this.target,title=target.attr(oldtitle),timer;if(this.rendered){this.tooltip.stop(1,0).find('*').remove().end().remove();}
$.each(this.plugins,function(){this.destroy&&this.destroy();});for(timer in this.timers){if(this.timers.hasOwnProperty(timer)){clearTimeout(this.timers[timer]);}}
target.removeData(NAMESPACE).removeAttr(ATTR_ID).removeAttr(ATTR_HAS).removeAttr('aria-describedby');if(this.options.suppress&&title){target.attr('title',title).removeAttr(oldtitle);}
this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=NULL;delete QTIP.api[this.id];}
if((immediate!==TRUE||this.triggering==='hide')&&this.rendered){this.tooltip.one('tooltiphidden',$.proxy(process,this));!this.triggering&&this.hide();}
else{process.call(this);}
return this.target;};;function invalidOpt(a){return a===NULL||$.type(a)!=='object';}
function invalidContent(c){return!($.isFunction(c)||c&&c.attr||c.length||$.type(c)==='object'&&(c.jquery||c.then));}
function sanitizeOptions(opts){var content,text,ajax,once;if(invalidOpt(opts)){return FALSE;}
if(invalidOpt(opts.metadata)){opts.metadata={type:opts.metadata};}
if('content'in opts){content=opts.content;if(invalidOpt(content)||content.jquery||content.done){text=invalidContent(content)?FALSE:content;content=opts.content={text:text};}
else{text=content.text;}
if('ajax'in content){ajax=content.ajax;once=ajax&&ajax.once!==FALSE;delete content.ajax;content.text=function(event,api){var loading=text||$(this).attr(api.options.content.attr)||'Loading...',deferred=$.ajax($.extend({},ajax,{context:api})).then(ajax.success,NULL,ajax.error).then(function(newContent){if(newContent&&once){api.set('content.text',newContent);}
return newContent;},function(xhr,status,error){if(api.destroyed||xhr.status===0){return;}
api.set('content.text',status+': '+error);});return!once?(api.set('content.text',loading),deferred):loading;};}
if('title'in content){if($.isPlainObject(content.title)){content.button=content.title.button;content.title=content.title.text;}
if(invalidContent(content.title||FALSE)){content.title=FALSE;}}}
if('position'in opts&&invalidOpt(opts.position)){opts.position={my:opts.position,at:opts.position};}
if('show'in opts&&invalidOpt(opts.show)){opts.show=opts.show.jquery?{target:opts.show}:opts.show===TRUE?{ready:TRUE}:{event:opts.show};}
if('hide'in opts&&invalidOpt(opts.hide)){opts.hide=opts.hide.jquery?{target:opts.hide}:{event:opts.hide};}
if('style'in opts&&invalidOpt(opts.style)){opts.style={classes:opts.style};}
$.each(PLUGINS,function(){this.sanitize&&this.sanitize(opts);});return opts;}
CHECKS=PROTOTYPE.checks={builtin:{'^id$':function(obj,o,v,prev){var id=v===TRUE?QTIP.nextid:v,newId=NAMESPACE+'-'+id;if(id!==FALSE&&id.length>0&&!$('#'+newId).length){this._id=newId;if(this.rendered){this.tooltip[0].id=this._id;this.elements.content[0].id=this._id+'-content';this.elements.title[0].id=this._id+'-title';}}
else{obj[o]=prev;}},'^prerender':function(obj,o,v){v&&!this.rendered&&this.render(this.options.show.ready);},'^content.text$':function(obj,o,v){this._updateContent(v);},'^content.attr$':function(obj,o,v,prev){if(this.options.content.text===this.target.attr(prev)){this._updateContent(this.target.attr(v));}},'^content.title$':function(obj,o,v){if(!v){return this._removeTitle();}
v&&!this.elements.title&&this._createTitle();this._updateTitle(v);},'^content.button$':function(obj,o,v){this._updateButton(v);},'^content.title.(text|button)$':function(obj,o,v){this.set('content.'+o,v);},'^position.(my|at)$':function(obj,o,v){if('string'===typeof v){this.position[o]=obj[o]=new CORNER(v,o==='at');}},'^position.container$':function(obj,o,v){this.rendered&&this.tooltip.appendTo(v);},'^show.ready$':function(obj,o,v){v&&(!this.rendered&&this.render(TRUE)||this.toggle(TRUE));},'^style.classes$':function(obj,o,v,p){this.rendered&&this.tooltip.removeClass(p).addClass(v);},'^style.(width|height)':function(obj,o,v){this.rendered&&this.tooltip.css(o,v);},'^style.widget|content.title':function(){this.rendered&&this._setWidget();},'^style.def':function(obj,o,v){this.rendered&&this.tooltip.toggleClass(CLASS_DEFAULT,!!v);},'^events.(render|show|move|hide|focus|blur)$':function(obj,o,v){this.rendered&&this.tooltip[($.isFunction(v)?'':'un')+'bind']('tooltip'+o,v);},'^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)':function(){if(!this.rendered){return;}
var posOptions=this.options.position;this.tooltip.attr('tracking',posOptions.target==='mouse'&&posOptions.adjust.mouse);this._unassignEvents();this._assignEvents();}}};function convertNotation(options,notation){var i=0,obj,option=options,levels=notation.split('.');while(option===option[levels[i++]]){if(i<levels.length){obj=option;}}
return[obj||options,levels.pop()];}
PROTOTYPE.get=function(notation){if(this.destroyed){return this;}
var o=convertNotation(this.options,notation.toLowerCase()),result=o[0][o[1]];return result.precedance?result.string():result;};function setCallback(notation,args){var category,rule,match;for(category in this.checks){if(!this.checks.hasOwnProperty(category)){continue;}
for(rule in this.checks[category]){if(!this.checks[category].hasOwnProperty(rule)){continue;}
match=(new RegExp(rule,'i')).exec(notation);if(match){args.push(match);if(category==='builtin'||this.plugins[category]){this.checks[category][rule].apply(this.plugins[category]||this,args);}}}}}
var rmove=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,rrender=/^prerender|show\.ready/i;PROTOTYPE.set=function(opt,value){if(this.destroyed){return this;}
var rendered=this.rendered,reposition=FALSE,options=this.options,name;var option=opt;if('string'===typeof option){name=option;option={};option[name]=value;}
else{option=$.extend({},option);}
$.each(option,function(notation,val){if(rendered&&rrender.test(notation)){delete option[notation];return;}
var obj=convertNotation(options,notation.toLowerCase()),previous;previous=obj[0][obj[1]];obj[0][obj[1]]=val&&val.nodeType?$(val):val;reposition=rmove.test(notation)||reposition;option[notation]=[obj[0],obj[1],val,previous];});sanitizeOptions(options);this.positioning=TRUE;$.each(option,$.proxy(setCallback,this));this.positioning=FALSE;if(this.rendered&&this.tooltip[0].offsetWidth>0&&reposition){this.reposition(options.position.target==='mouse'?NULL:this.cache.event);}
return this;};;PROTOTYPE._update=function(content,element){var self=this,cache=this.cache;if(!this.rendered||!content){return FALSE;}
if($.isFunction(content)){content=content.call(this.elements.target,cache.event,this)||'';}
if($.isFunction(content.then)){cache.waiting=TRUE;return content.then(function(c){cache.waiting=FALSE;return self._update(c,element);},NULL,function(e){return self._update(e,element);});}
if(content===FALSE||!content&&content!==''){return FALSE;}
if(content.jquery&&content.length>0){element.empty().append(content.css({display:'block',visibility:'visible'}));}
else{element.html(content);}
return this._waitForContent(element).then(function(images){if(self.rendered&&self.tooltip[0].offsetWidth>0){self.reposition(cache.event,!images.length);}});};PROTOTYPE._waitForContent=function(element){var cache=this.cache;cache.waiting=TRUE;return($.fn.imagesLoaded?element.imagesLoaded():new $.Deferred().resolve([])).done(function(){cache.waiting=FALSE;}).promise();};PROTOTYPE._updateContent=function(content,reposition){this._update(content,this.elements.content,reposition);};PROTOTYPE._updateTitle=function(content,reposition){if(this._update(content,this.elements.title,reposition)===FALSE){this._removeTitle(FALSE);}};PROTOTYPE._createTitle=function()
{var elements=this.elements,id=this._id+'-title';if(elements.titlebar){this._removeTitle();}
elements.titlebar=$('<div />',{'class':NAMESPACE+'-titlebar '+(this.options.style.widget?createWidgetClass('header'):'')}).append(elements.title=$('<div />',{'id':id,'class':NAMESPACE+'-title','aria-atomic':TRUE})).insertBefore(elements.content).delegate('.qtip-close','mousedown keydown mouseup keyup mouseout',function(event){$(this).toggleClass('ui-state-active ui-state-focus',event.type.substr(-4)==='down');}).delegate('.qtip-close','mouseover mouseout',function(event){$(this).toggleClass('ui-state-hover',event.type==='mouseover');});if(this.options.content.button){this._createButton();}};PROTOTYPE._removeTitle=function(reposition)
{var elements=this.elements;if(elements.title){elements.titlebar.remove();elements.titlebar=elements.title=elements.button=NULL;if(reposition!==FALSE){this.reposition();}}};;PROTOTYPE._createPosClass=function(my){return NAMESPACE+'-pos-'+(my||this.options.position.my).abbrev();};PROTOTYPE.reposition=function(event,effect){if(!this.rendered||this.positioning||this.destroyed){return this;}
this.positioning=TRUE;var cache=this.cache,tooltip=this.tooltip,posOptions=this.options.position,target=posOptions.target,my=posOptions.my,at=posOptions.at,viewport=posOptions.viewport,container=posOptions.container,adjust=posOptions.adjust,method=adjust.method.split(' '),tooltipWidth=tooltip.outerWidth(FALSE),tooltipHeight=tooltip.outerHeight(FALSE),targetWidth=0,targetHeight=0,type=tooltip.css('position'),position={left:0,top:0},visible=tooltip[0].offsetWidth>0,isScroll=event&&event.type==='scroll',win=$(window),doc=container[0].ownerDocument,mouse=this.mouse,pluginCalculations,offset,adjusted,newClass;if($.isArray(target)&&target.length===2){at={x:LEFT,y:TOP};position={left:target[0],top:target[1]};}
else if(target==='mouse'){at={x:LEFT,y:TOP};if((!adjust.mouse||this.options.hide.distance)&&cache.origin&&cache.origin.pageX){event=cache.origin;}
else if(!event||event&&(event.type==='resize'||event.type==='scroll')){event=cache.event;}
else if(mouse&&mouse.pageX){event=mouse;}
if(type!=='static'){position=container.offset();}
if(doc.body.offsetWidth!==(window.innerWidth||doc.documentElement.clientWidth)){offset=$(document.body).offset();}
position={left:event.pageX-position.left+(offset&&offset.left||0),top:event.pageY-position.top+(offset&&offset.top||0)};if(adjust.mouse&&isScroll&&mouse){position.left-=(mouse.scrollX||0)-win.scrollLeft();position.top-=(mouse.scrollY||0)-win.scrollTop();}}
else{if(target==='event'){if(event&&event.target&&event.type!=='scroll'&&event.type!=='resize'){cache.target=$(event.target);}
else if(!event.target){cache.target=this.elements.target;}}
else if(target!=='event'){cache.target=$(target.jquery?target:this.elements.target);}
target=cache.target;target=$(target).eq(0);if(target.length===0){return this;}
else if(target[0]===document||target[0]===window){targetWidth=BROWSER.iOS?window.innerWidth:target.width();targetHeight=BROWSER.iOS?window.innerHeight:target.height();if(target[0]===window){position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()};}}
else if(PLUGINS.imagemap&&target.is('area')){pluginCalculations=PLUGINS.imagemap(this,target,at,PLUGINS.viewport?method:FALSE);}
else if(PLUGINS.svg&&target&&target[0].ownerSVGElement){pluginCalculations=PLUGINS.svg(this,target,at,PLUGINS.viewport?method:FALSE);}
else{targetWidth=target.outerWidth(FALSE);targetHeight=target.outerHeight(FALSE);position=target.offset();}
if(pluginCalculations){targetWidth=pluginCalculations.width;targetHeight=pluginCalculations.height;offset=pluginCalculations.offset;position=pluginCalculations.position;}
position=this.reposition.offset(target,position,container);if(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&type==='fixed'){position.left-=win.scrollLeft();position.top-=win.scrollTop();}
if(!pluginCalculations||pluginCalculations&&pluginCalculations.adjustable!==FALSE){position.left+=at.x===RIGHT?targetWidth:at.x===CENTER?targetWidth/2:0;position.top+=at.y===BOTTOM?targetHeight:at.y===CENTER?targetHeight/2:0;}}
position.left+=adjust.x+(my.x===RIGHT?-tooltipWidth:my.x===CENTER?-tooltipWidth/2:0);position.top+=adjust.y+(my.y===BOTTOM?-tooltipHeight:my.y===CENTER?-tooltipHeight/2:0);if(PLUGINS.viewport){adjusted=position.adjusted=PLUGINS.viewport(this,position,posOptions,targetWidth,targetHeight,tooltipWidth,tooltipHeight);if(offset&&adjusted.left){position.left+=offset.left;}
if(offset&&adjusted.top){position.top+=offset.top;}
if(adjusted.my){this.position.my=adjusted.my;}}
else{position.adjusted={left:0,top:0};}
if(cache.posClass!==(newClass=this._createPosClass(this.position.my))){cache.posClass=newClass;tooltip.removeClass(cache.posClass).addClass(newClass);}
if(!this._trigger('move',[position,viewport.elem||viewport],event)){return this;}
delete position.adjusted;if(effect===FALSE||!visible||isNaN(position.left)||isNaN(position.top)||target==='mouse'||!$.isFunction(posOptions.effect)){tooltip.css(position);}
else if($.isFunction(posOptions.effect)){posOptions.effect.call(tooltip,this,$.extend({},position));tooltip.queue(function(next){$(this).css({opacity:'',height:''});if(BROWSER.ie){this.style.removeAttribute('filter');}
next();});}
this.positioning=FALSE;return this;};PROTOTYPE.reposition.offset=function(elem,pos,container){if(!container[0]){return pos;}
var ownerDocument=$(elem[0].ownerDocument),quirks=!!BROWSER.ie&&document.compatMode!=='CSS1Compat',parent=container[0],scrolled,position,parentOffset,overflow;function scroll(e,i){pos.left+=i*e.scrollLeft();pos.top+=i*e.scrollTop();}
do{if((position=$.css(parent,'position'))!=='static'){if(position==='fixed'){parentOffset=parent.getBoundingClientRect();scroll(ownerDocument,-1);}
else{parentOffset=$(parent).position();parentOffset.left+=parseFloat($.css(parent,'borderLeftWidth'))||0;parentOffset.top+=parseFloat($.css(parent,'borderTopWidth'))||0;}
pos.left-=parentOffset.left+(parseFloat($.css(parent,'marginLeft'))||0);pos.top-=parentOffset.top+(parseFloat($.css(parent,'marginTop'))||0);if(!scrolled&&(overflow=$.css(parent,'overflow'))!=='hidden'&&overflow!=='visible'){scrolled=$(parent);}}}
while(parent===parent.offsetParent);if(scrolled&&(scrolled[0]!==ownerDocument[0]||quirks)){scroll(scrolled,1);}
return pos;};var C=(CORNER=PROTOTYPE.reposition.Corner=function(corner,forceY){corner=(''+corner).replace(/([A-Z])/,' $1').replace(/middle/gi,CENTER).toLowerCase();this.x=(corner.match(/left|right/i)||corner.match(/center/)||['inherit'])[0].toLowerCase();this.y=(corner.match(/top|bottom|center/i)||['inherit'])[0].toLowerCase();this.forceY=!!forceY;var f=corner.charAt(0);this.precedance=f==='t'||f==='b'?Y:X;}).prototype;C.invert=function(z,center){this[z]=this[z]===LEFT?RIGHT:this[z]===RIGHT?LEFT:center||this[z];};C.string=function(join){var x=this.x,y=this.y;var result=x!==y?x==='center'||y!=='center'&&(this.precedance===Y||this.forceY)?[y,x]:[x,y]:[x];return join!==false?result.join(' '):result;};C.abbrev=function(){var result=this.string(false);return result[0].charAt(0)+(result[1]&&result[1].charAt(0)||'');};C.clone=function(){return new CORNER(this.string(),this.forceY);};;PROTOTYPE.toggle=function(state,event){var cache=this.cache,options=this.options,tooltip=this.tooltip;if(event){if((/over|enter/).test(event.type)&&cache.event&&(/out|leave/).test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length){return this;}
cache.event=$.event.fix(event);}
this.waiting&&!state&&(this.hiddenDuringWait=TRUE);if(!this.rendered){return state?this.render(1):this;}
else if(this.destroyed||this.disabled){return this;}
var type=state?'show':'hide',opts=this.options[type],posOptions=this.options.position,contentOptions=this.options.content,width=this.tooltip.css('width'),visible=this.tooltip.is(':visible'),animate=state||opts.target.length===1,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target,identicalState,allow,after;if((typeof state).search('boolean|number')){state=!visible;}
identicalState=!tooltip.is(':animated')&&visible===state&&sameTarget;allow=!identicalState?!!this._trigger(type,[90]):NULL;if(this.destroyed){return this;}
if(allow!==FALSE&&state){this.focus(event);}
if(!allow||identicalState){return this;}
$.attr(tooltip[0],'aria-hidden',!!!state);if(state){this.mouse&&(cache.origin=$.event.fix(this.mouse));if($.isFunction(contentOptions.text)){this._updateContent(contentOptions.text,FALSE);}
if($.isFunction(contentOptions.title)){this._updateTitle(contentOptions.title,FALSE);}
if(!trackingBound&&posOptions.target==='mouse'&&posOptions.adjust.mouse){$(document).bind('mousemove.'+NAMESPACE,this._storeMouse);trackingBound=TRUE;}
if(!width){tooltip.css('width',tooltip.outerWidth(FALSE));}
this.reposition(event,arguments[2]);if(!width){tooltip.css('width','');}
if(!!opts.solo){(typeof opts.solo==='string'?$(opts.solo):$(SELECTOR,opts.solo)).not(tooltip).not(opts.target).qtip('hide',new $.Event('tooltipsolo'));}}
else{clearTimeout(this.timers.show);delete cache.origin;if(trackingBound&&!$(SELECTOR+'[tracking="true"]:visible',opts.solo).not(tooltip).length){$(document).unbind('mousemove.'+NAMESPACE);trackingBound=FALSE;}
this.blur(event);}
after=$.proxy(function(){if(state){if(BROWSER.ie){tooltip[0].style.removeAttribute('filter');}
tooltip.css('overflow','');if('string'===typeof opts.autofocus){$(this.options.show.autofocus,tooltip).focus();}
this.options.show.target.trigger('qtip-'+this.id+'-inactive');}
else{tooltip.css({display:'',visibility:'',opacity:'',left:'',top:''});}
this._trigger(state?'visible':'hidden');},this);if(opts.effect===FALSE||animate===FALSE){tooltip[type]();after();}
else if($.isFunction(opts.effect)){tooltip.stop(1,1);opts.effect.call(tooltip,this);tooltip.queue('fx',function(n){after();n();});}
else{tooltip.fadeTo(90,state?1:0,after);}
if(state){opts.target.trigger('qtip-'+this.id+'-inactive');}
return this;};PROTOTYPE.show=function(event){return this.toggle(TRUE,event);};PROTOTYPE.hide=function(event){return this.toggle(FALSE,event);};;PROTOTYPE.focus=function(event){if(!this.rendered||this.destroyed){return this;}
var qtips=$(SELECTOR),tooltip=this.tooltip,curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length;if(!tooltip.hasClass(CLASS_FOCUS)){if(this._trigger('focus',[newIndex],event)){if(curIndex!==newIndex){qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex=this.style.zIndex-1;}});qtips.filter('.'+CLASS_FOCUS).qtip('blur',event);}
tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex;}}
return this;};PROTOTYPE.blur=function(event){if(!this.rendered||this.destroyed){return this;}
this.tooltip.removeClass(CLASS_FOCUS);this._trigger('blur',[this.tooltip.css('zIndex')],event);return this;};;PROTOTYPE.disable=function(state){if(this.destroyed){return this;}
if(state==='toggle'){state=!(this.rendered?this.tooltip.hasClass(CLASS_DISABLED):this.disabled);}
else if('boolean'!==typeof state){state=TRUE;}
if(this.rendered){this.tooltip.toggleClass(CLASS_DISABLED,state).attr('aria-disabled',state);}
this.disabled=!!state;return this;};PROTOTYPE.enable=function(){return this.disable(FALSE);};;PROTOTYPE._createButton=function()
{var self=this,elements=this.elements,tooltip=elements.tooltip,button=this.options.content.button,isString=typeof button==='string',close=isString?button:'Close tooltip';if(elements.button){elements.button.remove();}
if(button.jquery){elements.button=button;}
else{elements.button=$('<a />',{'class':'qtip-close '+(this.options.style.widget?'':NAMESPACE+'-icon'),'title':close,'aria-label':close}).prepend($('<span />',{'class':'ui-icon ui-icon-close','html':'&times;'}));}
elements.button.appendTo(elements.titlebar||tooltip).attr('role','button').click(function(event){if(!tooltip.hasClass(CLASS_DISABLED)){self.hide(event);}
return FALSE;});};PROTOTYPE._updateButton=function(button)
{if(!this.rendered){return FALSE;}
var elem=this.elements.button;if(button){this._createButton();}
else{elem.remove();}};;function createWidgetClass(cls){return WIDGET.concat('').join(cls?'-'+cls+' ':' ');}
PROTOTYPE._setWidget=function()
{var on=this.options.style.widget,elements=this.elements,tooltip=elements.tooltip,disabled=tooltip.hasClass(CLASS_DISABLED);tooltip.removeClass(CLASS_DISABLED);CLASS_DISABLED=on?'ui-state-disabled':'qtip-disabled';tooltip.toggleClass(CLASS_DISABLED,disabled);tooltip.toggleClass('ui-helper-reset '+createWidgetClass(),on).toggleClass(CLASS_DEFAULT,this.options.style.def&&!on);if(elements.content){elements.content.toggleClass(createWidgetClass('content'),on);}
if(elements.titlebar){elements.titlebar.toggleClass(createWidgetClass('header'),on);}
if(elements.button){elements.button.toggleClass(NAMESPACE+'-icon',!on);}};;function delay(callback,duration){if(duration>0){return setTimeout($.proxy(callback,this),duration);}
else{callback.call(this);}}
function showMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)){return;}
clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this.timers.show=delay.call(this,function(){this.toggle(TRUE,event);},this.options.show.delay);}
function hideMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)||this.destroyed){return;}
var relatedTarget=$(event.relatedTarget),ontoTooltip=relatedTarget.closest(SELECTOR)[0]===this.tooltip[0],ontoTarget=relatedTarget[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==relatedTarget[0]&&(this.options.position.target==='mouse'&&ontoTooltip)||this.options.hide.fixed&&((/mouse(out|leave|move)/).test(event.type)&&(ontoTooltip||ontoTarget)))
{try{event.preventDefault();event.stopImmediatePropagation();}catch(e){}
return;}
this.timers.hide=delay.call(this,function(){this.toggle(FALSE,event);},this.options.hide.delay,this);}
function inactiveMethod(event){if(this.tooltip.hasClass(CLASS_DISABLED)||!this.options.hide.inactive){return;}
clearTimeout(this.timers.inactive);this.timers.inactive=delay.call(this,function(){this.hide(event);},this.options.hide.inactive);}
function repositionMethod(event){if(this.rendered&&this.tooltip[0].offsetWidth>0){this.reposition(event);}}
PROTOTYPE._storeMouse=function(event){(this.mouse=$.event.fix(event)).type='mousemove';return this;};PROTOTYPE._bind=function(targets,events,method,suffix,context){if(!targets||!method||!events.length){return;}
var ns='.'+this._id+(suffix?'-'+suffix:'');$(targets).bind((events.split?events:events.join(ns+' '))+ns,$.proxy(method,context||this));return this;};PROTOTYPE._unbind=function(targets,suffix){targets&&$(targets).unbind('.'+this._id+(suffix?'-'+suffix:''));return this;};function delegate(selector,events,method){$(document.body).delegate(selector,(events.split?events:events.join('.'+NAMESPACE+' '))+'.'+NAMESPACE,function(){var api=QTIP.api[$.attr(this,ATTR_ID)];api&&!api.disabled&&method.apply(api,arguments);});}
PROTOTYPE._trigger=function(type,args,event){var callback=new $.Event('tooltip'+type);callback.originalEvent=event&&$.extend({},event)||this.cache.event||NULL;this.triggering=type;this.tooltip.trigger(callback,[this].concat(args||[]));this.triggering=FALSE;return!callback.isDefaultPrevented();};PROTOTYPE._bindEvents=function(showEvents,hideEvents,showTargets,hideTargets,showCallback,hideCallback){var similarTargets=showTargets.filter(hideTargets).add(hideTargets.filter(showTargets)),toggleEvents=[];if(similarTargets.length){$.each(hideEvents,function(i,type){var showIndex=$.inArray(type,showEvents);showIndex>-1&&toggleEvents.push(showEvents.splice(showIndex,1)[0]);});if(toggleEvents.length){this._bind(similarTargets,toggleEvents,function(event){var state=this.rendered?this.tooltip[0].offsetWidth>0:false;(state?hideCallback:showCallback).call(this,event);});showTargets=showTargets.not(similarTargets);hideTargets=hideTargets.not(similarTargets);}}
this._bind(showTargets,showEvents,showCallback);this._bind(hideTargets,hideEvents,hideCallback);};PROTOTYPE._assignInitialEvents=function(event){var options=this.options,showTarget=options.show.target,hideTarget=options.hide.target,showEvents=options.show.event?$.trim(''+options.show.event).split(' '):[],hideEvents=options.hide.event?$.trim(''+options.hide.event).split(' '):[];this._bind(this.elements.target,['remove','removeqtip'],function(){this.destroy(true);},'destroy');if(/mouse(over|enter)/i.test(options.show.event)&&!/mouse(out|leave)/i.test(options.hide.event)){hideEvents.push('mouseleave');}
this._bind(showTarget,'mousemove',function(moveEvent){this._storeMouse(moveEvent);this.cache.onTarget=TRUE;});function hoverIntent(hoverEvent){if(this.disabled||this.destroyed){return FALSE;}
this.cache.event=hoverEvent&&$.event.fix(hoverEvent);this.cache.target=hoverEvent&&$(hoverEvent.target);clearTimeout(this.timers.show);this.timers.show=delay.call(this,function(){this.render(typeof hoverEvent==='object'||options.show.ready);},options.prerender?0:options.show.delay);}
this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,hoverIntent,function(){if(!this.timers){return FALSE;}
clearTimeout(this.timers.show);});if(options.show.ready||options.prerender){hoverIntent.call(this,event);}};PROTOTYPE._assignEvents=function(){var self=this,options=this.options,posOptions=options.position,tooltip=this.tooltip,showTarget=options.show.target,hideTarget=options.hide.target,containerTarget=posOptions.container,viewportTarget=posOptions.viewport,documentTarget=$(document),windowTarget=$(window),showEvents=options.show.event?$.trim(''+options.show.event).split(' '):[],hideEvents=options.hide.event?$.trim(''+options.hide.event).split(' '):[];$.each(options.events,function(name,callback){self._bind(tooltip,name==='toggle'?['tooltipshow','tooltiphide']:['tooltip'+name],callback,null,tooltip);});if(/mouse(out|leave)/i.test(options.hide.event)&&options.hide.leave==='window'){this._bind(documentTarget,['mouseout','blur'],function(event){if(!/select|option/.test(event.target.nodeName)&&!event.relatedTarget){this.hide(event);}});}
if(options.hide.fixed){hideTarget=hideTarget.add(tooltip.addClass(CLASS_FIXED));}
else if(/mouse(over|enter)/i.test(options.show.event)){this._bind(hideTarget,'mouseleave',function(){clearTimeout(this.timers.show);});}
if((''+options.hide.event).indexOf('unfocus')>-1){this._bind(containerTarget.closest('html'),['mousedown','touchstart'],function(event){var elem=$(event.target),enabled=this.rendered&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0,isAncestor=elem.parents(SELECTOR).filter(this.tooltip[0]).length>0;if(elem[0]!==this.target[0]&&elem[0]!==this.tooltip[0]&&!isAncestor&&!this.target.has(elem[0]).length&&enabled){this.hide(event);}});}
if('number'===typeof options.hide.inactive){this._bind(showTarget,'qtip-'+this.id+'-inactive',inactiveMethod,'inactive');this._bind(hideTarget.add(tooltip),QTIP.inactiveEvents,inactiveMethod);}
this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,showMethod,hideMethod);this._bind(showTarget.add(tooltip),'mousemove',function(event){if('number'===typeof options.hide.distance){var origin=this.cache.origin||{},limit=this.options.hide.distance,abs=Math.abs;if(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit){this.hide(event);}}
this._storeMouse(event);});if(posOptions.target==='mouse'){if(posOptions.adjust.mouse){if(options.hide.event){this._bind(showTarget,['mouseenter','mouseleave'],function(event){if(!this.cache){return FALSE;}
this.cache.onTarget=event.type==='mouseenter';});}
this._bind(documentTarget,'mousemove',function(event){if(this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0){this.reposition(event);}});}}
if(posOptions.adjust.resize||viewportTarget.length){this._bind($.event.special.resize?viewportTarget:windowTarget,'resize',repositionMethod);}
if(posOptions.adjust.scroll){this._bind(windowTarget.add(posOptions.container),'scroll',repositionMethod);}};PROTOTYPE._unassignEvents=function(){var options=this.options,showTargets=options.show.target,hideTargets=options.hide.target,targets=$.grep([this.elements.target[0],this.rendered&&this.tooltip[0],options.position.container[0],options.position.viewport[0],options.position.container.closest('html')[0],window,document],function(i){return typeof i==='object';});if(showTargets&&showTargets.toArray){targets=targets.concat(showTargets.toArray());}
if(hideTargets&&hideTargets.toArray){targets=targets.concat(hideTargets.toArray());}
this._unbind(targets)._unbind(targets,'destroy')._unbind(targets,'inactive');};$(function(){delegate(SELECTOR,['mouseenter','mouseleave'],function(event){var state=event.type==='mouseenter',tooltip=$(event.currentTarget),target=$(event.relatedTarget||event.target),options=this.options;if(state){this.focus(event);tooltip.hasClass(CLASS_FIXED)&&!tooltip.hasClass(CLASS_DISABLED)&&clearTimeout(this.timers.hide);}
else{if(options.position.target==='mouse'&&options.position.adjust.mouse&&options.hide.event&&options.show.target&&!target.closest(options.show.target[0]).length){this.hide(event);}}
tooltip.toggleClass(CLASS_HOVER,state);});delegate('['+ATTR_ID+']',INACTIVE_EVENTS,inactiveMethod);});;function init(elem,id,opts){var obj,posOptions,attr,config,title,docBody=$(document.body),newTarget=elem[0]===document?docBody:elem,metadata=elem.metadata?elem.metadata(opts.metadata):NULL,metadata5=opts.metadata.type==='html5'&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||'qtipopts');try{html5=typeof html5==='string'?$.parseJSON(html5):html5;}
catch(e){}
config=$.extend(TRUE,{},QTIP.defaults,opts,typeof html5==='object'?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata));posOptions=config.position;config.id=id;if('boolean'===typeof config.content.text){attr=elem.attr(config.content.attr);if(config.content.attr!==FALSE&&attr){config.content.text=attr;}
else{return FALSE;}}
if(!posOptions.container.length){posOptions.container=docBody;}
if(posOptions.target===FALSE){posOptions.target=newTarget;}
if(config.show.target===FALSE){config.show.target=newTarget;}
if(config.show.solo===TRUE){config.show.solo=posOptions.container.closest('body');}
if(config.hide.target===FALSE){config.hide.target=newTarget;}
if(config.position.viewport===TRUE){config.position.viewport=posOptions.container;}
posOptions.container=posOptions.container.eq(0);posOptions.at=new CORNER(posOptions.at,TRUE);posOptions.my=new CORNER(posOptions.my);if(elem.data(NAMESPACE)){if(config.overwrite){elem.qtip('destroy',true);}
else if(config.overwrite===FALSE){return FALSE;}}
elem.attr(ATTR_HAS,id);if(config.suppress&&(title=elem.attr('title'))){elem.removeAttr('title').attr(oldtitle,title).attr('title','');}
obj=new QTip(elem,config,id,!!attr);elem.data(NAMESPACE,obj);return obj;}
QTIP=$.fn.qtip=function(options,notation,newValue)
{var command=(''+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],NAMESPACE):NULL;if(!arguments.length&&opts||command==='api'){return opts;}
else if('string'===typeof options){this.each(function(){var api=$.data(this,NAMESPACE);if(!api){return TRUE;}
if(event&&event.timeStamp){api.cache.event=event;}
if(notation&&(command==='option'||command==='options')){if(newValue!==undefined||$.isPlainObject(notation)){api.set(notation,newValue);}
else{returned=api.get(notation);return FALSE;}}
else if(api[command]){api[command].apply(api,args);}});return returned!==NULL?returned:this;}
else if('object'===typeof options||!arguments.length){opts=sanitizeOptions($.extend(TRUE,{},options));return this.each(function(i){var api,id;id=$.isArray(opts.id)?opts.id[i]:opts.id;id=!id||id===FALSE||id.length<1||QTIP.api[id]?QTIP.nextid++:id;api=init($(this),id,opts);if(api===FALSE){return TRUE;}
else{QTIP.api[id]=api;}
$.each(PLUGINS,function(){if(this.initialize==='initialize'){this(api);}});api._assignInitialEvents(event);});}};$.qtip=QTip;QTIP.api={};;$.each({attr:function(attr,val){if(this.length){var self=this[0],title='title',api=$.data(self,'qtip');if(attr===title&&api&&api.options&&'object'===typeof api&&'object'===typeof api.options&&api.options.suppress){if(arguments.length<2){return $.attr(self,oldtitle);}
if(api&&api.options.content.attr===title&&api.cache.attr){api.set('content.text',val);}
return this.attr(oldtitle,val);}}
return $.fn['attr'+replaceSuffix].apply(this,arguments);},clone:function(keepData){var elems=$.fn['clone'+replaceSuffix].apply(this,arguments);if(!keepData){elems.filter('['+oldtitle+']').attr('title',function(){return $.attr(this,oldtitle);}).removeAttr(oldtitle);}
return elems;}},function(name,func){if(!func||$.fn[name+replaceSuffix]){return TRUE;}
var old=$.fn[name+replaceSuffix]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments);};});if(!$.ui){$['cleanData'+replaceSuffix]=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=$(elems[i])).length;i++){if(elem.attr(ATTR_HAS)){try{elem.triggerHandler('removeqtip');}
catch(e){}}}
$['cleanData'+replaceSuffix].apply(this,arguments);};};QTIP.version='3.0.3';QTIP.nextid=0;QTIP.inactiveEvents=INACTIVE_EVENTS;QTIP.zindex=15000;QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:'title',title:FALSE,button:FALSE},position:{my:'top left',at:'bottom right',target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,scroll:TRUE,resize:TRUE,method:'flipinvert flipinvert'},effect:function(api,pos){$(this).animate(pos,{duration:200,queue:FALSE});}},show:{target:FALSE,event:'mouseenter',effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,event:'mouseleave',effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:'window',distance:FALSE},style:{classes:'',widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};;var TIP,createVML,SCALE,PIXEL_RATIO,BACKING_STORE_RATIO,MARGIN='margin',BORDER='border',COLOR='color',BG_COLOR='background-color',TRANSPARENT='transparent',IMPORTANT=' !important',HASCANVAS=!!document.createElement('canvas').getContext,INVALID=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function camel(s){return s.charAt(0).toUpperCase()+s.slice(1);}
var cssProps={},cssPrefixes=['Webkit','O','Moz','ms'];function vendorCss(elem,prop){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssPrefixes.join(ucProp+' ')+ucProp).split(' '),cur,val,i=0;if(cssProps[prop]){return elem.css(cssProps[prop]);}
while(cur===props[i++]){if((val=elem.css(cur))!==undefined){cssProps[prop]=cur;return val;}}}
function intCss(elem,prop){return Math.ceil(parseFloat(vendorCss(elem,prop)));}
if(!HASCANVAS){createVML=function(tag,props,style){return'<qtipvml:'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(props||'')+' style="behavior: url(#default#VML); '+(style||'')+'" />';};}
else{PIXEL_RATIO=window.devicePixelRatio||1;BACKING_STORE_RATIO=(function(){var context=document.createElement('canvas').getContext('2d');return context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1;})();SCALE=PIXEL_RATIO/BACKING_STORE_RATIO;}
function Tip(qtip,options){this._ns='tip';this.options=options;this.offset=options.offset;this.size=[options.width,options.height];this.qtip=qtip;this.init(qtip);}
$.extend(Tip.prototype,{init:function(qtip){var context,tip;tip=this.element=qtip.elements.tip=$('<div />',{'class':NAMESPACE+'-tip'}).prependTo(qtip.tooltip);if(HASCANVAS){context=$('<canvas />').appendTo(this.element)[0].getContext('2d');context.lineJoin='miter';context.miterLimit=100000;context.save();}
else{context=createVML('shape','coordorigin="0,0"','position:absolute;');this.element.html(context+context);qtip._bind($('*',tip).add(tip),['click','mousedown'],function(event){event.stopPropagation();},this._ns);}
qtip._bind(qtip.tooltip,'tooltipmove',this.reposition,this._ns,this);this.create();},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width;},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height;},_useTitle:function(corner){var titlebar=this.qtip.elements.titlebar;return titlebar&&(corner.y===TOP||corner.y===CENTER&&this.element.position().top+this.size[1]/2+this.options.offset<titlebar.outerHeight(TRUE));},_parseCorner:function(corner){var my=this.qtip.options.position.my;if(corner===FALSE||my===FALSE){corner=FALSE;}
else if(corner===TRUE){corner=new CORNER(my.string());}
else if(!corner.string){corner=new CORNER(corner);corner.fixed=TRUE;}
return corner;},_parseWidth:function(corner,side,use){var elements=this.qtip.elements,prop=BORDER+camel(side)+'Width';return(use?intCss(use,prop):intCss(elements.content,prop)||intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop))||0;},_parseRadius:function(corner){var elements=this.qtip.elements,prop=BORDER+camel(corner.y)+camel(corner.x)+'Radius';return BROWSER.ie<9?0:intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop)||0;},_invalidColour:function(elem,prop,compare){var val=elem.css(prop);return!val||compare&&val===elem.css(compare)||INVALID.test(val)?FALSE:val;},_parseColours:function(corner){var elements=this.qtip.elements,tip=this.element.css('cssText',''),borderSide=BORDER+camel(corner[corner.precedance])+camel(COLOR),colorElem=this._useTitle(corner)&&elements.titlebar||elements.content,css=this._invalidColour,color=[];color[0]=css(tip,BG_COLOR)||css(colorElem,BG_COLOR)||css(elements.content,BG_COLOR)||css(elements.tooltip,BG_COLOR)||tip.css(BG_COLOR);color[1]=css(tip,borderSide,COLOR)||css(colorElem,borderSide,COLOR)||css(elements.content,borderSide,COLOR)||css(elements.tooltip,borderSide,COLOR)||elements.tooltip.css(borderSide);$('*',tip).add(tip).css('cssText',BG_COLOR+':'+TRANSPARENT+IMPORTANT+';'+BORDER+':0'+IMPORTANT+';');return color;},_calculateSize:function(corner){var y=corner.precedance===Y,width=this.options.width,height=this.options.height,isCenter=corner.abbrev()==='c',base=(y?width:height)*(isCenter?0.5:1),pow=Math.pow,round=Math.round,bigHyp,ratio,result,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[this.border/base*smallHyp,this.border/height*smallHyp];hyp[2]=Math.sqrt(pow(hyp[0],2)-pow(this.border,2));hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(this.border,2));bigHyp=smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]);ratio=bigHyp/smallHyp;result=[round(ratio*width),round(ratio*height)];return y?result:result.reverse();},_calculateTip:function(corner,size,scale){scale=scale||1;size=size||this.size;var width=size[0]*scale,height=size[1]*scale,width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={br:[0,0,width,height,width,0],bl:[0,0,width,0,0,height],tr:[0,height,width,0,width,height],tl:[0,0,0,height,width,height],tc:[0,height,width2,0,width,height],bc:[0,0,width,0,width2,height],rc:[0,0,width,height2,0,height],lc:[width,0,width,height,0,height2]};tips.lt=tips.br;tips.rt=tips.bl;tips.lb=tips.tr;tips.rb=tips.tl;return tips[corner.abbrev()];},_drawCoords:function(context,coords){context.beginPath();context.moveTo(coords[0],coords[1]);context.lineTo(coords[2],coords[3]);context.lineTo(coords[4],coords[5]);context.closePath();},create:function(){var c=this.corner=(HASCANVAS||BROWSER.ie)&&this._parseCorner(this.options.corner);this.enabled=!!this.corner&&this.corner.abbrev()!=='c';if(this.enabled){this.qtip.cache.corner=c.clone();this.update();}
this.element.toggle(this.enabled);return this.corner;},update:function(corner,position){if(!this.enabled){return this;}
var elements=this.qtip.elements,tip=this.element,inner=tip.children(),options=this.options,curSize=this.size,mimic=options.mimic,round=Math.round,color,precedance,context,coords,bigCoords,translate,newSize,border;if(!corner){corner=this.qtip.cache.corner||this.corner;}
if(mimic===FALSE){mimic=corner;}
else{mimic=new CORNER(mimic);mimic.precedance=corner.precedance;if(mimic.x==='inherit'){mimic.x=corner.x;}
else if(mimic.y==='inherit'){mimic.y=corner.y;}
else if(mimic.x===mimic.y){mimic[corner.precedance]=corner[corner.precedance];}}
precedance=mimic.precedance;if(corner.precedance===X){this._swapDimensions();}
else{this._resetDimensions();}
color=this.color=this._parseColours(corner);if(color[1]!==TRANSPARENT){border=this.border=this._parseWidth(corner,corner[corner.precedance]);if(options.border&&border<1&&!INVALID.test(color[1])){color[0]=color[1];}
this.border=border=options.border!==TRUE?options.border:border;}
else{this.border=border=0;}
newSize=this.size=this._calculateSize(corner);tip.css({width:newSize[0],height:newSize[1],lineHeight:newSize[1]+'px'});if(corner.precedance===Y){translate=[round(mimic.x===LEFT?border:mimic.x===RIGHT?newSize[0]-curSize[0]-border:(newSize[0]-curSize[0])/2),round(mimic.y===TOP?newSize[1]-curSize[1]:0)];}
else{translate=[round(mimic.x===LEFT?newSize[0]-curSize[0]:0),round(mimic.y===TOP?border:mimic.y===BOTTOM?newSize[1]-curSize[1]-border:(newSize[1]-curSize[1])/2)];}
if(HASCANVAS){context=inner[0].getContext('2d');context.restore();context.save();context.clearRect(0,0,6000,6000);coords=this._calculateTip(mimic,curSize,SCALE);bigCoords=this._calculateTip(mimic,this.size,SCALE);inner.attr(WIDTH,newSize[0]*SCALE).attr(HEIGHT,newSize[1]*SCALE);inner.css(WIDTH,newSize[0]).css(HEIGHT,newSize[1]);this._drawCoords(context,bigCoords);context.fillStyle=color[1];context.fill();context.translate(translate[0]*SCALE,translate[1]*SCALE);this._drawCoords(context,coords);context.fillStyle=color[0];context.fill();}
else{coords=this._calculateTip(mimic);coords='m'+coords[0]+','+coords[1]+' l'+coords[2]+','+coords[3]+' '+coords[4]+','+coords[5]+' xe';translate[2]=border&&/^(r|b)/i.test(corner.string())?BROWSER.ie===8?2:1:0;inner.css({coordsize:newSize[0]+border+' '+newSize[1]+border,antialias:''+(mimic.string().indexOf(CENTER)>-1),left:translate[0]-translate[2]*Number(precedance===X),top:translate[1]-translate[2]*Number(precedance===Y),width:newSize[0]+border,height:newSize[1]+border}).each(function(i){var $this=$(this);$this[$this.prop?'prop':'attr']({coordsize:newSize[0]+border+' '+newSize[1]+border,path:coords,fillcolor:color[0],filled:!!i,stroked:!i}).toggle(!!(border||i));!i&&$this.html(createVML('stroke','weight="'+border*2+'px" color="'+color[1]+'" miterlimit="1000" joinstyle="miter"'));});}
window.opera&&setTimeout(function(){elements.tip.css({display:'inline-block',visibility:'visible'});},1);if(position!==FALSE){this.calculate(corner,newSize);}},calculate:function(corner,size){if(!this.enabled){return FALSE;}
var self=this,elements=this.qtip.elements,tip=this.element,userOffset=this.options.offset,position={},precedance,corners;corner=corner||this.corner;precedance=corner.precedance;size=size||this._calculateSize(corner);corners=[corner.x,corner.y];if(precedance===X){corners.reverse();}
$.each(corners,function(i,side){var b,bc,br;if(side===CENTER){b=precedance===Y?LEFT:TOP;position[b]='50%';position[MARGIN+'-'+b]=-Math.round(size[precedance===Y?0:1]/2)+userOffset;}
else{b=self._parseWidth(corner,side,elements.tooltip);bc=self._parseWidth(corner,side,elements.content);br=self._parseRadius(corner);position[side]=Math.max(-self.border,i?bc:userOffset+(br>b?br:-b));}});position[corner[precedance]]-=size[precedance===X?0:1];tip.css({margin:'',top:'',bottom:'',left:'',right:''}).css(position);return position;},reposition:function(event,api,pos){if(!this.enabled){return;}
var cache=api.cache,newCorner=this.corner.clone(),adjust=pos.adjusted,method=api.options.position.adjust.method.split(' '),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},offset,css={},props;function shiftflip(direction,precedance,popposite,side,opposite){if(direction===SHIFT&&newCorner.precedance===precedance&&adjust[side]&&newCorner[popposite]!==CENTER){newCorner.precedance=newCorner.precedance===X?Y:X;}
else if(direction!==SHIFT&&adjust[side]){newCorner[precedance]=newCorner[precedance]===CENTER?adjust[side]>0?side:opposite:newCorner[precedance]===side?opposite:side;}}
function shiftonly(xy,side,opposite){if(newCorner[xy]===CENTER){css[MARGIN+'-'+side]=shift[xy]=offset[MARGIN+'-'+side]-adjust[side];}
else{props=offset[opposite]!==undefined?[adjust[side],-offset[side]]:[-adjust[side],offset[side]];if((shift[xy]=Math.max(props[0],props[1]))>props[0]){pos[side]-=adjust[side];shift[side]=FALSE;}
css[offset[opposite]!==undefined?opposite:side]=shift[xy];}}
if(this.corner.fixed!==TRUE){shiftflip(horizontal,X,Y,LEFT,RIGHT);shiftflip(vertical,Y,X,TOP,BOTTOM);if(newCorner.string()!==cache.corner.string()||cache.cornerTop!==adjust.top||cache.cornerLeft!==adjust.left){this.update(newCorner,FALSE);}}
offset=this.calculate(newCorner);if(offset.right!==undefined){offset.left=-offset.right;}
if(offset.bottom!==undefined){offset.top=-offset.bottom;}
offset.user=this.offset;shift.left=horizontal===SHIFT&&!!adjust.left;if(shift.left){shiftonly(X,LEFT,RIGHT);}
shift.top=vertical===SHIFT&&!!adjust.top;if(shift.top){shiftonly(Y,TOP,BOTTOM);}
this.element.css(css).toggle(!(shift.x&&shift.y||newCorner.x===CENTER&&shift.y||newCorner.y===CENTER&&shift.x));pos.left-=offset.left.charAt?offset.user:horizontal!==SHIFT||shift.top||!shift.left&&!shift.top?offset.left+this.border:0;pos.top-=offset.top.charAt?offset.user:vertical!==SHIFT||shift.left||!shift.left&&!shift.top?offset.top+this.border:0;cache.cornerLeft=adjust.left;cache.cornerTop=adjust.top;cache.corner=newCorner.clone();},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);if(this.qtip.elements.tip){this.qtip.elements.tip.find('*').remove().end().remove();}}});TIP=PLUGINS.tip=function(api){return new Tip(api,api.options.style.tip);};TIP.initialize='render';TIP.sanitize=function(options){if(options.style&&'tip'in options.style){var opts=options.style.tip;if(typeof opts!=='object'){opts=options.style.tip={corner:opts};}
if(!(/string|boolean/i).test(typeof opts.corner)){opts.corner=TRUE;}}};CHECKS.tip={'^position.my|style.tip.(corner|mimic|border)$':function(){this.create();this.qtip.reposition();},'^style.tip.(height|width)$':function(obj){this.size=[obj.width,obj.height];this.update();this.qtip.reposition();},'^content.title|style.(classes|widget)$':function(){this.update();}};$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,mimic:FALSE,width:6,height:6,border:TRUE,offset:0}}});;var MODAL,OVERLAY,MODALCLASS='qtip-modal',MODALSELECTOR='.'+MODALCLASS;OVERLAY=function()
{var self=this,focusableElems={},current,prevState,elem;function focusable(element){if($.expr[':'].focusable){return $.expr[':'].focusable;}
var isTabIndexNotNaN=!isNaN($.attr(element,'tabindex')),nodeName=element.nodeName&&element.nodeName.toLowerCase(),map,mapName,img;if('area'===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=='map'){return false;}
img=$('img[usemap=#'+mapName+']')[0];return!!img&&img.is(':visible');}
return /input|select|textarea|button|object/.test(nodeName)?!element.disabled:'a'===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN;}
function focusInputs(blurElems){if(focusableElems.length<1&&blurElems.length){blurElems.not('body').blur();}
else{focusableElems.first().focus();}}
function stealFocus(event){if(!elem.is(':visible')){return;}
var target=$(event.target),tooltip=current.tooltip,container=target.closest(SELECTOR),targetOnTop;targetOnTop=container.length<1?FALSE:parseInt(container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10);if(!targetOnTop&&target.closest(SELECTOR)[0]!==tooltip[0]){focusInputs(target);}}
$.extend(self,{init:function(){elem=self.elem=$('<div />',{id:'qtip-overlay',html:'<div></div>',mousedown:function(){return FALSE;}}).hide();$(document.body).bind('focusin'+MODALSELECTOR,stealFocus);$(document).bind('keydown'+MODALSELECTOR,function(event){if(current&&current.options.show.modal.escape&&event.keyCode===27){current.hide(event);}});elem.bind('click'+MODALSELECTOR,function(event){if(current&&current.options.show.modal.blur){current.hide(event);}});return self;},update:function(api){current=api;if(api.options.show.modal.stealfocus!==FALSE){focusableElems=api.tooltip.find('*').filter(function(){return focusable(this);});}
else{focusableElems=[];}},toggle:function(api,state,duration){var tooltip=api.tooltip,options=api.options.show.modal,effect=options.effect,type=state?'show':'hide',visible=elem.is(':visible'),visibleModals=$(MODALSELECTOR).filter(':visible:not(:animated)').not(tooltip);self.update(api);if(state&&options.stealfocus!==FALSE){focusInputs($(':focus'));}
elem.toggleClass('blurs',options.blur);if(state){elem.appendTo(document.body);}
if(elem.is(':animated')&&visible===state&&prevState!==FALSE||!state&&visibleModals.length){return self;}
elem.stop(TRUE,FALSE);if($.isFunction(effect)){effect.call(elem,state);}
else if(effect===FALSE){elem[type]();}
else{elem.fadeTo(parseInt(duration,10)||90,state?1:0,function(){if(!state){elem.hide();}});}
if(!state){elem.queue(function(next){elem.css({left:'',top:''});if(!$(MODALSELECTOR).length){elem.detach();}
next();});}
prevState=state;if(current.destroyed){current=NULL;}
return self;}});self.init();};OVERLAY=new OVERLAY();function Modal(api,options){this.options=options;this._ns='-modal';this.qtip=api;this.init(api);}
$.extend(Modal.prototype,{init:function(qtip){var tooltip=qtip.tooltip;if(!this.options.on){return this;}
qtip.elements.overlay=OVERLAY.elem;tooltip.addClass(MODALCLASS).css('z-index',QTIP.modal_zindex+$(MODALSELECTOR).length);qtip._bind(tooltip,['tooltipshow','tooltiphide'],function(event,api,duration){var oEvent=event.originalEvent;if(event.target===tooltip[0]){if(oEvent&&event.type==='tooltiphide'&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(OVERLAY.elem[0]).length){try{event.preventDefault();}
catch(e){}}
else if(!oEvent||oEvent&&oEvent.type!=='tooltipsolo'){this.toggle(event,event.type==='tooltipshow',duration);}}},this._ns,this);qtip._bind(tooltip,'tooltipfocus',function(event,api){if(event.isDefaultPrevented()||event.target!==tooltip[0]){return;}
var qtips=$(MODALSELECTOR),newIndex=QTIP.modal_zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,10);OVERLAY.elem[0].style.zIndex=newIndex-1;qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex-=1;}});qtips.filter('.'+CLASS_FOCUS).qtip('blur',event.originalEvent);tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex;OVERLAY.update(api);try{event.preventDefault();}
catch(e){}},this._ns,this);qtip._bind(tooltip,'tooltiphide',function(event){if(event.target===tooltip[0]){$(MODALSELECTOR).filter(':visible').not(tooltip).last().qtip('focus',event);}},this._ns,this);},toggle:function(event,state,duration){if(event&&event.isDefaultPrevented()){return this;}
OVERLAY.toggle(this.qtip,!!state,duration);},destroy:function(){this.qtip.tooltip.removeClass(MODALCLASS);this.qtip._unbind(this.qtip.tooltip,this._ns);OVERLAY.toggle(this.qtip,FALSE);delete this.qtip.elements.overlay;}});MODAL=PLUGINS.modal=function(api){return new Modal(api,api.options.show.modal);};MODAL.sanitize=function(opts){if(opts.show){if(typeof opts.show.modal!=='object'){opts.show.modal={on:!!opts.show.modal};}
else if(typeof opts.show.modal.on==='undefined'){opts.show.modal.on=TRUE;}}};QTIP.modal_zindex=QTIP.zindex-200;MODAL.initialize='render';CHECKS.modal={'^show.modal.(on|blur)$':function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0);}};$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,stealfocus:TRUE,escape:TRUE}}});;PLUGINS.viewport=function(api,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight)
{var target=posOptions.target,tooltip=api.elements.tooltip,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(' '),methodX=method[0],methodY=method[1]||method[0],viewport=posOptions.viewport,container=posOptions.container,adjusted={left:0,top:0},fixed,newMy,containerOffset,containerStatic,viewportWidth,viewportHeight,viewportScroll,viewportOffset;if(!viewport.jquery||target[0]===window||target[0]===document.body||adjust.method==='none'){return adjusted;}
containerOffset=container.offset()||adjusted;containerStatic=container.css('position')==='static';fixed=tooltip.css('position')==='fixed';viewportWidth=viewport[0]===window?viewport.width():viewport.outerWidth(FALSE);viewportHeight=viewport[0]===window?viewport.height():viewport.outerHeight(FALSE);viewportScroll={left:fixed?0:viewport.scrollLeft(),top:fixed?0:viewport.scrollTop()};viewportOffset=viewport.offset()||adjusted;function calculate(side,otherSide,type,adjustment,side1,side2,lengthName,targetLength,elemLength){var initialPos=position[side1],mySide=my[side],atSide=at[side],isShift=type===SHIFT,myLength=mySide===side1?elemLength:mySide===side2?-elemLength:-elemLength/2,atLength=atSide===side1?targetLength:atSide===side2?-targetLength:-targetLength/2,sideOffset=viewportScroll[side1]+viewportOffset[side1]-(containerStatic?0:containerOffset[side1]),overflow1=sideOffset-initialPos,overflow2=initialPos+elemLength-(lengthName===WIDTH?viewportWidth:viewportHeight)-sideOffset,offset=myLength-(my.precedance===side||mySide===my[otherSide]?atLength:0)-(atSide===CENTER?targetLength/2:0);if(isShift){offset=(mySide===side1?1:-1)*myLength;position[side1]+=overflow1>0?overflow1:overflow2>0?-overflow2:0;position[side1]=Math.max(-containerOffset[side1]+viewportOffset[side1],initialPos-offset,Math.min(Math.max(-containerOffset[side1]+viewportOffset[side1]+(lengthName===WIDTH?viewportWidth:viewportHeight),initialPos+offset),position[side1],mySide==='center'?initialPos-myLength:1E9));}
else{adjustment*=type===FLIPINVERT?2:0;if(overflow1>0&&(mySide!==side1||overflow2>0)){position[side1]-=offset+adjustment;newMy.invert(side,side1);}
else if(overflow2>0&&(mySide!==side2||overflow1>0)){position[side1]-=(mySide===CENTER?-offset:offset)+adjustment;newMy.invert(side,side2);}
if(position[side1]<viewportScroll[side1]&&-position[side1]>overflow2){position[side1]=initialPos;newMy=my.clone();}}
return position[side1]-initialPos;}
if(methodX!=='shift'||methodY!=='shift'){newMy=my.clone();}
adjusted={left:methodX!=='none'?calculate(X,Y,methodX,adjust.x,LEFT,RIGHT,WIDTH,targetWidth,elemWidth):0,top:methodY!=='none'?calculate(Y,X,methodY,adjust.y,TOP,BOTTOM,HEIGHT,targetHeight,elemHeight):0,my:newMy};return adjusted;};;PLUGINS.polys={polygon:function(baseCoords,corner){var result={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:FALSE},i=0,next,coords=[],compareX=1,compareY=1,realX=0,realY=0,newWidth,newHeight;i=baseCoords.length;while(i--){next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)];if(next[0]>result.position.right){result.position.right=next[0];}
if(next[0]<result.position.left){result.position.left=next[0];}
if(next[1]>result.position.bottom){result.position.bottom=next[1];}
if(next[1]<result.position.top){result.position.top=next[1];}
coords.push(next);}
newWidth=result.width=Math.abs(result.position.right-result.position.left);newHeight=result.height=Math.abs(result.position.bottom-result.position.top);if(corner.abbrev()==='c'){result.position={left:result.position.left+result.width/2,top:result.position.top+result.height/2};}
else{while(newWidth>0&&newHeight>0&&compareX>0&&compareY>0)
{newWidth=Math.floor(newWidth/2);newHeight=Math.floor(newHeight/2);if(corner.x===LEFT){compareX=newWidth;}
else if(corner.x===RIGHT){compareX=result.width-newWidth;}
else{compareX+=Math.floor(newWidth/2);}
if(corner.y===TOP){compareY=newHeight;}
else if(corner.y===BOTTOM){compareY=result.height-newHeight;}
else{compareY+=Math.floor(newHeight/2);}
i=coords.length;while(i--)
{if(coords.length<2){break;}
realX=coords[i][0]-result.position.left;realY=coords[i][1]-result.position.top;if(corner.x===LEFT&&realX>=compareX||corner.x===RIGHT&&realX<=compareX||corner.x===CENTER&&(realX<compareX||realX>result.width-compareX)||corner.y===TOP&&realY>=compareY||corner.y===BOTTOM&&realY<=compareY||corner.y===CENTER&&(realY<compareY||realY>result.height-compareY)){coords.splice(i,1);}}}
result.position={left:coords[0][0],top:coords[0][1]};}
return result;},rect:function(ax,ay,bx,by){return{width:Math.abs(bx-ax),height:Math.abs(by-ay),position:{left:Math.min(ax,bx),top:Math.min(ay,by)}};},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(cx,cy,rx,ry,corner){var c=PLUGINS.polys._angles[corner.abbrev()],rxc=c===0?0:rx*Math.cos(c*Math.PI),rys=ry*Math.sin(c*Math.PI);return{width:rx*2-Math.abs(rxc),height:ry*2-Math.abs(rys),position:{left:cx+rxc,top:cy+rys},adjustable:FALSE};},circle:function(cx,cy,r,corner){return PLUGINS.polys.ellipse(cx,cy,r,r,corner);}};;PLUGINS.svg=function(api,svg,corner)
{var elem=svg[0],root=$(elem.ownerSVGElement),ownerDocument=elem.ownerDocument,strokeWidth2=(parseInt(svg.css('stroke-width'),10)||0)/2,frameOffset,mtx,transformed,len,next,i,points,result,position;while(!elem.getBBox){elem=elem.parentNode;}
if(!elem.getBBox||!elem.parentNode){return FALSE;}
switch(elem.nodeName){case'ellipse':case'circle':result=PLUGINS.polys.ellipse(elem.cx.baseVal.value,elem.cy.baseVal.value,(elem.rx||elem.r).baseVal.value+strokeWidth2,(elem.ry||elem.r).baseVal.value+strokeWidth2,corner);break;case'line':case'polygon':case'polyline':points=elem.points||[{x:elem.x1.baseVal.value,y:elem.y1.baseVal.value},{x:elem.x2.baseVal.value,y:elem.y2.baseVal.value}];for(result=[],i=-1,len=points.numberOfItems||points.length;++i<len;){next=points.getItem?points.getItem(i):points[i];result.push.apply(result,[next.x,next.y]);}
result=PLUGINS.polys.polygon(result,corner);break;default:result=elem.getBBox();result={width:result.width,height:result.height,position:{left:result.x,top:result.y}};break;}
position=result.position;root=root[0];if(root.createSVGPoint){mtx=elem.getScreenCTM();points=root.createSVGPoint();points.x=position.left;points.y=position.top;transformed=points.matrixTransform(mtx);position.left=transformed.x;position.top=transformed.y;}
if(ownerDocument!==document&&api.position.target!=='mouse'){frameOffset=$((ownerDocument.defaultView||ownerDocument.parentWindow).frameElement).offset();if(frameOffset){position.left+=frameOffset.left;position.top+=frameOffset.top;}}
ownerDocument=$(ownerDocument);position.left+=ownerDocument.scrollLeft();position.top+=ownerDocument.scrollTop();return result;};;PLUGINS.imagemap=function(api,area,corner)
{if(!area.jquery){area=$(area);}
var shape=(area.attr('shape')||'rect').toLowerCase().replace('poly','polygon'),image=$('img[usemap="#'+area.parent('map').attr('name')+'"]'),coordsString=$.trim(area.attr('coords')),coordsArray=coordsString.replace(/,$/,'').split(','),imageOffset,coords,i,result,len;if(!image.length){return FALSE;}
if(shape==='polygon'){result=PLUGINS.polys.polygon(coordsArray,corner);}
else if(PLUGINS.polys[shape]){for(i=-1,len=coordsArray.length,coords=[];++i<len;){coords.push(parseInt(coordsArray[i],10));}
result=PLUGINS.polys[shape].apply(this,coords.concat(corner));}
else{return FALSE;}
imageOffset=image.offset();imageOffset.left+=Math.ceil((image.outerWidth(FALSE)-image.width())/2);imageOffset.top+=Math.ceil((image.outerHeight(FALSE)-image.height())/2);result.position.left+=imageOffset.left;result.position.top+=imageOffset.top;return result;};;var IE6,BGIFRAME='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';" '+' style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); '+'-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';function Ie6(api){this._ns='ie6';this.qtip=api;this.init(api);}
$.extend(Ie6.prototype,{_scroll:function(){var overlay=this.qtip.elements.overlay;overlay&&(overlay[0].style.top=$(window).scrollTop()+'px');},init:function(qtip){var tooltip=qtip.tooltip;if($('select, object').length<1){this.bgiframe=qtip.elements.bgiframe=$(BGIFRAME).appendTo(tooltip);qtip._bind(tooltip,'tooltipmove',this.adjustBGIFrame,this._ns,this);}
this.redrawContainer=$('<div/>',{id:NAMESPACE+'-rcontainer'}).appendTo(document.body);if(qtip.elements.overlay&&qtip.elements.overlay.addClass('qtipmodal-ie6fix')){qtip._bind(window,['scroll','resize'],this._scroll,this._ns,this);qtip._bind(tooltip,['tooltipshow'],this._scroll,this._ns,this);}
this.redraw();},adjustBGIFrame:function(){var tooltip=this.qtip.tooltip,dimensions={height:tooltip.outerHeight(FALSE),width:tooltip.outerWidth(FALSE)},plugin=this.qtip.plugins.tip,tip=this.qtip.elements.tip,tipAdjust,offset;offset=parseInt(tooltip.css('borderLeftWidth'),10)||0;offset={left:-offset,top:-offset};if(plugin&&tip){tipAdjust=plugin.corner.precedance==='x'?[WIDTH,LEFT]:[HEIGHT,TOP];offset[tipAdjust[1]]-=tip[tipAdjust[0]]();}
this.bgiframe.css(offset).css(dimensions);},redraw:function(){if(this.qtip.rendered<1||this.drawing){return this;}
var tooltip=this.qtip.tooltip,style=this.qtip.options.style,container=this.qtip.options.position.container,perc,width,max,min;this.qtip.drawing=1;if(style.height){tooltip.css(HEIGHT,style.height);}
if(style.width){tooltip.css(WIDTH,style.width);}
else{tooltip.css(WIDTH,'').appendTo(this.redrawContainer);width=tooltip.width();if(width%2<1){width+=1;}
max=tooltip.css('maxWidth')||'';min=tooltip.css('minWidth')||'';perc=(max+min).indexOf('%')>-1?container.width()/100:0;max=(max.indexOf('%')>-1?perc:parseInt(max,10))||width;min=(min.indexOf('%')>-1?perc:parseInt(min,10))||0;width=max+min?Math.min(Math.max(width,min),max):width;tooltip.css(WIDTH,Math.round(width)).appendTo(container);}
this.drawing=0;return this;},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([window,this.qtip.tooltip],this._ns);}});IE6=PLUGINS.ie6=function(api){return BROWSER.ie===6?new Ie6(api):FALSE;};IE6.initialize='render';CHECKS.ie6={'^content|style$':function(){this.redraw();}};;}));}(window,document));(function(){var $,win;$=window.jQuery;win=$(window);$.fn.stick_in_parent=function(options){var doc,elm,enable_bottoming,fn,i,inner_scrolling,len,manual_spacer,offset_top,outer_width,parent_selector,recalc_every,sticky_class;var opts=options;if(options==null){opts={};}
sticky_class=opts.sticky_class;inner_scrolling=opts.inner_scrolling;recalc_every=opts.recalc_every;parent_selector=opts.parent;offset_top=opts.offset_top;manual_spacer=opts.spacer;enable_bottoming=opts.bottoming;if(offset_top==null){offset_top=0;}
if(parent_selector==null){parent_selector=void 0;}
if(inner_scrolling==null){inner_scrolling=true;}
if(sticky_class==null){sticky_class="is_stuck";}
doc=$(document);if(enable_bottoming==null){enable_bottoming=true;}
outer_width=function(el){var _el,computed,w;if(window.getComputedStyle){_el=el[0];computed=window.getComputedStyle(el[0]);w=parseFloat(computed.getPropertyValue("width"))+parseFloat(computed.getPropertyValue("margin-left"))+parseFloat(computed.getPropertyValue("margin-right"));if(computed.getPropertyValue("box-sizing")!=="border-box"){w+=parseFloat(computed.getPropertyValue("border-left-width"))+parseFloat(computed.getPropertyValue("border-right-width"))+parseFloat(computed.getPropertyValue("padding-left"))+parseFloat(computed.getPropertyValue("padding-right"));}
return w;}else{return el.outerWidth(true);}};fn=function(elm,padding_bottom,parent_top,parent_height,top,height,el_float,detached){var bottomed,detach,fixed,last_pos,last_scroll_height,offset,parent,recalc,recalc_and_tick,recalc_counter,spacer,tick;if(elm.data("sticky_kit")){return;}
elm.data("sticky_kit",true);last_scroll_height=doc.height();parent=elm.parent();if(parent_selector!=null){parent=parent.closest(parent_selector);}
if(!parent.length){throw"failed to find stick parent";}
fixed=false;bottomed=false;spacer=manual_spacer!=null?manual_spacer&&elm.closest(manual_spacer):$("<div />");if(spacer){spacer.css('position',elm.css('position'));}
recalc=function(){var border_top,padding_top,restore;if(detached){}
last_scroll_height=doc.height();border_top=parseInt(parent.css("border-top-width"),10);padding_top=parseInt(parent.css("padding-top"),10);padding_bottom=parseInt(parent.css("padding-bottom"),10);parent_top=parent.offset().top+border_top+padding_top;parent_height=parent.height()+50;var right_sibling_height=$('.product--buybox').outerHeight(true)+50;if(parent_height<=right_sibling_height){if(fixed){fixed=false;bottomed=false;if(manual_spacer==null){elm.insertAfter(spacer);spacer.detach();}
elm.css({position:"",top:"",width:"",bottom:""}).removeClass(sticky_class);restore=true;}
top=elm.offset().top-(parseInt(elm.css("margin-top"),10)||0)-offset_top;height=elm.outerHeight(true);el_float=elm.css("float");if(spacer){spacer.css({width:outer_width(elm),height:height,display:elm.css("display"),"vertical-align":elm.css("vertical-align"),"float":el_float});}}
if(restore){return tick();}};recalc();if(height===parent_height){return;}
last_pos=void 0;offset=offset_top;recalc_counter=recalc_every;tick=function(){var css,delta,recalced,scroll,will_bottom,win_height;if(detached){return;}
recalced=false;if(recalc_counter!=null){recalc_counter-=1;if(recalc_counter<=0){recalc_counter=recalc_every;recalc();recalced=true;}}
if(!recalced&&doc.height()!==last_scroll_height){recalc();recalced=true;}
scroll=win.scrollTop();if(last_pos!=null){delta=scroll-last_pos;}
last_pos=scroll;if(fixed){if(enable_bottoming){will_bottom=scroll+height+offset>parent_height+parent_top;if(bottomed&&!will_bottom){bottomed=false;elm.css({position:"fixed",bottom:"",top:offset}).trigger("sticky_kit:unbottom");}}
if(scroll<top){fixed=false;offset=offset_top;if(manual_spacer==null){if(el_float==="left"||el_float==="right"){elm.insertAfter(spacer);}
spacer.detach();}
css={position:"",width:"",top:""};elm.css(css).removeClass(sticky_class).trigger("sticky_kit:unstick");}
if(inner_scrolling){win_height=win.height();if(height+offset_top>win_height){if(!bottomed){offset-=delta;offset=Math.max(win_height-height,offset);offset=Math.min(offset_top,offset);if(fixed){elm.css({top:offset+"px"});}}}}}else{if(scroll>top){fixed=true;css={position:"fixed",top:offset};css.width=elm.css("box-sizing")==="border-box"?elm.outerWidth()+"px":elm.width()+"px";elm.css(css).addClass(sticky_class);if(manual_spacer==null){elm.after(spacer);if(el_float==="left"||el_float==="right"){spacer.append(elm);}}
elm.trigger("sticky_kit:stick");}}
if(fixed&&enable_bottoming){if(will_bottom==null){will_bottom=scroll+height+offset>parent_height+parent_top;}
if(!bottomed&&will_bottom){bottomed=true;if(parent.css("position")==="static"){parent.css({position:"relative"});}
return elm.css({position:"absolute",bottom:padding_bottom,top:"auto"}).trigger("sticky_kit:bottom");}}};recalc_and_tick=function(){recalc();return tick();};detach=function(){detached=true;win.off("touchmove",tick);win.off("scroll",tick);win.off("resize",recalc_and_tick);$(document.body).off("sticky_kit:recalc",recalc_and_tick);elm.off("sticky_kit:detach",detach);elm.removeData("sticky_kit");elm.css({position:"",bottom:"",top:"",width:""});parent.position("position","");if(fixed){if(manual_spacer==null){if(el_float==="left"||el_float==="right"){elm.insertAfter(spacer);}
spacer.remove();}
return elm.removeClass(sticky_class);}};win.on("touchmove",tick);win.on("scroll",tick);win.on("resize",recalc_and_tick);$(document.body).on("sticky_kit:recalc",recalc_and_tick);elm.on("sticky_kit:detach",detach);return setTimeout(tick,0);};for(i=0,len=this.length;i<len;i++){elm=this[i];fn($(elm));}
return this;};}).call(this);var CryptoJS=CryptoJS||function(g,j){var e={},d=e.lib={},m=function(){},n=d.Base={extend:function(a){m.prototype=this;var c=new m;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},q=d.WordArray=n.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=j?c:4*a.length},toString:function(a){return(a||l).stringify(this)},concat:function(a){var c=this.words,p=a.words,f=this.sigBytes;a=a.sigBytes;this.clamp();if(f%4)for(var b=0;b<a;b++)c[f+b>>>2]|=(p[b>>>2]>>>24-8*(b%4)&255)<<24-8*((f+b)%4);else if(65535<p.length)for(b=0;b<a;b+=4)c[f+b>>>2]=p[b>>>2];else c.push.apply(c,p);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=g.ceil(c/4)},clone:function(){var a=n.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*g.random()|0);return new q.init(c,a)}}),b=e.enc={},l=b.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],f=0;f<a;f++){var d=c[f>>>2]>>>24-8*(f%4)&255;b.push((d>>>4).toString(16));b.push((d&15).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],f=0;f<c;f+=2)b[f>>>3]|=parseInt(a.substr(f,2),16)<<24-4*(f%8);return new q.init(b,c/2)}},k=b.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],f=0;f<a;f++)b.push(String.fromCharCode(c[f>>>2]>>>24-8*(f%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],f=0;f<c;f++)b[f>>>2]|=(a.charCodeAt(f)&255)<<24-8*(f%4);return new q.init(b,c)}},h=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},u=d.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=h.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,f=b.sigBytes,l=this.blockSize,e=f/(4*l),e=a?g.ceil(e):g.max((e|0)-this._minBufferSize,0);a=e*l;f=g.min(4*a,f);if(a){for(var h=0;h<a;h+=l)this._doProcessBlock(d,h);h=d.splice(0,a);b.sigBytes-=f}return new q.init(h,f)},clone:function(){var a=n.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});d.Hasher=u.extend({cfg:n.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return(new a.init(d)).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return(new w.HMAC.init(a,d)).finalize(b)}}});var w=e.algo={};return e}(Math);(function(){var g=CryptoJS,j=g.lib,e=j.WordArray,d=j.Hasher,m=[],j=g.algo.SHA1=d.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,e){for(var b=this._hash.words,l=b[0],k=b[1],h=b[2],g=b[3],j=b[4],a=0;80>a;a++){if(16>a)m[a]=d[e+a]|0;else{var c=m[a-3]^m[a-8]^m[a-14]^m[a-16];m[a]=c<<1|c>>>31}c=(l<<5|l>>>27)+j+m[a];c=20>a?c+((k&h|~k&g)+1518500249):40>a?c+((k^h^g)+1859775393):60>a?c+((k&h|k&g|h&g)-1894007588):c+((k^h^g)-899497514);j=g;g=h;h=k<<30|k>>>2;k=l;l=c}b[0]=b[0]+l|0;b[1]=b[1]+k|0;b[2]=b[2]+h|0;b[3]=b[3]+g|0;b[4]=b[4]+j|0},_doFinalize:function(){var d=this._data,e=d.words,b=8*this._nDataBytes,l=8*d.sigBytes;e[l>>>5]|=128<<24-l%32;e[(l+64>>>9<<4)+14]=Math.floor(b/4294967296);e[(l+64>>>9<<4)+15]=b;d.sigBytes=4*e.length;this._process();return this._hash},clone:function(){var e=d.clone.call(this);e._hash=this._hash.clone();return e}});g.SHA1=d._createHelper(j);g.HmacSHA1=d._createHmacHelper(j)})();(function(){var g=CryptoJS,j=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(e,d){e=this._hasher=new e.init;"string"==typeof d&&(d=j.parse(d));var g=e.blockSize,n=4*g;d.sigBytes>n&&(d=e.finalize(d));d.clamp();for(var q=this._oKey=d.clone(),b=this._iKey=d.clone(),l=q.words,k=b.words,h=0;h<g;h++)l[h]^=1549556828,k[h]^=909522486;q.sigBytes=b.sigBytes=n;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var d=this._hasher;e=d.finalize(e);d.reset();return d.finalize(this._oKey.clone().concat(e))}})})();(function(){var g=CryptoJS,j=g.lib,e=j.Base,d=j.WordArray,j=g.algo,m=j.HMAC,n=j.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:j.SHA1,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(e,b){for(var g=this.cfg,k=m.create(g.hasher,e),h=d.create(),j=d.create([1]),n=h.words,a=j.words,c=g.keySize,g=g.iterations;n.length<c;){var p=k.update(b).finalize(j);k.reset();for(var f=p.words,v=f.length,s=p,t=1;t<g;t++){s=k.finalize(s);k.reset();for(var x=s.words,r=0;r<v;r++)f[r]^=x[r]}h.concat(p);a[0]++}h.sigBytes=4*c;return h}});g.PBKDF2=function(d,b,e){return n.create(e).compute(d,b)}})();var config=new Object();var tt_Debug=false
var tt_Enabled=true
var TagsToTip=true
config.Above=false
config.BgColor='#FFFFFF'
config.BgImg=''
config.BorderColor='#000000'
config.BorderStyle='solid'
config.BorderWidth=1
config.CenterMouse=false
config.ClickClose=true
config.ClickSticky=false
config.CloseBtn=false
config.CloseBtnColors=['#990000','#FFFFFF','#DD3333','#FFFFFF']
config.CloseBtnText='&nbsp;X&nbsp;'
config.CopyContent=true
config.Delay=400
config.Duration=0
config.Exclusive=true
config.FadeIn=500
config.FadeOut=500
config.FadeInterval=30
config.Fix=null
config.FollowMouse=true
config.FontColor='#000000'
config.FontFace='Open Sans,Arial,sans-serif'
config.FontSize='16px'
config.FontWeight='normal'
config.Height=0
config.JumpHorz=true
config.JumpVert=true
config.Left=false
config.OffsetX=20
config.OffsetY=-20
config.Opacity=100
config.Padding=10
config.Shadow=false
config.ShadowColor='#C0C0C0'
config.ShadowWidth=3
config.Sticky=false
config.TextAlign='left'
config.Title=''
config.TitleAlign='left'
config.TitleBgColor='#000000'
config.TitleFontColor='#FFFFFF'
config.TitleFontFace=''
config.TitleFontSize='16px'
config.TitlePadding=2
if(typeof bogxZoomWidth==='undefined'){bogx_zoom_width=600;}else{bogx_zoom_width=parseInt(bogxZoomWidth);}
config.Width=bogx_zoom_width
function Tip(){if(window.innerWidth>=768){if(window.innerWidth<=1024){config.Width=500;config.CenterMouse=true;}
tt_Tip(arguments,null);}}
function TagToTip()
{var t2t=tt_GetElt(arguments[0]);if(t2t)
tt_Tip(arguments,t2t);}
function UnTip()
{tt_OpReHref();if(tt_aV[DURATION]<0&&(tt_iState&0x2))
tt_tDurt.Timer("tt_HideInit()",-tt_aV[DURATION],true);else if(!(tt_aV[STICKY]&&(tt_iState&0x2)))
tt_HideInit();}
var tt_aElt=new Array(10),tt_aV=new Array(),tt_sContent,tt_t2t,tt_t2tDad,tt_musX,tt_musY,tt_over,tt_x,tt_y,tt_w,tt_h;function tt_Extension()
{tt_ExtCmdEnum();tt_aExt[tt_aExt.length]=this;return this;}
function tt_SetTipPos(x,y)
{var css=tt_aElt[0].style;tt_x=x;tt_y=y;css.left=x+"px";css.top=y+"px";if(tt_ie56)
{var ifrm=tt_aElt[tt_aElt.length-1];if(ifrm)
{ifrm.style.left=css.left;ifrm.style.top=css.top;}}}
function tt_HideInit()
{if(tt_iState)
{tt_ExtCallFncs(0,"HideInit");tt_iState&=~(0x4|0x8);if(tt_flagOpa&&tt_aV[FADEOUT])
{tt_tFade.EndTimer();if(tt_opa)
{var n=Math.round(tt_aV[FADEOUT]/(tt_aV[FADEINTERVAL]*(tt_aV[OPACITY]/tt_opa)));tt_Fade(tt_opa,tt_opa,0,n);return;}}
tt_tHide.Timer("tt_Hide();",1,false);}}
function tt_Hide()
{if(tt_db&&tt_iState)
{tt_OpReHref();if(tt_iState&0x2)
{tt_aElt[0].style.visibility="hidden";tt_ExtCallFncs(0,"Hide");}
tt_tShow.EndTimer();tt_tHide.EndTimer();tt_tDurt.EndTimer();tt_tFade.EndTimer();if(!tt_op&&!tt_ie)
{tt_tWaitMov.EndTimer();tt_bWait=false;}
if(tt_aV[CLICKCLOSE]||tt_aV[CLICKSTICKY])
tt_RemEvtFnc(document,"mouseup",tt_OnLClick);tt_ExtCallFncs(0,"Kill");if(tt_t2t&&!tt_aV[COPYCONTENT])
tt_UnEl2Tip();tt_iState=0;tt_over=null;tt_ResetMainDiv();if(tt_aElt[tt_aElt.length-1])
tt_aElt[tt_aElt.length-1].style.display="none";}}
function tt_GetElt(id)
{return(document.getElementById?document.getElementById(id):document.all?document.all[id]:null);}
function tt_GetDivW(el)
{return(el?(el.offsetWidth||el.style.pixelWidth||0):0);}
function tt_GetDivH(el)
{return(el?(el.offsetHeight||el.style.pixelHeight||0):0);}
function tt_GetScrollX()
{return(window.pageXOffset||(tt_db?(tt_db.scrollLeft||0):0));}
function tt_GetScrollY()
{return(window.pageYOffset||(tt_db?(tt_db.scrollTop||0):0));}
function tt_GetClientW()
{return tt_GetWndCliSiz("Width");}
function tt_GetClientH()
{return tt_GetWndCliSiz("Height");}
function tt_GetEvtX(e)
{return(e?((typeof(e.pageX)!=tt_u)?e.pageX:(e.clientX+tt_GetScrollX())):0);}
function tt_GetEvtY(e)
{return(e?((typeof(e.pageY)!=tt_u)?e.pageY:(e.clientY+tt_GetScrollY())):0);}
function tt_AddEvtFnc(el,sEvt,PFnc)
{if(el)
{if(el.addEventListener)
el.addEventListener(sEvt,PFnc,false);else
el.attachEvent("on"+sEvt,PFnc);}}
function tt_RemEvtFnc(el,sEvt,PFnc)
{if(el)
{if(el.removeEventListener)
el.removeEventListener(sEvt,PFnc,false);else
el.detachEvent("on"+sEvt,PFnc);}}
function tt_GetDad(el)
{return(el.parentNode||el.parentElement||el.offsetParent);}
function tt_MovDomNode(el,dadFrom,dadTo)
{if(dadFrom)
dadFrom.removeChild(el);if(dadTo)
dadTo.appendChild(el);}
var tt_aExt=new Array(),tt_db,tt_op,tt_ie,tt_ie56,tt_bBoxOld,tt_body,tt_ovr_,tt_flagOpa,tt_maxPosX,tt_maxPosY,tt_iState=0,tt_opa,tt_bJmpVert,tt_bJmpHorz,tt_elDeHref,tt_tShow=new Number(0),tt_tHide=new Number(0),tt_tDurt=new Number(0),tt_tFade=new Number(0),tt_tWaitMov=new Number(0),tt_bWait=false,tt_u="undefined";function tt_Init()
{tt_MkCmdEnum();if(!tt_Browser()||!tt_MkMainDiv())
return;tt_IsW3cBox();tt_OpaSupport();tt_AddEvtFnc(document,"mousemove",tt_Move);if(TagsToTip||tt_Debug)
tt_SetOnloadFnc();tt_AddEvtFnc(window,"unload",tt_Hide);}
function tt_MkCmdEnum()
{var n=0;for(var i in config)
eval("window."+i.toString().toUpperCase()+" = "+n++);tt_aV.length=n;}
function tt_Browser()
{var n,nv,n6,w3c;n=navigator.userAgent.toLowerCase(),nv=navigator.appVersion;tt_op=(document.defaultView&&typeof(eval("w"+"indow"+"."+"o"+"p"+"er"+"a"))!=tt_u);tt_ie=n.indexOf("msie")!=-1&&document.all&&!tt_op;if(tt_ie)
{var ieOld=(!document.compatMode||document.compatMode=="BackCompat");tt_db=!ieOld?document.documentElement:(document.body||null);if(tt_db)
tt_ie56=parseFloat(nv.substring(nv.indexOf("MSIE")+5))>=5.5&&typeof document.body.style.maxHeight==tt_u;}
else
{tt_db=document.documentElement||document.body||(document.getElementsByTagName?document.getElementsByTagName("body")[0]:null);if(!tt_op)
{n6=document.defaultView&&typeof document.defaultView.getComputedStyle!=tt_u;w3c=!n6&&document.getElementById;}}
tt_body=(document.getElementsByTagName?document.getElementsByTagName("body")[0]:(document.body||null));if(tt_ie||n6||tt_op||w3c)
{if(tt_body&&tt_db)
{if(document.attachEvent||document.addEventListener)
return true;}
else
tt_Err("wz_tooltip.js must be included INSIDE the body section,"
+" immediately after the opening <body> tag.",false);}
tt_db=null;return false;}
function tt_MkMainDiv()
{if(tt_body.insertAdjacentHTML)
tt_body.insertAdjacentHTML("afterBegin",tt_MkMainDivHtm());else if(typeof tt_body.innerHTML!=tt_u&&document.createElement&&tt_body.appendChild)
tt_body.appendChild(tt_MkMainDivDom());if(window.tt_GetMainDivRefs&&tt_GetMainDivRefs())
return true;tt_db=null;return false;}
function tt_MkMainDivHtm()
{return('<div id="WzTtDiV"></div>'+
(tt_ie56?('<iframe id="WzTtIfRm" src="javascript:false" scrolling="no" frameborder="0" style="filter:Alpha(opacity=0);position:absolute;top:0px;left:0px;display:none;"></iframe>'):''));}
function tt_MkMainDivDom()
{var el=document.createElement("div");if(el)
el.id="WzTtDiV";return el;}
function tt_GetMainDivRefs()
{tt_aElt[0]=tt_GetElt("WzTtDiV");if(tt_ie56&&tt_aElt[0])
{tt_aElt[tt_aElt.length-1]=tt_GetElt("WzTtIfRm");if(!tt_aElt[tt_aElt.length-1])
tt_aElt[0]=null;}
if(tt_aElt[0])
{var css=tt_aElt[0].style;css.visibility="hidden";css.position="absolute";css.overflow="hidden";return true;}
return false;}
function tt_ResetMainDiv()
{tt_SetTipPos(0,0);tt_aElt[0].innerHTML="";tt_aElt[0].style.width="0px";tt_h=0;}
function tt_IsW3cBox()
{var css=tt_aElt[0].style;css.padding="10px";css.width="40px";tt_bBoxOld=(tt_GetDivW(tt_aElt[0])==40);css.padding="0px";tt_ResetMainDiv();}
function tt_OpaSupport()
{var css=tt_body.style;tt_flagOpa=(typeof(css.KhtmlOpacity)!=tt_u)?2:(typeof(css.KHTMLOpacity)!=tt_u)?3:(typeof(css.MozOpacity)!=tt_u)?4:(typeof(css.opacity)!=tt_u)?5:(typeof(css.filter)!=tt_u)?1:0;}
function tt_SetOnloadFnc()
{tt_AddEvtFnc(document,"DOMContentLoaded",tt_HideSrcTags);tt_AddEvtFnc(window,"load",tt_HideSrcTags);if(tt_body.attachEvent)
tt_body.attachEvent("onreadystatechange",function(){if(tt_body.readyState=="complete")
tt_HideSrcTags();});if(/WebKit|KHTML/i.test(navigator.userAgent))
{var t=setInterval(function(){if(/loaded|complete/.test(document.readyState))
{clearInterval(t);tt_HideSrcTags();}},10);}}
function tt_HideSrcTags()
{if(!window.tt_HideSrcTags||window.tt_HideSrcTags.done)
return;window.tt_HideSrcTags.done=true;if(!tt_HideSrcTagsRecurs(tt_body))
tt_Err("There are HTML elements to be converted to tooltips.\nIf you"
+" want these HTML elements to be automatically hidden, you"
+" must edit wz_tooltip.js, and set TagsToTip in the global"
+" tooltip configuration to true.",true);}
function tt_HideSrcTagsRecurs(dad)
{var ovr,asT2t;var a=dad.childNodes||dad.children||null;for(var i=a?a.length:0;i;)
{--i;if(!tt_HideSrcTagsRecurs(a[i]))
return false;ovr=a[i].getAttribute?(a[i].getAttribute("onmouseover")||a[i].getAttribute("onclick")):(typeof a[i].onmouseover=="function")?(a[i].onmouseover||a[i].onclick):null;if(ovr)
{asT2t=ovr.toString().match(/TagToTip\s*\(\s*'[^'.]+'\s*[\),]/);if(asT2t&&asT2t.length)
{if(!tt_HideSrcTag(asT2t[0]))
return false;}}}
return true;}
function tt_HideSrcTag(sT2t)
{var id,el;id=sT2t.replace(/.+'([^'.]+)'.+/,"$1");el=tt_GetElt(id);if(el)
{if(tt_Debug&&!TagsToTip)
return false;else
el.style.display="none";}
else
tt_Err("Invalid ID\n'"+id+"'\npassed to TagToTip()."
+" There exists no HTML element with that ID.",true);return true;}
function tt_Tip(arg,t2t)
{if(!tt_db||(tt_iState&0x8))
return;if(tt_iState)
tt_Hide();if(!tt_Enabled)
return;tt_t2t=t2t;if(!tt_ReadCmds(arg))
return;tt_iState=0x1|0x4;tt_AdaptConfig1();tt_MkTipContent(arg);tt_MkTipSubDivs();tt_FormatTip();tt_bJmpVert=false;tt_bJmpHorz=false;tt_maxPosX=tt_GetClientW()+tt_GetScrollX()-tt_w-1;tt_maxPosY=tt_GetClientH()+tt_GetScrollY()-tt_h-1;tt_AdaptConfig2();tt_OverInit();tt_ShowInit();tt_Move();}
function tt_ReadCmds(a)
{var i;i=0;for(var j in config)
tt_aV[i++]=config[j];if(a.length&1)
{for(i=a.length-1;i>0;i-=2)
tt_aV[a[i-1]]=a[i];return true;}
tt_Err("Incorrect call of Tip() or TagToTip().\n"
+"Each command must be followed by a value.",true);return false;}
function tt_AdaptConfig1()
{tt_ExtCallFncs(0,"LoadConfig");if(!tt_aV[TITLEBGCOLOR].length)
tt_aV[TITLEBGCOLOR]=tt_aV[BORDERCOLOR];if(!tt_aV[TITLEFONTCOLOR].length)
tt_aV[TITLEFONTCOLOR]=tt_aV[BGCOLOR];if(!tt_aV[TITLEFONTFACE].length)
tt_aV[TITLEFONTFACE]=tt_aV[FONTFACE];if(!tt_aV[TITLEFONTSIZE].length)
tt_aV[TITLEFONTSIZE]=tt_aV[FONTSIZE];if(tt_aV[CLOSEBTN])
{if(!tt_aV[CLOSEBTNCOLORS])
tt_aV[CLOSEBTNCOLORS]=new Array("","","","");for(var i=4;i;)
{--i;if(!tt_aV[CLOSEBTNCOLORS][i].length)
tt_aV[CLOSEBTNCOLORS][i]=(i&1)?tt_aV[TITLEFONTCOLOR]:tt_aV[TITLEBGCOLOR];}
if(!tt_aV[TITLE].length)
tt_aV[TITLE]=" ";}
if(tt_aV[OPACITY]==100&&typeof tt_aElt[0].style.MozOpacity!=tt_u&&!Array.every)
tt_aV[OPACITY]=99;if(tt_aV[FADEIN]&&tt_flagOpa&&tt_aV[DELAY]>100)
tt_aV[DELAY]=Math.max(tt_aV[DELAY]-tt_aV[FADEIN],100);}
function tt_AdaptConfig2()
{if(tt_aV[CENTERMOUSE])
{tt_aV[OFFSETX]-=((tt_w-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0))>>1);tt_aV[JUMPHORZ]=false;}}
function tt_MkTipContent(a)
{if(tt_t2t)
{if(tt_aV[COPYCONTENT])
tt_sContent=tt_t2t.innerHTML;else
tt_sContent="";}
else
tt_sContent=a[0];tt_ExtCallFncs(0,"CreateContentString");}
function tt_MkTipSubDivs()
{var sCss='position:relative;margin:0px;padding:0px;border-width:0px;left:0px;top:0px;width:auto;',sTbTrTd=' cellspacing="0" cellpadding="0" border="0" style="'+sCss+'"><tbody style="'+sCss+'"><tr><td ';tt_aElt[0].style.width=tt_GetClientW()+"px";tt_aElt[0].innerHTML=(''
+(tt_aV[TITLE].length?('<div id="WzTiTl" style="position:relative;z-index:1;">'
+'<table id="WzTiTlTb"'+sTbTrTd+'id="WzTiTlI" style="'+sCss+'">'
+tt_aV[TITLE]
+'</td>'
+(tt_aV[CLOSEBTN]?('<td align="right" style="'+sCss
+'text-align:right;">'
+'<span id="WzClOsE" style="position:relative;left:2px;padding-left:2px;padding-right:2px;'
+'cursor:'+(tt_ie?'hand':'pointer')
+';" onmouseover="tt_OnCloseBtnOver(1)" onmouseout="tt_OnCloseBtnOver(0)" onclick="tt_HideInit()">'
+tt_aV[CLOSEBTNTEXT]
+'</span></td>'):'')
+'</tr></tbody></table></div>'):'')
+'<div id="WzBoDy" style="position:relative;z-index:0;">'
+'<table'+sTbTrTd+'id="WzBoDyI" style="'+sCss+'">'
+tt_sContent
+'</td></tr></tbody></table></div>'
+(tt_aV[SHADOW]?('<div id="WzTtShDwR" style="position:absolute;overflow:hidden;"></div>'
+'<div id="WzTtShDwB" style="position:relative;overflow:hidden;"></div>'):''));tt_GetSubDivRefs();if(tt_t2t&&!tt_aV[COPYCONTENT])
tt_El2Tip();tt_ExtCallFncs(0,"SubDivsCreated");}
function tt_GetSubDivRefs()
{var aId=new Array("WzTiTl","WzTiTlTb","WzTiTlI","WzClOsE","WzBoDy","WzBoDyI","WzTtShDwB","WzTtShDwR");for(var i=aId.length;i;--i)
tt_aElt[i]=tt_GetElt(aId[i-1]);}
function tt_FormatTip()
{var css,w,h,pad=tt_aV[PADDING],padT,wBrd=tt_aV[BORDERWIDTH],iOffY,iOffSh,iAdd=(pad+wBrd)<<1;if(tt_aV[TITLE].length)
{padT=tt_aV[TITLEPADDING];css=tt_aElt[1].style;css.paddingTop=css.paddingBottom=padT+"px";css.paddingLeft=css.paddingRight=(padT+2)+"px";css=tt_aElt[3].style;if(tt_aV[WIDTH]==-1)
css.whiteSpace="nowrap";if(tt_aElt[4])
{css=tt_aElt[4].style;css.background=tt_aV[CLOSEBTNCOLORS][0];css.color=tt_aV[CLOSEBTNCOLORS][1];css.fontFamily=tt_aV[TITLEFONTFACE];css.fontSize=tt_aV[TITLEFONTSIZE];css.fontWeight="bold";}
if(tt_aV[WIDTH]>0)
tt_w=tt_aV[WIDTH];else
{tt_w=tt_GetDivW(tt_aElt[3])+tt_GetDivW(tt_aElt[4]);if(tt_aElt[4])
tt_w+=pad;if(tt_aV[WIDTH]<-1&&tt_w>-tt_aV[WIDTH])
tt_w=-tt_aV[WIDTH];}
iOffY=-wBrd;}
else
{tt_w=0;iOffY=0;}
css=tt_aElt[5].style;css.top=iOffY+"px";if(tt_aV[BGIMG].length)
css.backgroundImage="url("+tt_aV[BGIMG]+")";css.padding=pad+"px";css.textAlign=tt_aV[TEXTALIGN];if(tt_aV[HEIGHT])
{css.overflow="auto";if(tt_aV[HEIGHT]>0)
css.height=(tt_aV[HEIGHT]+iAdd)+"px";else
tt_h=iAdd-tt_aV[HEIGHT];}
css=tt_aElt[6].style;css.color=tt_aV[FONTCOLOR];css.fontFamily=tt_aV[FONTFACE];css.fontSize=tt_aV[FONTSIZE];css.fontWeight=tt_aV[FONTWEIGHT];css.textAlign=tt_aV[TEXTALIGN];if(tt_aV[WIDTH]>0)
w=tt_aV[WIDTH];else if(tt_aV[WIDTH]==-1&&tt_w)
w=tt_w;else
{w=tt_GetDivW(tt_aElt[6]);if(tt_aV[WIDTH]<-1&&w>-tt_aV[WIDTH])
w=-tt_aV[WIDTH];}
if(w>tt_w)
tt_w=w;tt_w+=iAdd;if(tt_aV[SHADOW])
{tt_w+=tt_aV[SHADOWWIDTH];iOffSh=Math.floor((tt_aV[SHADOWWIDTH]*4)/3);css=tt_aElt[7].style;css.top=iOffY+"px";css.left=iOffSh+"px";css.width=(tt_w-iOffSh-tt_aV[SHADOWWIDTH])+"px";css.height=tt_aV[SHADOWWIDTH]+"px";css.background=tt_aV[SHADOWCOLOR];css=tt_aElt[8].style;css.top=iOffSh+"px";css.left=(tt_w-tt_aV[SHADOWWIDTH])+"px";css.width=tt_aV[SHADOWWIDTH]+"px";css.background=tt_aV[SHADOWCOLOR];}
else
iOffSh=0;tt_SetTipOpa(tt_aV[FADEIN]?0:tt_aV[OPACITY]);tt_FixSize(iOffY,iOffSh);}
function tt_FixSize(iOffY,iOffSh)
{var wIn,wOut,h,add,pad=tt_aV[PADDING],wBrd=tt_aV[BORDERWIDTH],i;tt_aElt[0].style.width=tt_w+"px";tt_aElt[0].style.pixelWidth=tt_w;wOut=tt_w-((tt_aV[SHADOW])?tt_aV[SHADOWWIDTH]:0);wIn=wOut;if(!tt_bBoxOld)
wIn-=(pad+wBrd)<<1;tt_aElt[5].style.width=wIn+"px";if(tt_aElt[1])
{wIn=wOut-((tt_aV[TITLEPADDING]+2)<<1);if(!tt_bBoxOld)
wOut=wIn;tt_aElt[1].style.width=wOut+"px";tt_aElt[2].style.width=wIn+"px";}
if(tt_h)
{h=tt_GetDivH(tt_aElt[5]);if(h>tt_h)
{if(!tt_bBoxOld)
tt_h-=(pad+wBrd)<<1;tt_aElt[5].style.height=tt_h+"px";}}
tt_h=tt_GetDivH(tt_aElt[0])+iOffY;if(tt_aElt[8])
tt_aElt[8].style.height=(tt_h-iOffSh)+"px";i=tt_aElt.length-1;if(tt_aElt[i])
{tt_aElt[i].style.width=tt_w+"px";tt_aElt[i].style.height=tt_h+"px";}}
function tt_DeAlt(el)
{var aKid;if(el)
{if(el.alt)
el.alt="";if(el.title)
el.title="";aKid=el.childNodes||el.children||null;if(aKid)
{for(var i=aKid.length;i;)
tt_DeAlt(aKid[--i]);}}}
function tt_OpDeHref(el)
{if(!tt_op)
return;if(tt_elDeHref)
tt_OpReHref();while(el)
{if(el.hasAttribute&&el.hasAttribute("href"))
{el.t_href=el.getAttribute("href");el.t_stats=window.status;el.removeAttribute("href");el.style.cursor="hand";tt_AddEvtFnc(el,"mousedown",tt_OpReHref);window.status=el.t_href;tt_elDeHref=el;break;}
el=tt_GetDad(el);}}
function tt_OpReHref()
{if(tt_elDeHref)
{tt_elDeHref.setAttribute("href",tt_elDeHref.t_href);tt_RemEvtFnc(tt_elDeHref,"mousedown",tt_OpReHref);window.status=tt_elDeHref.t_stats;tt_elDeHref=null;}}
function tt_El2Tip()
{var css=tt_t2t.style;tt_t2t.t_cp=css.position;tt_t2t.t_cl=css.left;tt_t2t.t_ct=css.top;tt_t2t.t_cd=css.display;tt_t2tDad=tt_GetDad(tt_t2t);tt_MovDomNode(tt_t2t,tt_t2tDad,tt_aElt[6]);css.display="block";css.position="static";css.left=css.top=css.marginLeft=css.marginTop="0px";}
function tt_UnEl2Tip()
{var css=tt_t2t.style;css.display=tt_t2t.t_cd;tt_MovDomNode(tt_t2t,tt_GetDad(tt_t2t),tt_t2tDad);css.position=tt_t2t.t_cp;css.left=tt_t2t.t_cl;css.top=tt_t2t.t_ct;tt_t2tDad=null;}
function tt_OverInit()
{if(window.event)
tt_over=window.event.target||window.event.srcElement;else
tt_over=tt_ovr_;tt_DeAlt(tt_over);tt_OpDeHref(tt_over);}
function tt_ShowInit()
{tt_tShow.Timer("tt_Show()",tt_aV[DELAY],true);if(tt_aV[CLICKCLOSE]||tt_aV[CLICKSTICKY])
tt_AddEvtFnc(document,"mouseup",tt_OnLClick);}
function tt_Show()
{var css=tt_aElt[0].style;css.zIndex=Math.max((window.dd&&dd.z)?(dd.z+2):0,9010);if(tt_aV[STICKY]||!tt_aV[FOLLOWMOUSE])
tt_iState&=~0x4;if(tt_aV[EXCLUSIVE])
tt_iState|=0x8;if(tt_aV[DURATION]>0)
tt_tDurt.Timer("tt_HideInit()",tt_aV[DURATION],true);tt_ExtCallFncs(0,"Show")
css.visibility="visible";tt_iState|=0x2;if(tt_aV[FADEIN])
tt_Fade(0,0,tt_aV[OPACITY],Math.round(tt_aV[FADEIN]/tt_aV[FADEINTERVAL]));tt_ShowIfrm();}
function tt_ShowIfrm()
{if(tt_ie56)
{var ifrm=tt_aElt[tt_aElt.length-1];if(ifrm)
{var css=ifrm.style;css.zIndex=tt_aElt[0].style.zIndex-1;css.display="block";}}}
function tt_Move(e)
{if(e)
tt_ovr_=e.target||e.srcElement;e=e||window.event;if(e)
{tt_musX=tt_GetEvtX(e);tt_musY=tt_GetEvtY(e);}
if(tt_iState&0x4)
{if(!tt_op&&!tt_ie)
{if(tt_bWait)
return;tt_bWait=true;tt_tWaitMov.Timer("tt_bWait = false;",1,true);}
if(tt_aV[FIX])
{tt_iState&=~0x4;tt_PosFix();}
else if(!tt_ExtCallFncs(e,"MoveBefore"))
tt_SetTipPos(tt_Pos(0),tt_Pos(1));tt_ExtCallFncs([tt_musX,tt_musY],"MoveAfter")}}
function tt_Pos(iDim)
{var iX,bJmpMod,cmdAlt,cmdOff,cx,iMax,iScrl,iMus,bJmp;if(iDim)
{bJmpMod=tt_aV[JUMPVERT];cmdAlt=ABOVE;cmdOff=OFFSETY;cx=tt_h;iMax=tt_maxPosY;iScrl=tt_GetScrollY();iMus=tt_musY;bJmp=tt_bJmpVert;}
else
{bJmpMod=tt_aV[JUMPHORZ];cmdAlt=LEFT;cmdOff=OFFSETX;cx=tt_w;iMax=tt_maxPosX;iScrl=tt_GetScrollX();iMus=tt_musX;bJmp=tt_bJmpHorz;}
if(bJmpMod)
{if(tt_aV[cmdAlt]&&(!bJmp||tt_CalcPosAlt(iDim)>=iScrl+16))
iX=tt_PosAlt(iDim);else if(!tt_aV[cmdAlt]&&bJmp&&tt_CalcPosDef(iDim)>iMax-16)
iX=tt_PosAlt(iDim);else
iX=tt_PosDef(iDim);}
else
{iX=iMus;if(tt_aV[cmdAlt])
iX-=cx+tt_aV[cmdOff]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0);else
iX+=tt_aV[cmdOff];}
if(iX>iMax)
iX=bJmpMod?tt_PosAlt(iDim):iMax;if(iX<iScrl)
iX=bJmpMod?tt_PosDef(iDim):iScrl;return iX;}
function tt_PosDef(iDim)
{if(iDim)
tt_bJmpVert=tt_aV[ABOVE];else
tt_bJmpHorz=tt_aV[LEFT];return tt_CalcPosDef(iDim);}
function tt_PosAlt(iDim)
{if(iDim)
tt_bJmpVert=!tt_aV[ABOVE];else
tt_bJmpHorz=!tt_aV[LEFT];return tt_CalcPosAlt(iDim);}
function tt_CalcPosDef(iDim)
{return iDim?(tt_musY+tt_aV[OFFSETY]):(tt_musX+tt_aV[OFFSETX]);}
function tt_CalcPosAlt(iDim)
{var cmdOff=iDim?OFFSETY:OFFSETX;var dx=tt_aV[cmdOff]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0);if(tt_aV[cmdOff]>0&&dx<=0)
dx=1;return((iDim?(tt_musY-tt_h):(tt_musX-tt_w))-dx);}
function tt_PosFix()
{var iX,iY;if(typeof(tt_aV[FIX][0])=="number")
{iX=tt_aV[FIX][0];iY=tt_aV[FIX][1];}
else
{if(typeof(tt_aV[FIX][0])=="string")
el=tt_GetElt(tt_aV[FIX][0]);else
el=tt_aV[FIX][0];iX=tt_aV[FIX][1];iY=tt_aV[FIX][2];if(!tt_aV[ABOVE]&&el)
iY+=tt_GetDivH(el);for(;el;el=el.offsetParent)
{iX+=el.offsetLeft||0;iY+=el.offsetTop||0;}}
if(tt_aV[ABOVE])
iY-=tt_h;tt_SetTipPos(iX,iY);}
function tt_Fade(a,now,z,n)
{if(n)
{now+=Math.round((z-now)/n);if((z>a)?(now>=z):(now<=z))
now=z;else
tt_tFade.Timer("tt_Fade("
+a+","+now+","+z+","+(n-1)
+")",tt_aV[FADEINTERVAL],true);}
now?tt_SetTipOpa(now):tt_Hide();}
function tt_SetTipOpa(opa)
{tt_SetOpa(tt_aElt[5],opa);if(tt_aElt[1])
tt_SetOpa(tt_aElt[1],opa);if(tt_aV[SHADOW])
{opa=Math.round(opa*0.8);tt_SetOpa(tt_aElt[7],opa);tt_SetOpa(tt_aElt[8],opa);}}
function tt_OnCloseBtnOver(iOver)
{var css=tt_aElt[4].style;iOver<<=1;css.background=tt_aV[CLOSEBTNCOLORS][iOver];css.color=tt_aV[CLOSEBTNCOLORS][iOver+1];}
function tt_OnLClick(e)
{e=e||window.event;if(!((e.button&&e.button&2)||(e.which&&e.which==3)))
{if(tt_aV[CLICKSTICKY]&&(tt_iState&0x4))
{tt_aV[STICKY]=true;tt_iState&=~0x4;}
else if(tt_aV[CLICKCLOSE])
tt_HideInit();}}
function tt_Int(x)
{var y;return(isNaN(y=parseInt(x))?0:y);}
Number.prototype.Timer=function(s,iT,bUrge)
{if(!this.value||bUrge)
this.value=window.setTimeout(s,iT);}
Number.prototype.EndTimer=function()
{if(this.value)
{window.clearTimeout(this.value);this.value=0;}}
function tt_GetWndCliSiz(s)
{var db,y=window["inner"+s],sC="client"+s,sN="number";if(typeof y==sN)
{var y2;return(((db=document.body)&&typeof(y2=db[sC])==sN&&y2&&y2<=y)?y2:((db=document.documentElement)&&typeof(y2=db[sC])==sN&&y2&&y2<=y)?y2:y);}
return(((db=document.documentElement)&&(y=db[sC]))?y:document.body[sC]);}
function tt_SetOpa(el,opa)
{var css=el.style;tt_opa=opa;if(tt_flagOpa==1)
{if(opa<100)
{if(typeof(el.filtNo)==tt_u)
el.filtNo=css.filter;var bVis=css.visibility!="hidden";css.zoom="100%";if(!bVis)
css.visibility="visible";css.filter="alpha(opacity="+opa+")";if(!bVis)
css.visibility="hidden";}
else if(typeof(el.filtNo)!=tt_u)
css.filter=el.filtNo;}
else
{opa/=100.0;switch(tt_flagOpa)
{case 2:css.KhtmlOpacity=opa;break;case 3:css.KHTMLOpacity=opa;break;case 4:css.MozOpacity=opa;break;case 5:css.opacity=opa;break;}}}
function tt_Err(sErr,bIfDebug)
{if(tt_Debug||!bIfDebug)
console.log("Tooltip Script Error Message: "+sErr);}
function tt_ExtCmdEnum()
{var s;for(var i in config)
{s="window."+i.toString().toUpperCase();if(eval("typeof("+s+") == tt_u"))
{eval(s+" = "+tt_aV.length);tt_aV[tt_aV.length]=null;}}}
function tt_ExtCallFncs(arg,sFnc)
{var b=false;for(var i=tt_aExt.length;i;)
{--i;var fnc=tt_aExt[i]["On"+sFnc];if(fnc&&fnc(arg))
b=true;}
return b;}
tt_Init();(function($){GoogleAdds=function(opts){var me=this,url,img;me.opts=opts;url=me.createUrl();img=me.createImage(url);me.addVariables();$('<script src="https://www.googleadservices.com/pagead/conversion_async.js"></script>').appendTo('body');$('<noscript></noscript>').append($(img)).appendTo('body');};GoogleAdds.prototype={addVariables:function(){var me=this,data=['var google_conversion_id="'+me.opts.googleConversionID+'"','google_conversion_language="'+me.opts.googleConversionLanguage+'"','google_conversion_value="'+me.opts.realAmount+'"','google_conversion_label="'+me.opts.googleConversionLabel+'"','google_conversion_currency="'+me.opts.currency+'"','google_conversion_format="1"','google_conversion_color = "FFFFFF"','google_remarketing_only=false;'].join(',');$('<script></script>').append(data).appendTo('body');},createImage:function(url){return['<img height="1" width="1" border="0" src="',url,'">'].join('');},createUrl:function(){var me=this;return['https://www.googleadservices.com/pagead/conversion/',me.opts.googleConversionID,'/?value=',me.opts.realAmount,'&currency_code=',me.opts.currency,'&label=',me.opts.googleConversionLabel,'&guid=ON&script=0'].join('');},};})(jQuery);(function($,window,document){GoogleAnalytics=function(opts){var me=this;me.opts=opts;if(me.opts.doNotTrack){return;}
me.addHeadScript();me.initScript();};GoogleAnalytics.prototype={initScript:function(){var ga=document.createElement('script');ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(ga);},addHeadScript:function(){var me=this,script=["var _gaq = _gaq || [];",["_gaq.push(['_setAccount',",'"',me.opts.googleTrackingID,'"',"]);"].join(''),],entity;if(me.opts.googleAnonymizeIp){script.push("_gaq.push(['_gat._anonymizeIp']);");}
if(window.basketData.hasData){me.addTransaction(script);me.addTransactionData(script);new GoogleAdds(me.opts);script.push("_gaq.push(['_trackTrans']);");}
script.push("_gaq.push(['_setDomainName', 'none']);");script.push("_gaq.push(['_trackPageview']);");entity=['<script>',script.join(' '),'</script>'];$(entity.join('')).appendTo('head');},addTransaction:function(script){var me=this,data=['"'+me.opts.orderNumber+'"','"'+escape(me.opts.affiliation)+'"','"'+me.opts.revenue+'"','"'+me.opts.tax+'"','"'+me.opts.shipping+'"','"'+me.opts.city+'"',"",'"'+me.opts.country+'"',].join(',');script.push(["_gaq.push(['_addTrans',",data,"]);"].join(''));},addTransactionData:function(script){var me=this,itemString;$.each(window.basketData.data,function(index,item){itemString=['"'+me.opts.orderNumber+'"','"'+item.sku+'"','"'+escape(item.name)+'"',"",'"'+item.price+'"','"'+item.quantity+'"',].join(',');script.push(["_gaq.push(['_addItem',",itemString,"]);"].join(''));});},};})(jQuery,window,document);(function($){$.plugin('SwagGoogleAnalytics',{defaults:{realAmount:0.0,googleTrackingID:'',googleConversionID:'',googleConversionLabel:'',googleConversionLanguage:'',googleAnonymizeIp:'',googleOptOutCookie:'',googleTrackingLibrary:'',googleOptOutCookie:'',createEcommerceTransaction:false,cookieNoteMode:null,showCookieNote:null,orderNumber:null,affiliation:null,revenue:null,tax:null,shipping:null,currency:null,city:null,country:null,doNotTrack:false},init:function(){var me=this;me.applyDataAttributes();me.checkGetCookiePreference();me.opts.doNotTrack=me.checkDoNotTrack();if(me.isGoogleAllowed()||me.evaluateCookieHint()){me.createLibrary();return;}
me.createCheckTimer();},isGoogleAllowed:function(){var me=this;me.cookieValue=me.getCookie();return me.cookieValue||$.getCookiePreference(me.getCookieKey());},checkDoNotTrack:function(){if(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack){if(window.doNotTrack=="1"||navigator.doNotTrack==="yes"||navigator.doNotTrack=="1"||navigator.msDoNotTrack=="1"){return true;}}
return false;},evaluateCookieHint:function(){var me=this;if(!me.opts.showCookieNote){return true;}
return me.opts.showCookieNote===1&&me.opts.cookieNoteMode===0;},createCheckTimer:function(){var me=this;me.interval=window.setInterval($.proxy(me.onCheckCookie,me),1000);},onCheckCookie:function(){var me=this;if(me.isGoogleAllowed()){window.clearInterval(me.interval);me.createLibrary();}},createLibrary:function(){var me=this;if(me.opts.googleTrackingLibrary==='ga'){new GoogleAnalytics(me.opts);return;}
new UniversalAnalytics(me.opts);},getCookie:function(){var name="allowCookie=",decodedCookie=decodeURIComponent(document.cookie),cookieArray=decodedCookie.split(';');for(var i=0;i<cookieArray.length;i++){var cookie=cookieArray[i];while(cookie.charAt(0)==' '){cookie=cookie.substring(1);}
if(cookie.indexOf(name)==0){return cookie.substring(name.length,cookie.length);}}
return null;},checkGetCookiePreference:function(){if($.isFunction($.getCookiePreference)){return;}
$.getCookiePreference=function(){return false;};},getCookieKey:function(){if(this.opts.googleTrackingLibrary==='ga'){return'__utm'}
return'_ga';},});$(document).ready(function(){$('div[data-googleAnalytics="true"]').SwagGoogleAnalytics();});})(jQuery,window,document);(function($,window,document){UniversalAnalytics=function(opts){var me=this;me.opts=opts;me.analytics=me.createUniversalAnalytics();me.startUniversalAnalytics();me.sendUniversalECommerce();me.analytics('send','pageview');};UniversalAnalytics.prototype={createUniversalAnalytics:function(){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','universalAnalytics');return universalAnalytics;},startUniversalAnalytics:function(){var me=this;me.analytics('create',me.opts.googleTrackingID,{'cookieDomain':'none'});if(me.opts.googleAnonymizeIp){me.analytics('set','anonymizeIp',true);}
if(me.opts.doNotTrack){me.analytics('require','dnt');$('<script type="text/javascript" async src="//storage.googleapis.com/outfox/dnt_min.js"></script>').append('body');}},sendUniversalECommerce:function(){var me=this;if(!me.opts.createEcommerceTransaction){return;}
me.analytics('require','ecommerce','ecommerce.js');me.addUniversalTransaction();},addUniversalTransaction:function(){var me=this;if(!window.basketData.hasData){return;}
me.analytics('ecommerce:addTransaction',{id:me.opts.orderNumber,affiliation:me.opts.affiliation,revenue:me.opts.revenue,tax:me.opts.tax,shipping:me.opts.shipping,currency:me.opts.currency});me.addUniversalECommerceItems();me.analytics('ecommerce:send');new GoogleAdds(me.opts);},addUniversalECommerceItems:function(){var me=this;$.each(window.basketData.data,function(index,item){me.analytics('ecommerce:addItem',item);});},};})(jQuery,window,document);$.subscribe('swagBundle/productSelection/change',function(event,eventArguments){var url=$('*[data-swagBundle="true"]').data('updatepriceurl');var formData=eventArguments.$el.closest('form[class="bundle--form"]').serializeArray().reduce(function(obj,item){obj[item.name]=item.value;return obj;},{});formData.bundleId=eventArguments.opts.bundleId;$.ajax({url:url,data:formData,method:'POST'}).done(function(response){var $priceContainer=$('.bundle-header--price-container');var $netPriceSpan=$priceContainer.find('.net-amount-value');var $grossPriceSpan=$priceContainer.find('.gross-amount-value');var $vatPriceSpan=$priceContainer.find('.vat-amount-value');if($netPriceSpan.length>0){$netPriceSpan.html(response.prices.netprice);}
if($grossPriceSpan.length>0){$grossPriceSpan.html(response.prices.gross);}
if($vatPriceSpan.length>0){$vatPriceSpan.html(response.prices.vat);}});});;(function($,document,window){if(typeof _intedia_doofinder_layer!=='undefined'){var ds=document.createElement('script');ds.type='text/javascript';ds.async=true;if(_intedia_doofinder_layer===2){ds.src=('https:'==document.location.protocol?'https://':'http://')+_intedia_doofinder_search_zone+'-search.doofinder.com/5/script/'+_intedia_doofinder_hash+'.js';}
else{ds.src=('https:'==document.location.protocol?'https://':'http://')+'cdn.intedia.de/doofinder/layer/shopware/v160/'+_intedia_doofinder_hash+'-'+(_intedia_doofinder_layer?'1':'0')+'.js';}
var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ds,s);ds.onload=function(){var Intedia_DooFinder_Tracker={clickProductOnResultPage:function(){var productId=String($(this).closest('.product--box').find('.intedia-product-footprint').data('product-id'));if(doofinder&&doofinder.classic&&doofinder.classic.version&&doofinder.classic.version.charAt(0)<=5){dfClassicLayers[0].controller.registerClick(productId);}
else{if(typeof dfClassicLayers[0]==='object'){dfClassicLayers[0].layer.stats.registerClick(dfClassicLayers[0].layer.session.get('session_id'),productId,'product');}}},clickProductOnSearchLayer:function(){var productId=String($(this).closest('.list--entry a[class=search-result--link]').find('.intedia-product-footprint').data('product-id'));if(doofinder&&doofinder.classic&&doofinder.classic.version&&doofinder.classic.version.charAt(0)<=5){dfClassicLayers[0].controller.registerClick(productId);}
else{if(typeof dfClassicLayers[0]==='object'){dfClassicLayers[0].layer.stats.registerClick(dfClassicLayers[0].layer.session.get('session_id'),productId,'product');}}}};if(Intedia_DooFinder_Tracker&&typeof Intedia_DooFinder_Tracker.clickProductOnResultPage==='function'){$('body.is--ctl-search .box--content').click(Intedia_DooFinder_Tracker.clickProductOnResultPage);}
if(Intedia_DooFinder_Tracker&&typeof Intedia_DooFinder_Tracker.clickProductOnSearchLayer==='function'){$('.main-search--results').on('click','.list--entry a[class=search-result--link]',Intedia_DooFinder_Tracker.clickProductOnSearchLayer);}};function trackAddToCart(articleNumber,quantity){var layer=dfClassicLayers?dfClassicLayers[0].layer:null;if(layer&&typeof layer.addToCart==='function'){layer.addToCart(articleNumber,quantity);}}
function trackRemoveFromCart(articleNumber,quantity){var layer=dfClassicLayers?dfClassicLayers[0].layer:null;if(layer&&typeof layer.removeFromCart==='function'){layer.removeFromCart(articleNumber,quantity);}}
function getElementFromDataArray(elementName,data){var elementValue="";data.forEach(function(d){if(d.name==elementName){elementValue=d.value;}});return elementValue;}
$.subscribe('plugin/swAddArticle/onAddArticle',function(event,me){if(me&&me.$el){var dataArray=me.$el.serializeArray(),articleNumber=getElementFromDataArray('sAdd',dataArray),quantity=getElementFromDataArray('sQuantity',dataArray);if(!articleNumber&&$(me.$el[0]).hasClass('buynow')){var addArticleUrl=$(me.$el[0]).data('addarticleurl');articleNumber=addArticleUrl.substring(addArticleUrl.indexOf('/ajaxAddArticleCart/sAdd/')+'/ajaxAddArticleCart/sAdd/'.length);}
trackAddToCart(articleNumber,quantity);}});$.subscribe('plugin/swCollapseCart/onRemoveArticle',function(event,me,dataEvent){var $currentTarget=$(dataEvent.currentTarget);if($currentTarget.length){var $footPrint=$currentTarget.closest('div.cart--item').find('div.intedia-product-footprint');if($footPrint.length){var articleNumber=$footPrint.data('product-id');var quantity=$footPrint.data('product-quantity');trackRemoveFromCart(articleNumber,quantity);}}});$('body.is--ctl-checkout div.row--product div.column--actions form').submit(function(){var $productRow=$(this).closest('div.row--product');if($productRow.length){var $footPrint=$productRow.find('div.intedia-product-footprint');if($footPrint.length){var articleNumber=$footPrint.data('product-id');var quantity=$footPrint.data('product-quantity');trackRemoveFromCart(articleNumber,quantity);}}});$.subscribe('plugin/swAutoSubmit/onChangeSelection',function(event,me){var $productRow=me.$form.closest('div.row--product');if($productRow.length){var $footPrint=$productRow.find('div.intedia-product-footprint');var $oldQty=me.$form.find('select[name="sQuantity"]');if($footPrint.length&&$oldQty.length){var articleNumber=$footPrint.data('product-id');var oldQuantity=$footPrint.data('product-quantity');var newQuantity=$oldQty.val();if(oldQuantity!==newQuantity){var changedQuantity=newQuantity-oldQuantity;var isNegative=changedQuantity<0;if(isNegative){trackRemoveFromCart(articleNumber,changedQuantity*-1);}
else{trackAddToCart(articleNumber,changedQuantity);}}}}});if(_intedia_doofinder_layer&&$(window).width()>767){$.subscribe('plugin/swSearch/onRegisterEvents',function(event,me){me._off(me.$searchField,'keyup');});}}})(jQuery,document,window);(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof module==='object'&&module.exports){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){var slice=Array.prototype.slice;var splice=Array.prototype.splice;var defaults={topSpacing:0,bottomSpacing:0,className:'is-sticky',wrapperClassName:'sticky-wrapper',center:false,getWidthFrom:'',widthFromWrapper:true,responsiveWidth:false},$window=$(window),$document=$(document),sticked=[],windowHeight=$window.height(),scroller=function(){var scrollTop=$window.scrollTop(),documentHeight=$document.height(),dwh=documentHeight-windowHeight,extra=(scrollTop>dwh)?dwh-scrollTop:0;for(var i=0,l=sticked.length;i<l;i++){var s=sticked[i],elementTop=s.stickyWrapper.offset().top,etse=elementTop-s.topSpacing-extra;s.stickyWrapper.css('height',s.stickyElement.outerHeight());if(scrollTop<=etse){if(s.currentTop!==null){s.stickyElement.css({'width':'','position':'','top':''});s.stickyElement.parent().removeClass(s.className);s.stickyElement.trigger('sticky-end',[s]);s.currentTop=null;}}
else{var newTop=documentHeight-s.stickyElement.outerHeight()
-s.topSpacing-s.bottomSpacing-scrollTop-extra;if(newTop<0){newTop=newTop+s.topSpacing;}else{newTop=s.topSpacing;}
if(s.currentTop!==newTop){var newWidth;if(s.getWidthFrom){newWidth=$(s.getWidthFrom).width()||null;}else if(s.widthFromWrapper){newWidth=s.stickyWrapper.width();}
if(newWidth==null){newWidth=s.stickyElement.width();}
s.stickyElement.css('width',newWidth).css('position','fixed').css('top',newTop);s.stickyElement.parent().addClass(s.className);if(s.currentTop===null){s.stickyElement.trigger('sticky-start',[s]);}else{s.stickyElement.trigger('sticky-update',[s]);}
if(s.currentTop===s.topSpacing&&s.currentTop>newTop||s.currentTop===null&&newTop<s.topSpacing){s.stickyElement.trigger('sticky-bottom-reached',[s]);}else if(s.currentTop!==null&&newTop===s.topSpacing&&s.currentTop<newTop){s.stickyElement.trigger('sticky-bottom-unreached',[s]);}
s.currentTop=newTop;}
var stickyWrapperContainer=s.stickyWrapper.parent();var unstick=(s.stickyElement.offset().top+s.stickyElement.outerHeight()>=stickyWrapperContainer.offset().top+stickyWrapperContainer.outerHeight())&&(s.stickyElement.offset().top<=s.topSpacing);if(unstick){s.stickyElement.css('position','absolute').css('top','').css('bottom',0);}else{s.stickyElement.css('position','fixed').css('top',newTop).css('bottom','');}}}},resizer=function(){windowHeight=$window.height();for(var i=0,l=sticked.length;i<l;i++){var s=sticked[i];var newWidth=null;if(s.getWidthFrom){if(s.responsiveWidth){newWidth=$(s.getWidthFrom).width();}}else if(s.widthFromWrapper){newWidth=s.stickyWrapper.width();}
if(newWidth!=null){s.stickyElement.css('width',newWidth);}}},methods={init:function(options){var o=$.extend({},defaults,options);return this.each(function(){var stickyElement=$(this);var stickyId=stickyElement.attr('id');var wrapperId=stickyId?stickyId+'-'+defaults.wrapperClassName:defaults.wrapperClassName;var wrapper=$('<div></div>').attr('id',wrapperId).addClass(o.wrapperClassName);stickyElement.wrapAll(wrapper);var stickyWrapper=stickyElement.parent();if(o.center){stickyWrapper.css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"});}
if(stickyElement.css("float")==="right"){stickyElement.css({"float":"none"}).parent().css({"float":"right"});}
o.stickyElement=stickyElement;o.stickyWrapper=stickyWrapper;o.currentTop=null;sticked.push(o);methods.setWrapperHeight(this);methods.setupChangeListeners(this);});},setWrapperHeight:function(stickyElement){var element=$(stickyElement);var stickyWrapper=element.parent();if(stickyWrapper){stickyWrapper.css('height',element.outerHeight());}},setupChangeListeners:function(stickyElement){if(window.MutationObserver){var mutationObserver=new window.MutationObserver(function(mutations){if(mutations[0].addedNodes.length||mutations[0].removedNodes.length){methods.setWrapperHeight(stickyElement);}});mutationObserver.observe(stickyElement,{subtree:true,childList:true});}else{stickyElement.addEventListener('DOMNodeInserted',function(){methods.setWrapperHeight(stickyElement);},false);stickyElement.addEventListener('DOMNodeRemoved',function(){methods.setWrapperHeight(stickyElement);},false);}},update:scroller,unstick:function(options){return this.each(function(){var that=this;var unstickyElement=$(that);var removeIdx=-1;var i=sticked.length;while(i-->0){if(sticked[i].stickyElement.get(0)===that){splice.call(sticked,i,1);removeIdx=i;}}
if(removeIdx!==-1){unstickyElement.unwrap();unstickyElement.css({'width':'','position':'','top':'','float':''});}});}};if(window.addEventListener){window.addEventListener('scroll',scroller,false);window.addEventListener('resize',resizer,false);}else if(window.attachEvent){window.attachEvent('onscroll',scroller);window.attachEvent('onresize',resizer);}
$.fn.sticky=function(method){if(methods[method]){return methods[method].apply(this,slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.sticky');}};$.fn.unstick=function(method){if(methods[method]){return methods[method].apply(this,slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.unstick.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.sticky');}};$(function(){setTimeout(scroller,0);});}));;(function($){"use strict";$.plugin('premsOnePageCheckout',{defaults:{hiddenClass:'is--hidden',errorClass:'has--error',registerFormSelector:'#opc-register',submitBtnSelector:'.register--submit',typeFieldSelector:'.register--customertype select',companyType:'business',skipAccountSelector:'#one-page-checkout #register_personal_skipLogin',altShippingSelector:'.register--alt-shipping input',companyFieldSelector:'.register--company',accountFieldSelector:'.register--account-information',shippingFieldSelector:'#one-page-checkout .register--shipping',paymentFieldSelector:'.payment--content',paymentInputSelector:'.payment--selection-input input',countryFieldSelector:'.select--country',stateContainerSelector:'.register--state-selection, .address--state-selection',paymentMethodSelector:'.payment--method',inputSelector:'.is--required',errorMessageClass:'register--error-msg',personalEmailSelector:'#register_personal_email',personalPasswordSelector:'#register_personal_password',personalEmailConfirmationSelector:'#register_personal_emailConfirmation',personalPasswordConfirmationSelector:'#register_personal_passwordConfirmation',personalGuestSelector:'#register_personal_skipLogin',shippingPaymentRadioSelector:'#one-page-checkout .register--shipment-and-payment input.auto_submit[type=radio]',shippingPaymentformSelector:'#one-page-checkout .register--shipment-and-payment #shippingPaymentForm',changePaymentArea:'#one-page-checkout #opc-change-payment-area',checkoutBtn:'#one-page-checkout button[form=confirm--form]',ammountSummarySelector:'#one-page-checkout .basket--footer',agbCheckbox:'#one-page-checkout #sAGB',commentInput:'#one-page-checkout .user-comment--field',buyPanel:'#one-page-checkout .basket--footer',},init:function(){var me=this,opts=me.opts,$el=me.$el;me.$personalEmail=$el.find(opts.personalEmailSelector);me.$personalPassword=$el.find(opts.personalPasswordSelector);me.$personalEmailConfirmation=$el.find(opts.personalEmailConfirmationSelector);me.$personalPasswordConfirmation=$el.find(opts.personalPasswordConfirmationSelector);me.$personalGuest=$el.find(opts.personalGuestSelector);me.$registerFormSelector=$el.find(opts.registerFormSelector);me.$submitBtn=$el.find(opts.submitBtnSelector);me.$checkoutBtn=$el.find(opts.checkoutBtn);me.$typeSelection=$el.find(opts.typeFieldSelector);me.$skipAccount=$el.find(opts.skipAccountSelector);me.$alternativeShipping=$el.find(opts.altShippingSelector);me.$companyFieldset=$el.find(opts.companyFieldSelector);me.$accountFieldset=$el.find(opts.accountFieldSelector);me.$shippingFieldset=$el.find(opts.shippingFieldSelector);me.$countySelectFields=$el.find(opts.countryFieldSelector);me.$stateContainers=$el.find(opts.stateContainerSelector);me.$paymentMethods=$el.find(opts.paymentMethodSelector);me.$inputs=$el.find(opts.inputSelector);me.$agbCheckbox=$el.find(opts.agbCheckbox);me.$commentInput=$el.find(opts.commentInput);me.checkType();me.checkSkipAccount();me.checkChangeShipping();me.registerEvents();window.setTimeout(function(){if(me.$agbCheckbox.data('checked')=='checked'){me.$agbCheckbox.trigger('click');window.setTimeout(function(){me.$agbCheckbox.trigger('click');},100);}},3000);window.setTimeout(function(){if($('.register--shipment-and-payment .js--loading-indicator').length){me.loadChangePaymentArea();}else{if($('*[data-paypalPaymentWallShippingPayment="true"]').length){$.overridePlugin('swagPayPalUnifiedPaymentWallShippingPayment',{triggerPaymentMethodChange:function($selectedPaymentRadio){$selectedPaymentRadio.prop('checked',true).trigger('change');},});var defaults={activeCls:'js--is-active',staticActiveCls:'is--active',paymentSelectionSelector:'.paypal--payment-selection',paymentMethodSelector:'.unified--payment',restylePaymentSelectionAttribute:'data-restylePaymentSelection'},restylePaymentSelection=$(defaults.paymentSelectionSelector).attr(defaults.restylePaymentSelectionAttribute);if(restylePaymentSelection==='true'){$(defaults.paymentMethodSelector).click(function(event){var $target=$(event.currentTarget),$radio=$target.find('input[name="payment"]');if($target.hasClass(defaults.activeCls)||$target.hasClass(defaults.staticActiveCls)){return;}
me.$el.find(defaults.paymentMethodSelector).removeClass(defaults.activeCls).removeClass(defaults.staticActiveCls);$target.addClass(defaults.activeCls);$radio.prop('checked',true).trigger('change');});}}}},500);},registerEvents:function(){var me=this;me._on(me.$typeSelection,'change',$.proxy(me.checkType,me));me._on(me.$skipAccount,'change',$.proxy(me.checkSkipAccount,me));me._on(me.$alternativeShipping,'change',$.proxy(me.checkChangeShipping,me));me._on(me.$countySelectFields,'change',$.proxy(me.onCountryChanged,me));me._on(me.$paymentMethods,'change',$.proxy(me.onPaymentChanged,me));me._on(me.$registerFormSelector,'focusout',$.proxy(me.onValidateInput,me));me._on(me.$submitBtn,'click',$.proxy(me.onSubmitBtn,me));me._on(me.$checkoutBtn,'click',$.proxy(me.onCheckoutBtn,me));me._on(me.$agbCheckbox,'click',$.proxy(me.onAgbCheckbox,me));me._on(me.$commentInput,'change',$.proxy(me.onCommentInput,me));me.wunschpaketPlugin();me.$countySelectFields.change();me.$el.on('change',me.opts.shippingPaymentRadioSelector,$.proxy(me.onShippingPaymentInputChanged,me));StateManager.addPlugin('#one-page-checkout #opc-register-link','swCollapsePanel');StateManager.addPlugin('#one-page-checkout #opc-login-link','swCollapsePanel');if($('*[data-scroll-to-step2="true"]').length){me.scrollToStep2();}
$.publish('plugin/opcRegister/onRegisterEvents',me);},scrollToStep2:function(){var me=this;if(!$('#opc-step2').hasClass('not-logged-in')){var scrollDiv=$('#opc-step2');if(scrollDiv.length){$('html,body').animate({scrollTop:scrollDiv.offset().top},'fast');}}},onCommentInput:function(){var me=this;$.ajax({type:'post',url:me.$commentInput.data('save-comment'),data:{comment:me.$commentInput.val()},success:function(response){}});},onAgbCheckbox:function(){var me=this,agb=0;if(me.$agbCheckbox.is(':checked')){agb=1;}
me.$agbCheckbox.data('save-status');$.ajax({type:'post',url:me.$agbCheckbox.data('save-status'),data:{agb:agb},success:function(response){}});},onCheckoutBtn:function(event){var me=this,error=false,$input;if($('#sAGB').length&&!$('#sAGB').is(':checked')){error=true;}
if($('#esdAgreementChecked').length&&!$('#esdAgreementChecked').is(':checked')){error=true;}
if($('#klarnaCheckbox').length&&!$('#klarnaCheckbox').is(':checked')){error=true;}
if($('#netzp-dsgvo-checkbox').length&&!$('#netzp-dsgvo-checkbox').is(':checked')){error=true;}
if(error==false){$.loadingIndicator.open({closeOnClick:false});}},reloadAmountSummary:function(){var me=this;var checkoutUrl=$('#opc--checkout-url').val();$.ajax({type:'post',url:checkoutUrl,success:function(response){var $response=$($.parseHTML(response,document,true)),$summary;$summary=$response.find(me.opts.ammountSummarySelector);$(me.opts.ammountSummarySelector).html($summary.html());}});},wunschpaketPlugin:function(){var me=this;$.subscribe('plugin/moptWunschpaketDhlBox/onInputChanged',function(){me.reloadAmountSummary();});if($('#mopt-wunschpaket-address-type-select').length){window.StateManager.addPlugin('#opc-register','moptWunschpaketAddress',['xs','s','m','l','xl']);}
if($('#moptEmpfaengerservicesWunschpaket').length){var addDhlPlugin=function(window){StateManager.addPlugin('#moptEmpfaengerservicesWunschpaket','moptWunschpaketBox').addPlugin('*[data-address-selection="true"]','swAddressSelection');;};addDhlPlugin(window);$.subscribe('plugin/swShippingPayment/onInputChanged',function(){addDhlPlugin(window);});$.subscribe('plugin/moptWunschpaketDhlBox/onInputChanged',function(){addDhlPlugin(window);});StateManager.addPlugin('form[name="frmAddresses"], #registration form.register--form','moptWunschpaketAddress',['xs','s','m','l','xl']);$.overridePlugin('swAddressEditor',{_registerPlugins:function(){var me=this;StateManager.addPlugin('form[name="frmAddresses"], #registration form.register--form','moptWunschpaketAddress',['xs','s','m','l','xl']);me.superclass._registerPlugins.apply(this,arguments);}});}},postNLPlugin:function(){var me=this;if($('#sitionPostNLServicesDesiredPackage').length){var addPostNLPlugin=function(window){StateManager.addPlugin('#sitionPostNLServicesDesiredPackage','sitionPostnlPackageBox').addPlugin('*[data-address-editor="true"]','swAddressEditor');;};addPostNLPlugin(window);$.subscribe('plugin/swShippingPayment/onInputChanged',function(){addPostNLPlugin(window);});$.subscribe('plugin/sitionPostNLPackagePostNLBox/onInputChanged',function(){addPostNLPlugin(window);});StateManager.addPlugin('form[name="frmAddresses"], #registration form.register--form','sitionPostnlPackageAddress',['xs','s','m','l','xl']);$.overridePlugin('swAddressEditor',{_registerPlugins:function(){var me=this;StateManager.addPlugin('form[name="frmAddresses"], #registration form.register--form','sitionPostnlPackageAddress',['xs','s','m','l','xl']);me.superclass._registerPlugins.apply(this,arguments);}});}},reloadBuyBox:function(){var me=this;$(me.opts.buyPanel).hide();$.ajax({type:'post',url:document.location.href,success:function(response){var $response=$($.parseHTML(response,document,true)),$buyPanel;$buyPanel=$response.find(me.opts.buyPanel);$(me.opts.buyPanel).html($buyPanel.html());$(me.opts.buyPanel).show(1000);}});},loadChangePaymentArea:function(){var me=this,$el=me.$el,paymentArea=$el.find(me.opts.changePaymentArea);if(!paymentArea.length){return;}
var data=$('#shippingPaymentForm').serializeArray();data.push({name:'isXHR',value:1});data.push({name:'payment',value:paymentArea.data('payment')});$.ajax({type:"POST",url:paymentArea.data('url'),data:data,success:function(res){paymentArea.empty().html(res);$.loadingIndicator.close();window.picturefill();if(!$('.is--act-shippingpayment').length){$('.payment--method .method--input input:checked').each(function(){if($(this).parent().parent().find('.method--bankdata').length&&me.hasVisibleBankdata($(this).parent().parent().find('.method--bankdata'))){$(this).parent().parent().find('.method--label .method--name .more--shipping-payment-link').show();}});}
$('.method--bankdata').addClass('is--hidden');me.wunschpaketPlugin();me.postNLPlugin();if($('*[data-reload-buybox="true"]').length){me.reloadBuyBox();}
if($('*[data-paypalPaymentWallShippingPayment="true"]').length){$.overridePlugin('swagPayPalUnifiedPaymentWallShippingPayment',{triggerPaymentMethodChange:function($selectedPaymentRadio){$selectedPaymentRadio.prop('checked',true).trigger('change');},});}
window.setTimeout(function(){me.paypalUnifiedLoadPaymentWall();},1000);$.publish('plugin/opcPayment/onPaymentLoad',me);}});},paypalUnifiedLoadPaymentWall:function(){var me=this,$el=me.$el;if($('*[data-paypalPaymentWallShippingPayment="true"]').length){window.StateManager.addPlugin('*[data-paypalPaymentWallShippingPayment="true"]','swagPayPalUnifiedPaymentWallShippingPayment');window.StateManager.addPlugin('*[data-paypalPaymentWall="true"]','swagPayPalUnifiedPaymentWall');var defaults={activeCls:'js--is-active',staticActiveCls:'is--active',paymentSelectionSelector:'.paypal--payment-selection',paymentMethodSelector:'.unified--payment',restylePaymentSelectionAttribute:'data-restylePaymentSelection'},restylePaymentSelection=$(defaults.paymentSelectionSelector).attr(defaults.restylePaymentSelectionAttribute);if(restylePaymentSelection==='true'){$(defaults.paymentMethodSelector).click(function(event){var $target=$(event.currentTarget),$radio=$target.find('input[name="payment"]');if($target.hasClass(defaults.activeCls)||$target.hasClass(defaults.staticActiveCls)){return;}
me.$el.find(defaults.paymentMethodSelector).removeClass(defaults.activeCls).removeClass(defaults.staticActiveCls);$target.addClass(defaults.activeCls);$radio.prop('checked',true).trigger('change');});}}},hasVisibleBankdata:function(bankdata){var visibleBankdata=false;if($(bankdata).find('#payengineCreditCardContent').length){visibleBankdata=true;}
$(bankdata).find('input').each(function(){if($(this).attr('type')!='hidden'){visibleBankdata=true;}});$(bankdata).find('iframe').each(function(){visibleBankdata=true;});return visibleBankdata;},onShippingPaymentInputChanged:function(event){var me=this,$target=$(event.target),form=me.$el.find(me.opts.shippingPaymentformSelector),url=form.attr('action'),data=form.serialize()+'&isXHR=1';$.publish('plugin/opcShippingPayment/onInputChangedBefore',me);if(!$('.is--act-shippingpayment').length){if(($target.parent().parent().find('.method--bankdata').length&&me.hasVisibleBankdata($target.parent().parent().find('.method--bankdata')))||$target.hasClass('redirect--to-payment-page')){form.attr('action',$('#opc--more-payments-url').val());$.loadingIndicator.open();$.ajax({type:"POST",url:url,data:data,success:function(res){window.location.href=url;}});}else{$.loadingIndicator.open({closeOnClick:false});form.submit();}}else{if(($target.parent().parent().find('.method--bankdata').length&&me.hasVisibleBankdata($target.parent().parent().find('.method--bankdata')))||$target.hasClass('redirect--to-payment-page')){}else{window.setTimeout(function(){form.submit();},1000);}}},checkType:function(){var me=this,opts=me.opts,$fieldSet=me.$companyFieldset,hideCompanyFields=(me.$typeSelection.length&&me.$typeSelection.val()!==opts.companyType),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(!hideCompanyFields)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(!hideCompanyFields)?'removeClass':'addClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);$.publish('plugin/opcRegister/onCheckType',[me,hideCompanyFields]);},checkSkipAccount:function(){var me=this,opts=me.opts,$fieldSet=me.$accountFieldset,isChecked=me.$skipAccount.is(':checked'),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(!isChecked)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(isChecked)?'addClass':'removeClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);$.publish('plugin/opcRegister/onCheckSkipAccount',[me,isChecked]);},checkChangeShipping:function(){var me=this,opts=me.opts,$fieldSet=me.$shippingFieldset,isChecked=me.$alternativeShipping.is(':checked'),requiredFields=$fieldSet.find(opts.inputSelector),requiredMethod=(isChecked)?me.setHtmlRequired:me.removeHtmlRequired,classMethod=(isChecked)?'removeClass':'addClass';requiredMethod(requiredFields);$fieldSet[classMethod](opts.hiddenClass);$.publish('plugin/opcRegister/onCheckChangeShipping',[me,isChecked]);},onCountryChanged:function(event){var me=this,$select=$(event.currentTarget),countryId=$select.val(),addressType=$select.attr('data-address-type'),$stateContainers;$.publish('plugin/swRegisterOpc/onCountryChangedBefore',[me,event,countryId,addressType]);me.resetStateSelections(addressType);$stateContainers=me.$stateContainers.filter('[data-address-type="'+addressType+'"]');if($stateContainers.length===0){$stateContainers=me.$stateContainers;}
$stateContainers=$stateContainers.filter('[data-country-id="'+countryId+'"]');if($stateContainers.length){$stateContainers.removeClass(me.opts.hiddenClass);$select=$stateContainers.find('select');$select.removeAttr('disabled');}
$.publish('plugin/swRegisterOpc/onCountryChanged',[me,event,countryId,addressType]);},resetStateSelections:function(addressType){var me=this,$select,$stateContainers,$stateContainer;$stateContainers=me.$stateContainers.filter('[data-address-type="'+addressType+'"]');if($stateContainers.length===0){$stateContainers=me.$stateContainers;}
$.each($stateContainers,function(index,stateContainer){$stateContainer=$(stateContainer);$select=$stateContainer.find('select');$select.attr('disabled','disabled');$stateContainer.addClass(me.opts.hiddenClass);});},onPaymentChanged:function(){var me=this,opts=me.opts,inputClass=opts.inputSelector,hiddenClass=opts.hiddenClass,inputSelector=opts.paymentInputSelector,paymentSelector=opts.paymentFieldSelector,requiredMethod,$fieldSet,isChecked,radio,$el;if($('.is--act-shippingpayment').length){return;}
$.each(me.$paymentMethods,function(index,el){$el=$(el);radio=$el.find(inputSelector);if(radio==undefined||radio[0]==undefined){return;}
isChecked=radio[0].checked;requiredMethod=(isChecked)?me.setHtmlRequired:me.removeHtmlRequired;requiredMethod($el.find(inputClass));$fieldSet=$el.find(paymentSelector);$fieldSet[((isChecked)?'removeClass':'addClass')](hiddenClass);});$.publish('plugin/opcRegister/onPaymentChanged',me);},onSubmitBtn:function(){var me=this,$input;me.$inputs.each(function(){$input=$(this);if(!$input.val()){me.setFieldAsError($input);}});$.publish('plugin/opcRegister/onSubmitButton',me);},onValidateInput:function(event){var me=this,$el=$(event.target),id=$el.attr('id'),action,relatedTarget=event.relatedTarget||document.activeElement;me.$targetElement=$(relatedTarget);switch(id){case'register_personal_email':case'register_personal_emailConfirmation':action='ajax_validate_email';break;case'register_billing_ustid':action='ajax_validate_billing';break;case'register_personal_password':case'register_personal_passwordConfirmation':action='ajax_validate_password';break;default:break;}
if(!$el.val()&&$el.attr('required')){me.setFieldAsError($el);}else if($el.attr('type')==='checkbox'&&!$el.is(':checked')){me.setFieldAsError($el);}else if(action){me.validateUsingAjax($el,action);}else{me.setFieldAsSuccess($el);}
$.publish('plugin/swRegister/onValidateInput',[me,event,action]);},setHtmlRequired:function($elements){$elements.attr({'required':'required','aria-required':'true'});$.publish('plugin/opcRegister/onSetHtmlRequired',[this,$elements]);},removeHtmlRequired:function($inputs){$inputs.removeAttr('required aria-required');$.publish('plugin/opcRegister/onRemoveHtmlRequired',[this,$inputs]);},setFieldAsError:function($el){var me=this,plugin;if($el.data('plugin_swSelectboxReplacement')&&$el.data('plugin_swSelectboxReplacement').length&&(plugin=$el.data('plugin_swSelectboxReplacement'))){plugin.setError();}else{$el.addClass(me.opts.errorClass);}
$.publish('plugin/opcRegister/onSetFieldAsError',[me,$el]);},setFieldAsSuccess:function($el){var me=this;$el.removeClass(me.opts.errorClass);$.publish('plugin/swRegister/onSetFieldAsSuccess',[me,$el]);},validateUsingAjax:function($input,action){var me=this,data='action='+action+'&'+me.$el.find('form').serialize(),URL=window.controller.ajax_validate+'/'+action;if(!URL){return;}
$.publish('plugin/opcRegister/onValidateBefore',[me,data,URL]);$.ajax({'data':data,'type':'post','dataType':'json','url':URL,'success':$.proxy(me.onValidateSuccess,me,action,$input)});},onValidateSuccess:function(action,$input,result){var me=this,isError,errorMessages=[],skipEmailConfirmationError=me.$targetElement.attr('name')==me.$personalEmailConfirmation.attr('name')&&typeof me.$personalEmailConfirmation.val()==='undefined',skipPasswordConfirmationError=me.$targetElement.attr('name')==me.$personalPasswordConfirmation.attr('name')&&typeof me.$personalPasswordConfirmation.val()==='undefined';$('#'+action+'--message').remove();if(!result){return;}
if(skipEmailConfirmationError){result['emailConfirmation']=false;}else if(skipPasswordConfirmationError){result['passwordConfirmation']=false;}
for(var key in result){isError=result[key]?true:false;if(!isError){continue;}
if(key=='emailConfirmation'&&skipEmailConfirmationError){result[key]=false;continue;}else if(key=='passwordConfirmation'&&skipPasswordConfirmationError){result[key]=false;continue;}
if($input.attr('name')==me.$personalEmailConfirmation.attr('name')||$input.attr('name')==me.$personalGuest.attr('name')){$input=me.$personalEmail;}else if($input.attr('name')==me.$personalPasswordConfirmation.attr('name')){$input=me.$personalPassword;}
errorMessages.push(result[key]);}
if(result){me.updateFieldFlags(result);}
if(errorMessages&&errorMessages.length){$('<div>',{'html':'<p>'+errorMessages.join('<br/>')+'</p>','id':action+'--message','class':me.opts.errorMessageClass}).insertAfter($input);me.setFieldAsError($input);}
$.publish('plugin/opcRegister/onValidateSuccess',[me,$input]);},updateFieldFlags:function(flags){var me=this,$el=me.$el,keys=Object.keys(flags),len=keys.length,i=0,flag,$input;for(;i<len;i++){flag=keys[i];$input=$el.find('.'+flag);if(flags[flag]){me.setFieldAsError($input);continue;}
me.setFieldAsSuccess($input);}
$.publish('plugin/opcRegister/onUpdateFields',[me,flags]);},destroy:function(){me.$el.off('change',me.opts.shippingPaymentRadioSelector);this._destroy();}});$(document).ready(function(){if($('.is--ctl-premsonepagecheckout').length||$('.is--ctl-checkout').length){$(document).premsOnePageCheckout();}})}(jQuery));;(function($,window){'use strict';var $body=$('body'),$html=$('html'),isTouchIE=$html.hasClass('is--ie-touch');$.plugin('advancedMenu',{defaults:{'listSelector':'.navigation--list.container','navigationItemSelector':'.navigation--entry:not(.is--home)','navigationLinkSelector':'.navigation--link','closeButtonSelector':'.button--close','menuContainerSelector':'.menu--container','menuActiveClass':'menu--is-active','itemHoverClass':'is--hovered','hoverDelay':0},init:function(){var me=this;me.applyDataAttributes();me._$list=$(me.opts.listSelector);if(!me._$list.length){return;}
me._$listItems=me._$list.find(me.opts.navigationItemSelector);me._$closeButton=me.$el.find(me.opts.closeButtonSelector);me._targetIndex=-1;me.registerEvents();},registerEvents:function(){var me=this,$el;$.each(me._$listItems,function(i,el){$el=$(el);if(window.PointerEvent&&isTouchIE){me._on($el,'pointerdown',$.proxy(me.onClickNavigationLink,me,i));}else if(window.MSPointerEvent&&isTouchIE){me._on($el,'MSPointerDown',$.proxy(me.onClickNavigationLink,me,i));}else{me._on($el,'touchstart',$.proxy(me.onTouchStart,me,i,$el));}
me._on($el,'mouseenter',$.proxy(me.onListItemEnter,me,i,$el));me._on($el,'click',$.proxy(me.onClick,me,i,$el));});$body.on('mousemove touchstart',$.proxy(me.onMouseMove,me));me._on(me._$closeButton,'click',$.proxy(me.onCloseButtonClick,me));},onTouchStart:function(index,$el){this._shouldPrevent=!$el.hasClass(this.opts.itemHoverClass);},onClick:function(index,$el,event){var me=this;if(me._shouldPrevent||!$el.hasClass(me.opts.itemHoverClass)){event.preventDefault();event.stopImmediatePropagation();}},onListItemEnter:function(index,$el,event){var me=this,opts=me.opts;me.setMenuIndex(index);me._$list.find('.'+opts.itemHoverClass).removeClass(opts.itemHoverClass);$el.addClass(opts.itemHoverClass);if(!opts.hoverDelay||me._shouldPrevent){me.onMouseEnter(event);}else if(!me.hoverDelayTimeoutId){me.hoverDelayTimeoutId=window.setTimeout(function(){this.onMouseEnter(event);}.bind(me),opts.hoverDelay);}},onClickNavigationLink:function(index){var me=this;me._shouldPrevent=me._targetIndex!==index;me._targetIndex=index;},onMouseEnter:function(event){event.preventDefault();this.openMenu();},onMouseMove:function(event){var me=this,target=event.target,pluginEl=me.$el[0];if(pluginEl===target||$.contains(me.$el[0],target)||me._$listItems.has(target).length){return;}
if(me.hoverDelayTimeoutId){window.clearTimeout(me.hoverDelayTimeoutId);delete me.hoverDelayTimeoutId;}
me.closeMenu();},onCloseButtonClick:function(event){var me=this;event.preventDefault();me.closeMenu();$.publish('plugin/swAdvancedMenu/onCloseWithButton',[me]);},setMenuIndex:function(index){var me=this,menus=me.$el.find(me.opts.menuContainerSelector);menus.each(function(i,el){$(el).toggleClass(me.opts.menuActiveClass,i===index);});$.publish('plugin/swAdvancedMenu/onSetMenuIndex',[me,index]);},openMenu:function(){var me=this;me.$el.show();$.publish('plugin/swAdvancedMenu/onOpenMenu',[me]);},closeMenu:function(){var me=this,opts=me.opts;me._$list.find('.'+opts.itemHoverClass).removeClass(opts.itemHoverClass);me.$el.hide();me._targetIndex=-1;$.publish('plugin/swAdvancedMenu/onCloseMenu',[me]);}});})(jQuery,window);$(function(){$('*[data-advanced-menu="true"]').advancedMenu();});
/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */
;(function($){'use strict';var readmore='readmore',defaults={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:true,blockCSS:'display: block; width: 100%;',startOpen:false,beforeToggle:function(){},afterToggle:function(){}},cssEmbedded={},uniqueIdCounter=0;function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args);}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};}
function uniqueId(prefix){var id=++uniqueIdCounter;return String(prefix==null?'rmjs-':prefix)+id;}
function setBoxHeights(element){var el=element.clone().css({height:'auto',width:element.width(),maxHeight:'none',overflow:'hidden'}).insertAfter(element),expandedHeight=el.outerHeight(),cssMaxHeight=parseInt(el.css({maxHeight:''}).css('max-height').replace(/[^-\d\.]/g,''),10),defaultHeight=element.data('defaultHeight');el.remove();var collapsedHeight=cssMaxHeight||element.data('collapsedHeight')||defaultHeight;element.data({expandedHeight:expandedHeight,maxHeight:cssMaxHeight,collapsedHeight:collapsedHeight}).css({maxHeight:'none'});}
var resizeBoxes=debounce(function(){$('[data--readmore]').each(function(){var current=$(this),isExpanded=(current.attr('aria-expanded')==='true');setBoxHeights(current);current.css({height:current.data((isExpanded?'expandedHeight':'collapsedHeight'))});});},100);function embedCSS(options){if(!cssEmbedded[options.selector]){var styles=' ';if(options.embedCSS&&options.blockCSS!==''){styles+=options.selector+' + [data-readmore-toggle], '+
options.selector+'[data-readmore]{'+
options.blockCSS+'}';}
styles+=options.selector+'[data-readmore]{'+'transition: height '+options.speed+'ms;'+'overflow: hidden;'+'}';(function(d,u){var css=d.createElement('style');css.type='text/css';if(css.styleSheet){css.styleSheet.cssText=u;}
else{css.appendChild(d.createTextNode(u));}
d.getElementsByTagName('head')[0].appendChild(css);}(document,styles));cssEmbedded[options.selector]=true;}}
function Readmore(element,options){var $this=this;this.element=element;this.options=$.extend({},defaults,options);embedCSS(this.options);this._defaults=defaults;this._name=readmore;this.init();if(window.addEventListener){window.addEventListener('load',resizeBoxes);window.addEventListener('resize',resizeBoxes);}
else{window.attachEvent('load',resizeBoxes);window.attachEvent('resize',resizeBoxes);}}
Readmore.prototype={init:function(){var $this=this,current=$(this.element);current.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin});setBoxHeights(current);var collapsedHeight=current.data('collapsedHeight'),heightMargin=current.data('heightMargin');if(current.outerHeight(true)<=collapsedHeight+heightMargin){return true;}
else{var id=current.attr('id')||uniqueId(),useLink=$this.options.startOpen?$this.options.lessLink:$this.options.moreLink;current.attr({'data-readmore':'','aria-expanded':false,'id':id});current.after($(useLink).on('click',function(event){$this.toggle(this,current[0],event);}).attr({'data-readmore-toggle':'','aria-controls':id}));if(!$this.options.startOpen){current.css({height:collapsedHeight});}}},toggle:function(trigger,element,event){if(event){event.preventDefault();}
if(!trigger){trigger=$('[aria-controls="'+this.element.id+'"]')[0];}
if(!element){element=this.element;}
var $this=this,$element=$(element),newHeight='',newLink='',expanded=false,collapsedHeight=$element.data('collapsedHeight');if($element.height()<=collapsedHeight){newHeight=$element.data('expandedHeight')+'px';newLink='lessLink';expanded=true;}
else{newHeight=collapsedHeight;newLink='moreLink';}
$this.options.beforeToggle(trigger,element,!expanded);$element.css({'height':newHeight});$element.on('transitionend',function(){$this.options.afterToggle(trigger,element,expanded);$(this).attr({'aria-expanded':expanded}).off('transitionend');});$(trigger).replaceWith($($this.options[newLink]).on('click',function(event){$this.toggle(this,element,event);}).attr({'data-readmore-toggle':'','aria-controls':$element.attr('id')}));},destroy:function(){$(this.element).each(function(){var current=$(this);current.attr({'data-readmore':null,'aria-expanded':null}).css({maxHeight:'',height:''}).next('[data-readmore-toggle]').remove();current.removeData();});}};$.fn.readmore=function(options){var args=arguments,selector=this.selector;options=options||{};if(typeof options==='object'){return this.each(function(){if($.data(this,'plugin_'+readmore)){var instance=$.data(this,'plugin_'+readmore);instance.destroy.apply(instance);}
options.selector=selector;$.data(this,'plugin_'+readmore,new Readmore(this,options));});}
else if(typeof options==='string'&&options[0]!=='_'&&options!=='init'){return this.each(function(){var instance=$.data(this,'plugin_'+readmore);if(instance instanceof Readmore&&typeof instance[options]==='function'){instance[options].apply(instance,Array.prototype.slice.call(args,1));}});}};})(jQuery);;(function($,window){'use strict';$.plugin('swagPayPalUnifiedPaymentWallConfirm',{defaults:{paypalCameFromPaymentSelection:false,paypalPaymentWallSelector:'ppplus',paypalConfirmPageSelector:'#confirm--form',paypalAddressPatchUrl:'',paypalRemotePaymentId:'',paypalErrorPage:'',customerCommentSelector:'.user-comment--hidden'},init:function(){var me=this;me.applyDataAttributes();me.subscribeEvents();$.publish('plugin/swagPayPalUnifiedPaymentWallConfirm/init',me);},subscribeEvents:function(){var me=this,$confirmPage=$(me.opts.paypalConfirmPageSelector);$.subscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/init'),$.proxy(me.onInitPaymentWallPlugin,me));me._on($confirmPage,'submit',$.proxy(me.onConfirmCheckout,me));},patchPaymentAddress:function(){var me=this,customerComment=$(me.opts.customerCommentSelector).val();$.publish('plugin/swagPayPalUnifiedPaymentWall/beforePatchAddress',me);$.ajax({url:me.opts.paypalAddressPatchUrl,data:{paymentId:me.opts.paypalRemotePaymentId,customerComment:customerComment},method:'POST',success:$.proxy(me.addressPatchAjaxCallbackSuccess,me),error:$.proxy(me.addressPatchAjaxCallbackError,me)});},onInitPaymentWallPlugin:function(event,plugin){var me=this;if(!me.opts.paypalCameFromPaymentSelection){plugin.createPaymentWall(me.opts.paypalPaymentWallSelector);}},onConfirmCheckout:function(event){var me=this;$.publish('plugin/swagPayPalUnifiedPaymentWallConfirm/confirmCheckout',me);event.preventDefault();if(!event.target.checkValidity()){return;}
me.patchPaymentAddress();},addressPatchAjaxCallbackSuccess:function(){var me=this;$.publish('plugin/swagPayPalUnifiedPaymentWall/afterPatchAddress',me);PAYPAL.apps.PPP.doCheckout();},addressPatchAjaxCallbackError:function(response){var me=this,redirectUrl=me.opts.paypalErrorPage,errorCode=response.responseText;$.publish('plugin/swagPayPalUnifiedPaymentWall/afterPatchAddress',me);if(errorCode!==''){redirectUrl=me.stripErrorCodeFromUrl(redirectUrl)+errorCode;$(location).attr('href',redirectUrl);}
$(location).attr('href',redirectUrl);},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/init'));me._destroy();},stripErrorCodeFromUrl:function(url){var index=url.lastIndexOf('/');return url.slice(0,index+1);}});window.StateManager.addPlugin('*[data-paypalPaymentWallConfirm="true"]','swagPayPalUnifiedPaymentWallConfirm');})(jQuery,window);(function($,window,undefined){'use strict';$.plugin('swagPayPalUnifiedPaymentWallShippingPayment',{defaults:{paypalPaymentWallSelector:'ppplus',paypalSelectedPaymentMethodRadioSelector:'*[checked="checked"][name="payment"]',paypalPaymentId:null,paymentMethodInputSelectorPrefix:'#payment_mean'},init:function(){var me=this;me.applyDataAttributes();me.subscribeEvents();$.publish('plugin/swagPayPalUnifiedPaymentWallShippingPayment/init',me);},subscribeEvents:function(){var me=this;$.subscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/init'),$.proxy(me.onInitPaymentWallPlugin,me));$.subscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/enableContinue'),$.proxy(me.onSelectPayPalPaymentMethod,me));$.subscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/load'),$.proxy(me.onLoadPaymentWall,me));$.subscribe(me.getEventName('plugin/swShippingPayment/onInputChanged'),$.proxy(me.onSelectedPaymentMethodChange,me));$.subscribe(me.getEventName('plugin/swShippingPayment/onInputChangedBefore'),$.proxy(me.onBeforeSelectedPaymentMethodChange,me));$.subscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/thirdPartyPaymentMethodSelected'),$.proxy(me.onThirdPartyPaymentMethodSelected,me));},getSelectedPaymentMethodId:function(){var me=this,selectedPaymentId;selectedPaymentId=$(me.opts.paypalSelectedPaymentMethodRadioSelector).attr('value');return parseInt(selectedPaymentId);},getPaymentIdFromThirdPartyMethod:function(thirdPartyPaymentMethod){return parseInt(thirdPartyPaymentMethod.redirectUrl.substring(7));},triggerPaymentMethodChange:function($selectedPaymentRadio){$selectedPaymentRadio.prop('checked',true);$('*[data-ajax-shipping-payment="true"]').data('plugin_swShippingPayment').onInputChanged();},onInitPaymentWallPlugin:function(event,plugin){var me=this;plugin.createPaymentWall(me.opts.paypalPaymentWallSelector);},onLoadPaymentWall:function(event,plugin){var me=this,selectedPaymentId=me.getSelectedPaymentMethodId(),thirdPartyPaymentMethods=plugin.opts.thirdPartyPaymentMethods,clearPaymentSelection=selectedPaymentId!==me.opts.paypalPaymentId,thirdPartyPaymentId;if($.isArray(thirdPartyPaymentMethods)){$.each(thirdPartyPaymentMethods,function(index,thirdPartyPaymentMethod){thirdPartyPaymentId=me.getPaymentIdFromThirdPartyMethod(thirdPartyPaymentMethod);if(thirdPartyPaymentId===selectedPaymentId){clearPaymentSelection=false;}});}
if(clearPaymentSelection){plugin.clearPaymentSelection();}},onSelectPayPalPaymentMethod:function(){var me=this,$paypalUnifiedRadio=$(me.opts.paymentMethodInputSelectorPrefix+me.opts.paypalPaymentId),selectedPaymentId=me.getSelectedPaymentMethodId();if(selectedPaymentId!==me.opts.paypalPaymentId&&!$paypalUnifiedRadio.prop('checked')){me.triggerPaymentMethodChange($paypalUnifiedRadio);}},onSelectedPaymentMethodChange:function(){var me=this,$pluginContainer=$('*[data-paypalPaymentWall="true"]'),paymentWallPlugin=$pluginContainer.data('plugin_swagPayPalUnifiedPaymentWall');paymentWallPlugin.createPaymentWall(me.opts.paypalPaymentWallSelector);if($.loadingIndicator.defaults){$.loadingIndicator.defaults.closeOnClick=true;}},onBeforeSelectedPaymentMethodChange:function(){if($.loadingIndicator.defaults!==undefined){$.loadingIndicator.defaults.closeOnClick=false;}},onThirdPartyPaymentMethodSelected:function(event,plugin,data){var me=this,thirdPartyPaymentMethods=plugin.opts.thirdPartyPaymentMethods,selectedThirdPartyPaymentMethod=data.thirdPartyPaymentMethod,selectedPaymentId=me.getSelectedPaymentMethodId(),thirdPartyPaymentId=-1,$thirdPartyPaymentRadio;$.each(thirdPartyPaymentMethods,function(index,thirdPartyPaymentMethod){if(selectedThirdPartyPaymentMethod!==thirdPartyPaymentMethod.methodName){return;}
thirdPartyPaymentId=me.getPaymentIdFromThirdPartyMethod(thirdPartyPaymentMethod);});if(thirdPartyPaymentId===-1||selectedPaymentId===thirdPartyPaymentId){return;}
$thirdPartyPaymentRadio=$(me.opts.paymentMethodInputSelectorPrefix+thirdPartyPaymentId);me.triggerPaymentMethodChange($thirdPartyPaymentRadio);},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/init'));$.unsubscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/enableContinue'));$.unsubscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/load'));$.unsubscribe(me.getEventName('plugin/swShippingPayment/onInputChanged'));$.unsubscribe(me.getEventName('plugin/swShippingPayment/onInputChangedBefore'));$.unsubscribe(me.getEventName('plugin/swagPayPalUnifiedPaymentWall/thirdPartyPaymentMethodSelected'));me._destroy();}});window.StateManager.addPlugin('*[data-paypalPaymentWallShippingPayment="true"]','swagPayPalUnifiedPaymentWallShippingPayment');})(jQuery,window);;(function($,window){'use strict';$.plugin('swagPayPalUnifiedPaymentWall',{defaults:{paypalApprovalUrl:'',paypalCountryIso:'',paypalMode:'live',paypalButtonLocation:'outside',paypalPreSelection:'paypal',paypalUserAction:'commit',paypalLanguage:'en_US',paypalSurcharging:false,paypalShowLoadingIndicator:true,paypalShowPuiOnSandbox:true,thirdPartyPaymentMethods:[],paypalApprovalUrlSelector:'.paypal-unified--plus-approval-url'},loaded:false,paymentWall:null,placeholder:'',thirdPartyMethodSelected:false,thirdPartyMethodNameSelected:'',init:function(){var me=this;me.applyDataAttributes();$.publish('plugin/swagPayPalUnifiedPaymentWall/init',me);},createPaymentWall:function(parent){var me=this,approvalUrl=$(me.opts.paypalApprovalUrlSelector).text();if(approvalUrl===''){approvalUrl=me.opts.paypalApprovalUrl;}
me.loaded=false;me.placeholder=parent;me.thirdPartyMethodSelected=false;me.thirdPartyMethodNameSelected='';$.publish('plugin/swagPayPalUnifiedPaymentWall/beforeCreate',me);me.paymentWall=PAYPAL.apps.PPP({approvalUrl:approvalUrl,placeholder:parent,country:me.opts.paypalCountryIso,mode:me.opts.paypalMode,buttonLocation:me.opts.paypalButtonLocation,preselection:me.opts.paypalPreSelection,language:me.opts.paypalLanguage,useraction:me.opts.paypalUserAction,surcharging:me.opts.paypalSurcharging,showLoadingIndicator:me.opts.paypalShowLoadingIndicator,showPuiOnSandbox:me.opts.paypalShowPuiOnSandbox,onLoad:$.proxy(me.onLoad,me),enableContinue:$.proxy(me.onEnableContinue,me),disableContinue:$.proxy(me.onDisableContinue,me),thirdPartyPaymentMethods:me.opts.thirdPartyPaymentMethods,onThirdPartyPaymentMethodSelected:$.proxy(me.onThirdPartyPaymentMethodSelectedCallback,me),onThirdPartyPaymentMethodDeselected:$.proxy(me.onThirdPartyPaymentMethodDeselectedCallback,me)});$.publish('plugin/swagPayPalUnifiedPaymentWall/afterCreate',me);},clearPaymentSelection:function(){var me=this;if(me.loaded){me.paymentWall.deselectPaymentMethod();}},onLoad:function(){var me=this;me.loaded=true;$.publish('plugin/swagPayPalUnifiedPaymentWall/load',me);},onEnableContinue:function(){var me=this;if(me.loaded&&!me.thirdPartyMethodSelected){$.publish('plugin/swagPayPalUnifiedPaymentWall/enableContinue',me);}},onDisableContinue:function(){var me=this;if(me.loaded&&!me.thirdPartyMethodSelected){$.publish('plugin/swagPayPalUnifiedPaymentWall/disableContinue',me);}},onThirdPartyPaymentMethodSelectedCallback:function(data){var me=this;if(me.loaded&&me.thirdPartyMethodNameSelected!==data.thirdPartyPaymentMethod){me.thirdPartyMethodSelected=true;me.thirdPartyMethodNameSelected=data.thirdPartyPaymentMethod;$.publish('plugin/swagPayPalUnifiedPaymentWall/thirdPartyPaymentMethodSelected',[me,data]);}},onThirdPartyPaymentMethodDeselectedCallback:function(data){var me=this;if(me.loaded&&me.thirdPartyMethodNameSelected===data.thirdPartyPaymentMethod){me.thirdPartyMethodSelected=false;$.publish('plugin/swagPayPalUnifiedPaymentWall/thirdPartyPaymentMethodDeselected',[me,data]);}}});window.StateManager.addPlugin('*[data-paypalPaymentWall="true"]','swagPayPalUnifiedPaymentWall');})(jQuery,window);;(function($){'use strict';var defaults={activeCls:'js--is-active',staticActiveCls:'is--active',paymentSelectionSelector:'.paypal--payment-selection',paymentMethodSelector:'.unified--payment',restylePaymentSelectionAttribute:'data-restylePaymentSelection'},restylePaymentSelection=$(defaults.paymentSelectionSelector).attr(defaults.restylePaymentSelectionAttribute);if(restylePaymentSelection==='true'){$.overridePlugin('swShippingPayment',{registerEvents:function(){var me=this;me.$el.on('click',defaults.paymentMethodSelector,$.proxy(me.onClick,me));me.$el.on('change',me.opts.radioSelector,$.proxy(me.onInputChanged,me));$.publish('plugin/swShippingPayment/onRegisterEvents',[me]);},onClick:function(event){var me=this,$target=$(event.currentTarget),$radio=$target.find('input[name="payment"]');if($target.hasClass(defaults.activeCls)||$target.hasClass(defaults.staticActiveCls)){return;}
me.$el.find(defaults.paymentMethodSelector).removeClass(defaults.activeCls).removeClass(defaults.staticActiveCls);$target.addClass(defaults.activeCls);$radio.prop('checked',true).trigger('change');}});}})(jQuery);;(function($,window){'use strict';$.plugin('swagPayPalUnifiedExpressCheckoutButton',{defaults:{paypalMode:'production',createPaymentUrl:'',size:'medium',shape:'rect',color:'gold',tagline:false,paypalLanguage:'en_US',detailPage:false,productQuantitySelector:'#sQuantity',productNumber:null,paypalScriptLoadedSelector:'paypal-checkout-js-loaded',riskManagementMatchedProducts:null,esdProducts:null,},expressCheckoutButton:null,init:function(){var me=this;me.applyDataAttributes();if(me.isProductExcluded()){return;}
me.createButton();$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/init',me);if(me.opts.detailPage){$.subscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'),$.proxy(me.onChangeVariant,me));}},onChangeVariant:function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButton="true"]','swagPayPalUnifiedExpressCheckoutButton');},isProductExcluded:function(){var me=this,productNumbers=[].concat(me.opts.riskManagementMatchedProducts,me.opts.esdProducts);if(Array.isArray(productNumbers)&&productNumbers.includes(me.opts.productNumber)){return true;}
return false;},createButton:function(){var me=this,paypalScriptUrl='https://www.paypalobjects.com/api/checkout.min.js',$head=$('head');if(me.opts.paypalMode==='sandbox'){paypalScriptUrl='https://www.paypalobjects.com/api/checkout.js';}
if(!$head.data(me.opts.paypalScriptLoadedSelector)){$.ajax({url:paypalScriptUrl,dataType:'script',cache:true,success:function(){$head.data(me.opts.paypalScriptLoadedSelector,true);me.renderButton();}});}else{me.renderButton();}},renderButton:function(){var me=this;me.buffer(function(){me.expressCheckoutButton=paypal.Button.render(me.createPayPalButtonConfiguration(),me.$el.get(0));$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/createButton',[me,me.expressCheckoutButton]);});},createPayPalButtonConfiguration:function(){var me=this,config;config={env:me.opts.paypalMode,style:{size:me.opts.size,shape:me.opts.shape,color:me.opts.color,tagline:me.opts.tagline},locale:me.opts.paypalLanguage,payment:$.proxy(me.onPayPalPayment,me),onAuthorize:$.noop};$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/createConfig',[me,config]);return config;},onPayPalPayment:function(){var me=this,token,form;$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/beforeCreatePayment',me);if(CSRF.checkToken()){token=CSRF.getToken();}
form=me.createCreatePaymentForm(token);$.loadingIndicator.open({openOverlay:true,closeOnClick:false});me.buffer(function(){form.submit();});$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/createPayment',me);},createCreatePaymentForm:function(token){var me=this,$form,createField=function(name,val){return $('<input>',{type:'hidden',name:name,value:val});};$form=$('<form>',{action:me.opts.createPaymentUrl,method:'POST'});createField('__csrf_token',token).appendTo($form);if(me.opts.detailPage){createField('addProduct',true).appendTo($form);createField('productNumber',me.getProductNumber()).appendTo($form);createField('productQuantity',me.getProductQuantity()).appendTo($form);}
$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonCart/createRequestForm',[me,$form]);$form.appendTo($('body'));return $form;},getProductNumber:function(){var me=this;if(me.opts.productNumber===null){throw new Error('Property productNumber is not set');}
return me.opts.productNumber;},getProductQuantity:function(){var me=this,quantity=$(me.opts.productQuantitySelector).val()
if(quantity===undefined){return 1;}
return quantity;},buffer:function(fn,timeout){var me=this;timeout=timeout||100;return window.setTimeout(fn.bind(me),timeout);},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'));me._destroy();}});$.subscribe('plugin/swAjaxVariant/onRequestData',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButton="true"]','swagPayPalUnifiedExpressCheckoutButton');});$.subscribe('plugin/swInfiniteScrolling/onFetchNewPageFinished',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButton="true"]','swagPayPalUnifiedExpressCheckoutButton');});$.subscribe('plugin/swInfiniteScrolling/onLoadPreviousFinished',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButton="true"]','swagPayPalUnifiedExpressCheckoutButton');});window.StateManager.addPlugin('*[data-paypalUnifiedEcButton="true"]','swagPayPalUnifiedExpressCheckoutButton');})(jQuery,window);;(function($,window,undefined){'use strict';$.plugin('swagPayPalUnifiedExpressCheckoutButtonInContext',{defaults:{paypalMode:'production',createPaymentUrl:'',size:'medium',shape:'rect',color:'gold',tagline:false,paypalLanguage:'en_US',detailPage:false,productQuantitySelector:'#sQuantity',productNumber:null,paypalScriptLoadedSelector:'paypal-checkout-js-loaded',riskManagementMatchedProducts:null,esdProducts:null,},expressCheckoutButton:null,init:function(){var me=this;me.applyDataAttributes();if(me.isProductExcluded()){return;}
me.createButton();$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonInContextCart/init',me);if(me.opts.detailPage){$.subscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'),$.proxy(me.onChangeVariant,me));}},onChangeVariant:function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButtonInContext="true"]','swagPayPalUnifiedExpressCheckoutButtonInContext');},isProductExcluded:function(){var me=this,productNumbers=[].concat(me.opts.riskManagementMatchedProducts,me.opts.esdProducts);if(Array.isArray(productNumbers)&&productNumbers.includes(me.opts.productNumber)){return true;}
return false;},createButton:function(){var me=this,paypalScriptUrl='https://www.paypalobjects.com/api/checkout.min.js',$head=$('head');if(me.opts.paypalMode==='sandbox'){paypalScriptUrl='https://www.paypalobjects.com/api/checkout.js';}
if(!$head.data(me.opts.paypalScriptLoadedSelector)){$.ajax({url:paypalScriptUrl,dataType:'script',cache:true,success:function(){$head.data(me.opts.paypalScriptLoadedSelector,true);me.renderButton();}});}else{me.renderButton();}},renderButton:function(){var me=this;me.buffer(function(){me.expressCheckoutButton=paypal.Button.render(me.createPayPalButtonConfiguration(),me.$el.get(0));$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonInContextCart/createButton',[me,me.expressCheckoutButton]);});},createPayPalButtonConfiguration:function(){var me=this,config;config={env:me.opts.paypalMode,style:{size:me.opts.size,shape:me.opts.shape,color:me.opts.color,tagline:me.opts.tagline},locale:me.opts.paypalLanguage,payment:$.proxy(me.onPayPalPayment,me),onAuthorize:$.proxy(me.onPayPalAuthorize,me)};$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonInContextCart/createConfig',[me,config]);return config;},onPayPalPayment:function(){var me=this,token,params;if(CSRF.checkToken()){token=CSRF.getToken();}
params={'useInContext':true,'__csrf_token':token};if(me.opts.detailPage){params.addProduct=true;params.productNumber=me.getProductNumber();params.productQuantity=me.getProductQuantity();}
$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonInContextCart/beforeCreatePayment',[me,params]);return paypal.request.post(me.opts.createPaymentUrl,params).then(function(data){$.publish('plugin/swagPayPalUnifiedExpressCheckoutButtonInContextCart/paymentCreated',[me,data]);return data.paymentId;});},onPayPalAuthorize:function(data,actions){return actions.redirect();},getProductNumber:function(){var me=this;if(me.opts.productNumber===null){throw new Error('Property productNumber is not set');}
return me.opts.productNumber;},getProductQuantity:function(){var me=this,quantity=$(me.opts.productQuantitySelector).val()
if(quantity===undefined){return 1;}
return quantity;},buffer:function(fn,timeout){var me=this;timeout=timeout||100;return window.setTimeout(fn.bind(me),timeout);},destroy:function(){var me=this;$.unsubscribe(me.getEventName('plugin/swAjaxVariant/onRequestData'));me._destroy();}});$.subscribe('plugin/swAjaxVariant/onRequestData',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButtonInContext="true"]','swagPayPalUnifiedExpressCheckoutButtonInContext');});$.subscribe('plugin/swInfiniteScrolling/onFetchNewPageFinished',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButtonInContext="true"]','swagPayPalUnifiedExpressCheckoutButtonInContext');});$.subscribe('plugin/swInfiniteScrolling/onLoadPreviousFinished',function(){window.StateManager.addPlugin('*[data-paypalUnifiedEcButtonInContext="true"]','swagPayPalUnifiedExpressCheckoutButtonInContext');});window.StateManager.addPlugin('*[data-paypalUnifiedEcButtonInContext="true"]','swagPayPalUnifiedExpressCheckoutButtonInContext');})(jQuery,window,undefined);;(function($,window){'use strict';$.plugin('swagPayPalUnifiedInContextCheckout',{defaults:{paypalMode:'production',label:'buynow',branding:true,tagline:false,size:'medium',shape:'rect',color:'gold',paypalLanguage:'en_US',confirmFormSelector:'#confirm--form',confirmFormSubmitButtonSelector:':submit[form="confirm--form"]',agbSelector:'#sAGB',paypalScriptLoadedSelector:'paypal-checkout-js-loaded',paypalErrorPage:'',checkoutPaymentUrl:''},inContextCheckoutButton:null,init:function(){var me=this;me.applyDataAttributes();me.$form=$(me.opts.confirmFormSelector);me.hideConfirmButton();me.disableConfirmButton();me.createButton();$.publish('plugin/swagPayPalUnifiedInContextCheckout/init',me);},hideConfirmButton:function(){var me=this;me.$confirmButton=$(me.opts.confirmFormSubmitButtonSelector);me.$confirmButton.addClass('is--hidden');$.publish('plugin/swagPayPalUnifiedInContextCheckout/hideConfirmButton',[me,me.$confirmButton]);},disableConfirmButton:function(){var me=this;me._on(me.$form,'submit',$.proxy(me.onConfirmCheckout,me));},onConfirmCheckout:function(event){event.preventDefault();},createButton:function(){var me=this,paypalScriptUrl='https://www.paypalobjects.com/api/checkout.min.js',$head=$('head');if(me.opts.paypalMode==='sandbox'){paypalScriptUrl='https://www.paypalobjects.com/api/checkout.js';}
if(!$head.data(me.opts.paypalScriptLoadedSelector)){$.ajax({url:paypalScriptUrl,dataType:'script',cache:true,success:function(){$head.data(me.opts.paypalScriptLoadedSelector,true);me.renderButton();}});}else{me.renderButton();}},renderButton:function(){var me=this;me.buffer(function(){me.inContextCheckoutButton=paypal.Button.render(me.createPayPalButtonConfiguration(),me.$el.get(0));$.publish('plugin/swagPayPalUnifiedInContextCheckout/createButton',[me,me.inContextCheckoutButton]);});},createPayPalButtonConfiguration:function(){var me=this,config;config={env:me.opts.paypalMode,style:{label:me.opts.label,branding:me.opts.branding,tagline:me.opts.tagline,size:me.opts.size,shape:me.opts.shape,color:me.opts.color},locale:me.opts.paypalLanguage,validate:$.proxy(me.onValidate,me),onClick:$.proxy(me.onButtonClick,me),payment:$.proxy(me.onPayPalPayment,me),onAuthorize:$.proxy(me.onPayPalAuthorize,me)};$.publish('plugin/swagPayPalUnifiedInContextCheckout/createConfig',[me,config]);return config;},onValidate:function(actions){var me=this,$tosCheckbox=$(me.opts.agbSelector);me.$form.on('change',function(){if(me.checkFormValidity()){$.publish('plugin/swagPayPalUnifiedInContextCheckout/formValid',[me,actions]);return actions.enable();}
$.publish('plugin/swagPayPalUnifiedInContextCheckout/formInValid',[me,actions]);return actions.disable();});if($tosCheckbox.length>0&&!$tosCheckbox.get(0).validity.valid){$.publish('plugin/swagPayPalUnifiedInContextCheckout/formInValid',[me,actions]);return actions.disable();}},checkFormValidity:function(){var me=this,form=me.$form.get(0),isFormValid=form.checkValidity();$.publish('plugin/swagPayPalUnifiedInContextCheckout/checkFormValidity',[me,isFormValid,me.$form]);return isFormValid;},onButtonClick:function(){var me=this;if(!me.checkFormValidity()){me.$confirmButton.trigger('click');}},onPayPalPayment:function(){var me=this,redirectUrl=me.opts.paypalErrorPage;$('<input>',{type:'hidden',name:'useInContext',value:true}).appendTo(me.$form);$.publish('plugin/swagPayPalUnifiedInContextCheckout/beforeCreatePayment',[me,me.$form]);return me.processPayment().then(function(response){if(response.errorCode){redirectUrl=me.stripErrorCodeFromUrl(redirectUrl)+response.errorCode;$(location).attr('href',redirectUrl);}
$.publish('plugin/swagPayPalUnifiedInContextCheckout/paymentCreated',[me,response]);return response.paymentId;});},processPayment:function(){var me=this,url=me.opts.checkoutPaymentUrl,method=me.$form.attr('method'),data=me.$form.serialize();$.publish('plugin/swagPayPalUnifiedInContextCheckout/beforeAjax',[me,url,method,data]);return $.ajax({url:url,method:method,data:data,error:$.proxy(me.onProcessPaymentError,me)}).promise();},onProcessPaymentError:function(){var me=this;$(location).attr('href',me.opts.paypalErrorPage);},onPayPalAuthorize:function(data,actions){return actions.redirect();},buffer:function(fn,timeout){var me=this;timeout=timeout||100;return window.setTimeout(fn.bind(me),timeout);},stripErrorCodeFromUrl:function(url){var index=url.lastIndexOf('/');return url.slice(0,index+1);}});window.StateManager.addPlugin('*[data-paypalUnifiedNormalCheckoutButtonInContext="true"]','swagPayPalUnifiedInContextCheckout');})(jQuery,window);;(function($,window){'use strict';$.plugin('swagPayPalUnifiedSmartPaymentButtons',{defaults:{marksOnly:false,createPaymentUrl:'',checkoutConfirmUrl:'',scriptLoadedClass:'paypal-unified--paypal-sdk-loaded',clientId:'',languageIso:'en_GB',currency:'EUR',basketId:''},paypal:{},init:function(){var me=this;me.applyDataAttributes();me.subscribeEvents();$.publish('plugin/swagPayPalUnifiedSmartPaymentButtons/init',me);me.createButtons();$.publish('plugin/swagPayPalUnifiedSmartPaymentButtons/buttonsCreated',me);},subscribeEvents:function(){var me=this;$.subscribe(me.getEventName('plugin/swShippingPayment/onInputChanged'),$.proxy(me.createButtons,me));},createButtons:function(){var me=this,baseUrl='https://www.paypal.com/sdk/js?client-id=',scriptUrl=baseUrl+me.opts.clientId+'&currency='+me.opts.currency+'&components=buttons,marks&commit=false',$head=$('head');if(me.opts.marksOnly){scriptUrl=baseUrl+me.opts.clientId+'&components=marks';}
if(!$head.hasClass(me.opts.scriptLoadedClass)){$.ajax({url:scriptUrl,dataType:'script',cache:true,success:function(){$head.addClass(me.opts.scriptLoadedClass);me.paypal=window.paypal;me.renderButtons();}});}else{me.paypal=window.paypal;me.renderButtons();}},renderButtons:function(){var me=this,buttonConfig=me.getButtonConfig(),el=me.$el.get(0);$('[id=spbMarksContainer]:visible').each(function(){me.paypal.Marks().render(this);});if(me.opts.marksOnly){return;}
me.paypal.Buttons(buttonConfig).render(el);},getButtonConfig:function(){var me=this;return{style:{label:'checkout'},createOrder:me.createOrder.bind(this),onApprove:me.onApprove.bind(this),onCancel:me.onCancel};},createOrder:function(){var me=this;return $.ajax({method:'get',url:me.opts.createPaymentUrl}).then(function(response){if(response.errorUrl){window.location.replace(response.errorUrl);return;}
me.opts.basketId=response.basketId;return response.token;}).promise();},onApprove:function(data,actions){var paymentId=data.paymentID,payerId=data.payerID,confirmUrl=this.opts.checkoutConfirmUrl+'?paymentId='+paymentId+'&payerId='+payerId+'&basketId='+this.opts.basketId;$.loadingIndicator.open({openOverlay:true,closeOnClick:false,theme:'light'});actions.redirect(confirmUrl);},onCancel:function(){$.loadingIndicator.close();},buffer:function(fn,timeout){var me=this;timeout=timeout||500;return window.setTimeout(fn.bind(me),timeout);},destroy:function(){var me=this;me._destroy();}});window.StateManager.addPlugin('*[data-paypalUnifiedSmartPaymentButtons="true"]','swagPayPalUnifiedSmartPaymentButtons');})(jQuery,window);;(function($,window,document,undefined){'use strict';$.plugin('swagPayPalUnifiedInstallmentsBanner',{defaults:{amount:0,currency:'EUR',layout:'flex',color:'blue',ratio:'8x1',logoType:'primary',textColor:'black',buyerCountry:null,},init:function(){this.applyDataAttributes();this.payPalInstallmentsBannerJS=window.payPalInstallmentsBannerJS;if(this.payPalInstallmentsBannerJS===undefined||!this.opts.buyerCountry){return;}
$.publish('plugin/swagPayPalUnifiedInstallmentsBanner/init',this);this.createBanner();$.publish('plugin/swagPayPalUnifiedInstallmentsBanner/bannerCreated',this);},createBanner:function(){this.payPalInstallmentsBannerJS.Messages({amount:this.opts.amount,currency:this.opts.currency,buyerCountry:this.opts.buyerCountry,style:{layout:this.opts.layout,color:this.opts.color,ratio:this.opts.ratio,logo:{type:this.opts.logoType},text:{color:this.opts.textColor}}}).render(this.$el.get(0));},destroy:function(){this._destroy();}});$.subscribe('plugin/swAjaxVariant/onRequestData',function(){window.StateManager.addPlugin('*[data-paypalUnifiedInstallmentsBanner="true"]','swagPayPalUnifiedInstallmentsBanner');});window.StateManager.addPlugin('*[data-paypalUnifiedInstallmentsBanner="true"]','swagPayPalUnifiedInstallmentsBanner');})(jQuery,window,document);;(function($,window){'use strict';$.plugin('pixFormSubmitter',{defaults:{'loadingindicator':true},init:function(){var me=this;me.applyDataAttributes();me.$form=$(me.opts.formSelector);if(!me.$form.length){return;}
me.registerEvents();},registerEvents:function(){var me=this,$el;me._on(me.$el,'click',$.proxy(me.onSubmit,me));},onSubmit:function(e){var me=this;e.preventDefault();if(me.$form[0].checkValidity()){if(me.opts.loadingindicator){$.loadingIndicator.open({closeOnClick:false});}
me.$form.submit();}
else{console.log('invalid')
me.$form.find("#submit-hidden").click();}}});$('[data-form-submit]').each(function(){var $this=$(this),target=$this.data('form-submit');$this.pixFormSubmitter({formSelector:target});});})(jQuery,window);;(function($){'use strict';var $body=$('body');$.plugin('cbaxPreviewImageHover',{defaults:{availableDevices:null,hoverEffect:null,deviceTypes:{'xl':'0','l':'1','m':'2','s':'3','xs':'4'},lastDeviceState:null,originalDisplayMode:null,listingContainerSelector:'.listing--container',boxContentSelector:'.box--content',productInfoVariantsSelector:'.product--info-variants',outsideCls:'display--outside',insideCls:'display--inside',expandOutsideCls:'is--expanded-out',expandInsideCls:'is--expanded',hoveredCls:'is--hovered'},init:function(){var me=this,opts=me.opts;me.applyDataAttributes();if(opts.availableDevices===null){return;}
me.availableDevices=(opts.availableDevices+'').split(',');var devices=me.availableDevices,types=me.opts.deviceTypes,state=StateManager.getCurrentState();if(devices.indexOf(types[state])===-1){return;}
me._$listingContainer=$(opts.listingContainerSelector);me._$boxContent=me.$el.find(opts.boxContentSelector);me._$productInfoVariants=me._$boxContent.find(opts.productInfoVariantsSelector);me.hoverEffect=(opts.hoverEffect+'').split(',');$.each(me.hoverEffect,function(i,effect){me._$boxContent.addClass('has--'+effect);});opts.originalDisplayMode=me.$el.hasClass(opts.insideCls)?opts.insideCls:opts.outsideCls;if(me.$el.hasClass(opts.outsideCls)||me.hoverEffect.indexOf('shadow')>=0){me._$listingContainer.css('overflow','inherit');}
me.onDeviceChange();me.setStyle();me.registerEvents();},registerEvents:function(){var me=this,eventExists=false,eventObject=$._data($('body').get(0),'events').touchstart;if(eventObject!==undefined){$.each(eventObject,function(index,el){if(el.namespace==='cbaxPreviewImageHover'){eventExists=true;}});}
me._on(me._$boxContent,'mouseenter touchstart',$.proxy(me.onMouseEnter,me));me._on(me._$boxContent,'mouseleave',$.proxy(me.onMouseLeave,me));if(!eventExists){$body.on(me.getEventName('touchstart'),$.proxy(me.onTouchBody,me));}
StateManager.on('resize',$.proxy(me.onDeviceChange,me));$.publish('plugin/cbaxPreviewImageHover/onRegisterEvents',[me]);},onMouseEnter:function(event){var me=this,opts=me.opts,offset=me._$boxContent.offset();if(me._$productInfoVariants.length>0&&me.$el.hasClass(opts.insideCls)){me._$boxContent.addClass(opts.expandInsideCls);}
if(me._$productInfoVariants.length>0&&me.$el.hasClass(opts.outsideCls)){me._$boxContent.addClass(opts.expandOutsideCls);}
$.publish('plugin/cbaxPreviewImageHover/onMouseEnter',[me]);},onMouseLeave:function(event){var me=this,opts=me.opts;if(me._$productInfoVariants.length>0&&me.$el.hasClass(opts.insideCls)){me._$boxContent.removeClass(opts.expandInsideCls);}
if(me._$productInfoVariants.length>0&&me.$el.hasClass(opts.outsideCls)){me._$boxContent.removeClass(opts.expandOutsideCls);}
$.publish('plugin/cbaxPreviewImageHover/onMouseEnter',[me]);},onTouchBody:function(event){var me=this,opts=me.opts,target=event.target,$listingContainer=$(opts.listingContainerSelector),$boxContent=$listingContainer.find(opts.boxContentSelector);$.each($boxContent,function(i,el){var $el=$(el),pluginEl=$el[0];if(pluginEl===target||$.contains(pluginEl,target)){return;}
$el.removeClass(opts.expandInsideCls);$el.removeClass(opts.expandOutsideCls);$el.removeClass(opts.hoveredCls);});},onDeviceChange:function(){var me=this,opts=me.opts,state=StateManager.getCurrentState();if(state!==opts.lastDeviceState){opts.lastDeviceState=state;if(me._$boxContent.offset().left<100){if(me.$el.hasClass(opts.outsideCls)){me.$el.removeClass(opts.outsideCls);me.$el.addClass(opts.outsideCls);}}else{if(!me.$el.hasClass(opts.originalDisplayMode)){me.$el.removeClass(opts.outsideCls);me.$el.removeClass(opts.insideCls);me.$el.addClass(opts.originalDisplayMode);}}
me.setStyle();}
$.publish('plugin/cbaxPreviewImageHover/onDeviceChange',[me]);},setStyle:function(){var me=this,opts=me.opts;if(me.$el.hasClass(opts.insideCls)){me._$boxContent.css('overflow-x','hidden');}else{me._$boxContent.css('overflow-x','');}},destroy:function(){var me=this;me._$listingContainer=null;me._$boxContent=null;me._$productInfoVariants=null;$body.off(me.getEventName('touchstart'));me._destroy();}});StateManager.addPlugin('.cbax--preview-image-hover','cbaxPreviewImageHover');$.subscribe('plugin/swInfiniteScrolling/onFetchNewPageFinished',function(){StateManager.updatePlugin('.cbax--preview-image-hover','cbaxPreviewImageHover');});$.subscribe('plugin/swInfiniteScrolling/onLoadPreviousFinished',function(){StateManager.updatePlugin('.cbax--preview-image-hover','cbaxPreviewImageHover');});})(jQuery);window.StateManager.removePlugin('.emotion--wrapper','swEmotionLoader').addPlugin('.emotion--wrapper:not(.emotion--non-ajax)','swEmotionLoader').addPlugin('.emotion--non-ajax *[data-emotion="true"]','swEmotion');